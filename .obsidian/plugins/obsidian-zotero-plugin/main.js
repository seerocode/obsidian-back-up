/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

"use strict";var x3=Object.create;var da=Object.defineProperty;var E3=Object.getOwnPropertyDescriptor;var S3=Object.getOwnPropertyNames;var k3=Object.getPrototypeOf,A3=Object.prototype.hasOwnProperty;var I3=(e,t,r)=>t in e?da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ou=(e,t)=>()=>(e&&(t=e(e=0)),t);var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wb=(e,t)=>{for(var r in t)da(e,r,{get:t[r],enumerable:!0})},xb=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of S3(t))!A3.call(e,o)&&o!==r&&da(e,o,{get:()=>t[o],enumerable:!(n=E3(t,o))||n.enumerable});return e};var se=(e,t,r)=>(r=e!=null?x3(k3(e)):{},xb(t||!e||!e.__esModule?da(r,"default",{value:e,enumerable:!0}):r,e)),Du=e=>xb(da({},"__esModule",{value:!0}),e);var Eb=(e,t,r)=>(I3(e,typeof t!="symbol"?t+"":t,r),r);var Qe=b(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});function qb(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}Pu.assertNever=qb;Pu.default=qb});var jb=b((TY,Bb)=>{var Oo=1e3,Do=Oo*60,Fo=Do*60,Tn=Fo*24,R3=Tn*7,M3=Tn*365.25;Bb.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return $3(e);if(r==="number"&&isFinite(e))return t.long?q3(e):L3(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function $3(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*M3;case"weeks":case"week":case"w":return r*R3;case"days":case"day":case"d":return r*Tn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Do;case"seconds":case"second":case"secs":case"sec":case"s":return r*Oo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function L3(e){var t=Math.abs(e);return t>=Tn?Math.round(e/Tn)+"d":t>=Fo?Math.round(e/Fo)+"h":t>=Do?Math.round(e/Do)+"m":t>=Oo?Math.round(e/Oo)+"s":e+"ms"}function q3(e){var t=Math.abs(e);return t>=Tn?Ru(e,t,Tn,"day"):t>=Fo?Ru(e,t,Fo,"hour"):t>=Do?Ru(e,t,Do,"minute"):t>=Oo?Ru(e,t,Oo,"second"):e+" ms"}function Ru(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var Wb=b((OY,zb)=>{function B3(e){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=o,r.enabled=a,r.humanize=jb(),r.destroy=l,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let f=0;for(let p=0;p<c.length;p++)f=(f<<5)-f+c.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(c){let f,p=null,d,h;function g(...y){if(!g.enabled)return;let w=g,x=Number(new Date),A=x-(f||x);w.diff=A,w.prev=f,w.curr=x,f=x,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let O=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(F,R)=>{if(F==="%%")return"%";O++;let P=r.formatters[R];if(typeof P=="function"){let E=y[O];F=P.call(w,E),y.splice(O,1),O--}return F}),r.formatArgs.call(w,y),(w.log||r.log).apply(w,y)}return g.namespace=c,g.useColors=r.useColors(),g.color=r.selectColor(c),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(d!==r.namespaces&&(d=r.namespaces,h=r.enabled(c)),h),set:y=>{p=y}}),typeof r.init=="function"&&r.init(g),g}function n(c,f){let p=r(this.namespace+(typeof f>"u"?":":f)+c);return p.log=this.log,p}function o(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f,p=(typeof c=="string"?c:"").split(/[\s,]+/),d=p.length;for(f=0;f<d;f++)p[f]&&(c=p[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(s),...r.skips.map(s).map(f=>"-"+f)].join(",");return r.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(c))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(c))return!0;return!1}function s(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}zb.exports=B3});var We=b((bt,Mu)=>{bt.formatArgs=z3;bt.save=W3;bt.load=U3;bt.useColors=j3;bt.storage=H3();bt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();bt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function j3(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function z3(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Mu.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}bt.log=console.debug||console.log||(()=>{});function W3(e){try{e?bt.storage.setItem("debug",e):bt.storage.removeItem("debug")}catch{}}function U3(){let e;try{e=bt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function H3(){try{return localStorage}catch{}}Mu.exports=Wb()(bt);var{formatters:V3}=Mu.exports;V3.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Hb=b((DY,Ub)=>{"use strict";Ub.exports=G3;function No(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function G3(e){if(e=e||{},e.circles)return K3(e);return e.proto?n:r;function t(o,i){for(var a=Object.keys(o),s=new Array(a.length),u=0;u<a.length;u++){var l=a[u],c=o[l];typeof c!="object"||c===null?s[l]=c:c instanceof Date?s[l]=new Date(c):ArrayBuffer.isView(c)?s[l]=No(c):s[l]=i(c)}return s}function r(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return t(o,r);if(o instanceof Map)return new Map(t(Array.from(o),r));if(o instanceof Set)return new Set(t(Array.from(o),r));var i={};for(var a in o)if(Object.hasOwnProperty.call(o,a)!==!1){var s=o[a];typeof s!="object"||s===null?i[a]=s:s instanceof Date?i[a]=new Date(s):s instanceof Map?i[a]=new Map(t(Array.from(s),r)):s instanceof Set?i[a]=new Set(t(Array.from(s),r)):ArrayBuffer.isView(s)?i[a]=No(s):i[a]=r(s)}return i}function n(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return t(o,n);if(o instanceof Map)return new Map(t(Array.from(o),n));if(o instanceof Set)return new Set(t(Array.from(o),n));var i={};for(var a in o){var s=o[a];typeof s!="object"||s===null?i[a]=s:s instanceof Date?i[a]=new Date(s):s instanceof Map?i[a]=new Map(t(Array.from(s),n)):s instanceof Set?i[a]=new Set(t(Array.from(s),n)):ArrayBuffer.isView(s)?i[a]=No(s):i[a]=n(s)}return i}}function K3(e){var t=[],r=[];return e.proto?i:o;function n(a,s){for(var u=Object.keys(a),l=new Array(u.length),c=0;c<u.length;c++){var f=u[c],p=a[f];if(typeof p!="object"||p===null)l[f]=p;else if(p instanceof Date)l[f]=new Date(p);else if(ArrayBuffer.isView(p))l[f]=No(p);else{var d=t.indexOf(p);d!==-1?l[f]=r[d]:l[f]=s(p)}}return l}function o(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return n(a,o);if(a instanceof Map)return new Map(n(Array.from(a),o));if(a instanceof Set)return new Set(n(Array.from(a),o));var s={};t.push(a),r.push(s);for(var u in a)if(Object.hasOwnProperty.call(a,u)!==!1){var l=a[u];if(typeof l!="object"||l===null)s[u]=l;else if(l instanceof Date)s[u]=new Date(l);else if(l instanceof Map)s[u]=new Map(n(Array.from(l),o));else if(l instanceof Set)s[u]=new Set(n(Array.from(l),o));else if(ArrayBuffer.isView(l))s[u]=No(l);else{var c=t.indexOf(l);c!==-1?s[u]=r[c]:s[u]=o(l)}}return t.pop(),r.pop(),s}function i(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return n(a,i);if(a instanceof Map)return new Map(n(Array.from(a),i));if(a instanceof Set)return new Set(n(Array.from(a),i));var s={};t.push(a),r.push(s);for(var u in a){var l=a[u];if(typeof l!="object"||l===null)s[u]=l;else if(l instanceof Date)s[u]=new Date(l);else if(l instanceof Map)s[u]=new Map(n(Array.from(l),i));else if(l instanceof Set)s[u]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))s[u]=No(l);else{var c=t.indexOf(l);c!==-1?s[u]=r[c]:s[u]=i(l)}}return t.pop(),r.pop(),s}}});var Dn=b((FY,Jb)=>{var J3=require("util"),On=We()("log4js:configuration"),$u=[],Lu=[],Vb=e=>!e,Gb=e=>e&&typeof e=="object"&&!Array.isArray(e),Z3=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),Y3=e=>e&&typeof e=="number"&&Number.isInteger(e),Q3=e=>{Lu.push(e),On(`Added listener, now ${Lu.length} listeners`)},X3=e=>{$u.push(e),On(`Added pre-processing listener, now ${$u.length} listeners`)},Kb=(e,t,r)=>{(Array.isArray(t)?t:[t]).forEach(o=>{if(o)throw new Error(`Problem with log4js configuration: (${J3.inspect(e,{depth:5})}) - ${r}`)})},e5=e=>{On("New configuration to be validated: ",e),Kb(e,Vb(Gb(e)),"must be an object."),On(`Calling pre-processing listeners (${$u.length})`),$u.forEach(t=>t(e)),On("Configuration pre-processing finished."),On(`Calling configuration listeners (${Lu.length})`),Lu.forEach(t=>t(e)),On("Configuration finished.")};Jb.exports={configure:e5,addListener:Q3,addPreProcessingListener:X3,throwExceptionIf:Kb,anObject:Gb,anInteger:Y3,validIdentifier:Z3,not:Vb}});var qu=b((NY,Lt)=>{"use strict";function Zb(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function Fn(e){return Zb(e,2)}function t5(e){var t=Math.abs(e),r=String(Math.floor(t/60)),n=String(t%60);return r=("0"+r).slice(-2),n=("0"+n).slice(-2),e===0?"Z":(e<0?"+":"-")+r+":"+n}function Yb(e,t){typeof e!="string"&&(t=e,e=Lt.exports.ISO8601_FORMAT),t||(t=Lt.exports.now());var r=Fn(t.getDate()),n=Fn(t.getMonth()+1),o=Fn(t.getFullYear()),i=Fn(o.substring(2,4)),a=e.indexOf("yyyy")>-1?o:i,s=Fn(t.getHours()),u=Fn(t.getMinutes()),l=Fn(t.getSeconds()),c=Zb(t.getMilliseconds(),3),f=t5(t.getTimezoneOffset()),p=e.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,a).replace(/hh/g,s).replace(/mm/g,u).replace(/ss/g,l).replace(/SSS/g,c).replace(/O/g,f);return p}function en(e,t,r,n){e["set"+(n?"":"UTC")+t](r)}function r5(e,t,r){var n=e.indexOf("O")<0,o=!1,i=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(f,p){en(f,"FullYear",p,n)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(f,p){en(f,"Month",p-1,n),f.getMonth()!==p-1&&(o=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(f,p){o&&en(f,"Month",f.getMonth()-1,n),en(f,"Date",p,n)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(f,p){en(f,"Hours",p,n)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(f,p){en(f,"Minutes",p,n)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(f,p){en(f,"Seconds",p,n)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(f,p){en(f,"Milliseconds",p,n)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(f,p){p==="Z"?p=0:p=p.replace(":","");var d=Math.abs(p),h=(p>0?-1:1)*(d%100+Math.floor(d/100)*60);f.setUTCMinutes(f.getUTCMinutes()+h)}}],a=i.reduce(function(f,p){return p.pattern.test(f.regexp)?(p.index=f.regexp.match(p.pattern).index,f.regexp=f.regexp.replace(p.pattern,"("+p.regexp+")")):p.index=-1,f},{regexp:e,index:[]}),s=i.filter(function(f){return f.index>-1});s.sort(function(f,p){return f.index-p.index});var u=new RegExp(a.regexp),l=u.exec(t);if(l){var c=r||Lt.exports.now();return s.forEach(function(f,p){f.fn(c,l[p+1])}),c}throw new Error("String '"+t+"' could not be parsed as '"+e+"'")}function n5(e,t,r){if(!e)throw new Error("pattern must be supplied");return r5(e,t,r)}function o5(){return new Date}Lt.exports=Yb;Lt.exports.asString=Yb;Lt.exports.parse=n5;Lt.exports.now=o5;Lt.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";Lt.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";Lt.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";Lt.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var nd=b((PY,cv)=>{var tn=qu(),Qb=require("os"),ya=require("util"),ga=require("path"),Xb=require("url"),ev=We()("log4js:layouts"),tv={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function rv(e){return e?`\x1B[${tv[e][0]}m`:""}function nv(e){return e?`\x1B[${tv[e][1]}m`:""}function i5(e,t){return rv(t)+e+nv(t)}function ov(e,t){return i5(ya.format("[%s] [%s] %s - ",tn.asString(e.startTime),e.level.toString(),e.categoryName),t)}function iv(e){return ov(e)+ya.format(...e.data)}function Bu(e){return ov(e,e.level.colour)+ya.format(...e.data)}function av(e){return ya.format(...e.data)}function sv(e){return e.data[0]}function uv(e,t){let r="%r %p %c - %m%n",n=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflos%])(\{([^}]+)\})?|([^%]+)/;e=e||r;function o(v,_){let I=v.categoryName;if(_){let W=parseInt(_,10),j=I.split(".");W<j.length&&(I=j.slice(j.length-W).join("."))}return I}function i(v,_){let I=tn.ISO8601_FORMAT;if(_)switch(I=_,I){case"ISO8601":case"ISO8601_FORMAT":I=tn.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":I=tn.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),ev("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":I=tn.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),ev("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":I=tn.DATETIME_FORMAT;break}return tn.asString(I,v.startTime)}function a(){return Qb.hostname().toString()}function s(v){return ya.format(...v.data)}function u(){return Qb.EOL}function l(v){return v.level.toString()}function c(v){return tn.asString("hh:mm:ss",v.startTime)}function f(v){return rv(v.level.colour)}function p(v){return nv(v.level.colour)}function d(){return"%"}function h(v){return v&&v.pid?v.pid.toString():process.pid.toString()}function g(){return h()}function y(v,_){return typeof t[_]<"u"?typeof t[_]=="function"?t[_](v):t[_]:null}function w(v,_){let I=v.context[_];return typeof I<"u"?typeof I=="function"?I(v):I:null}function x(v,_){let I=v.fileName||"";if(I=function(j){let H="file://";return j.startsWith(H)&&(typeof Xb.fileURLToPath=="function"?j=Xb.fileURLToPath(j):(j=ga.normalize(j.replace(new RegExp(`^${H}`),"")),process.platform==="win32"&&(j.startsWith("\\")?j=j.slice(1):j=ga.sep+ga.sep+j))),j}(I),_){let j=parseInt(_,10),H=I.split(ga.sep);H.length>j&&(I=H.slice(-j).join(ga.sep))}return I}function A(v){return v.lineNumber?`${v.lineNumber}`:""}function O(v){return v.columnNumber?`${v.columnNumber}`:""}function D(v){return v.callStack||""}let F={c:o,d:i,h:a,m:s,n:u,p:l,r:c,"[":f,"]":p,y:g,z:h,"%":d,x:y,X:w,f:x,l:A,o:O,s:D};function R(v,_,I){return F[v](_,I)}function P(v,_){let I;return v?(I=parseInt(v.slice(1),10),I>0?_.slice(0,I):_.slice(I)):_}function E(v,_){let I;if(v)if(v.charAt(0)==="-")for(I=parseInt(v.slice(1),10);_.length<I;)_+=" ";else for(I=parseInt(v,10);_.length<I;)_=` ${_}`;return _}function S(v,_,I){let W=v;return W=P(_,W),W=E(I,W),W}return function(v){let _="",I,W=e;for(;(I=n.exec(W))!==null;){let j=I[1],H=I[2],J=I[3],re=I[5],ie=I[6];if(ie)_+=ie.toString();else{let C=R(J,v,re);_+=S(C,H,j)}W=W.slice(I.index+I[0].length)}return _}}var rd={messagePassThrough(){return av},basic(){return iv},colored(){return Bu},coloured(){return Bu},pattern(e){return uv(e&&e.pattern,e&&e.tokens)},dummy(){return sv}};cv.exports={basicLayout:iv,messagePassThroughLayout:av,patternLayout:uv,colouredLayout:Bu,coloredLayout:Bu,dummyLayout:sv,addLayout(e,t){rd[e]=t},layout(e,t){return rd[e]&&rd[e](t)}}});var Nn=b((RY,fv)=>{var Ne=Dn(),lv=["white","grey","black","blue","cyan","green","magenta","red","yellow"],Pe=class{constructor(t,r,n){this.level=t,this.levelStr=r,this.colour=n}toString(){return this.levelStr}static getLevel(t,r){return t?t instanceof Pe?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),Pe[t.toString().toUpperCase()]||r):r}static addLevels(t){t&&(Object.keys(t).forEach(n=>{let o=n.toUpperCase();Pe[o]=new Pe(t[n].value,o,t[n].colour);let i=Pe.levels.findIndex(a=>a.levelStr===o);i>-1?Pe.levels[i]=Pe[o]:Pe.levels.push(Pe[o])}),Pe.levels.sort((n,o)=>n.level-o.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=Pe.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=Pe.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=Pe.getLevel(t)),this.level===t.level}};Pe.levels=[];Pe.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});Ne.addListener(e=>{let t=e.levels;t&&(Ne.throwExceptionIf(e,Ne.not(Ne.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{Ne.throwExceptionIf(e,Ne.not(Ne.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),Ne.throwExceptionIf(e,Ne.not(Ne.anObject(t[n])),`level "${n}" must be an object`),Ne.throwExceptionIf(e,Ne.not(t[n].value),`level "${n}" must have a 'value' property`),Ne.throwExceptionIf(e,Ne.not(Ne.anInteger(t[n].value)),`level "${n}".value must have an integer value`),Ne.throwExceptionIf(e,Ne.not(t[n].colour),`level "${n}" must have a 'colour' property`),Ne.throwExceptionIf(e,Ne.not(lv.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${lv.join(", ")}`)}))});Ne.addListener(e=>{Pe.addLevels(e.levels)});fv.exports=Pe});var xv=b(va=>{"use strict";var{parse:mv,stringify:hv}=JSON,{keys:a5}=Object,ba=String,gv="string",pv={},ju="object",yv=(e,t)=>t,s5=e=>e instanceof ba?ba(e):e,u5=(e,t)=>typeof t===gv?new ba(t):t,bv=(e,t,r,n)=>{let o=[];for(let i=a5(r),{length:a}=i,s=0;s<a;s++){let u=i[s],l=r[u];if(l instanceof ba){let c=e[l];typeof c===ju&&!t.has(c)?(t.add(c),r[u]=pv,o.push({k:u,a:[e,t,c,n]})):r[u]=n.call(r,u,c)}else r[u]!==pv&&(r[u]=n.call(r,u,l))}for(let{length:i}=o,a=0;a<i;a++){let{k:s,a:u}=o[a];r[s]=n.call(r,s,bv.apply(null,u))}return r},dv=(e,t,r)=>{let n=ba(t.push(r)-1);return e.set(r,n),n},vv=(e,t)=>{let r=mv(e,u5).map(s5),n=r[0],o=t||yv,i=typeof n===ju&&n?bv(r,new Set,n,o):n;return o.call({"":i},"",i)};va.parse=vv;var wv=(e,t,r)=>{let n=t&&typeof t===ju?(c,f)=>c===""||-1<t.indexOf(c)?f:void 0:t||yv,o=new Map,i=[],a=[],s=+dv(o,i,n.call({"":e},"",e)),u=!s;for(;s<i.length;)u=!0,a[s]=hv(i[s++],l,r);return"["+a.join(",")+"]";function l(c,f){if(u)return u=!u,f;let p=n.call(this,c,f);switch(typeof p){case ju:if(p===null)return p;case gv:return o.get(p)||dv(o,i,p)}return p}};va.stringify=wv;var c5=e=>mv(wv(e));va.toJSON=c5;var l5=e=>vv(hv(e));va.fromJSON=l5});var od=b(($Y,kv)=>{var Ev=xv(),Sv=Nn(),Po=class{constructor(t,r,n,o,i){this.startTime=new Date,this.categoryName=t,this.data=n,this.level=r,this.context=Object.assign({},o),this.pid=process.pid,i&&(this.functionName=i.functionName,this.fileName=i.fileName,this.lineNumber=i.lineNumber,this.columnNumber=i.columnNumber,this.callStack=i.callStack)}serialise(){return Ev.stringify(this,(t,r)=>(r&&r.message&&r.stack?r=Object.assign({message:r.message,stack:r.stack},r):typeof r=="number"&&(Number.isNaN(r)||!Number.isFinite(r))?r=r.toString():typeof r>"u"&&(r=typeof r),r))}static deserialise(t){let r;try{let n=Ev.parse(t,(o,i)=>{if(i&&i.message&&i.stack){let a=new Error(i);Object.keys(i).forEach(s=>{a[s]=i[s]}),i=a}return i});n.location={functionName:n.functionName,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,callStack:n.callStack},r=new Po(n.categoryName,Sv.getLevel(n.level.levelStr),n.data,n.context,n.location),r.startTime=new Date(n.startTime),r.pid=n.pid,r.cluster=n.cluster}catch(n){r=new Po("log4js",Sv.ERROR,["Unable to parse log:",t,"because: ",n])}return r}};kv.exports=Po});var Wu=b((LY,_v)=>{var qt=We()("log4js:clustering"),f5=od(),p5=Dn(),Ro=!1,Bt=null;try{Bt=require("cluster")}catch{qt("cluster module not present"),Ro=!0}var ad=[],xa=!1,wa="NODE_APP_INSTANCE",Av=()=>xa&&process.env[wa]==="0",id=()=>Ro||Bt&&Bt.isMaster||Av(),Iv=e=>{ad.forEach(t=>t(e))},zu=(e,t)=>{if(qt("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){qt("received message: ",t.data);let r=f5.deserialise(t.data);Iv(r)}};Ro||p5.addListener(e=>{ad.length=0,{pm2:xa,disableClustering:Ro,pm2InstanceVar:wa="NODE_APP_INSTANCE"}=e,qt(`clustering disabled ? ${Ro}`),qt(`cluster.isMaster ? ${Bt&&Bt.isMaster}`),qt(`pm2 enabled ? ${xa}`),qt(`pm2InstanceVar = ${wa}`),qt(`process.env[${wa}] = ${process.env[wa]}`),xa&&process.removeListener("message",zu),Bt&&Bt.removeListener&&Bt.removeListener("message",zu),Ro||e.disableClustering?qt("Not listening for cluster messages, because clustering disabled."):Av()?(qt("listening for PM2 broadcast messages"),process.on("message",zu)):Bt&&Bt.isMaster?(qt("listening for cluster messages"),Bt.on("message",zu)):qt("not listening for messages, because we are not a master process")});_v.exports={onlyOnMaster:(e,t)=>id()?e():t,isMaster:id,send:e=>{id()?Iv(e):(xa||(e.cluster={workerId:Bt.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{ad.push(e)}}});var Ov=b((qY,Tv)=>{function d5(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},r=Object.keys(t),n=e.slice(-1).toLocaleUpperCase(),o=e.slice(0,-1).trim();if(r.indexOf(n)<0||!Number.isInteger(Number(o)))throw Error(`maxLogSize: "${e}" is invalid`);return o*t[n]}function m5(e,t){let r=Object.assign({},t);return Object.keys(e).forEach(n=>{r[n]&&(r[n]=e[n](t[n]))}),r}function sd(e){return m5({maxLogSize:d5},e)}var Cv={dateFile:sd,file:sd,fileSync:sd};Tv.exports.modifyConfig=e=>Cv[e.type]?Cv[e.type](e):e});var Fv=b((BY,Dv)=>{var h5=console.log.bind(console);function g5(e,t){return r=>{h5(e(r,t))}}function y5(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),g5(r,e.timezoneOffset)}Dv.exports.configure=y5});var Pv=b(Nv=>{function b5(e,t){return r=>{process.stdout.write(`${e(r,t)}
`)}}function v5(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),b5(r,e.timezoneOffset)}Nv.configure=v5});var Mv=b((zY,Rv)=>{function w5(e,t){return r=>{process.stderr.write(`${e(r,t)}
`)}}function x5(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),w5(r,e.timezoneOffset)}Rv.exports.configure=x5});var Lv=b((WY,$v)=>{function E5(e,t,r,n){let o=n.getLevel(e),i=n.getLevel(t,n.FATAL);return a=>{let s=a.level;o.isLessThanOrEqualTo(s)&&i.isGreaterThanOrEqualTo(s)&&r(a)}}function S5(e,t,r,n){let o=r(e.appender);return E5(e.level,e.maxLevel,o,n)}$v.exports.configure=S5});var jv=b((UY,Bv)=>{var qv=We()("log4js:categoryFilter");function k5(e,t){return typeof e=="string"&&(e=[e]),r=>{qv(`Checking ${r.categoryName} against ${e}`),e.indexOf(r.categoryName)===-1&&(qv("Not excluded, sending to appender"),t(r))}}function A5(e,t,r){let n=r(e.appender);return k5(e.exclude,n)}Bv.exports.configure=A5});var Uv=b((HY,Wv)=>{var zv=We()("log4js:noLogFilter");function I5(e){return e.filter(r=>r!=null&&r!=="")}function _5(e,t){return r=>{zv(`Checking data: ${r.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=I5(e);let n=new RegExp(e.join("|"),"i");(e.length===0||r.data.findIndex(o=>n.test(o))<0)&&(zv("Not excluded, sending to appender"),t(r))}}function C5(e,t,r){let n=r(e.appender);return _5(e.exclude,n)}Wv.exports.configure=C5});var ut=b(ud=>{"use strict";ud.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,o)=>{if(n)return r(n);t(o)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};ud.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Vv=b((GY,Hv)=>{var rn=require("constants"),T5=process.cwd,Uu=null,O5=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Uu||(Uu=T5.call(process)),Uu};try{process.cwd()}catch{}typeof process.chdir=="function"&&(cd=process.chdir,process.chdir=function(e){Uu=null,cd.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,cd));var cd;Hv.exports=D5;function D5(e){rn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,p){p&&process.nextTick(p)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,p,d){d&&process.nextTick(d)},e.lchownSync=function(){}),O5==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(p,d,h){var g=Date.now(),y=0;c(p,d,function w(x){if(x&&(x.code==="EACCES"||x.code==="EPERM"||x.code==="EBUSY")&&Date.now()-g<6e4){setTimeout(function(){e.stat(d,function(A,O){A&&A.code==="ENOENT"?c(p,d,w):h(x)})},y),y<100&&(y+=10);return}h&&h(x)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(p,d,h,g,y,w){var x;if(w&&typeof w=="function"){var A=0;x=function(O,D,F){if(O&&O.code==="EAGAIN"&&A<10)return A++,c.call(e,p,d,h,g,y,x);w.apply(this,arguments)}}return c.call(e,p,d,h,g,y,x)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,p,d,h,g){for(var y=0;;)try{return c.call(e,f,p,d,h,g)}catch(w){if(w.code==="EAGAIN"&&y<10){y++;continue}throw w}}}(e.readSync);function t(c){c.lchmod=function(f,p,d){c.open(f,rn.O_WRONLY|rn.O_SYMLINK,p,function(h,g){if(h){d&&d(h);return}c.fchmod(g,p,function(y){c.close(g,function(w){d&&d(y||w)})})})},c.lchmodSync=function(f,p){var d=c.openSync(f,rn.O_WRONLY|rn.O_SYMLINK,p),h=!0,g;try{g=c.fchmodSync(d,p),h=!1}finally{if(h)try{c.closeSync(d)}catch{}else c.closeSync(d)}return g}}function r(c){rn.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,p,d,h){c.open(f,rn.O_SYMLINK,function(g,y){if(g){h&&h(g);return}c.futimes(y,p,d,function(w){c.close(y,function(x){h&&h(w||x)})})})},c.lutimesSync=function(f,p,d){var h=c.openSync(f,rn.O_SYMLINK),g,y=!0;try{g=c.futimesSync(h,p,d),y=!1}finally{if(y)try{c.closeSync(h)}catch{}else c.closeSync(h)}return g}):c.futimes&&(c.lutimes=function(f,p,d,h){h&&process.nextTick(h)},c.lutimesSync=function(){})}function n(c){return c&&function(f,p,d){return c.call(e,f,p,function(h){l(h)&&(h=null),d&&d.apply(this,arguments)})}}function o(c){return c&&function(f,p){try{return c.call(e,f,p)}catch(d){if(!l(d))throw d}}}function i(c){return c&&function(f,p,d,h){return c.call(e,f,p,d,function(g){l(g)&&(g=null),h&&h.apply(this,arguments)})}}function a(c){return c&&function(f,p,d){try{return c.call(e,f,p,d)}catch(h){if(!l(h))throw h}}}function s(c){return c&&function(f,p,d){typeof p=="function"&&(d=p,p=null);function h(g,y){y&&(y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296)),d&&d.apply(this,arguments)}return p?c.call(e,f,p,h):c.call(e,f,h)}}function u(c){return c&&function(f,p){var d=p?c.call(e,f,p):c.call(e,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Jv=b((KY,Kv)=>{var Gv=require("stream").Stream;Kv.exports=F5;function F5(e){return{ReadStream:t,WriteStream:r};function t(n,o){if(!(this instanceof t))return new t(n,o);Gv.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,o=o||{};for(var a=Object.keys(o),s=0,u=a.length;s<u;s++){var l=a[s];this[l]=o[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){i.emit("error",c),i.readable=!1;return}i.fd=f,i.emit("open",f),i._read()})}function r(n,o){if(!(this instanceof r))return new r(n,o);Gv.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),a=0,s=i.length;a<s;a++){var u=i[a];this[u]=o[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Yv=b((JY,Zv)=>{"use strict";Zv.exports=P5;var N5=Object.getPrototypeOf||function(e){return e.__proto__};function P5(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:N5(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var Re=b((ZY,pd)=>{var Ie=require("fs"),R5=Vv(),M5=Jv(),$5=Yv(),Hu=require("util"),Je,Gu;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Je=Symbol.for("graceful-fs.queue"),Gu=Symbol.for("graceful-fs.previous")):(Je="___graceful-fs.queue",Gu="___graceful-fs.previous");function L5(){}function e0(e,t){Object.defineProperty(e,Je,{get:function(){return t}})}var Pn=L5;Hu.debuglog?Pn=Hu.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Pn=function(){var e=Hu.format.apply(Hu,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});Ie[Je]||(Qv=global[Je]||[],e0(Ie,Qv),Ie.close=function(e){function t(r,n){return e.call(Ie,r,function(o){o||Xv(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Gu,{value:e}),t}(Ie.close),Ie.closeSync=function(e){function t(r){e.apply(Ie,arguments),Xv()}return Object.defineProperty(t,Gu,{value:e}),t}(Ie.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Pn(Ie[Je]),require("assert").equal(Ie[Je].length,0)}));var Qv;global[Je]||e0(global,Ie[Je]);pd.exports=ld($5(Ie));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ie.__patched&&(pd.exports=ld(Ie),Ie.__patched=!0);function ld(e){R5(e),e.gracefulify=ld,e.createReadStream=D,e.createWriteStream=F;var t=e.readFile;e.readFile=r;function r(E,S,v){return typeof S=="function"&&(v=S,S=null),_(E,S,v);function _(I,W,j,H){return t(I,W,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Mo([_,[I,W,j],J,H||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=o;function o(E,S,v,_){return typeof v=="function"&&(_=v,v=null),I(E,S,v,_);function I(W,j,H,J,re){return n(W,j,H,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Mo([I,[W,j,H,J],ie,re||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var i=e.appendFile;i&&(e.appendFile=a);function a(E,S,v,_){return typeof v=="function"&&(_=v,v=null),I(E,S,v,_);function I(W,j,H,J,re){return i(W,j,H,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Mo([I,[W,j,H,J],ie,re||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=u);function u(E,S,v,_){return typeof v=="function"&&(_=v,v=0),I(E,S,v,_);function I(W,j,H,J,re){return s(W,j,H,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Mo([I,[W,j,H,J],ie,re||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var l=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(E,S,v){typeof S=="function"&&(v=S,S=null);var _=c.test(process.version)?function(j,H,J,re){return l(j,I(j,H,J,re))}:function(j,H,J,re){return l(j,H,I(j,H,J,re))};return _(E,S,v);function I(W,j,H,J){return function(re,ie){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Mo([_,[W,j,H],re,J||Date.now(),Date.now()]):(ie&&ie.sort&&ie.sort(),typeof H=="function"&&H.call(this,re,ie))}}}if(process.version.substr(0,4)==="v0.8"){var p=M5(e);w=p.ReadStream,A=p.WriteStream}var d=e.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=x);var h=e.WriteStream;h&&(A.prototype=Object.create(h.prototype),A.prototype.open=O),Object.defineProperty(e,"ReadStream",{get:function(){return w},set:function(E){w=E},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return A},set:function(E){A=E},enumerable:!0,configurable:!0});var g=w;Object.defineProperty(e,"FileReadStream",{get:function(){return g},set:function(E){g=E},enumerable:!0,configurable:!0});var y=A;Object.defineProperty(e,"FileWriteStream",{get:function(){return y},set:function(E){y=E},enumerable:!0,configurable:!0});function w(E,S){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function x(){var E=this;P(E.path,E.flags,E.mode,function(S,v){S?(E.autoClose&&E.destroy(),E.emit("error",S)):(E.fd=v,E.emit("open",v),E.read())})}function A(E,S){return this instanceof A?(h.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function O(){var E=this;P(E.path,E.flags,E.mode,function(S,v){S?(E.destroy(),E.emit("error",S)):(E.fd=v,E.emit("open",v))})}function D(E,S){return new e.ReadStream(E,S)}function F(E,S){return new e.WriteStream(E,S)}var R=e.open;e.open=P;function P(E,S,v,_){return typeof v=="function"&&(_=v,v=null),I(E,S,v,_);function I(W,j,H,J,re){return R(W,j,H,function(ie,C){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Mo([I,[W,j,H,J],ie,re||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}return e}function Mo(e){Pn("ENQUEUE",e[0].name,e[1]),Ie[Je].push(e),fd()}var Vu;function Xv(){for(var e=Date.now(),t=0;t<Ie[Je].length;++t)Ie[Je][t].length>2&&(Ie[Je][t][3]=e,Ie[Je][t][4]=e);fd()}function fd(){if(clearTimeout(Vu),Vu=void 0,Ie[Je].length!==0){var e=Ie[Je].shift(),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4];if(o===void 0)Pn("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-o>=6e4){Pn("TIMEOUT",t.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n)}else{var s=Date.now()-i,u=Math.max(i-o,1),l=Math.min(u*1.2,100);s>=l?(Pn("RETRY",t.name,r),t.apply(null,r.concat([o]))):Ie[Je].push(e)}Vu===void 0&&(Vu=setTimeout(fd,0))}}});var dd=b(Rn=>{"use strict";var t0=ut().fromCallback,jt=Re(),q5=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof jt[e]=="function");Object.keys(jt).forEach(e=>{e!=="promises"&&(Rn[e]=jt[e])});q5.forEach(e=>{Rn[e]=t0(jt[e])});Rn.exists=function(e,t){return typeof t=="function"?jt.exists(e,t):new Promise(r=>jt.exists(e,r))};Rn.read=function(e,t,r,n,o,i){return typeof i=="function"?jt.read(e,t,r,n,o,i):new Promise((a,s)=>{jt.read(e,t,r,n,o,(u,l,c)=>{if(u)return s(u);a({bytesRead:l,buffer:c})})})};Rn.write=function(e,t,...r){return typeof r[r.length-1]=="function"?jt.write(e,t,...r):new Promise((n,o)=>{jt.write(e,t,...r,(i,a,s)=>{if(i)return o(i);n({bytesWritten:a,buffer:s})})})};typeof jt.realpath.native=="function"&&(Rn.realpath.native=t0(jt.realpath.native))});var hd=b((QY,n0)=>{"use strict";var md=require("path");function r0(e){return e=md.normalize(md.resolve(e)).split(md.sep),e.length>0?e[0]:null}var B5=/[<>:"|?*]/;function j5(e){let t=r0(e);return e=e.replace(t,""),B5.test(e)}n0.exports={getRootPath:r0,invalidWin32Path:j5}});var i0=b((XY,o0)=>{"use strict";var z5=Re(),gd=require("path"),W5=hd().invalidWin32Path,U5=parseInt("0777",8);function yd(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&W5(e)){let a=new Error(e+" contains invalid WIN32 path characters.");return a.code="EINVAL",r(a)}let o=t.mode,i=t.fs||z5;o===void 0&&(o=U5&~process.umask()),n||(n=null),r=r||function(){},e=gd.resolve(e),i.mkdir(e,o,a=>{if(!a)return n=n||e,r(null,n);switch(a.code){case"ENOENT":if(gd.dirname(e)===e)return r(a);yd(gd.dirname(e),t,(s,u)=>{s?r(s,u):yd(e,t,r,u)});break;default:i.stat(e,(s,u)=>{s||!u.isDirectory()?r(a,n):r(null,n)});break}})}o0.exports=yd});var s0=b((eQ,a0)=>{"use strict";var H5=Re(),bd=require("path"),V5=hd().invalidWin32Path,G5=parseInt("0777",8);function vd(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,o=t.fs||H5;if(process.platform==="win32"&&V5(e)){let i=new Error(e+" contains invalid WIN32 path characters.");throw i.code="EINVAL",i}n===void 0&&(n=G5&~process.umask()),r||(r=null),e=bd.resolve(e);try{o.mkdirSync(e,n),r=r||e}catch(i){if(i.code==="ENOENT"){if(bd.dirname(e)===e)throw i;r=vd(bd.dirname(e),t,r),vd(e,t,r)}else{let a;try{a=o.statSync(e)}catch{throw i}if(!a.isDirectory())throw i}}return r}a0.exports=vd});var vt=b((tQ,u0)=>{"use strict";var K5=ut().fromCallback,wd=K5(i0()),xd=s0();u0.exports={mkdirs:wd,mkdirsSync:xd,mkdirp:wd,mkdirpSync:xd,ensureDir:wd,ensureDirSync:xd}});var Ed=b((rQ,l0)=>{"use strict";var Xe=Re(),c0=require("os"),Ku=require("path");function J5(){let e=Ku.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=Ku.join(c0.tmpdir(),e);let t=new Date(1435410243862);Xe.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=Xe.openSync(e,"r+");return Xe.futimesSync(r,t,t),Xe.closeSync(r),Xe.statSync(e).mtime>1435410243e3}function Z5(e){let t=Ku.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=Ku.join(c0.tmpdir(),t);let r=new Date(1435410243862);Xe.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);Xe.open(t,"r+",(o,i)=>{if(o)return e(o);Xe.futimes(i,r,r,a=>{if(a)return e(a);Xe.close(i,s=>{if(s)return e(s);Xe.stat(t,(u,l)=>{if(u)return e(u);e(null,l.mtime>1435410243e3)})})})})})}function Y5(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function Q5(e,t,r,n){Xe.open(e,"r+",(o,i)=>{if(o)return n(o);Xe.futimes(i,t,r,a=>{Xe.close(i,s=>{n&&n(a||s)})})})}function X5(e,t,r){let n=Xe.openSync(e,"r+");return Xe.futimesSync(n,t,r),Xe.closeSync(n)}l0.exports={hasMillisRes:Z5,hasMillisResSync:J5,timeRemoveMillis:Y5,utimesMillis:Q5,utimesMillisSync:X5}});var ka=b((nQ,g0)=>{"use strict";var zt=Re(),ct=require("path"),f0=10,p0=5,eM=0,kd=process.versions.node.split("."),d0=Number.parseInt(kd[0],10),m0=Number.parseInt(kd[1],10),tM=Number.parseInt(kd[2],10);function Ea(){if(d0>f0)return!0;if(d0===f0){if(m0>p0)return!0;if(m0===p0&&tM>=eM)return!0}return!1}function rM(e,t,r){Ea()?zt.stat(e,{bigint:!0},(n,o)=>{if(n)return r(n);zt.stat(t,{bigint:!0},(i,a)=>i?i.code==="ENOENT"?r(null,{srcStat:o,destStat:null}):r(i):r(null,{srcStat:o,destStat:a}))}):zt.stat(e,(n,o)=>{if(n)return r(n);zt.stat(t,(i,a)=>i?i.code==="ENOENT"?r(null,{srcStat:o,destStat:null}):r(i):r(null,{srcStat:o,destStat:a}))})}function nM(e,t){let r,n;Ea()?r=zt.statSync(e,{bigint:!0}):r=zt.statSync(e);try{Ea()?n=zt.statSync(t,{bigint:!0}):n=zt.statSync(t)}catch(o){if(o.code==="ENOENT")return{srcStat:r,destStat:null};throw o}return{srcStat:r,destStat:n}}function oM(e,t,r,n){rM(e,t,(o,i)=>{if(o)return n(o);let{srcStat:a,destStat:s}=i;return s&&s.ino&&s.dev&&s.ino===a.ino&&s.dev===a.dev?n(new Error("Source and destination must not be the same.")):a.isDirectory()&&Ad(e,t)?n(new Error(Sa(e,t,r))):n(null,{srcStat:a,destStat:s})})}function iM(e,t,r){let{srcStat:n,destStat:o}=nM(e,t);if(o&&o.ino&&o.dev&&o.ino===n.ino&&o.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&Ad(e,t))throw new Error(Sa(e,t,r));return{srcStat:n,destStat:o}}function Sd(e,t,r,n,o){let i=ct.resolve(ct.dirname(e)),a=ct.resolve(ct.dirname(r));if(a===i||a===ct.parse(a).root)return o();Ea()?zt.stat(a,{bigint:!0},(s,u)=>s?s.code==="ENOENT"?o():o(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?o(new Error(Sa(e,r,n))):Sd(e,t,a,n,o)):zt.stat(a,(s,u)=>s?s.code==="ENOENT"?o():o(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?o(new Error(Sa(e,r,n))):Sd(e,t,a,n,o))}function h0(e,t,r,n){let o=ct.resolve(ct.dirname(e)),i=ct.resolve(ct.dirname(r));if(i===o||i===ct.parse(i).root)return;let a;try{Ea()?a=zt.statSync(i,{bigint:!0}):a=zt.statSync(i)}catch(s){if(s.code==="ENOENT")return;throw s}if(a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev)throw new Error(Sa(e,r,n));return h0(e,t,i,n)}function Ad(e,t){let r=ct.resolve(e).split(ct.sep).filter(o=>o),n=ct.resolve(t).split(ct.sep).filter(o=>o);return r.reduce((o,i,a)=>o&&n[a]===i,!0)}function Sa(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}g0.exports={checkPaths:oM,checkPathsSync:iM,checkParentPaths:Sd,checkParentPathsSync:h0,isSrcSubdir:Ad}});var b0=b((oQ,y0)=>{"use strict";y0.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var S0=b((iQ,E0)=>{"use strict";var Ae=Re(),Aa=require("path"),aM=vt().mkdirsSync,sM=Ed().utimesMillisSync,Ia=ka();function uM(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:o}=Ia.checkPathsSync(e,t,"copy");return Ia.checkParentPathsSync(e,n,t,"copy"),cM(o,e,t,r)}function cM(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let o=Aa.dirname(r);return Ae.existsSync(o)||aM(o),v0(e,t,r,n)}function v0(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return lM(e,t,r,n)}function lM(e,t,r,n){let i=(n.dereference?Ae.statSync:Ae.lstatSync)(t);if(i.isDirectory())return mM(i,e,t,r,n);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return fM(i,e,t,r,n);if(i.isSymbolicLink())return yM(e,t,r,n)}function fM(e,t,r,n,o){return t?pM(e,r,n,o):w0(e,r,n,o)}function pM(e,t,r,n){if(n.overwrite)return Ae.unlinkSync(r),w0(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function w0(e,t,r,n){return typeof Ae.copyFileSync=="function"?(Ae.copyFileSync(t,r),Ae.chmodSync(r,e.mode),n.preserveTimestamps?sM(r,e.atime,e.mtime):void 0):dM(e,t,r,n)}function dM(e,t,r,n){let i=b0()(65536),a=Ae.openSync(t,"r"),s=Ae.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let l=Ae.readSync(a,i,0,65536,u);Ae.writeSync(s,i,0,l),u+=l}n.preserveTimestamps&&Ae.futimesSync(s,e.atime,e.mtime),Ae.closeSync(a),Ae.closeSync(s)}function mM(e,t,r,n,o){if(!t)return hM(e,r,n,o);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return x0(r,n,o)}function hM(e,t,r,n){return Ae.mkdirSync(r),x0(t,r,n),Ae.chmodSync(r,e.mode)}function x0(e,t,r){Ae.readdirSync(e).forEach(n=>gM(n,e,t,r))}function gM(e,t,r,n){let o=Aa.join(t,e),i=Aa.join(r,e),{destStat:a}=Ia.checkPathsSync(o,i,"copy");return v0(a,o,i,n)}function yM(e,t,r,n){let o=Ae.readlinkSync(t);if(n.dereference&&(o=Aa.resolve(process.cwd(),o)),e){let i;try{i=Ae.readlinkSync(r)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Ae.symlinkSync(o,r);throw a}if(n.dereference&&(i=Aa.resolve(process.cwd(),i)),Ia.isSrcSubdir(o,i))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${i}'.`);if(Ae.statSync(r).isDirectory()&&Ia.isSrcSubdir(i,o))throw new Error(`Cannot overwrite '${i}' with '${o}'.`);return bM(o,r)}else return Ae.symlinkSync(o,r)}function bM(e,t){return Ae.unlinkSync(t),Ae.symlinkSync(e,t)}E0.exports=uM});var Id=b((aQ,k0)=>{"use strict";k0.exports={copySync:S0()}});var or=b((sQ,I0)=>{"use strict";var vM=ut().fromPromise,A0=dd();function wM(e){return A0.access(e).then(()=>!0).catch(()=>!1)}I0.exports={pathExists:vM(wM),pathExistsSync:A0.existsSync}});var R0=b((uQ,P0)=>{"use strict";var Ze=Re(),_a=require("path"),xM=vt().mkdirs,EM=or().pathExists,SM=Ed().utimesMillis,Ca=ka();function kM(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),Ca.checkPaths(e,t,"copy",(o,i)=>{if(o)return n(o);let{srcStat:a,destStat:s}=i;Ca.checkParentPaths(e,a,t,"copy",u=>u?n(u):r.filter?T0(_0,s,e,t,r,n):_0(s,e,t,r,n))})}function _0(e,t,r,n,o){let i=_a.dirname(r);EM(i,(a,s)=>{if(a)return o(a);if(s)return _d(e,t,r,n,o);xM(i,u=>u?o(u):_d(e,t,r,n,o))})}function T0(e,t,r,n,o,i){Promise.resolve(o.filter(r,n)).then(a=>a?e(t,r,n,o,i):i(),a=>i(a))}function _d(e,t,r,n,o){return n.filter?T0(C0,e,t,r,n,o):C0(e,t,r,n,o)}function C0(e,t,r,n,o){(n.dereference?Ze.stat:Ze.lstat)(t,(a,s)=>{if(a)return o(a);if(s.isDirectory())return CM(s,e,t,r,n,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return AM(s,e,t,r,n,o);if(s.isSymbolicLink())return DM(e,t,r,n,o)})}function AM(e,t,r,n,o,i){return t?IM(e,r,n,o,i):O0(e,r,n,o,i)}function IM(e,t,r,n,o){if(n.overwrite)Ze.unlink(r,i=>i?o(i):O0(e,t,r,n,o));else return n.errorOnExist?o(new Error(`'${r}' already exists`)):o()}function O0(e,t,r,n,o){return typeof Ze.copyFile=="function"?Ze.copyFile(t,r,i=>i?o(i):D0(e,r,n,o)):_M(e,t,r,n,o)}function _M(e,t,r,n,o){let i=Ze.createReadStream(t);i.on("error",a=>o(a)).once("open",()=>{let a=Ze.createWriteStream(r,{mode:e.mode});a.on("error",s=>o(s)).on("open",()=>i.pipe(a)).once("close",()=>D0(e,r,n,o))})}function D0(e,t,r,n){Ze.chmod(t,e.mode,o=>o?n(o):r.preserveTimestamps?SM(t,e.atime,e.mtime,n):n())}function CM(e,t,r,n,o,i){return t?t&&!t.isDirectory()?i(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):F0(r,n,o,i):TM(e,r,n,o,i)}function TM(e,t,r,n,o){Ze.mkdir(r,i=>{if(i)return o(i);F0(t,r,n,a=>a?o(a):Ze.chmod(r,e.mode,o))})}function F0(e,t,r,n){Ze.readdir(e,(o,i)=>o?n(o):N0(i,e,t,r,n))}function N0(e,t,r,n,o){let i=e.pop();return i?OM(e,i,t,r,n,o):o()}function OM(e,t,r,n,o,i){let a=_a.join(r,t),s=_a.join(n,t);Ca.checkPaths(a,s,"copy",(u,l)=>{if(u)return i(u);let{destStat:c}=l;_d(c,a,s,o,f=>f?i(f):N0(e,r,n,o,i))})}function DM(e,t,r,n,o){Ze.readlink(t,(i,a)=>{if(i)return o(i);if(n.dereference&&(a=_a.resolve(process.cwd(),a)),e)Ze.readlink(r,(s,u)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?Ze.symlink(a,r,o):o(s):(n.dereference&&(u=_a.resolve(process.cwd(),u)),Ca.isSrcSubdir(a,u)?o(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&Ca.isSrcSubdir(u,a)?o(new Error(`Cannot overwrite '${u}' with '${a}'.`)):FM(a,r,o)));else return Ze.symlink(a,r,o)})}function FM(e,t,r){Ze.unlink(t,n=>n?r(n):Ze.symlink(e,t,r))}P0.exports=kM});var Cd=b((cQ,M0)=>{"use strict";var NM=ut().fromCallback;M0.exports={copy:NM(R0())}});var H0=b((lQ,U0)=>{"use strict";var $0=Re(),j0=require("path"),ge=require("assert"),Ta=process.platform==="win32";function z0(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||$0[r],r=r+"Sync",e[r]=e[r]||$0[r]}),e.maxBusyTries=e.maxBusyTries||3}function Td(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),ge(e,"rimraf: missing path"),ge.strictEqual(typeof e,"string","rimraf: path should be a string"),ge.strictEqual(typeof r,"function","rimraf: callback function required"),ge(t,"rimraf: invalid options argument provided"),ge.strictEqual(typeof t,"object","rimraf: options should be object"),z0(t),L0(e,t,function o(i){if(i){if((i.code==="EBUSY"||i.code==="ENOTEMPTY"||i.code==="EPERM")&&n<t.maxBusyTries){n++;let a=n*100;return setTimeout(()=>L0(e,t,o),a)}i.code==="ENOENT"&&(i=null)}r(i)})}function L0(e,t,r){ge(e),ge(t),ge(typeof r=="function"),t.lstat(e,(n,o)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Ta)return q0(e,t,n,r);if(o&&o.isDirectory())return Ju(e,t,n,r);t.unlink(e,i=>{if(i){if(i.code==="ENOENT")return r(null);if(i.code==="EPERM")return Ta?q0(e,t,i,r):Ju(e,t,i,r);if(i.code==="EISDIR")return Ju(e,t,i,r)}return r(i)})})}function q0(e,t,r,n){ge(e),ge(t),ge(typeof n=="function"),r&&ge(r instanceof Error),t.chmod(e,438,o=>{o?n(o.code==="ENOENT"?null:r):t.stat(e,(i,a)=>{i?n(i.code==="ENOENT"?null:r):a.isDirectory()?Ju(e,t,r,n):t.unlink(e,n)})})}function B0(e,t,r){let n;ge(e),ge(t),r&&ge(r instanceof Error);try{t.chmodSync(e,438)}catch(o){if(o.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(o){if(o.code==="ENOENT")return;throw r}n.isDirectory()?Zu(e,t,r):t.unlinkSync(e)}function Ju(e,t,r,n){ge(e),ge(t),r&&ge(r instanceof Error),ge(typeof n=="function"),t.rmdir(e,o=>{o&&(o.code==="ENOTEMPTY"||o.code==="EEXIST"||o.code==="EPERM")?PM(e,t,n):o&&o.code==="ENOTDIR"?n(r):n(o)})}function PM(e,t,r){ge(e),ge(t),ge(typeof r=="function"),t.readdir(e,(n,o)=>{if(n)return r(n);let i=o.length,a;if(i===0)return t.rmdir(e,r);o.forEach(s=>{Td(j0.join(e,s),t,u=>{if(!a){if(u)return r(a=u);--i===0&&t.rmdir(e,r)}})})})}function W0(e,t){let r;t=t||{},z0(t),ge(e,"rimraf: missing path"),ge.strictEqual(typeof e,"string","rimraf: path should be a string"),ge(t,"rimraf: missing options"),ge.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Ta&&B0(e,t,n)}try{r&&r.isDirectory()?Zu(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Ta?B0(e,t,n):Zu(e,t,n);if(n.code!=="EISDIR")throw n;Zu(e,t,n)}}function Zu(e,t,r){ge(e),ge(t),r&&ge(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")RM(e,t);else if(n.code!=="ENOENT")throw n}}function RM(e,t){if(ge(e),ge(t),t.readdirSync(e).forEach(r=>W0(j0.join(e,r),t)),Ta){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}U0.exports=Td;Td.sync=W0});var Oa=b((fQ,G0)=>{"use strict";var MM=ut().fromCallback,V0=H0();G0.exports={remove:MM(V0),removeSync:V0.sync}});var tw=b((pQ,ew)=>{"use strict";var $M=ut().fromCallback,Z0=Re(),Y0=require("path"),Q0=vt(),X0=Oa(),K0=$M(function(t,r){r=r||function(){},Z0.readdir(t,(n,o)=>{if(n)return Q0.mkdirs(t,r);o=o.map(a=>Y0.join(t,a)),i();function i(){let a=o.pop();if(!a)return r();X0.remove(a,s=>{if(s)return r(s);i()})}})});function J0(e){let t;try{t=Z0.readdirSync(e)}catch{return Q0.mkdirsSync(e)}t.forEach(r=>{r=Y0.join(e,r),X0.removeSync(r)})}ew.exports={emptyDirSync:J0,emptydirSync:J0,emptyDir:K0,emptydir:K0}});var iw=b((dQ,ow)=>{"use strict";var LM=ut().fromCallback,rw=require("path"),Da=Re(),nw=vt(),qM=or().pathExists;function BM(e,t){function r(){Da.writeFile(e,"",n=>{if(n)return t(n);t()})}Da.stat(e,(n,o)=>{if(!n&&o.isFile())return t();let i=rw.dirname(e);qM(i,(a,s)=>{if(a)return t(a);if(s)return r();nw.mkdirs(i,u=>{if(u)return t(u);r()})})})}function jM(e){let t;try{t=Da.statSync(e)}catch{}if(t&&t.isFile())return;let r=rw.dirname(e);Da.existsSync(r)||nw.mkdirsSync(r),Da.writeFileSync(e,"")}ow.exports={createFile:LM(BM),createFileSync:jM}});var lw=b((mQ,cw)=>{"use strict";var zM=ut().fromCallback,sw=require("path"),Mn=Re(),uw=vt(),aw=or().pathExists;function WM(e,t,r){function n(o,i){Mn.link(o,i,a=>{if(a)return r(a);r(null)})}aw(t,(o,i)=>{if(o)return r(o);if(i)return r(null);Mn.lstat(e,a=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),r(a);let s=sw.dirname(t);aw(s,(u,l)=>{if(u)return r(u);if(l)return n(e,t);uw.mkdirs(s,c=>{if(c)return r(c);n(e,t)})})})})}function UM(e,t){if(Mn.existsSync(t))return;try{Mn.lstatSync(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}let n=sw.dirname(t);return Mn.existsSync(n)||uw.mkdirsSync(n),Mn.linkSync(e,t)}cw.exports={createLink:zM(WM),createLinkSync:UM}});var pw=b((hQ,fw)=>{"use strict";var nn=require("path"),Fa=Re(),HM=or().pathExists;function VM(e,t,r){if(nn.isAbsolute(e))return Fa.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=nn.dirname(t),o=nn.join(n,e);return HM(o,(i,a)=>i?r(i):a?r(null,{toCwd:o,toDst:e}):Fa.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),r(s)):r(null,{toCwd:e,toDst:nn.relative(n,e)})))}}function GM(e,t){let r;if(nn.isAbsolute(e)){if(r=Fa.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=nn.dirname(t),o=nn.join(n,e);if(r=Fa.existsSync(o),r)return{toCwd:o,toDst:e};if(r=Fa.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:nn.relative(n,e)}}}fw.exports={symlinkPaths:VM,symlinkPathsSync:GM}});var hw=b((gQ,mw)=>{"use strict";var dw=Re();function KM(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);dw.lstat(e,(n,o)=>{if(n)return r(null,"file");t=o&&o.isDirectory()?"dir":"file",r(null,t)})}function JM(e,t){let r;if(t)return t;try{r=dw.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}mw.exports={symlinkType:KM,symlinkTypeSync:JM}});var Ew=b((yQ,xw)=>{"use strict";var ZM=ut().fromCallback,yw=require("path"),$o=Re(),bw=vt(),YM=bw.mkdirs,QM=bw.mkdirsSync,vw=pw(),XM=vw.symlinkPaths,e$=vw.symlinkPathsSync,ww=hw(),t$=ww.symlinkType,r$=ww.symlinkTypeSync,gw=or().pathExists;function n$(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,gw(t,(o,i)=>{if(o)return n(o);if(i)return n(null);XM(e,t,(a,s)=>{if(a)return n(a);e=s.toDst,t$(s.toCwd,r,(u,l)=>{if(u)return n(u);let c=yw.dirname(t);gw(c,(f,p)=>{if(f)return n(f);if(p)return $o.symlink(e,t,l,n);YM(c,d=>{if(d)return n(d);$o.symlink(e,t,l,n)})})})})})}function o$(e,t,r){if($o.existsSync(t))return;let o=e$(e,t);e=o.toDst,r=r$(o.toCwd,r);let i=yw.dirname(t);return $o.existsSync(i)||QM(i),$o.symlinkSync(e,t,r)}xw.exports={createSymlink:ZM(n$),createSymlinkSync:o$}});var kw=b((bQ,Sw)=>{"use strict";var Yu=iw(),Qu=lw(),Xu=Ew();Sw.exports={createFile:Yu.createFile,createFileSync:Yu.createFileSync,ensureFile:Yu.createFile,ensureFileSync:Yu.createFileSync,createLink:Qu.createLink,createLinkSync:Qu.createLinkSync,ensureLink:Qu.createLink,ensureLinkSync:Qu.createLinkSync,createSymlink:Xu.createSymlink,createSymlinkSync:Xu.createSymlinkSync,ensureSymlink:Xu.createSymlink,ensureSymlinkSync:Xu.createSymlinkSync}});var Cw=b((vQ,_w)=>{var Lo;try{Lo=Re()}catch{Lo=require("fs")}function i$(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Lo,o=!0;"throws"in t&&(o=t.throws),n.readFile(e,t,function(i,a){if(i)return r(i);a=Iw(a);var s;try{s=JSON.parse(a,t?t.reviver:null)}catch(u){return o?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,s)})}function a$(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Lo,n=!0;"throws"in t&&(n=t.throws);try{var o=r.readFileSync(e,t);return o=Iw(o),JSON.parse(o,t.reviver)}catch(i){if(n)throw i.message=e+": "+i.message,i;return null}}function Aw(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var o=JSON.stringify(e,t?t.replacer:null,r);return o.replace(/\n/g,n)+n}function s$(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var o=r.fs||Lo,i="";try{i=Aw(t,r)}catch(a){n&&n(a,null);return}o.writeFile(e,i,r,n)}function u$(e,t,r){r=r||{};var n=r.fs||Lo,o=Aw(t,r);return n.writeFileSync(e,o,r)}function Iw(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var c$={readFile:i$,readFileSync:a$,writeFile:s$,writeFileSync:u$};_w.exports=c$});var tc=b((wQ,Ow)=>{"use strict";var Tw=ut().fromCallback,ec=Cw();Ow.exports={readJson:Tw(ec.readFile),readJsonSync:ec.readFileSync,writeJson:Tw(ec.writeFile),writeJsonSync:ec.writeFileSync}});var Nw=b((xQ,Fw)=>{"use strict";var l$=require("path"),f$=vt(),p$=or().pathExists,Dw=tc();function d$(e,t,r,n){typeof r=="function"&&(n=r,r={});let o=l$.dirname(e);p$(o,(i,a)=>{if(i)return n(i);if(a)return Dw.writeJson(e,t,r,n);f$.mkdirs(o,s=>{if(s)return n(s);Dw.writeJson(e,t,r,n)})})}Fw.exports=d$});var Rw=b((EQ,Pw)=>{"use strict";var m$=Re(),h$=require("path"),g$=vt(),y$=tc();function b$(e,t,r){let n=h$.dirname(e);m$.existsSync(n)||g$.mkdirsSync(n),y$.writeJsonSync(e,t,r)}Pw.exports=b$});var $w=b((SQ,Mw)=>{"use strict";var v$=ut().fromCallback,nt=tc();nt.outputJson=v$(Nw());nt.outputJsonSync=Rw();nt.outputJSON=nt.outputJson;nt.outputJSONSync=nt.outputJsonSync;nt.writeJSON=nt.writeJson;nt.writeJSONSync=nt.writeJsonSync;nt.readJSON=nt.readJson;nt.readJSONSync=nt.readJsonSync;Mw.exports=nt});var Ww=b((kQ,zw)=>{"use strict";var Bw=Re(),w$=require("path"),x$=Id().copySync,jw=Oa().removeSync,E$=vt().mkdirpSync,Lw=ka();function S$(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:o}=Lw.checkPathsSync(e,t,"move");return Lw.checkParentPathsSync(e,o,t,"move"),E$(w$.dirname(t)),k$(e,t,n)}function k$(e,t,r){if(r)return jw(t),qw(e,t,r);if(Bw.existsSync(t))throw new Error("dest already exists.");return qw(e,t,r)}function qw(e,t,r){try{Bw.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return A$(e,t,r)}}function A$(e,t,r){return x$(e,t,{overwrite:r,errorOnExist:!0}),jw(e)}zw.exports=S$});var Hw=b((AQ,Uw)=>{"use strict";Uw.exports={moveSync:Ww()}});var Zw=b((IQ,Jw)=>{"use strict";var I$=Re(),_$=require("path"),C$=Cd().copy,Kw=Oa().remove,T$=vt().mkdirp,O$=or().pathExists,Vw=ka();function D$(e,t,r,n){typeof r=="function"&&(n=r,r={});let o=r.overwrite||r.clobber||!1;Vw.checkPaths(e,t,"move",(i,a)=>{if(i)return n(i);let{srcStat:s}=a;Vw.checkParentPaths(e,s,t,"move",u=>{if(u)return n(u);T$(_$.dirname(t),l=>l?n(l):F$(e,t,o,n))})})}function F$(e,t,r,n){if(r)return Kw(t,o=>o?n(o):Gw(e,t,r,n));O$(t,(o,i)=>o?n(o):i?n(new Error("dest already exists.")):Gw(e,t,r,n))}function Gw(e,t,r,n){I$.rename(e,t,o=>o?o.code!=="EXDEV"?n(o):N$(e,t,r,n):n())}function N$(e,t,r,n){C$(e,t,{overwrite:r,errorOnExist:!0},i=>i?n(i):Kw(e,n))}Jw.exports=D$});var Qw=b((_Q,Yw)=>{"use strict";var P$=ut().fromCallback;Yw.exports={move:P$(Zw())}});var rx=b((CQ,tx)=>{"use strict";var R$=ut().fromCallback,Na=Re(),Xw=require("path"),ex=vt(),M$=or().pathExists;function $$(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let o=Xw.dirname(e);M$(o,(i,a)=>{if(i)return n(i);if(a)return Na.writeFile(e,t,r,n);ex.mkdirs(o,s=>{if(s)return n(s);Na.writeFile(e,t,r,n)})})}function L$(e,...t){let r=Xw.dirname(e);if(Na.existsSync(r))return Na.writeFileSync(e,...t);ex.mkdirsSync(r),Na.writeFileSync(e,...t)}tx.exports={outputFile:R$($$),outputFileSync:L$}});var Dd=b((TQ,Od)=>{"use strict";Od.exports=Object.assign({},dd(),Id(),Cd(),tw(),kw(),$w(),vt(),Hw(),Qw(),rx(),or(),Oa());var nx=require("fs");Object.getOwnPropertyDescriptor(nx,"promises")&&Object.defineProperty(Od.exports,"promises",{get(){return nx.promises}})});var ix=b((OQ,ox)=>{ox.exports=()=>new Date});var sx=b((DQ,ax)=>{var q$=We()("streamroller:fileNameFormatter"),B$=require("path"),j$=".gz",z$=".";ax.exports=({file:e,keepFileExt:t,needsIndex:r,alwaysIncludeDate:n,compress:o,fileNameSep:i})=>{let a=i||z$,s=B$.join(e.dir,e.name),u=d=>d+e.ext,l=(d,h,g)=>(r||!g)&&h?d+a+h:d,c=(d,h,g)=>(h>0||n)&&g?d+a+g:d,f=(d,h)=>h&&o?d+j$:d,p=t?[c,l,u,f]:[u,c,l,f];return({date:d,index:h})=>(q$(`_formatFileName: date=${d}, index=${h}`),p.reduce((g,y)=>y(g,h,d),s))}});var fx=b((FQ,lx)=>{var $n=We()("streamroller:fileNameParser"),ux=".gz",cx=qu(),W$=".";lx.exports=({file:e,keepFileExt:t,pattern:r,fileNameSep:n})=>{let o=n||W$,i=(p,d)=>p.endsWith(ux)?($n("it is gzipped"),d.isCompressed=!0,p.slice(0,-1*ux.length)):p,a="__NOT_MATCHING__",f=[i,t?p=>p.startsWith(e.name)&&p.endsWith(e.ext)?($n("it starts and ends with the right things"),p.slice(e.name.length+1,-1*e.ext.length)):a:p=>p.startsWith(e.base)?($n("it starts with the right things"),p.slice(e.base.length+1)):a,r?(p,d)=>{let h=p.split(o),g=h[h.length-1];$n("items: ",h,", indexStr: ",g);let y=p;g!==void 0&&g.match(/^\d+$/)?(y=p.slice(0,-1*(g.length+1)),$n(`dateStr is ${y}`),r&&!y&&(y=g,g="0")):g="0";try{let w=cx.parse(r,y,new Date(0,0));return cx.asString(r,w)!==y?p:(d.index=parseInt(g,10),d.date=y,d.timestamp=w.getTime(),"")}catch(w){return $n(`Problem parsing ${y} as ${r}, error was: `,w),p}}:(p,d)=>p.match(/^\d+$/)?($n("it has an index"),d.index=parseInt(p,10),""):p];return p=>{let d={filename:p,index:0,isCompressed:!1};return f.reduce((g,y)=>y(g,d),p)?null:d}}});var dx=b((NQ,px)=>{var lt=We()("streamroller:moveAndMaybeCompressFile"),Nr=Dd(),U$=require("zlib"),H$=function(e){let t={mode:parseInt("0600",8),compress:!1},r=Object.assign({},t,e);return lt(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(r)}`),r},V$=async(e,t,r)=>{if(r=H$(r),e===t){lt("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await Nr.pathExists(e))if(lt(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${r.compress?"with":"without"} compress`),r.compress)await new Promise((n,o)=>{let i=!1,a=Nr.createWriteStream(t,{mode:r.mode,flags:"wx"}).on("open",()=>{i=!0;let s=Nr.createReadStream(e).on("open",()=>{s.pipe(U$.createGzip()).pipe(a)}).on("error",u=>{lt(`moveAndMaybeCompressFile: error reading ${e}`,u),a.destroy(u)})}).on("finish",()=>{lt(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),Nr.unlink(e).then(n).catch(s=>{lt(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,s),Nr.truncate(e).then(n).catch(u=>{lt(`moveAndMaybeCompressFile: error truncating ${e}`,u),o(u)})})}).on("error",s=>{i?(lt(`moveAndMaybeCompressFile: error writing ${t}, deleting`,s),Nr.unlink(t).then(()=>{o(s)}).catch(u=>{lt(`moveAndMaybeCompressFile: error deleting ${t}`,u),o(u)})):(lt(`moveAndMaybeCompressFile: error creating ${t}`,s),o(s))})}).catch(()=>{});else{lt(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await Nr.move(e,t,{overwrite:!0})}catch(n){if(lt(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),n.code!=="ENOENT"){lt("moveAndMaybeCompressFile: trying copy+truncate instead");try{await Nr.copy(e,t,{overwrite:!0}),await Nr.truncate(e)}catch(o){lt("moveAndMaybeCompressFile: error copy+truncate",o)}}}}};px.exports=V$});var oc=b((PQ,mx)=>{var wt=We()("streamroller:RollingFileWriteStream"),qn=Dd(),Ln=require("path"),G$=require("os"),rc=ix(),nc=qu(),{Writable:K$}=require("stream"),J$=sx(),Z$=fx(),Y$=dx(),Q$=e=>(wt(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>qn.unlink(t).catch(r=>{wt(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${r}`)})))),Fd=class extends K${constructor(t,r){if(wt(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(Ln.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${Ln.sep}`)===0&&(t=t.replace("~",G$.homedir())),super(r),this.options=this._parseOption(r),this.fileObject=Ln.parse(t),this.fileObject.dir===""&&(this.fileObject=Ln.parse(Ln.join(process.cwd(),t))),this.fileFormatter=J$({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=Z$({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=nc(this.options.pattern,rc())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),wt(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=qn.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=nc(this.options.pattern,t.mtime))}catch{return}}_parseOption(t){let r={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},r,t);if(!n.maxSize)delete n.maxSize;else if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`);if(n.numBackups||n.numBackups===0){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return wt(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,r,n){this._shouldRoll().then(()=>{wt(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,r,o=>{this.state.currentSize+=t.length,n(o)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(wt(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==nc(this.options.pattern,rc())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return wt("_roll: closing the current stream"),new Promise((t,r)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(r)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),r=this.state.currentDate?t.filter(n=>n.date===this.state.currentDate):t;for(let n=r.length;n>=0;n--){wt(`_moveOldFiles: i = ${n}`);let o=this.fileFormatter({date:this.state.currentDate,index:n}),i=this.fileFormatter({date:this.state.currentDate,index:n+1}),a={compress:this.options.compress&&n===0,mode:this.options.mode};await Y$(o,i,a)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?nc(this.options.pattern,rc()):null,wt(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((n,o)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(n).catch(o)})})}async _getExistingFiles(){let t=await qn.readdir(this.fileObject.dir).catch(()=>[]);wt(`_getExistingFiles: files=${t}`);let r=t.map(o=>this.fileNameParser(o)).filter(o=>o),n=o=>(o.timestamp?o.timestamp:rc().getTime())-o.index;return r.sort((o,i)=>n(o)-n(i)),r}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),r=i=>{try{return qn.mkdirSync(i,{recursive:!0})}catch(a){if(a.code==="ENOENT")return r(Ln.dirname(i)),r(i);if(a.code!=="EEXIST"&&a.code!=="EROFS")throw a;try{if(qn.statSync(i).isDirectory())return i;throw a}catch{throw a}}};r(this.fileObject.dir);let n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},o=function(i,a,s){return i[s]=i[a],delete i[a],i};qn.appendFileSync(t,"",o({...n},"flags","flag")),this.currentFileStream=qn.createWriteStream(t,n),this.currentFileStream.on("error",i=>{this.emit("error",i)})}async _clean(){let t=await this._getExistingFiles();if(wt(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),wt("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let r=t.slice(0,t.length-this.options.numToKeep).map(n=>Ln.format({dir:this.fileObject.dir,base:n.filename}));await Q$(r)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};mx.exports=Fd});var gx=b((RQ,hx)=>{var X$=oc(),Nd=class extends X${constructor(t,r,n,o){o||(o={}),r&&(o.maxSize=r),!o.numBackups&&o.numBackups!==0&&(!n&&n!==0&&(n=1),o.numBackups=n),super(t,o),this.backups=o.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};hx.exports=Nd});var bx=b((MQ,yx)=>{var eL=oc(),Pd=class extends eL{constructor(t,r,n){r&&typeof r=="object"&&(n=r,r=null),n||(n={}),r||(r="yyyy-MM-dd"),n.pattern=r,!n.numBackups&&n.numBackups!==0?(!n.daysToKeep&&n.daysToKeep!==0?n.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),n.numBackups=n.daysToKeep):n.daysToKeep=n.numBackups,super(t,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};yx.exports=Pd});var Rd=b(($Q,vx)=>{vx.exports={RollingFileWriteStream:oc(),RollingFileStream:gx(),DateRollingFileStream:bx()}});var kx=b((LQ,Sx)=>{var wx=We()("log4js:file"),Md=require("path"),tL=Rd(),Ex=require("os"),rL=Ex.EOL,ic=!1,ac=new Set;function xx(){ac.forEach(e=>{e.sighupHandler()})}function nL(e,t,r,n,o,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Md.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Md.sep}.+)`),Ex.homedir()),e=Md.normalize(e),n=!n&&n!==0?5:n,wx("Creating file appender (",e,", ",r,", ",n,", ",o,", ",i,")");function a(l,c,f,p){let d=new tL.RollingFileStream(l,c,f,p);return d.on("error",h=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",l,h)}),d.on("drain",()=>{process.emit("log4js:pause",!1)}),d}let s=a(e,r,n,o),u=function(l){if(s.writable){if(o.removeColor===!0){let c=/\x1b[[0-9;]*m/g;l.data=l.data.map(f=>typeof f=="string"?f.replace(c,""):f)}s.write(t(l,i)+rL,"utf8")||process.emit("log4js:pause",!0)}};return u.reopen=function(){s.end(()=>{s=a(e,r,n,o)})},u.sighupHandler=function(){wx("SIGHUP handler called."),u.reopen()},u.shutdown=function(l){ac.delete(u),ac.size===0&&ic&&(process.removeListener("SIGHUP",xx),ic=!1),s.end("","utf-8",l)},ac.add(u),ic||(process.on("SIGHUP",xx),ic=!0),u}function oL(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,nL(e.filename,r,e.maxLogSize,e.backups,e,e.timezoneOffset)}Sx.exports.configure=oL});var Ix=b((qQ,Ax)=>{var iL=Rd(),aL=require("os"),sL=aL.EOL;function uL(e,t,r){let n=new iL.DateRollingFileStream(e,t,r);return n.on("error",o=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,o)}),n.on("drain",()=>{process.emit("log4js:pause",!1)}),n}function cL(e,t,r,n,o){n.maxSize=n.maxLogSize;let i=uL(e,t,n),a=function(s){i.writable&&(i.write(r(s,o)+sL,"utf8")||process.emit("log4js:pause",!0))};return a.shutdown=function(s){i.end("","utf-8",s)},a}function lL(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,cL(e.filename,e.pattern,r,e,e.timezoneOffset)}Ax.exports.configure=lL});var Ox=b((BQ,Tx)=>{var Pr=We()("log4js:fileSync"),ar=require("path"),ir=require("fs"),_x=require("os"),fL=_x.EOL;function Cx(e,t){let r=n=>{try{return ir.mkdirSync(n,{recursive:!0})}catch(o){if(o.code==="ENOENT")return r(ar.dirname(n)),r(n);if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(ir.statSync(n).isDirectory())return n;throw o}catch{throw o}}};r(ar.dirname(e)),ir.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var $d=class{constructor(t,r,n,o){if(Pr("In RollingFileStream"),r<0)throw new Error(`maxLogSize (${r}) should be > 0`);this.filename=t,this.size=r,this.backups=n,this.options=o,this.currentSize=0;function i(a){let s=0;try{s=ir.statSync(a).size}catch{Cx(a,o)}return s}this.currentSize=i(this.filename)}shouldRoll(){return Pr("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let r=this,n=new RegExp(`^${ar.basename(t)}`);function o(l){return n.test(l)}function i(l){return parseInt(l.slice(`${ar.basename(t)}.`.length),10)||0}function a(l,c){return i(l)-i(c)}function s(l){let c=i(l);if(Pr(`Index of ${l} is ${c}`),r.backups===0)ir.truncateSync(t,0);else if(c<r.backups){try{ir.unlinkSync(`${t}.${c+1}`)}catch{}Pr(`Renaming ${l} -> ${t}.${c+1}`),ir.renameSync(ar.join(ar.dirname(t),l),`${t}.${c+1}`)}}function u(){Pr("Renaming the old files"),ir.readdirSync(ar.dirname(t)).filter(o).sort(a).reverse().forEach(s)}Pr("Rolling, rolling, rolling"),u()}write(t,r){let n=this;function o(){Pr("writing the chunk to the file"),n.currentSize+=t.length,ir.appendFileSync(n.filename,t)}Pr("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),o()}};function pL(e,t,r,n,o,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(ar.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${ar.sep}.+)`),_x.homedir()),e=ar.normalize(e),n=!n&&n!==0?5:n,Pr("Creating fileSync appender (",e,", ",r,", ",n,", ",o,", ",i,")");function a(u,l,c){let f;return l?f=new $d(u,l,c,o):f=(p=>(Cx(p,o),{write(d){ir.appendFileSync(p,d)}}))(u),f}let s=a(e,r,n);return u=>{s.write(t(u,i)+fL)}}function dL(e,t){let r=t.basicLayout;e.layout&&(r=t.layout(e.layout.type,e.layout));let n={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return pL(e.filename,r,e.maxLogSize,e.backups,n,e.timezoneOffset)}Tx.exports.configure=dL});var Fx=b((jQ,Dx)=>{var sr=We()("log4js:tcp"),mL=require("net");function hL(e,t){let r=!1,n=[],o,i=3,a="__LOG4JS__";function s(f){sr("Writing log event to socket"),r=o.write(`${t(f)}${a}`,"utf8")}function u(){let f;for(sr("emptying buffer");f=n.shift();)s(f)}function l(){sr(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),a=`${e.endMsg||"__LOG4JS__"}`,o=mL.createConnection(e.port||5e3,e.host||"localhost"),o.on("connect",()=>{sr("socket connected"),u(),r=!0}),o.on("drain",()=>{sr("drain event received, emptying buffer"),r=!0,u()}),o.on("timeout",o.end.bind(o)),o.on("error",f=>{sr("connection error",f),r=!1,u()}),o.on("close",l)}l();function c(f){r?s(f):(sr("buffering log event because it cannot write at the moment"),n.push(f))}return c.shutdown=function(f){sr("shutdown called"),n.length&&i?(sr("buffer has items, waiting 100ms to empty"),i-=1,setTimeout(()=>{c.shutdown(f)},100)):(o.removeAllListeners("close"),o.end(f))},c}function gL(e,t){sr(`configure with config = ${e}`);let r=function(n){return n.serialise()};return e.layout&&(r=t.layout(e.layout.type,e.layout)),hL(e,r)}Dx.exports.configure=gL});var Bd=b((zQ,qd)=>{var Ld=require("path"),on=We()("log4js:appenders"),Wt=Dn(),Nx=Wu(),yL=Nn(),bL=nd(),vL=Ov(),Yt=new Map;Yt.set("console",Fv());Yt.set("stdout",Pv());Yt.set("stderr",Mv());Yt.set("logLevelFilter",Lv());Yt.set("categoryFilter",jv());Yt.set("noLogFilter",Uv());Yt.set("file",kx());Yt.set("dateFile",Ix());Yt.set("fileSync",Ox());Yt.set("tcp",Fx());var Pa=new Map,sc=(e,t)=>{let r;try{let n=`${e}.cjs`;r=require.resolve(n),on("Loading module from ",n)}catch{r=e,on("Loading module from ",e)}try{return require(r)}catch(n){Wt.throwExceptionIf(t,n.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${n})`);return}},wL=(e,t)=>Yt.get(e)||sc(`./${e}`,t)||sc(e,t)||require.main&&require.main.filename&&sc(Ld.join(Ld.dirname(require.main.filename),e),t)||sc(Ld.join(process.cwd(),e),t),uc=new Set,Px=(e,t)=>{if(Pa.has(e))return Pa.get(e);if(!t.appenders[e])return!1;if(uc.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);uc.add(e),on(`Creating appender ${e}`);let r=xL(e,t);return uc.delete(e),Pa.set(e,r),r},xL=(e,t)=>{let r=t.appenders[e],n=r.type.configure?r.type:wL(r.type,t);return Wt.throwExceptionIf(t,Wt.not(n),`appender "${e}" is not valid (type "${r.type}" could not be found)`),n.appender&&(process.emitWarning(`Appender ${r.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),on("[log4js-node-DEP0001]",`DEPRECATION: Appender ${r.type} exports an appender function.`)),n.shutdown&&(process.emitWarning(`Appender ${r.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),on("[log4js-node-DEP0002]",`DEPRECATION: Appender ${r.type} exports a shutdown function.`)),on(`${e}: clustering.isMaster ? ${Nx.isMaster()}`),on(`${e}: appenderModule is ${require("util").inspect(n)}`),Nx.onlyOnMaster(()=>(on(`calling appenderModule.configure for ${e} / ${r.type}`),n.configure(vL.modifyConfig(r),bL,o=>Px(o,t),yL)),()=>{})},Rx=e=>{if(Pa.clear(),uc.clear(),!e)return;let t=[];Object.values(e.categories).forEach(r=>{t.push(...r.appenders)}),Object.keys(e.appenders).forEach(r=>{(t.includes(r)||e.appenders[r].type==="tcp-server"||e.appenders[r].type==="multiprocess")&&Px(r,e)})},Mx=()=>{Rx()};Mx();Wt.addListener(e=>{Wt.throwExceptionIf(e,Wt.not(Wt.anObject(e.appenders)),'must have a property "appenders" of type object.');let t=Object.keys(e.appenders);Wt.throwExceptionIf(e,Wt.not(t.length),"must define at least one appender."),t.forEach(r=>{Wt.throwExceptionIf(e,Wt.not(e.appenders[r].type),`appender "${r}" is not valid (must be an object with property "type")`)})});Wt.addListener(Rx);qd.exports=Pa;qd.exports.init=Mx});var Wd=b((WQ,cc)=>{var Ra=We()("log4js:categories"),_e=Dn(),jd=Nn(),$x=Bd(),an=new Map;function Lx(e,t,r){if(t.inherit===!1)return;let n=r.lastIndexOf(".");if(n<0)return;let o=r.slice(0,n),i=e.categories[o];i||(i={inherit:!0,appenders:[]}),Lx(e,i,o),!e.categories[o]&&i.appenders&&i.appenders.length&&i.level&&(e.categories[o]=i),t.appenders=t.appenders||[],t.level=t.level||i.level,i.appenders.forEach(a=>{t.appenders.includes(a)||t.appenders.push(a)}),t.parent=i}function EL(e){if(!e.categories)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r];Lx(e,n,r)})}_e.addPreProcessingListener(e=>EL(e));_e.addListener(e=>{_e.throwExceptionIf(e,_e.not(_e.anObject(e.categories)),'must have a property "categories" of type object.');let t=Object.keys(e.categories);_e.throwExceptionIf(e,_e.not(t.length),"must define at least one category."),t.forEach(r=>{let n=e.categories[r];_e.throwExceptionIf(e,[_e.not(n.appenders),_e.not(n.level)],`category "${r}" is not valid (must be an object with properties "appenders" and "level")`),_e.throwExceptionIf(e,_e.not(Array.isArray(n.appenders)),`category "${r}" is not valid (appenders must be an array of appender names)`),_e.throwExceptionIf(e,_e.not(n.appenders.length),`category "${r}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&_e.throwExceptionIf(e,typeof n.enableCallStack!="boolean",`category "${r}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach(o=>{_e.throwExceptionIf(e,_e.not($x.get(o)),`category "${r}" is not valid (appender "${o}" is not defined)`)}),_e.throwExceptionIf(e,_e.not(jd.getLevel(n.level)),`category "${r}" is not valid (level "${n.level}" not recognised; valid levels are ${jd.levels.join(", ")})`)}),_e.throwExceptionIf(e,_e.not(e.categories.default),'must define a "default" category.')});var zd=e=>{if(an.clear(),!e)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r],o=[];n.appenders.forEach(i=>{o.push($x.get(i)),Ra(`Creating category ${r}`),an.set(r,{appenders:o,level:jd.getLevel(n.level),enableCallStack:n.enableCallStack||!1})})})},qx=()=>{zd()};qx();_e.addListener(zd);var qo=e=>{if(Ra(`configForCategory: searching for config for ${e}`),an.has(e))return Ra(`configForCategory: ${e} exists in config, returning it`),an.get(e);let t;return e.indexOf(".")>0?(Ra(`configForCategory: ${e} has hierarchy, cloning from parents`),t={...qo(e.slice(0,e.lastIndexOf(".")))}):(an.has("default")||zd({categories:{default:{appenders:["out"],level:"OFF"}}}),Ra("configForCategory: cloning default category"),t={...an.get("default")}),an.set(e,t),t},SL=e=>qo(e).appenders,kL=e=>qo(e).level,AL=(e,t)=>{qo(e).level=t},IL=e=>qo(e).enableCallStack===!0,_L=(e,t)=>{qo(e).enableCallStack=t};cc.exports=an;cc.exports=Object.assign(cc.exports,{appendersForCategory:SL,getLevelForCategory:kL,setLevelForCategory:AL,getEnableCallStackForCategory:IL,setEnableCallStackForCategory:_L,init:qx})});var Ux=b((UQ,Wx)=>{var Bx=We()("log4js:logger"),CL=od(),ur=Nn(),TL=Wu(),lc=Wd(),jx=Dn(),OL=/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/;function DL(e,t=4){try{let r=e.stack.split(`
`).slice(t),n=OL.exec(r[0]);if(n&&n.length===6)return{functionName:n[1],fileName:n[2],lineNumber:parseInt(n[3],10),columnNumber:parseInt(n[4],10),callStack:r.join(`
`)};console.error("log4js.logger - defaultParseCallStack error")}catch(r){console.error("log4js.logger - defaultParseCallStack error",r)}return null}var Ma=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.parseCallStack=DL,Bx(`Logger created (${this.category}, ${this.level})`)}get level(){return ur.getLevel(lc.getLevelForCategory(this.category),ur.OFF)}set level(t){lc.setLevelForCategory(this.category,ur.getLevel(t,this.level))}get useCallStack(){return lc.getEnableCallStackForCategory(this.category)}set useCallStack(t){lc.setEnableCallStackForCategory(this.category,t===!0)}log(t,...r){let n=ur.getLevel(t);n?this.isLevelEnabled(n)&&this._log(n,r):jx.validIdentifier(t)&&r.length>0?(this.log(ur.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(ur.INFO,`[${t}]`,...r)):this.log(ur.INFO,t,...r)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,r){Bx(`sending log data (${t}) to appenders`);let n=new CL(this.category,t,r,this.context,this.useCallStack&&this.parseCallStack(new Error));TL.send(n)}addContext(t,r){this.context[t]=r}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){this.parseCallStack=t}};function zx(e){let t=ur.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,i=>i[1].toUpperCase()),o=n[0].toUpperCase()+n.slice(1);Ma.prototype[`is${o}Enabled`]=function(){return this.isLevelEnabled(t)},Ma.prototype[n]=function(...i){this.log(t,...i)}}ur.levels.forEach(zx);jx.addListener(()=>{ur.levels.forEach(zx)});Wx.exports=Ma});var Gx=b((HQ,Vx)=>{var Bo=Nn(),FL=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';function NL(e){return e.originalUrl||e.url}function PL(e,t,r){let n=i=>{let a=i.concat();for(let s=0;s<a.length;++s)for(let u=s+1;u<a.length;++u)a[s].token==a[u].token&&a.splice(u--,1);return a},o=[];return o.push({token:":url",replacement:NL(e)}),o.push({token:":protocol",replacement:e.protocol}),o.push({token:":hostname",replacement:e.hostname}),o.push({token:":method",replacement:e.method}),o.push({token:":status",replacement:t.__statusCode||t.statusCode}),o.push({token:":response-time",replacement:t.responseTime}),o.push({token:":date",replacement:new Date().toUTCString()}),o.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),o.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),o.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),o.push({token:":user-agent",replacement:e.headers["user-agent"]}),o.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),o.push({token:/:req\[([^\]]+)]/g,replacement(i,a){return e.headers[a.toLowerCase()]}}),o.push({token:/:res\[([^\]]+)]/g,replacement(i,a){return t.getHeader(a.toLowerCase())||t.__headers&&t.__headers[a]}}),n(r.concat(o))}function Hx(e,t){for(let r=0;r<t.length;r++)e=e.replace(t[r].token,t[r].replacement);return e}function RL(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let r=e.map(n=>n.source?n.source:n);t=new RegExp(r.join("|"))}return t}function ML(e,t,r){let n=t;if(r){let o=r.find(i=>{let a=!1;return i.from&&i.to?a=e>=i.from&&e<=i.to:a=i.codes.indexOf(e)!==-1,a});o&&(n=Bo.getLevel(o.level,n))}return n}Vx.exports=function(t,r){typeof r=="string"||typeof r=="function"?r={format:r}:r=r||{};let n=t,o=Bo.getLevel(r.level,Bo.INFO),i=r.format||FL;return(a,s,u)=>{if(a._logging!==void 0)return u();if(typeof r.nolog!="function"){let l=RL(r.nolog);if(l&&l.test(a.originalUrl))return u()}if(n.isLevelEnabled(o)||r.level==="auto"){let l=new Date,{writeHead:c}=s;a._logging=!0,s.writeHead=(d,h)=>{s.writeHead=c,s.writeHead(d,h),s.__statusCode=d,s.__headers=h||{}};let f=!1,p=()=>{if(f)return;if(f=!0,typeof r.nolog=="function"&&r.nolog(a,s)===!0){a._logging=!1;return}s.responseTime=new Date-l,s.statusCode&&r.level==="auto"&&(o=Bo.INFO,s.statusCode>=300&&(o=Bo.WARN),s.statusCode>=400&&(o=Bo.ERROR)),o=ML(s.statusCode,o,r.statusRules);let d=PL(a,s,r.tokens||[]);if(r.context&&n.addContext("res",s),typeof i=="function"){let h=i(a,s,g=>Hx(g,d));h&&n.log(o,h)}else n.log(o,Hx(i,d));r.context&&n.removeContext("res")};s.on("end",p),s.on("finish",p),s.on("error",p),s.on("close",p)}return u()}}});var Qx=b((VQ,Yx)=>{var Kx=We()("log4js:recording"),fc=[];function $L(){return function(e){Kx(`received logEvent, number of events now ${fc.length+1}`),Kx("log event was ",e),fc.push(e)}}function Jx(){return fc.slice()}function Zx(){fc.length=0}Yx.exports={configure:$L,replay:Jx,playback:Jx,reset:Zx,erase:Zx}});var i1=b((GQ,o1)=>{var sn=We()("log4js:main"),LL=require("fs"),qL=Hb()({proto:!0}),BL=Dn(),jL=nd(),zL=Nn(),Xx=Bd(),e1=Wd(),WL=Ux(),UL=Wu(),HL=Gx(),VL=Qx(),$a=!1;function GL(e){if(!$a)return;sn("Received log event ",e),e1.appendersForCategory(e.categoryName).forEach(r=>{r(e)})}function KL(e){sn(`Loading configuration from ${e}`);try{return JSON.parse(LL.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function t1(e){$a&&r1();let t=e;return typeof t=="string"&&(t=KL(e)),sn(`Configuration is ${t}`),BL.configure(qL(t)),UL.onMessage(GL),$a=!0,n1}function JL(){return VL}function r1(e){sn("Shutdown called. Disabling all log writing."),$a=!1;let t=Array.from(Xx.values());Xx.init(),e1.init();let r=t.reduceRight((a,s)=>s.shutdown?a+1:a,0);if(r===0)return sn("No appenders with shutdown functions found."),e!==void 0&&e();let n=0,o;sn(`Found ${r} appenders with shutdown functions.`);function i(a){o=o||a,n+=1,sn(`Appender shutdowns complete: ${n} / ${r}`),n>=r&&(sn("All shutdown functions completed."),e&&e(o))}return t.filter(a=>a.shutdown).forEach(a=>a.shutdown(i)),null}function ZL(e){return $a||t1(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new WL(e||"default")}var n1={getLogger:ZL,configure:t1,shutdown:r1,connectLogger:HL,levels:zL,addLayout:jL.addLayout,recording:JL};o1.exports=n1});var Ud=b((exports,module)=>{(function(t,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("workerpool",[],r):typeof exports=="object"?exports.workerpool=r():t.workerpool=r()})(typeof self<"u"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,t,r){"use strict";r.r(t),r.d(t,{IFrameWorker:function(){return o}});function n(){let i=document.createElement("iframe");return i.width=i.height=i.frameBorder="0",i.classList.add("iframe-worker"),i.style.display="contents",i}class o{constructor(a,s){if(this.scriptText=a,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=l=>{l.source===this.worker&&(l.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:l.data})),this.onmessage&&this.onmessage(l))},this.handleError=(l,c,f,p,d)=>{if(c===this.scriptText.toString()){let h=new ErrorEvent("error",{message:l,filename:c,lineno:f,colno:p,error:d});this.dispatchEvent(h),this.onerror&&this.onerror(h)}},typeof s<"u")throw new TypeError("Options are not supported for iframe workers");let u=new EventTarget;this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=
(message, origin) => {
  parent.postMessage(message, origin || "*")
};window.importScripts=
(...urls) => urls.reduce((promise, url) => (
  promise.then(() => new Promise(resolve => {
    const script = document.createElement("script")
    script.src = url
    script.addEventListener("load", () => resolve())
    document.body.appendChild(script)
  }))
), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${a.substring(0,50)}",error:ev.error}))})</script><script type="module">${a}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((l,c)=>{this.worker.onload=l,this.worker.onerror=c})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(a){(async()=>{try{await this.ready}catch{}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:a}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,t,r){var n=r(446),o=r(518),i=r(722),a=r(393),s=new a;function u(d,h){typeof d=="string"?this.script=d||null:(this.script=null,h=d),this.workers=[],this.tasks=[],h=h||{},this.name=h.name,this.forkArgs=Object.freeze(h.forkArgs||[]),this.forkOpts=Object.freeze(h.forkOpts||{}),this.debugPortStart=h.debugPortStart||43210,this.nodeWorker=h.nodeWorker,this.workerType=h.workerType||h.nodeWorker||"auto",this.maxQueueSize=h.maxQueueSize||1/0,this.onCreateWorker=h.onCreateWorker||function(){return null},this.onTerminateWorker=h.onTerminateWorker||function(){return null},h&&"maxWorkers"in h?(l(h.maxWorkers),this.maxWorkers=h.maxWorkers):this.maxWorkers=Math.max((i.cpus||4)-1,1),h&&"minWorkers"in h&&(h.minWorkers==="max"?this.minWorkers=this.maxWorkers:(c(h.minWorkers),this.minWorkers=h.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&o.ensureWorkerThreads()}u.prototype.exec=function(d,h,g){if(h&&!Array.isArray(h))throw new TypeError('Array expected as argument "params"');if(typeof d=="string"){var y=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var w=this.tasks,x={method:d,params:h,resolver:y,timeout:null,options:g};w.push(x);var A=y.promise.timeout;return y.promise.timeout=function(D){return w.indexOf(x)!==-1?(x.timeout=D,y.promise):A.call(y.promise,D)},this._next(),y.promise}else{if(typeof d=="function")return this.exec("run",[String(d),h]);throw new TypeError('Function or string expected as argument "method"')}},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var d=this;return this.exec("methods").then(function(h){var g={};return h.forEach(function(y){g[y]=function(){return d.exec(y,Array.prototype.slice.call(arguments))}}),g})},u.prototype._next=function(){if(this.tasks.length>0){var d=this._getWorker();if(d){var h=this,g=this.tasks.shift();if(g.resolver.promise.pending){var y=d.exec(g.method,g.params,g.resolver,g.options).then(h._boundNext).catch(function(){if(d.terminated)return h._removeWorker(d)}).then(function(){h._next()});typeof g.timeout=="number"&&y.timeout(g.timeout)}else h._next()}}},u.prototype._getWorker=function(){for(var d=this.workers,h=0;h<d.length;h++){var g=d[h];if(g.busy()===!1)return g}return d.length<this.maxWorkers?(g=this._createWorkerHandler(),d.push(g),g):null},u.prototype._removeWorker=function(d){var h=this;return s.releasePort(d.debugPort),this._removeWorkerFromList(d),this._ensureMinWorkers(),new n(function(g,y){d.terminate(!1,function(w){h.onTerminateWorker({forkArgs:d.forkArgs,forkOpts:d.forkOpts,script:d.script}),w?y(w):g(d)})})},u.prototype._removeWorkerFromList=function(d){var h=this.workers.indexOf(d);h!==-1&&this.workers.splice(h,1)},u.prototype.terminate=function(d,h){var g=this;this.tasks.forEach(function(O){O.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var y=function(D){this._removeWorkerFromList(D)},w=y.bind(this),x=[],A=this.workers.slice();return A.forEach(function(O){var D=O.terminateAndNotify(d,h).then(w).always(function(){g.onTerminateWorker({forkArgs:O.forkArgs,forkOpts:O.forkOpts,script:O.script})});x.push(D)}),n.all(x)},u.prototype.stats=function(){var d=this.workers.length,h=this.workers.filter(function(g){return g.busy()}).length;return{totalWorkers:d,busyWorkers:h,idleWorkers:d-h,pendingTasks:this.tasks.length,activeTasks:h}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var d=this.workers.length;d<this.minWorkers;d++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var d=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new o(d.script||this.script,{forkArgs:d.forkArgs||this.forkArgs,forkOpts:d.forkOpts||this.forkOpts,debugPort:s.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function l(d){if(!f(d)||!p(d)||d<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function c(d){if(!f(d)||!p(d)||d<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function f(d){return typeof d=="number"}function p(d){return Math.round(d)==d}e.exports=u},446:function(e){"use strict";function t(i,a){var s=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof i!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],l=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var c=function(h,g){u.push(h),l.push(g)};this.then=function(d,h){return new t(function(g,y){var w=d?r(d,g,y):g,x=h?r(h,g,y):y;c(w,x)},s)};var f=function(h){return s.resolved=!0,s.rejected=!1,s.pending=!1,u.forEach(function(g){g(h)}),c=function(y,w){y(h)},f=p=function(){},s},p=function(h){return s.resolved=!1,s.rejected=!0,s.pending=!1,l.forEach(function(g){g(h)}),c=function(y,w){w(h)},f=p=function(){},s};this.cancel=function(){return a?a.cancel():p(new n),s},this.timeout=function(d){if(a)a.timeout(d);else{var h=setTimeout(function(){p(new o("Promise timed out after "+d+" ms"))},d);s.always(function(){clearTimeout(h)})}return s},i(function(d){f(d)},function(d){p(d)})}function r(i,a,s){return function(u){try{var l=i(u);l&&typeof l.then=="function"&&typeof l.catch=="function"?l.then(a,s):a(l)}catch(c){s(c)}}}t.prototype.catch=function(i){return this.then(null,i)},t.prototype.always=function(i){return this.then(i,i)},t.all=function(i){return new t(function(a,s){var u=i.length,l=[];u?i.forEach(function(c,f){c.then(function(p){l[f]=p,u--,u==0&&a(l)},function(p){u=0,s(p)})}):a(l)})},t.defer=function(){var i={};return i.promise=new t(function(a,s){i.resolve=a,i.reject=s}),i};function n(i){this.message=i||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function o(i){this.message=i||"timeout exceeded",this.stack=new Error().stack}o.prototype=new Error,o.prototype.constructor=Error,o.prototype.name="TimeoutError",t.TimeoutError=o,e.exports=t},518:function(e,t,r){"use strict";function n(E,S){var v=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!v){if(Array.isArray(E)||(v=o(E))||S&&E&&typeof E.length=="number"){v&&(E=v);var _=0,I=function(){};return{s:I,n:function(){return _>=E.length?{done:!0}:{done:!1,value:E[_++]}},e:function(re){throw re},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,j=!1,H;return{s:function(){v=v.call(E)},n:function(){var re=v.next();return W=re.done,re},e:function(re){j=!0,H=re},f:function(){try{!W&&v.return!=null&&v.return()}finally{if(j)throw H}}}}function o(E,S){if(E){if(typeof E=="string")return i(E,S);var v=Object.prototype.toString.call(E).slice(8,-1);if(v==="Object"&&E.constructor&&(v=E.constructor.name),v==="Map"||v==="Set")return Array.from(E);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return i(E,S)}}function i(E,S){(S==null||S>E.length)&&(S=E.length);for(var v=0,_=new Array(S);v<S;v++)_[v]=E[v];return _}function a(E){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(E)}var s=r(446),u=r(722),l=r(781),c=r(162),f=c.IFrameWorker,p="__workerpool-terminate__",d=1e3;function h(){var E=y();if(!E)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return E}function g(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":a(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function y(){try{return l("worker_threads")}catch(E){if(a(E)==="object"&&E!==null&&E.code==="MODULE_NOT_FOUND")return null;throw E}}function w(){if(u.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var E=new Blob([r(710)],{type:"text/javascript"});return window.URL.createObjectURL(E)}else return __dirname+"/worker.js"}function x(E,S){if(S.workerType==="iframe")return A(E,f,S);if(S.workerType==="web")return g(),A(E,Worker,S);if(S.workerType==="thread")return v=h(),O(E,v);if(S.workerType==="process"||!S.workerType)return D(E,F(S),l("child_process"));if(u.platform==="browser")return g(),A(E,Worker);var v=y();return v?O(E,v):D(E,F(S),l("child_process"))}function A(E,S,v){var _=new S(E,v!=null&&v.name?{name:"".concat(v.name,"-").concat(Date.now())}:void 0);return _.isBrowserWorker=!0,_.on=function(I,W){this.addEventListener(I,function(j){W(j.data)})},_.send=function(I){this.postMessage(I)},_}function O(E,S){var v=new S.Worker(E,{stdout:!1,stderr:!1});return v.isWorkerThread=!0,v.send=function(_){this.postMessage(_)},v.kill=function(){return this.terminate(),!0},v.disconnect=function(){this.terminate()},v}function D(E,S,v){var _=v.fork(E,S.forkArgs,S.forkOpts);return _.isChildProcess=!0,_}function F(E){E=E||{};var S=process.execArgv.join(" "),v=S.indexOf("--inspect")!==-1,_=S.indexOf("--debug-brk")!==-1,I=[];return v&&(I.push("--inspect="+E.debugPort),_&&I.push("--debug-brk")),process.execArgv.forEach(function(W){W.indexOf("--max-old-space-size")>-1&&I.push(W)}),Object.assign({},E,{forkArgs:E.forkArgs,forkOpts:Object.assign({},E.forkOpts,{execArgv:(E.forkOpts&&E.forkOpts.execArgv||[]).concat(I)})})}function R(E){for(var S=new Error(""),v=Object.keys(E),_=0;_<v.length;_++)S[v[_]]=E[v[_]];return S}function P(E,S){var v=this,_=S||{};this.script=E||w(),this.worker=x(this.script,_),this.debugPort=_.debugPort,this.forkOpts=_.forkOpts,this.forkArgs=_.forkArgs,E||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(H){if(!v.terminated)if(typeof H=="string"&&H==="ready")v.worker.ready=!0,W();else{var J=H.id,re=v.processing[J];re!==void 0&&(H.isEvent?re.options&&typeof re.options.on=="function"&&re.options.on(H.payload):(delete v.processing[J],v.terminating===!0&&v.terminate(),H.error?re.resolver.reject(R(H.error)):re.resolver.resolve(H.result)))}});function I(H){v.terminated=!0;for(var J in v.processing)v.processing[J]!==void 0&&v.processing[J].resolver.reject(H);v.processing=Object.create(null)}function W(){var H=n(v.requestQueue.splice(0)),J;try{for(H.s();!(J=H.n()).done;){var re=J.value;v.worker.send(re)}}catch(ie){H.e(ie)}finally{H.f()}}var j=this.worker;this.worker.on("error",I),this.worker.on("exit",function(H,J){var re=`Workerpool Worker terminated Unexpectedly
`;re+="    exitCode: `"+H+"`\n",re+="    signalCode: `"+J+"`\n",re+="    workerpool.script: `"+v.script+"`\n",re+="    spawnArgs: `"+j.spawnargs+"`\n",re+="    spawnfile: `"+j.spawnfile+"`\n",re+="    stdout: `"+j.stdout+"`\n",re+="    stderr: `"+j.stderr+"`\n",I(new Error(re))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}P.prototype.methods=function(){return this.exec("methods")},P.prototype.exec=function(E,S,v,_){v||(v=s.defer());var I=++this.lastId;this.processing[I]={id:I,resolver:v,options:_};var W={id:I,method:E,params:S};this.terminated?v.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(W):this.requestQueue.push(W);var j=this;return v.promise.catch(function(H){if(H instanceof s.CancellationError||H instanceof s.TimeoutError)return delete j.processing[I],j.terminateAndNotify(!0).then(function(){throw H},function(J){throw J});throw H})},P.prototype.busy=function(){return Object.keys(this.processing).length>0},P.prototype.terminate=function(E,S){var v=this;if(E){for(var _ in this.processing)this.processing[_]!==void 0&&this.processing[_].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof S=="function"&&(this.terminationHandler=S),this.busy())this.terminating=!0;else{var I=function(H){if(v.terminated=!0,v.worker!=null&&v.worker.removeAllListeners&&v.worker.removeAllListeners("message"),v.worker=null,v.terminating=!1,v.terminationHandler)v.terminationHandler(H,v);else if(H)throw H};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){I(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var W=setTimeout(function(){v.worker&&v.worker.kill()},d);this.worker.once("exit",function(){clearTimeout(W),v.worker&&(v.worker.killed=!0),I()}),this.worker.ready?this.worker.send(p):this.requestQueue.push(p)}else this.worker.kill(),this.worker.killed=!0,I();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");I()}},P.prototype.terminateAndNotify=function(E,S){var v=s.defer();return S&&(v.promise.timeout=S),this.terminate(E,function(_,I){_?v.reject(_):v.resolve(I)}),v.promise},e.exports=P,e.exports._tryRequireWorkerThreads=y,e.exports._setupProcessWorker=D,e.exports._setupBrowserWorker=A,e.exports._setupWorkerThreadWorker=O,e.exports.ensureWorkerThreads=h},393:function(e){"use strict";var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,t,r){var n=r(781),o=function(u){return typeof u<"u"&&u.versions!=null&&u.versions.node!=null};e.exports.isNode=o,e.exports.platform=typeof process<"u"&&o(process)?"node":"browser";var i=a("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!i||i.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function a(s){try{return n(s)}catch{return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(722);e.pool=function(n,o){var i=__webpack_require__(799);return new i(n,o)},e.worker=function(n){var o=__webpack_require__(52);o.add(n)},e.workerEmit=function(n){var o=__webpack_require__(52);o.emit(n)},e.Promise=__webpack_require__(446),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})});var u1=b((JQ,s1)=>{"use strict";var YL=["h","min","s","ms","\u03BCs","ns"],QL=["hour","minute","second","millisecond","microsecond","nanosecond"],a1=[3600,60,1,1e6,1e3,1];s1.exports=function(e,t){var r,n,o,i,a,s,u,l,c,f;if(r=!1,n=!1,t&&(r=t.verbose||!1,n=t.precise||!1),!Array.isArray(e)||e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")return"";for(e[1]<0&&(f=e[0]+e[1]/1e9,e[0]=parseInt(f),e[1]=parseFloat((f%1).toPrecision(9))*1e9),c="",o=0;o<6&&(i=o<3?0:1,a=e[i],o!==3&&o!==0&&(a=a%a1[o-1]),o===2&&(a+=e[1]/1e9),s=a/a1[o],!(s>=1&&(r&&(s=Math.floor(s)),n?l=s.toString():(u=s>=10?0:2,l=s.toFixed(u)),l.indexOf(".")>-1&&l[l.length-1]==="0"&&(l=l.replace(/\.?0+$/,"")),c&&(c+=" "),c+=l,r?(c+=" "+QL[o],l!=="1"&&(c+="s")):c+=" "+YL[o],!r)));o++);return c}});function Rr(e,t){for(var r in t)e[r]=t[r];return e}function b2(e){var t=e.parentNode;t&&t.removeChild(e)}function Q(e,t,r){var n,o,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?Ga.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Ha(e,a,n,o,null)}function Ha(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++h2};return o==null&&ee.vnode!=null&&ee.vnode(i),i}function _c(){return{current:null}}function Y(e){return e.children}function Et(e,t){this.props=e,this.context=t}function Va(e,t){if(t==null)return e.__?Va(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Va(e):null}function v2(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return v2(e)}}function nm(e){(!e.__d&&(e.__d=!0)&&Ua.push(e)&&!Ac.__r++||f2!==ee.debounceRendering)&&((f2=ee.debounceRendering)||setTimeout)(Ac)}function Ac(){for(var e;Ac.__r=Ua.length;)e=Ua.sort(function(t,r){return t.__v.__b-r.__v.__b}),Ua=[],e.some(function(t){var r,n,o,i,a,s;t.__d&&(a=(i=(r=t).__v).__e,(s=r.__P)&&(n=[],(o=Rr({},i)).__v=i.__v+1,om(s,i,o,r.__n,s.ownerSVGElement!==void 0,i.__h!=null?[a]:null,n,a??Va(i),i.__h),S2(n,i),i.__e!=a&&v2(i)))})}function w2(e,t,r,n,o,i,a,s,u,l){var c,f,p,d,h,g,y,w=n&&n.__k||y2,x=w.length;for(r.__k=[],c=0;c<t.length;c++)if((d=r.__k[c]=(d=t[c])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?Ha(null,d,null,null,d):Array.isArray(d)?Ha(Y,{children:d},null,null,null):d.__b>0?Ha(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null){if(d.__=r,d.__b=r.__b+1,(p=w[c])===null||p&&d.key==p.key&&d.type===p.type)w[c]=void 0;else for(f=0;f<x;f++){if((p=w[f])&&d.key==p.key&&d.type===p.type){w[f]=void 0;break}p=null}om(e,d,p=p||kc,o,i,a,s,u,l),h=d.__e,(f=d.ref)&&p.ref!=f&&(y||(y=[]),p.ref&&y.push(p.ref,null,d),y.push(f,d.__c||h,d)),h!=null?(g==null&&(g=h),typeof d.type=="function"&&d.__k===p.__k?d.__d=u=x2(d,u,e):u=E2(e,d,p,w,h,u),typeof r.type=="function"&&(r.__d=u)):u&&p.__e==u&&u.parentNode!=e&&(u=Va(p))}for(r.__e=g,c=x;c--;)w[c]!=null&&A2(w[c],w[c]);if(y)for(c=0;c<y.length;c++)k2(y[c],y[++c],y[++c])}function x2(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t=typeof n.type=="function"?x2(n,t,r):E2(r,n,n,o,n.__e,t));return t}function fr(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){fr(r,t)}):t.push(e)),t}function E2(e,t,r,n,o,i){var a,s,u;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(r==null||o!=i||o.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<n.length;u+=1)if(s==o)break e;e.insertBefore(o,i),a=i}return a!==void 0?a:o.nextSibling}function aq(e,t,r,n,o){var i;for(i in r)i==="children"||i==="key"||i in t||Ic(e,i,null,r[i],n);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===t[i]||Ic(e,i,t[i],r[i],n)}function p2(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||iq.test(t)?r:r+"px"}function Ic(e,t,r,n,o){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||p2(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||p2(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?m2:d2,i):e.removeEventListener(t,i?m2:d2,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,r))}}function d2(e){this.l[e.type+!1](ee.event?ee.event(e):e)}function m2(e){this.l[e.type+!0](ee.event?ee.event(e):e)}function om(e,t,r,n,o,i,a,s,u){var l,c,f,p,d,h,g,y,w,x,A,O,D,F,R,P=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(u=r.__h,s=t.__e=r.__e,t.__h=null,i=[s]),(l=ee.__b)&&l(t);try{e:if(typeof P=="function"){if(y=t.props,w=(l=P.contextType)&&n[l.__c],x=l?w?w.props.value:l.__:n,r.__c?g=(c=t.__c=r.__c).__=c.__E:("prototype"in P&&P.prototype.render?t.__c=c=new P(y,x):(t.__c=c=new Et(y,x),c.constructor=P,c.render=uq),w&&w.sub(c),c.props=y,c.state||(c.state={}),c.context=x,c.__n=n,f=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),P.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Rr({},c.__s)),Rr(c.__s,P.getDerivedStateFromProps(y,c.__s))),p=c.props,d=c.state,f)P.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(P.getDerivedStateFromProps==null&&y!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,x),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,x)===!1||t.__v===r.__v){for(c.props=y,c.state=c.__s,t.__v!==r.__v&&(c.__d=!1),c.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(E){E&&(E.__=t)}),A=0;A<c._sb.length;A++)c.__h.push(c._sb[A]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,x),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,d,h)})}if(c.context=x,c.props=y,c.__v=t,c.__P=e,O=ee.__r,D=0,"prototype"in P&&P.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(t),l=c.render(c.props,c.state,c.context),F=0;F<c._sb.length;F++)c.__h.push(c._sb[F]);c._sb=[]}else do c.__d=!1,O&&O(t),l=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++D<25);c.state=c.__s,c.getChildContext!=null&&(n=Rr(Rr({},n),c.getChildContext())),f||c.getSnapshotBeforeUpdate==null||(h=c.getSnapshotBeforeUpdate(p,d)),R=l!=null&&l.type===Y&&l.key==null?l.props.children:l,w2(e,Array.isArray(R)?R:[R],t,r,n,o,i,a,s,u),c.base=t.__e,t.__h=null,c.__h.length&&a.push(c),g&&(c.__E=c.__=null),c.__e=!1}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=sq(r.__e,t,r,n,o,i,a,u);(l=ee.diffed)&&l(t)}catch(E){t.__v=null,(u||i!=null)&&(t.__e=s,t.__h=!!u,i[i.indexOf(s)]=null),ee.__e(E,t,r)}}function S2(e,t){ee.__c&&ee.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){ee.__e(n,r.__v)}})}function sq(e,t,r,n,o,i,a,s){var u,l,c,f=r.props,p=t.props,d=t.type,h=0;if(d==="svg"&&(o=!0),i!=null){for(;h<i.length;h++)if((u=i[h])&&"setAttribute"in u==!!d&&(d?u.localName===d:u.nodeType===3)){e=u,i[h]=null;break}}if(e==null){if(d===null)return document.createTextNode(p);e=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),i=null,s=!1}if(d===null)f===p||s&&e.data===p||(e.data=p);else{if(i=i&&Ga.call(e.childNodes),l=(f=r.props||kc).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!s){if(i!=null)for(f={},h=0;h<e.attributes.length;h++)f[e.attributes[h].name]=e.attributes[h].value;(c||l)&&(c&&(l&&c.__html==l.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(aq(e,p,f,o,s),c)t.__k=[];else if(h=t.props.children,w2(e,Array.isArray(h)?h:[h],t,r,n,o&&d!=="foreignObject",i,a,i?i[0]:r.__k&&Va(r,0),s),i!=null)for(h=i.length;h--;)i[h]!=null&&b2(i[h]);s||("value"in p&&(h=p.value)!==void 0&&(h!==e.value||d==="progress"&&!h||d==="option"&&h!==f.value)&&Ic(e,"value",h,f.value,!1),"checked"in p&&(h=p.checked)!==void 0&&h!==e.checked&&Ic(e,"checked",h,f.checked,!1))}return e}function k2(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){ee.__e(n,r)}}function A2(e,t,r){var n,o;if(ee.unmount&&ee.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||k2(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){ee.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&A2(n[o],t,r||typeof e.type!="function");r||e.__e==null||b2(e.__e),e.__=e.__e=e.__d=void 0}function uq(e,t,r){return this.constructor(e,r)}function Go(e,t,r){var n,o,i;ee.__&&ee.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],om(t,e=(!n&&r||t).__k=Q(Y,null,[e]),o||kc,kc,t.ownerSVGElement!==void 0,!n&&r?[r]:o?null:t.firstChild?Ga.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n),S2(i,e)}function im(e,t){Go(e,t,im)}function I2(e,t,r){var n,o,i,a=Rr({},e.props);for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];return arguments.length>2&&(a.children=arguments.length>3?Ga.call(arguments,2):r),Ha(e.type,a,n||e.key,o||e.ref,null)}function we(e,t){var r={__c:t="__cC"+g2++,__:e,Consumer:function(n,o){return n.children(o)},Provider:function(n){var o,i;return this.getChildContext||(o=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&o.some(nm)},this.sub=function(a){o.push(a);var s=a.componentWillUnmount;a.componentWillUnmount=function(){o.splice(o.indexOf(a),1),s&&s.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}var Ga,ee,h2,oq,Ua,f2,g2,kc,y2,iq,Ko=Ou(()=>{kc={},y2=[],iq=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;Ga=y2.slice,ee={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(s){e=s}throw e}},h2=0,oq=function(e){return e!=null&&e.constructor===void 0},Et.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Rr({},this.state),typeof e=="function"&&(e=e(Rr({},r),this.props)),e&&Rr(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),nm(this))},Et.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),nm(this))},Et.prototype.render=Y,Ua=[],Ac.__r=0,g2=0});function Wn(e,t){ee.__h&&ee.__h(Ee,e,Jo||t),Jo=0;var r=Ee.__H||(Ee.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:Cc}),r.__[e]}function $(e){return Jo=1,pt(R2,e)}function pt(e,t,r){var n=Wn(cn++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):R2(void 0,t),function(i){var a=n.__N?n.__N[0]:n.__[0],s=n.t(a,i);a!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=Ee,!Ee.u)){Ee.u=!0;var o=Ee.shouldComponentUpdate;Ee.shouldComponentUpdate=function(i,a,s){if(!n.__c.__H)return!0;var u=n.__c.__H.__.filter(function(c){return c.__c});if(u.every(function(c){return!c.__N}))return!o||o.call(this,i,a,s);var l=!1;return u.forEach(function(c){if(c.__N){var f=c.__[0];c.__=c.__N,c.__N=void 0,f!==c.__[0]&&(l=!0)}}),!(!l&&n.__c.props===i)&&(!o||o.call(this,i,a,s))}}return n.__N||n.__}function L(e,t){var r=Wn(cn++,3);!ee.__s&&lm(r.__H,t)&&(r.__=e,r.i=t,Ee.__H.__h.push(r))}function et(e,t){var r=Wn(cn++,4);!ee.__s&&lm(r.__H,t)&&(r.__=e,r.i=t,Ee.__h.push(r))}function N(e){return Jo=5,G(function(){return{current:e}},[])}function um(e,t,r){Jo=6,et(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function G(e,t){var r=Wn(cn++,7);return lm(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function K(e,t){return Jo=8,G(function(){return e},t)}function V(e){var t=Ee.context[e.__c],r=Wn(cn++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(Ee)),t.props.value):e.__}function Un(e,t){ee.useDebugValue&&ee.useDebugValue(t?t(e):e)}function cq(e){var t=Wn(cn++,10),r=$();return t.__=e,Ee.componentDidCatch||(Ee.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function cm(){var e=Wn(cn++,11);if(!e.__){for(var t=Ee.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function lq(){for(var e;e=P2.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Tc),e.__H.__h.forEach(sm),e.__H.__h=[]}catch(t){e.__H.__h=[],ee.__e(t,e.__v)}}function fq(e){var t,r=function(){clearTimeout(n),N2&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);N2&&(t=requestAnimationFrame(r))}function Tc(e){var t=Ee,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),Ee=t}function sm(e){var t=Ee;e.__c=e.__(),Ee=t}function lm(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function R2(e,t){return typeof t=="function"?t(e):t}var cn,Ee,am,_2,Jo,P2,Cc,C2,T2,O2,D2,F2,N2,fm=Ou(()=>{Ko();Jo=0,P2=[],Cc=[],C2=ee.__b,T2=ee.__r,O2=ee.diffed,D2=ee.__c,F2=ee.unmount;ee.__b=function(e){Ee=null,C2&&C2(e)},ee.__r=function(e){T2&&T2(e),cn=0;var t=(Ee=e.__c).__H;t&&(am===Ee?(t.__h=[],Ee.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=Cc,r.__N=r.i=void 0})):(t.__h.forEach(Tc),t.__h.forEach(sm),t.__h=[])),am=Ee},ee.diffed=function(e){O2&&O2(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(P2.push(t)!==1&&_2===ee.requestAnimationFrame||((_2=ee.requestAnimationFrame)||fq)(lq)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==Cc&&(r.__=r.__V),r.i=void 0,r.__V=Cc})),am=Ee=null},ee.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Tc),r.__h=r.__h.filter(function(n){return!n.__||sm(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],ee.__e(n,r.__v)}}),D2&&D2(e,t)},ee.unmount=function(e){F2&&F2(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Tc(n)}catch(o){t=o}}),r.__H=void 0,t&&ee.__e(t,r.__v))};N2=typeof requestAnimationFrame=="function"});function U2(e,t){for(var r in t)e[r]=t[r];return e}function dm(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function pm(e,t){return e===t&&(e!==0||1/e==1/t)||e!=e&&t!=t}function Oc(e){this.props=e}function Ue(e,t){function r(o){var i=this.props.ref,a=i==o.ref;return!a&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!a:dm(this.props,o)}function n(o){return this.shouldComponentUpdate=r,Q(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}function te(e){function t(r){var n=U2({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=pq,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}function H2(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=U2({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return H2(n,t,r)})),e}function V2(e,t,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return V2(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}function Ka(){this.__u=0,this.t=null,this.__b=null}function G2(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function K2(e){var t,r,n;function o(i){if(t||(t=e()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw t;return Q(r,i)}return o.displayName="Lazy",o.__f=!0,o}function Zo(){this.u=null,this.o=null}function mq(e){return this.getChildContext=function(){return e.context},e.children}function hq(e){var t=this,r=e.i;t.componentWillUnmount=function(){Go(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,o){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),Go(Q(mq,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Dc(e,t){var r=Q(hq,{__v:e,i:t});return r.containerInfo=t,r}function Z2(e,t,r){return t.__k==null&&(t.textContent=""),Go(e,t),typeof r=="function"&&r(),e?e.__c:null}function Y2(e,t,r){return im(e,t),typeof r=="function"&&r(),e?e.__c:null}function vq(){}function wq(){return this.cancelBubble}function xq(){return this.defaultPrevented}function eE(e){return Q.bind(null,e)}function St(e){return!!e&&e.$$typeof===J2}function kt(e){return St(e)?I2.apply(null,arguments):e}function tE(e){return!!e.__k&&(Go(null,e),!0)}function rE(e){return e&&(e.base||e.nodeType===1&&e)||null}function mm(e){e()}function oE(e){return e}function iE(){return[!1,mm]}function sE(e,t){var r=t(),n=$({h:{__:r,v:t}}),o=n[0].h,i=n[1];return et(function(){o.__=r,o.v=t,pm(o.__,t())||i({h:o})},[e,r,t]),L(function(){return pm(o.__,o.v())||i({h:o}),e(function(){pm(o.__,o.v())||i({h:o})})},[e]),r}var M2,pq,$2,He,dq,L2,q2,J2,gq,yq,bq,B2,Q2,j2,z2,W2,X2,Eq,ln,pr,nE,aE,q,hm=Ou(()=>{Ko();Ko();fm();fm();(Oc.prototype=new Et).isPureReactComponent=!0,Oc.prototype.shouldComponentUpdate=function(e,t){return dm(this.props,e)||dm(this.state,t)};M2=ee.__b;ee.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),M2&&M2(e)};pq=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;$2=function(e,t){return e==null?null:fr(fr(e).map(t))},He={map:$2,forEach:$2,count:function(e){return e?fr(e).length:0},only:function(e){var t=fr(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:fr},dq=ee.__e;ee.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}dq(e,t,r,n)};L2=ee.unmount;ee.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),L2&&L2(e)},(Ka.prototype=new Et).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var o=G2(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(s):s())};r.__R=a;var s=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=V2(l,l.__c.__P,l.__c.__O)}var c;for(n.setState({__a:n.__b=null});c=n.t.pop();)c.forceUpdate()}},u=t.__h===!0;n.__u++||u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Ka.prototype.componentWillUnmount=function(){this.t=[]},Ka.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=H2(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&Q(Y,null,e.fallback);return o&&(o.__h=null),[Q(Y,null,t.__a?null:e.children),o]};q2=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};(Zo.prototype=new Et).__a=function(e){var t=this,r=G2(t.__v),n=t.o.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),q2(t,e,n)):o()};r?r(i):i()}},Zo.prototype.render=function(e){this.u=null,this.o=new Map;var t=fr(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},Zo.prototype.componentDidUpdate=Zo.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){q2(e,r,t)})};J2=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,gq=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yq=typeof document<"u",bq=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};Et.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Et.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});B2=ee.event;ee.event=function(e){return B2&&(e=B2(e)),e.persist=vq,e.isPropagationStopped=wq,e.isDefaultPrevented=xq,e.nativeEvent=e};j2={configurable:!0,get:function(){return this.class}},z2=ee.vnode;ee.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){var o=t.indexOf("-")===-1;for(var i in n={},r){var a=r[i];yq&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in r&&a==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!bq(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():o&&gq.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=a)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=fr(r.children).forEach(function(s){s.props.selected=n.value.indexOf(s.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=fr(r.children).forEach(function(s){s.props.selected=n.multiple?n.defaultValue.indexOf(s.props.value)!=-1:n.defaultValue==s.props.value})),e.props=n,r.class!=r.className&&(j2.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",j2))}e.$$typeof=J2,z2&&z2(e)};W2=ee.__r;ee.__r=function(e){W2&&W2(e),Q2=e.__c};X2={ReactCurrentDispatcher:{current:{readContext:function(e){return Q2.__n[e.__c].props.value}}}},Eq="17.0.2";ln=function(e,t){return e(t)},pr=function(e,t){return e(t)},nE=Y;aE=et;q={useState:$,useId:cm,useReducer:pt,useEffect:L,useLayoutEffect:et,useInsertionEffect:aE,useTransition:iE,useDeferredValue:oE,useSyncExternalStore:sE,startTransition:mm,useRef:N,useImperativeHandle:um,useMemo:G,useCallback:K,useContext:V,useDebugValue:Un,version:"17.0.2",Children:He,render:Z2,hydrate:Y2,unmountComponentAtNode:tE,createPortal:Dc,createElement:Q,createContext:we,createFactory:eE,cloneElement:kt,createRef:_c,Fragment:Y,isValidElement:St,findDOMNode:rE,Component:Et,PureComponent:Oc,memo:Ue,forwardRef:te,flushSync:pr,unstable_batchedUpdates:ln,StrictMode:nE,Suspense:Ka,SuspenseList:Zo,lazy:K2,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:X2}});var At={};wb(At,{Children:()=>He,Component:()=>Et,Fragment:()=>Y,PureComponent:()=>Oc,StrictMode:()=>nE,Suspense:()=>Ka,SuspenseList:()=>Zo,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>X2,cloneElement:()=>kt,createContext:()=>we,createElement:()=>Q,createFactory:()=>eE,createPortal:()=>Dc,createRef:()=>_c,default:()=>q,findDOMNode:()=>rE,flushSync:()=>pr,forwardRef:()=>te,hydrate:()=>Y2,isValidElement:()=>St,lazy:()=>K2,memo:()=>Ue,render:()=>Z2,startTransition:()=>mm,unmountComponentAtNode:()=>tE,unstable_batchedUpdates:()=>ln,useCallback:()=>K,useContext:()=>V,useDebugValue:()=>Un,useDeferredValue:()=>oE,useEffect:()=>L,useErrorBoundary:()=>cq,useId:()=>cm,useImperativeHandle:()=>um,useInsertionEffect:()=>aE,useLayoutEffect:()=>et,useMemo:()=>G,useReducer:()=>pt,useRef:()=>N,useState:()=>$,useSyncExternalStore:()=>sE,useTransition:()=>iE,version:()=>Eq});var T=Ou(()=>{hm();hm()});var Sm=b((Jee,xE)=>{function Pq(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}xE.exports=Pq});var SE=b((Zee,EE)=>{var Rq=typeof global=="object"&&global&&global.Object===Object&&global;EE.exports=Rq});var km=b((Yee,kE)=>{var Mq=SE(),$q=typeof self=="object"&&self&&self.Object===Object&&self,Lq=Mq||$q||Function("return this")();kE.exports=Lq});var IE=b((Qee,AE)=>{var qq=km(),Bq=function(){return qq.Date.now()};AE.exports=Bq});var CE=b((Xee,_E)=>{var jq=/\s/;function zq(e){for(var t=e.length;t--&&jq.test(e.charAt(t)););return t}_E.exports=zq});var OE=b((ete,TE)=>{var Wq=CE(),Uq=/^\s+/;function Hq(e){return e&&e.slice(0,Wq(e)+1).replace(Uq,"")}TE.exports=Hq});var Am=b((tte,DE)=>{var Vq=km(),Gq=Vq.Symbol;DE.exports=Gq});var RE=b((rte,PE)=>{var FE=Am(),NE=Object.prototype,Kq=NE.hasOwnProperty,Jq=NE.toString,Qa=FE?FE.toStringTag:void 0;function Zq(e){var t=Kq.call(e,Qa),r=e[Qa];try{e[Qa]=void 0;var n=!0}catch{}var o=Jq.call(e);return n&&(t?e[Qa]=r:delete e[Qa]),o}PE.exports=Zq});var $E=b((nte,ME)=>{var Yq=Object.prototype,Qq=Yq.toString;function Xq(e){return Qq.call(e)}ME.exports=Xq});var jE=b((ote,BE)=>{var LE=Am(),e4=RE(),t4=$E(),r4="[object Null]",n4="[object Undefined]",qE=LE?LE.toStringTag:void 0;function o4(e){return e==null?e===void 0?n4:r4:qE&&qE in Object(e)?e4(e):t4(e)}BE.exports=o4});var WE=b((ite,zE)=>{function i4(e){return e!=null&&typeof e=="object"}zE.exports=i4});var HE=b((ate,UE)=>{var a4=jE(),s4=WE(),u4="[object Symbol]";function c4(e){return typeof e=="symbol"||s4(e)&&a4(e)==u4}UE.exports=c4});var JE=b((ste,KE)=>{var l4=OE(),VE=Sm(),f4=HE(),GE=0/0,p4=/^[-+]0x[0-9a-f]+$/i,d4=/^0b[01]+$/i,m4=/^0o[0-7]+$/i,h4=parseInt;function g4(e){if(typeof e=="number")return e;if(f4(e))return GE;if(VE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=l4(e);var r=d4.test(e);return r||m4.test(e)?h4(e.slice(2),r?2:8):p4.test(e)?GE:+e}KE.exports=g4});var QE=b((ute,YE)=>{var y4=Sm(),Im=IE(),ZE=JE(),b4="Expected a function",v4=Math.max,w4=Math.min;function x4(e,t,r){var n,o,i,a,s,u,l=0,c=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(b4);t=ZE(t)||0,y4(r)&&(c=!!r.leading,f="maxWait"in r,i=f?v4(ZE(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function d(F){var R=n,P=o;return n=o=void 0,l=F,a=e.apply(P,R),a}function h(F){return l=F,s=setTimeout(w,t),c?d(F):a}function g(F){var R=F-u,P=F-l,E=t-R;return f?w4(E,i-P):E}function y(F){var R=F-u,P=F-l;return u===void 0||R>=t||R<0||f&&P>=i}function w(){var F=Im();if(y(F))return x(F);s=setTimeout(w,g(F))}function x(F){return s=void 0,p&&n?d(F):(n=o=void 0,a)}function A(){s!==void 0&&clearTimeout(s),l=0,n=u=o=s=void 0}function O(){return s===void 0?a:x(Im())}function D(){var F=Im(),R=y(F);if(n=arguments,o=this,u=F,R){if(s===void 0)return h(u);if(f)return clearTimeout(s),s=setTimeout(w,t),d(u)}return s===void 0&&(s=setTimeout(w,t)),a}return D.cancel=A,D.flush=O,D}YE.exports=x4});var JS=b((ise,KS)=>{"use strict";KS.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var ek=b((ase,XS)=>{"use strict";var QS="%[a-f0-9]{2}",ZS=new RegExp("("+QS+")|([^%]+?)","gi"),YS=new RegExp("("+QS+")+","gi");function Km(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Km(r),Km(n))}function x6(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(ZS)||[],r=1;r<t.length;r++)e=Km(t,r).join(""),t=e.match(ZS)||[];return e}}function E6(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=YS.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=x6(r[0]);n!==r[0]&&(t[r[0]]=n)}r=YS.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}XS.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return E6(e)}}});var rk=b((sse,tk)=>{"use strict";tk.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var ok=b((use,nk)=>{"use strict";nk.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],s=e[a];(o?t.indexOf(a)!==-1:t(a,s,e))&&(r[a]=s)}return r}});var Zm=b(dt=>{"use strict";var S6=JS(),k6=ek(),ak=rk(),A6=ok(),I6=e=>e==null,Jm=Symbol("encodeFragmentIdentifier");function _6(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[De(t,e),"[",o,"]"].join("")]:[...r,[De(t,e),"[",De(o,e),"]=",De(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[De(t,e),"[]"].join("")]:[...r,[De(t,e),"[]=",De(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[De(t,e),":list="].join("")]:[...r,[De(t,e),":list=",De(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[De(r,e),t,De(o,e)].join("")]:[[n,De(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,De(t,e)]:[...r,[De(t,e),"=",De(n,e)].join("")]}}function C6(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&qr(n,e).includes(e.arrayFormatSeparator);n=a?qr(n,e):n;let s=i||a?n.split(e.arrayFormatSeparator).map(u=>qr(u,e)):n===null?n:qr(n,e);o[r]=s};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&qr(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(s=>qr(s,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)}}}function sk(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function De(e,t){return t.encode?t.strict?S6(e):encodeURIComponent(e):e}function qr(e,t){return t.decode?k6(e):e}function uk(e){return Array.isArray(e)?e.sort():typeof e=="object"?uk(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function ck(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function T6(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function lk(e){e=ck(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ik(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function fk(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),sk(t.arrayFormatSeparator);let r=C6(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=ak(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:qr(a,t),r(qr(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=ik(i[a],t);else n[o]=ik(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=uk(a):o[i]=a,o},Object.create(null))}dt.extract=lk;dt.parse=fk;dt.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),sk(t.arrayFormatSeparator);let r=a=>t.skipNull&&I6(e[a])||t.skipEmptyString&&e[a]==="",n=_6(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let s=e[a];return s===void 0?"":s===null?De(a,t):Array.isArray(s)?s.length===0&&t.arrayFormat==="bracket-separator"?De(a,t)+"[]":s.reduce(n(a),[]).join("&"):De(a,t)+"="+De(s,t)}).filter(a=>a.length>0).join("&")};dt.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=ak(e,"#");return Object.assign({url:r.split("?")[0]||"",query:fk(lk(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:qr(n,t)}:{})};dt.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[Jm]:!0},t);let r=ck(e.url).split("?")[0]||"",n=dt.extract(e.url),o=dt.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=dt.stringify(i,t);a&&(a=`?${a}`);let s=T6(e.url);return e.fragmentIdentifier&&(s=`#${t[Jm]?De(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${s}`};dt.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[Jm]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=dt.parseUrl(e,r);return dt.stringifyUrl({url:n,query:A6(o,t),fragmentIdentifier:i},r)};dt.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return dt.pick(e,n,r)}});var sh=b((Yse,wk)=>{"use strict";var vk=Object.prototype.toString;wk.exports=function(t){var r=vk.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&vk.call(t.callee)==="[object Function]"),n}});var Tk=b((Qse,Ck)=>{"use strict";var _k;Object.keys||(gs=Object.prototype.hasOwnProperty,uh=Object.prototype.toString,xk=sh(),ch=Object.prototype.propertyIsEnumerable,Ek=!ch.call({toString:null},"toString"),Sk=ch.call(function(){},"prototype"),ys=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],pl=function(e){var t=e.constructor;return t&&t.prototype===e},kk={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ak=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!kk["$"+e]&&gs.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{pl(window[e])}catch{return!0}}catch{return!0}return!1}(),Ik=function(e){if(typeof window>"u"||!Ak)return pl(e);try{return pl(e)}catch{return!1}},_k=function(t){var r=t!==null&&typeof t=="object",n=uh.call(t)==="[object Function]",o=xk(t),i=r&&uh.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var s=Sk&&n;if(i&&t.length>0&&!gs.call(t,0))for(var u=0;u<t.length;++u)a.push(String(u));if(o&&t.length>0)for(var l=0;l<t.length;++l)a.push(String(l));else for(var c in t)!(s&&c==="prototype")&&gs.call(t,c)&&a.push(String(c));if(Ek)for(var f=Ik(t),p=0;p<ys.length;++p)!(f&&ys[p]==="constructor")&&gs.call(t,ys[p])&&a.push(ys[p]);return a});var gs,uh,xk,ch,Ek,Sk,ys,pl,kk,Ak,Ik;Ck.exports=_k});var Nk=b((Xse,Fk)=>{"use strict";var N6=Array.prototype.slice,P6=sh(),Ok=Object.keys,dl=Ok?function(t){return Ok(t)}:Tk(),Dk=Object.keys;dl.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return P6(n)?Dk(N6.call(n)):Dk(n)})}else Object.keys=dl;return Object.keys||dl};Fk.exports=dl});var lh=b((eue,Pk)=>{"use strict";Pk.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0}});var fh=b((tue,Mk)=>{"use strict";var Rk=typeof Symbol<"u"&&Symbol,R6=lh();Mk.exports=function(){return typeof Rk!="function"||typeof Symbol!="function"||typeof Rk("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:R6()}});var Lk=b((rue,$k)=>{"use strict";var M6="Function.prototype.bind called on incompatible ",ph=Array.prototype.slice,$6=Object.prototype.toString,L6="[object Function]";$k.exports=function(t){var r=this;if(typeof r!="function"||$6.call(r)!==L6)throw new TypeError(M6+r);for(var n=ph.call(arguments,1),o,i=function(){if(this instanceof o){var c=r.apply(this,n.concat(ph.call(arguments)));return Object(c)===c?c:this}else return r.apply(t,n.concat(ph.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],u=0;u<a;u++)s.push("$"+u);if(o=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var l=function(){};l.prototype=r.prototype,o.prototype=new l,l.prototype=null}return o}});var ml=b((nue,qk)=>{"use strict";var q6=Lk();qk.exports=Function.prototype.bind||q6});var br=b((oue,Bk)=>{"use strict";var B6=ml();Bk.exports=B6.call(Function.call,Object.prototype.hasOwnProperty)});var he=b((iue,Hk)=>{"use strict";var pe,pi=SyntaxError,Uk=Function,fi=TypeError,dh=function(e){try{return Uk('"use strict"; return ('+e+").constructor;")()}catch{}},Gn=Object.getOwnPropertyDescriptor;if(Gn)try{Gn({},"")}catch{Gn=null}var mh=function(){throw new fi},j6=Gn?function(){try{return arguments.callee,mh}catch{try{return Gn(arguments,"callee").get}catch{return mh}}}():mh,ci=fh()(),vr=Object.getPrototypeOf||function(e){return e.__proto__},li={},z6=typeof Uint8Array>"u"?pe:vr(Uint8Array),Kn={"%AggregateError%":typeof AggregateError>"u"?pe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?pe:ArrayBuffer,"%ArrayIteratorPrototype%":ci?vr([][Symbol.iterator]()):pe,"%AsyncFromSyncIteratorPrototype%":pe,"%AsyncFunction%":li,"%AsyncGenerator%":li,"%AsyncGeneratorFunction%":li,"%AsyncIteratorPrototype%":li,"%Atomics%":typeof Atomics>"u"?pe:Atomics,"%BigInt%":typeof BigInt>"u"?pe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?pe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?pe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?pe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?pe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?pe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?pe:FinalizationRegistry,"%Function%":Uk,"%GeneratorFunction%":li,"%Int8Array%":typeof Int8Array>"u"?pe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?pe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?pe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ci?vr(vr([][Symbol.iterator]())):pe,"%JSON%":typeof JSON=="object"?JSON:pe,"%Map%":typeof Map>"u"?pe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ci?pe:vr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?pe:Promise,"%Proxy%":typeof Proxy>"u"?pe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?pe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?pe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ci?pe:vr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?pe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ci?vr(""[Symbol.iterator]()):pe,"%Symbol%":ci?Symbol:pe,"%SyntaxError%":pi,"%ThrowTypeError%":j6,"%TypedArray%":z6,"%TypeError%":fi,"%Uint8Array%":typeof Uint8Array>"u"?pe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?pe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?pe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?pe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?pe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?pe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?pe:WeakSet};try{null.error}catch(e){jk=vr(vr(e)),Kn["%Error.prototype%"]=jk}var jk,W6=function e(t){var r;if(t==="%AsyncFunction%")r=dh("async function () {}");else if(t==="%GeneratorFunction%")r=dh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=dh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=vr(o.prototype))}return Kn[t]=r,r},zk={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bs=ml(),hl=br(),U6=bs.call(Function.call,Array.prototype.concat),H6=bs.call(Function.apply,Array.prototype.splice),Wk=bs.call(Function.call,String.prototype.replace),gl=bs.call(Function.call,String.prototype.slice),V6=bs.call(Function.call,RegExp.prototype.exec),G6=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,K6=/\\(\\)?/g,J6=function(t){var r=gl(t,0,1),n=gl(t,-1);if(r==="%"&&n!=="%")throw new pi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new pi("invalid intrinsic syntax, expected opening `%`");var o=[];return Wk(t,G6,function(i,a,s,u){o[o.length]=s?Wk(u,K6,"$1"):a||i}),o},Z6=function(t,r){var n=t,o;if(hl(zk,n)&&(o=zk[n],n="%"+o[0]+"%"),hl(Kn,n)){var i=Kn[n];if(i===li&&(i=W6(n)),typeof i>"u"&&!r)throw new fi("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new pi("intrinsic "+t+" does not exist!")};Hk.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new fi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new fi('"allowMissing" argument must be a boolean');if(V6(/^%?[^%]*%?$/,t)===null)throw new pi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=J6(t),o=n.length>0?n[0]:"",i=Z6("%"+o+"%",r),a=i.name,s=i.value,u=!1,l=i.alias;l&&(o=l[0],H6(n,U6([0,1],l)));for(var c=1,f=!0;c<n.length;c+=1){var p=n[c],d=gl(p,0,1),h=gl(p,-1);if((d==='"'||d==="'"||d==="`"||h==='"'||h==="'"||h==="`")&&d!==h)throw new pi("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),o+="."+p,a="%"+o+"%",hl(Kn,a))s=Kn[a];else if(s!=null){if(!(p in s)){if(!r)throw new fi("base intrinsic for "+t+" exists, but the property is not available.");return}if(Gn&&c+1>=n.length){var g=Gn(s,p);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?s=g.get:s=s[p]}else f=hl(s,p),s=s[p];f&&!u&&(Kn[a]=s)}}return s}});var yh=b((aue,Vk)=>{"use strict";var Y6=he(),hh=Y6("%Object.defineProperty%",!0),gh=function(){if(hh)try{return hh({},"a",{value:1}),!0}catch{return!1}return!1};gh.hasArrayLengthDefineBug=function(){if(!gh())return null;try{return hh([],"length",{value:1}).length!==1}catch{return!0}};Vk.exports=gh});var yl=b((sue,Zk)=>{"use strict";var Q6=Nk(),X6=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",e9=Object.prototype.toString,t9=Array.prototype.concat,Gk=Object.defineProperty,r9=function(e){return typeof e=="function"&&e9.call(e)==="[object Function]"},n9=yh()(),Kk=Gk&&n9,o9=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!r9(n)||!n())return}Kk?Gk(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},Jk=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Q6(t);X6&&(n=t9.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)o9(e,n[o],t[n[o]],r[n[o]])};Jk.supportsDescriptors=!!Kk;Zk.exports=Jk});var eA=b((uue,Xk)=>{"use strict";var i9=br(),Qk=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",a9=Qk&&Array.prototype[Symbol.unscopables],Yk=TypeError;Xk.exports=function(t){if(typeof t!="string"||!t)throw new Yk("method must be a non-empty string");if(!i9(Array.prototype,t))throw new Yk("method must be on Array.prototype");Qk&&(a9[t]=!0)}});var vh=b((cue,bl)=>{"use strict";var bh=ml(),di=he(),nA=di("%Function.prototype.apply%"),oA=di("%Function.prototype.call%"),iA=di("%Reflect.apply%",!0)||bh.call(oA,nA),tA=di("%Object.getOwnPropertyDescriptor%",!0),Jn=di("%Object.defineProperty%",!0),s9=di("%Math.max%");if(Jn)try{Jn({},"a",{value:1})}catch{Jn=null}bl.exports=function(t){var r=iA(bh,oA,arguments);if(tA&&Jn){var n=tA(r,"length");n.configurable&&Jn(r,"length",{value:1+s9(0,t.length-(arguments.length-1))})}return r};var rA=function(){return iA(bh,nA,arguments)};Jn?Jn(bl.exports,"apply",{value:rA}):bl.exports.apply=rA});var wr=b((lue,uA)=>{"use strict";var aA=he(),sA=vh(),u9=sA(aA("String.prototype.indexOf"));uA.exports=function(t,r){var n=aA(t,!!r);return typeof n=="function"&&u9(t,".prototype.")>-1?sA(n):n}});var wh=b((fue,lA)=>{"use strict";var c9=he(),cA=c9("%Array%"),l9=!cA.isArray&&wr()("Object.prototype.toString");lA.exports=cA.isArray||function(t){return l9(t)==="[object Array]"}});var xh=b((pue,fA)=>{"use strict";fA.exports=wh()});var mA=b((due,dA)=>{"use strict";var pA=he(),f9=wr(),p9=pA("%TypeError%"),d9=xh(),m9=pA("%Reflect.apply%",!0)||f9("Function.prototype.apply");dA.exports=function(t,r){var n=arguments.length>2?arguments[2]:[];if(!d9(n))throw new p9("Assertion failed: optional `argumentsList`, if provided, must be a List");return m9(t,r,n)}});var mi=b((mue,hA)=>{"use strict";hA.exports=function(t){return typeof t=="string"||typeof t=="symbol"}});var yA=b((hue,gA)=>{"use strict";var h9=he(),vl=h9("%Object.getOwnPropertyDescriptor%",!0);if(vl)try{vl([],"length")}catch{vl=null}gA.exports=vl});var Eh=b((gue,bA)=>{"use strict";var g9=he(),y9=br(),b9=g9("%TypeError%");bA.exports=function(t,r){if(t.Type(r)!=="Object")return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var o in r)if(y9(r,o)&&!n[o])return!1;if(t.IsDataDescriptor(r)&&t.IsAccessorDescriptor(r))throw new b9("Property Descriptors may not be both accessor and data descriptors");return!0}});var wA=b((yue,vA)=>{"use strict";vA.exports=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(typeof t=="function"||typeof t=="object")return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"}});var it=b((bue,xA)=>{"use strict";var v9=wA();xA.exports=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":v9(t)}});var kA=b((vue,SA)=>{"use strict";var EA=br();SA.exports=function(t){return EA(t,"[[StartIndex]]")&&EA(t,"[[EndIndex]]")&&t["[[StartIndex]]"]>=0&&t["[[EndIndex]]"]>=t["[[StartIndex]]"]&&String(parseInt(t["[[StartIndex]]"],10))===String(t["[[StartIndex]]"])&&String(parseInt(t["[[EndIndex]]"],10))===String(t["[[EndIndex]]"])}});var vs=b((wue,CA)=>{"use strict";var AA=he(),IA=AA("%TypeError%"),w9=AA("%SyntaxError%"),Ht=br(),x9=kA(),_A={"Property Descriptor":function(t){var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};if(!t)return!1;for(var n in t)if(Ht(t,n)&&!r[n])return!1;var o=Ht(t,"[[Value]]"),i=Ht(t,"[[Get]]")||Ht(t,"[[Set]]");if(o&&i)throw new IA("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":x9,"Iterator Record":function(t){return Ht(t,"[[Iterator]]")&&Ht(t,"[[NextMethod]]")&&Ht(t,"[[Done]]")},"PromiseCapability Record":function(t){return!!t&&Ht(t,"[[Resolve]]")&&typeof t["[[Resolve]]"]=="function"&&Ht(t,"[[Reject]]")&&typeof t["[[Reject]]"]=="function"&&Ht(t,"[[Promise]]")&&t["[[Promise]]"]&&typeof t["[[Promise]]"].then=="function"},"AsyncGeneratorRequest Record":function(t){return!!t&&Ht(t,"[[Completion]]")&&Ht(t,"[[Capability]]")&&_A["PromiseCapability Record"](t["[[Capability]]"])}};CA.exports=function(t,r,n,o){var i=_A[r];if(typeof i!="function")throw new w9("unknown record type: "+r);if(t(o)!=="Object"||!i(o))throw new IA(n+" must be a "+r)}});var wl=b((xue,OA)=>{"use strict";var TA=br(),E9=it(),S9=vs();OA.exports=function(t){return!(typeof t>"u"||(S9(E9,"Property Descriptor","Desc",t),!TA(t,"[[Get]]")&&!TA(t,"[[Set]]")))}});var xl=b((Eue,FA)=>{"use strict";var DA=br(),k9=it(),A9=vs();FA.exports=function(t){return!(typeof t>"u"||(A9(k9,"Property Descriptor","Desc",t),!DA(t,"[[Value]]")&&!DA(t,"[[Writable]]")))}});var Sh=b((Sue,NA)=>{"use strict";NA.exports=function(t){return t===null||typeof t!="function"&&typeof t!="object"}});var $A=b((kue,MA)=>{"use strict";var RA=he(),I9=RA("%Object.preventExtensions%",!0),_9=RA("%Object.isExtensible%",!0),PA=Sh();MA.exports=I9?function(t){return!PA(t)&&_9(t)}:function(t){return!PA(t)}});var qA=b((Aue,LA)=>{"use strict";LA.exports=function(t){return!!t}});var Ch=b((Iue,zA)=>{"use strict";var jA=Function.prototype.toString,hi=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Ah,El;if(typeof hi=="function"&&typeof Object.defineProperty=="function")try{Ah=Object.defineProperty({},"length",{get:function(){throw El}}),El={},hi(function(){throw 42},null,Ah)}catch(e){e!==El&&(hi=null)}else hi=null;var C9=/^\s*class\b/,Ih=function(t){try{var r=jA.call(t);return C9.test(r)}catch{return!1}},kh=function(t){try{return Ih(t)?!1:(jA.call(t),!0)}catch{return!1}},Sl=Object.prototype.toString,T9="[object Object]",O9="[object Function]",D9="[object GeneratorFunction]",F9="[object HTMLAllCollection]",N9="[object HTML document.all class]",P9="[object HTMLCollection]",R9=typeof Symbol=="function"&&!!Symbol.toStringTag,M9=!(0 in[,]),_h=function(){return!1};typeof document=="object"&&(BA=document.all,Sl.call(BA)===Sl.call(document.all)&&(_h=function(t){if((M9||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=Sl.call(t);return(r===F9||r===N9||r===P9||r===T9)&&t("")==null}catch{}return!1}));var BA;zA.exports=hi?function(t){if(_h(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{hi(t,null,Ah)}catch(r){if(r!==El)return!1}return!Ih(t)&&kh(t)}:function(t){if(_h(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(R9)return kh(t);if(Ih(t))return!1;var r=Sl.call(t);return r!==O9&&r!==D9&&!/^\[object HTML/.test(r)?!1:kh(t)}});var Th=b((_ue,WA)=>{"use strict";WA.exports=Ch()});var VA=b((Cue,HA)=>{"use strict";var xr=br(),$9=he(),kl=$9("%TypeError%"),L9=it(),Oh=qA(),UA=Th();HA.exports=function(t){if(L9(t)!=="Object")throw new kl("ToPropertyDescriptor requires an object");var r={};if(xr(t,"enumerable")&&(r["[[Enumerable]]"]=Oh(t.enumerable)),xr(t,"configurable")&&(r["[[Configurable]]"]=Oh(t.configurable)),xr(t,"value")&&(r["[[Value]]"]=t.value),xr(t,"writable")&&(r["[[Writable]]"]=Oh(t.writable)),xr(t,"get")){var n=t.get;if(typeof n<"u"&&!UA(n))throw new kl("getter must be a function");r["[[Get]]"]=n}if(xr(t,"set")){var o=t.set;if(typeof o<"u"&&!UA(o))throw new kl("setter must be a function");r["[[Set]]"]=o}if((xr(r,"[[Get]]")||xr(r,"[[Set]]"))&&(xr(r,"[[Value]]")||xr(r,"[[Writable]]")))throw new kl("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var ws=b((Tue,GA)=>{"use strict";GA.exports=Number.isNaN||function(t){return t!==t}});var Dh=b((Oue,JA)=>{"use strict";var KA=ws();JA.exports=function(t,r){return t===r?t===0?1/t===1/r:!0:KA(t)&&KA(r)}});var eI=b((Due,XA)=>{"use strict";var YA=yh(),q9=he(),ZA=YA()&&q9("%Object.defineProperty%",!0),QA=YA.hasArrayLengthDefineBug(),B9=QA&&wh(),j9=wr(),z9=j9("Object.prototype.propertyIsEnumerable");XA.exports=function(t,r,n,o,i,a){if(!ZA){if(!t(a)||!a["[[Configurable]]"]||!a["[[Writable]]"]||i in o&&z9(o,i)!==!!a["[[Enumerable]]"])return!1;var s=a["[[Value]]"];return o[i]=s,r(o[i],s)}return QA&&i==="length"&&"[[Value]]"in a&&B9(o)&&o.length!==a["[[Value]]"]?(o.length=a["[[Value]]"],o.length===a["[[Value]]"]):(ZA(o,i,n(a)),!0)}});var rI=b((Fue,tI)=>{"use strict";tI.exports=function(t,r){return!!r&&typeof r=="object"&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))}});var oI=b((Nue,nI)=>{"use strict";nI.exports=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r}});var aI=b((Pue,iI)=>{"use strict";var W9=vs(),U9=oI(),H9=it();iI.exports=function(t){return typeof t<"u"&&W9(H9,"Property Descriptor","Desc",t),U9(t)}});var uI=b((Rue,sI)=>{"use strict";var V9=vs(),G9=wl(),K9=xl(),J9=it();sI.exports=function(t){return typeof t>"u"?!1:(V9(J9,"Property Descriptor","Desc",t),!G9(t)&&!K9(t))}});var fI=b((Mue,lI)=>{"use strict";var Z9=he(),gi=Z9("%TypeError%"),xs=eI(),Y9=rI(),cI=Eh(),Es=aI(),Br=wl(),Er=xl(),Q9=uI(),X9=mi(),Sr=Dh(),yi=it();lI.exports=function(t,r,n,o,i){var a=yi(t);if(a!=="Undefined"&&a!=="Object")throw new gi("Assertion failed: O must be undefined or an Object");if(!X9(r))throw new gi("Assertion failed: P must be a Property Key");if(yi(n)!=="Boolean")throw new gi("Assertion failed: extensible must be a Boolean");if(!cI({Type:yi,IsDataDescriptor:Er,IsAccessorDescriptor:Br},o))throw new gi("Assertion failed: Desc must be a Property Descriptor");if(yi(i)!=="Undefined"&&!cI({Type:yi,IsDataDescriptor:Er,IsAccessorDescriptor:Br},i))throw new gi("Assertion failed: current must be a Property Descriptor, or undefined");if(yi(i)==="Undefined")return n?a==="Undefined"?!0:Br(o)?xs(Er,Sr,Es,t,r,o):xs(Er,Sr,Es,t,r,{"[[Configurable]]":!!o["[[Configurable]]"],"[[Enumerable]]":!!o["[[Enumerable]]"],"[[Value]]":o["[[Value]]"],"[[Writable]]":!!o["[[Writable]]"]}):!1;if(!Y9({IsAccessorDescriptor:Br,IsDataDescriptor:Er},i))throw new gi("`current`, when present, must be a fully populated and valid Property Descriptor");if(!i["[[Configurable]]"]){if("[[Configurable]]"in o&&o["[[Configurable]]"]||"[[Enumerable]]"in o&&!Sr(o["[[Enumerable]]"],i["[[Enumerable]]"])||!Q9(o)&&!Sr(Br(o),Br(i)))return!1;if(Br(i)){if("[[Get]]"in o&&!Sr(o["[[Get]]"],i["[[Get]]"])||"[[Set]]"in o&&!Sr(o["[[Set]]"],i["[[Set]]"]))return!1}else if(!i["[[Writable]]"]&&("[[Writable]]"in o&&o["[[Writable]]"]||"[[Value]]"in o&&!Sr(o["[[Value]]"],i["[[Value]]"])))return!1}if(a!=="Undefined"){var s,u;return Er(i)&&Br(o)?(s=("[[Configurable]]"in o?o:i)["[[Configurable]]"],u=("[[Enumerable]]"in o?o:i)["[[Enumerable]]"],xs(Er,Sr,Es,t,r,{"[[Configurable]]":!!s,"[[Enumerable]]":!!u,"[[Get]]":("[[Get]]"in o?o:i)["[[Get]]"],"[[Set]]":("[[Set]]"in o?o:i)["[[Set]]"]})):Br(i)&&Er(o)?(s=("[[Configurable]]"in o?o:i)["[[Configurable]]"],u=("[[Enumerable]]"in o?o:i)["[[Enumerable]]"],xs(Er,Sr,Es,t,r,{"[[Configurable]]":!!s,"[[Enumerable]]":!!u,"[[Value]]":("[[Value]]"in o?o:i)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in o?o:i)["[[Writable]]"]})):xs(Er,Sr,Es,t,r,o)}return!0}});var bI=b(($ue,yI)=>{"use strict";var gI=he(),pI=yA(),dI=gI("%SyntaxError%"),Fh=gI("%TypeError%"),eB=Eh(),mI=wl(),tB=xl(),rB=$A(),nB=mi(),oB=VA(),iB=Dh(),hI=it(),aB=fI();yI.exports=function(t,r,n){if(hI(t)!=="Object")throw new Fh("Assertion failed: O must be an Object");if(!nB(r))throw new Fh("Assertion failed: P must be a Property Key");if(!eB({Type:hI,IsDataDescriptor:tB,IsAccessorDescriptor:mI},n))throw new Fh("Assertion failed: Desc must be a Property Descriptor");if(!pI){if(mI(n))throw new dI("This environment does not support accessor property descriptors.");var o=!(r in t)&&n["[[Writable]]"]&&n["[[Enumerable]]"]&&n["[[Configurable]]"]&&"[[Value]]"in n,i=r in t&&(!("[[Configurable]]"in n)||n["[[Configurable]]"])&&(!("[[Enumerable]]"in n)||n["[[Enumerable]]"])&&(!("[[Writable]]"in n)||n["[[Writable]]"])&&"[[Value]]"in n;if(o||i)return t[r]=n["[[Value]]"],iB(t[r],n["[[Value]]"]);throw new dI("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var a=pI(t,r),s=a&&oB(a),u=rB(t);return aB(t,r,u,n,s)}});var xI=b((Lue,wI)=>{"use strict";var sB=he(),vI=sB("%TypeError%"),uB=mi(),cB=bI(),lB=it();wI.exports=function(t,r,n){if(lB(t)!=="Object")throw new vI("Assertion failed: Type(O) is not Object");if(!uB(r))throw new vI("Assertion failed: IsPropertyKey(P) is not true");var o={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0};return cB(t,r,o)}});var SI=b((que,EI)=>{"use strict";var fB=he(),Nh=fB("%TypeError%"),pB=xI(),dB=mi(),mB=it();EI.exports=function(t,r,n){if(mB(t)!=="Object")throw new Nh("Assertion failed: Type(O) is not Object");if(!dB(r))throw new Nh("Assertion failed: IsPropertyKey(P) is not true");var o=pB(t,r,n);if(!o)throw new Nh("unable to create data property");return o}});var AI=b((Bue,kI)=>{kI.exports=require("util").inspect});var Vh=b((jue,UI)=>{var Wh=typeof Map=="function"&&Map.prototype,Ph=Object.getOwnPropertyDescriptor&&Wh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Il=Wh&&Ph&&typeof Ph.get=="function"?Ph.get:null,II=Wh&&Map.prototype.forEach,Uh=typeof Set=="function"&&Set.prototype,Rh=Object.getOwnPropertyDescriptor&&Uh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,_l=Uh&&Rh&&typeof Rh.get=="function"?Rh.get:null,_I=Uh&&Set.prototype.forEach,hB=typeof WeakMap=="function"&&WeakMap.prototype,ks=hB?WeakMap.prototype.has:null,gB=typeof WeakSet=="function"&&WeakSet.prototype,As=gB?WeakSet.prototype.has:null,yB=typeof WeakRef=="function"&&WeakRef.prototype,CI=yB?WeakRef.prototype.deref:null,bB=Boolean.prototype.valueOf,vB=Object.prototype.toString,wB=Function.prototype.toString,xB=String.prototype.match,Hh=String.prototype.slice,hn=String.prototype.replace,EB=String.prototype.toUpperCase,TI=String.prototype.toLowerCase,LI=RegExp.prototype.test,OI=Array.prototype.concat,kr=Array.prototype.join,SB=Array.prototype.slice,DI=Math.floor,Lh=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Mh=Object.getOwnPropertySymbols,qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,bi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",tt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===bi||"symbol")?Symbol.toStringTag:null,qI=Object.prototype.propertyIsEnumerable,FI=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function NI(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||LI.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-DI(-e):DI(e);if(n!==e){var o=String(n),i=Hh.call(t,o.length+1);return hn.call(o,r,"$&_")+"."+hn.call(hn.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return hn.call(t,r,"$&_")}var Bh=AI(),PI=Bh.custom,RI=jI(PI)?PI:null;UI.exports=function e(t,r,n,o){var i=r||{};if(mn(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mn(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=mn(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mn(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mn(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return WI(t,i);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?NI(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return s?NI(t,l):l}var c=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof t=="object")return jh(t)?"[Array]":"[Object]";var f=jB(i,n);if(typeof o>"u")o=[];else if(zI(o,t)>=0)return"[Circular]";function p(I,W,j){if(W&&(o=SB.call(o),o.push(W)),j){var H={depth:i.depth};return mn(i,"quoteStyle")&&(H.quoteStyle=i.quoteStyle),e(I,H,n+1,o)}return e(I,i,n+1,o)}if(typeof t=="function"&&!MI(t)){var d=FB(t),h=Al(t,p);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(h.length>0?" { "+kr.call(h,", ")+" }":"")}if(jI(t)){var g=bi?hn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):qh.call(t);return typeof t=="object"&&!bi?Ss(g):g}if(LB(t)){for(var y="<"+TI.call(String(t.nodeName)),w=t.attributes||[],x=0;x<w.length;x++)y+=" "+w[x].name+"="+BI(kB(w[x].value),"double",i);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+TI.call(String(t.nodeName))+">",y}if(jh(t)){if(t.length===0)return"[]";var A=Al(t,p);return f&&!BB(A)?"["+zh(A,f)+"]":"[ "+kr.call(A,", ")+" ]"}if(IB(t)){var O=Al(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!qI.call(t,"cause")?"{ ["+String(t)+"] "+kr.call(OI.call("[cause]: "+p(t.cause),O),", ")+" }":O.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+kr.call(O,", ")+" }"}if(typeof t=="object"&&a){if(RI&&typeof t[RI]=="function"&&Bh)return Bh(t,{depth:c-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(NB(t)){var D=[];return II&&II.call(t,function(I,W){D.push(p(W,t,!0)+" => "+p(I,t))}),$I("Map",Il.call(t),D,f)}if(MB(t)){var F=[];return _I&&_I.call(t,function(I){F.push(p(I,t))}),$I("Set",_l.call(t),F,f)}if(PB(t))return $h("WeakMap");if($B(t))return $h("WeakSet");if(RB(t))return $h("WeakRef");if(CB(t))return Ss(p(Number(t)));if(OB(t))return Ss(p(Lh.call(t)));if(TB(t))return Ss(bB.call(t));if(_B(t))return Ss(p(String(t)));if(!AB(t)&&!MI(t)){var R=Al(t,p),P=FI?FI(t)===Object.prototype:t instanceof Object||t.constructor===Object,E=t instanceof Object?"":"null prototype",S=!P&&tt&&Object(t)===t&&tt in t?Hh.call(gn(t),8,-1):E?"Object":"",v=P||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",_=v+(S||E?"["+kr.call(OI.call([],S||[],E||[]),": ")+"] ":"");return R.length===0?_+"{}":f?_+"{"+zh(R,f)+"}":_+"{ "+kr.call(R,", ")+" }"}return String(t)};function BI(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function kB(e){return hn.call(String(e),/"/g,"&quot;")}function jh(e){return gn(e)==="[object Array]"&&(!tt||!(typeof e=="object"&&tt in e))}function AB(e){return gn(e)==="[object Date]"&&(!tt||!(typeof e=="object"&&tt in e))}function MI(e){return gn(e)==="[object RegExp]"&&(!tt||!(typeof e=="object"&&tt in e))}function IB(e){return gn(e)==="[object Error]"&&(!tt||!(typeof e=="object"&&tt in e))}function _B(e){return gn(e)==="[object String]"&&(!tt||!(typeof e=="object"&&tt in e))}function CB(e){return gn(e)==="[object Number]"&&(!tt||!(typeof e=="object"&&tt in e))}function TB(e){return gn(e)==="[object Boolean]"&&(!tt||!(typeof e=="object"&&tt in e))}function jI(e){if(bi)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!qh)return!1;try{return qh.call(e),!0}catch{}return!1}function OB(e){if(!e||typeof e!="object"||!Lh)return!1;try{return Lh.call(e),!0}catch{}return!1}var DB=Object.prototype.hasOwnProperty||function(e){return e in this};function mn(e,t){return DB.call(e,t)}function gn(e){return vB.call(e)}function FB(e){if(e.name)return e.name;var t=xB.call(wB.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function zI(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function NB(e){if(!Il||!e||typeof e!="object")return!1;try{Il.call(e);try{_l.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function PB(e){if(!ks||!e||typeof e!="object")return!1;try{ks.call(e,ks);try{As.call(e,As)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function RB(e){if(!CI||!e||typeof e!="object")return!1;try{return CI.call(e),!0}catch{}return!1}function MB(e){if(!_l||!e||typeof e!="object")return!1;try{_l.call(e);try{Il.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function $B(e){if(!As||!e||typeof e!="object")return!1;try{As.call(e,As);try{ks.call(e,ks)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function LB(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function WI(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return WI(Hh.call(e,0,t.maxStringLength),t)+n}var o=hn.call(hn.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,qB);return BI(o,"single",t)}function qB(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+EB.call(t.toString(16))}function Ss(e){return"Object("+e+")"}function $h(e){return e+" { ? }"}function $I(e,t,r,n){var o=n?zh(r,n):kr.call(r,", ");return e+" ("+t+") {"+o+"}"}function BB(e){for(var t=0;t<e.length;t++)if(zI(e[t],`
`)>=0)return!1;return!0}function jB(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=kr.call(Array(e.indent+1)," ");else return null;return{base:r,prev:kr.call(Array(t+1),r)}}function zh(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+kr.call(e,","+r)+`
`+t.prev}function Al(e,t){var r=jh(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=mn(e,o)?t(e[o],e):""}var i=typeof Mh=="function"?Mh(e):[],a;if(bi){a={};for(var s=0;s<i.length;s++)a["$"+i[s]]=i[s]}for(var u in e)mn(e,u)&&(r&&String(Number(u))===u&&u<e.length||bi&&a["$"+u]instanceof Symbol||(LI.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if(typeof Mh=="function")for(var l=0;l<i.length;l++)qI.call(e,i[l])&&n.push("["+t(i[l])+"]: "+t(e[i[l]],e));return n}});var Gh=b((zue,VI)=>{"use strict";var zB=he(),HI=zB("%TypeError%"),WB=Vh(),UB=mi(),HB=it();VI.exports=function(t,r){if(HB(t)!=="Object")throw new HI("Assertion failed: Type(O) is not Object");if(!UB(r))throw new HI("Assertion failed: IsPropertyKey(P) is not true, got "+WB(r));return t[r]}});var JI=b((Wue,KI)=>{"use strict";var GI=he(),VB=GI("%Math%"),GB=GI("%Number%");KI.exports=GB.MAX_SAFE_INTEGER||VB.pow(2,53)-1});var YI=b((Uue,ZI)=>{"use strict";var KB=he(),JB=KB("%Math.abs%");ZI.exports=function(t){return JB(t)}});var XI=b((Hue,QI)=>{"use strict";var ZB=it(),YB=Math.floor;QI.exports=function(t){return ZB(t)==="BigInt"?t:YB(t)}});var t_=b((Vue,e_)=>{"use strict";e_.exports=function(t){return t===null||typeof t!="function"&&typeof t!="object"}});var Kh=b((Gue,r_)=>{"use strict";var QB=lh();r_.exports=function(){return QB()&&!!Symbol.toStringTag}});var o_=b((Kue,n_)=>{"use strict";var XB=Date.prototype.getDay,ej=function(t){try{return XB.call(t),!0}catch{return!1}},tj=Object.prototype.toString,rj="[object Date]",nj=Kh()();n_.exports=function(t){return typeof t!="object"||t===null?!1:nj?ej(t):tj.call(t)===rj}});var u_=b((Jue,Jh)=>{"use strict";var oj=Object.prototype.toString,ij=fh()();ij?(i_=Symbol.prototype.toString,a_=/^Symbol\(.*\)$/,s_=function(t){return typeof t.valueOf()!="symbol"?!1:a_.test(i_.call(t))},Jh.exports=function(t){if(typeof t=="symbol")return!0;if(oj.call(t)!=="[object Symbol]")return!1;try{return s_(t)}catch{return!1}}):Jh.exports=function(t){return!1};var i_,a_,s_});var p_=b((Zue,f_)=>{"use strict";var aj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",Zh=t_(),l_=Ch(),sj=o_(),c_=u_(),uj=function(t,r){if(typeof t>"u"||t===null)throw new TypeError("Cannot call method on "+t);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],o,i,a;for(a=0;a<n.length;++a)if(o=t[n[a]],l_(o)&&(i=o.call(t),Zh(i)))return i;throw new TypeError("No default value")},cj=function(t,r){var n=t[r];if(n!==null&&typeof n<"u"){if(!l_(n))throw new TypeError(n+" returned for property "+r+" of object "+t+" is not a function");return n}};f_.exports=function(t){if(Zh(t))return t;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(aj&&(Symbol.toPrimitive?n=cj(t,Symbol.toPrimitive):c_(t)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var o=n.call(t,r);if(Zh(o))return o;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(sj(t)||c_(t))&&(r="string"),uj(t,r==="default"?"number":r)}});var Yh=b((Yue,m_)=>{"use strict";var d_=p_();m_.exports=function(t){return arguments.length>1?d_(t,arguments[1]):d_(t)}});var v_=b((Que,b_)=>{"use strict";var Qh=wr(),h_=Kh()(),g_,y_,Xh,eg;h_&&(g_=Qh("Object.prototype.hasOwnProperty"),y_=Qh("RegExp.prototype.exec"),Xh={},Cl=function(){throw Xh},eg={toString:Cl,valueOf:Cl},typeof Symbol.toPrimitive=="symbol"&&(eg[Symbol.toPrimitive]=Cl));var Cl,lj=Qh("Object.prototype.toString"),fj=Object.getOwnPropertyDescriptor,pj="[object RegExp]";b_.exports=h_?function(t){if(!t||typeof t!="object")return!1;var r=fj(t,"lastIndex"),n=r&&g_(r,"value");if(!n)return!1;try{y_(t,eg)}catch(o){return o===Xh}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:lj(t)===pj}});var x_=b((Xue,w_)=>{"use strict";var dj=wr(),mj=he(),hj=v_(),gj=dj("RegExp.prototype.exec"),yj=mj("%TypeError%");w_.exports=function(t){if(!hj(t))throw new yj("`regex` must be a RegExp");return function(n){return gj(t,n)!==null}}});var S_=b((ece,E_)=>{"use strict";var bj=he(),vj=bj("%TypeError%");E_.exports=function(t,r){if(t==null)throw new vj(r||"Cannot call method on "+t);return t}});var Tl=b((tce,k_)=>{"use strict";k_.exports=S_()});var Ol=b((rce,I_)=>{"use strict";var A_=he(),wj=A_("%String%"),xj=A_("%TypeError%");I_.exports=function(t){if(typeof t=="symbol")throw new xj("Cannot convert a Symbol value to a string");return wj(t)}});var tg=b((nce,T_)=>{"use strict";var Ej=Tl(),Sj=Ol(),kj=wr(),__=kj("String.prototype.replace"),C_=/^\s$/.test("\u180E"),Aj=C_?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Ij=C_?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;T_.exports=function(){var t=Sj(Ej(this));return __(__(t,Aj,""),Ij,"")}});var rg=b((oce,D_)=>{"use strict";var _j=tg(),O_="\u200B",vi="\u180E";D_.exports=function(){return String.prototype.trim&&O_.trim()===O_&&vi.trim()===vi&&("_"+vi).trim()==="_"+vi&&(vi+"_").trim()===vi+"_"?String.prototype.trim:_j}});var N_=b((ice,F_)=>{"use strict";var Cj=yl(),Tj=rg();F_.exports=function(){var t=Tj();return Cj(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}});var $_=b((ace,M_)=>{"use strict";var Oj=vh(),Dj=yl(),Fj=Tl(),Nj=tg(),P_=rg(),Pj=N_(),Rj=Oj(P_()),R_=function(t){return Fj(t),Rj(t)};Dj(R_,{getPolyfill:P_,implementation:Nj,shim:Pj});M_.exports=R_});var j_=b((sce,B_)=>{"use strict";var Dl=he(),ng=Dl("%Number%"),Mj=Dl("%RegExp%"),$j=Dl("%TypeError%"),L_=Dl("%parseInt%"),Lj=wr(),Fl=x_(),q_=Lj("String.prototype.slice"),qj=Fl(/^0b[01]+$/i),Bj=Fl(/^0o[0-7]+$/i),jj=Fl(/^[-+]0x[0-9a-f]+$/i),zj=["\x85","\u200B","\uFFFE"].join(""),Wj=new Mj("["+zj+"]","g"),Uj=Fl(Wj),Hj=$_(),Vj=it();B_.exports=function e(t){if(Vj(t)!=="String")throw new $j("Assertion failed: `argument` is not a String");if(qj(t))return ng(L_(q_(t,2),2));if(Bj(t))return ng(L_(q_(t,2),8));if(Uj(t)||jj(t))return NaN;var r=Hj(t);return r!==t?e(r):ng(t)}});var V_=b((uce,H_)=>{"use strict";var U_=he(),z_=U_("%TypeError%"),W_=U_("%Number%"),Gj=Sh(),Kj=Yh(),Jj=j_();H_.exports=function(t){var r=Gj(t)?t:Kj(t,W_);if(typeof r=="symbol")throw new z_("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new z_("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Jj(r):W_(r)}});var K_=b((cce,G_)=>{"use strict";var Zj=ws();G_.exports=function(e){return(typeof e=="number"||typeof e=="bigint")&&!Zj(e)&&e!==1/0&&e!==-1/0}});var Z_=b((lce,J_)=>{"use strict";J_.exports=function(t){return t>=0?1:-1}});var Q_=b((fce,Y_)=>{"use strict";var Yj=YI(),Qj=XI(),Xj=V_(),e8=ws(),t8=K_(),r8=Z_();Y_.exports=function(t){var r=Xj(t);if(e8(r)||r===0)return 0;if(!t8(r))return r;var n=Qj(Yj(r));return n===0?0:r8(r)*n}});var tC=b((pce,eC)=>{"use strict";var X_=JI(),n8=Q_();eC.exports=function(t){var r=n8(t);return r<=0?0:r>X_?X_:r}});var nC=b((dce,rC)=>{"use strict";var o8=he(),i8=o8("%TypeError%"),a8=Gh(),s8=tC(),u8=it();rC.exports=function(t){if(u8(t)!=="Object")throw new i8("Assertion failed: `obj` must be an Object");return s8(a8(t,"length"))}});var og=b((mce,oC)=>{"use strict";oC.exports=function(t,r){for(var n=0;n<t.length;n+=1)r(t[n],n,t)}});var aC=b((hce,iC)=>{"use strict";var ig=he(),wi=wr(),c8=Vh(),l8=ig("%TypeError%"),Nl=ig("%WeakMap%",!0),Pl=ig("%Map%",!0),f8=wi("WeakMap.prototype.get",!0),p8=wi("WeakMap.prototype.set",!0),d8=wi("WeakMap.prototype.has",!0),m8=wi("Map.prototype.get",!0),h8=wi("Map.prototype.set",!0),g8=wi("Map.prototype.has",!0),ag=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},y8=function(e,t){var r=ag(e,t);return r&&r.value},b8=function(e,t,r){var n=ag(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},v8=function(e,t){return!!ag(e,t)};iC.exports=function(){var t,r,n,o={assert:function(i){if(!o.has(i))throw new l8("Side channel does not contain "+c8(i))},get:function(i){if(Nl&&i&&(typeof i=="object"||typeof i=="function")){if(t)return f8(t,i)}else if(Pl){if(r)return m8(r,i)}else if(n)return y8(n,i)},has:function(i){if(Nl&&i&&(typeof i=="object"||typeof i=="function")){if(t)return d8(t,i)}else if(Pl){if(r)return g8(r,i)}else if(n)return v8(n,i);return!1},set:function(i,a){Nl&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new Nl),p8(t,i,a)):Pl?(r||(r=new Pl),h8(r,i,a)):(n||(n={key:{},next:null}),b8(n,i,a))}};return o}});var uC=b((gce,sC)=>{"use strict";var w8=he(),x8=br(),Is=aC()(),jr=w8("%TypeError%"),sg={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new jr("`O` is not an object");if(typeof t!="string")throw new jr("`slot` must be a string");if(Is.assert(e),!sg.has(e,t))throw new jr("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new jr("`O` is not an object");if(typeof t!="string")throw new jr("`slot` must be a string");var r=Is.get(e);return r&&r["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new jr("`O` is not an object");if(typeof t!="string")throw new jr("`slot` must be a string");var r=Is.get(e);return!!r&&x8(r,"$"+t)},set:function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new jr("`O` is not an object");if(typeof t!="string")throw new jr("`slot` must be a string");var n=Is.get(e);n||(n={},Is.set(e,n)),n["$"+t]=r}};Object.freeze&&Object.freeze(sg);sC.exports=sg});var fC=b((yce,lC)=>{"use strict";var cC={foo:{}},E8=Object;lC.exports=function(){return{__proto__:cC}.foo===cC.foo&&!({__proto__:null}instanceof E8)}});var hC=b((bce,mC)=>{"use strict";var ug=he(),pC=ug("%Object.create%",!0),dC=ug("%TypeError%"),S8=ug("%SyntaxError%"),k8=xh(),A8=it(),I8=og(),_8=uC(),C8=fC()();mC.exports=function(t){if(t!==null&&A8(t)!=="Object")throw new dC("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!k8(r))throw new dC("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(pC)n=pC(t);else if(C8)n={__proto__:t};else{if(t===null)throw new S8("native Object.create support is required to create null objects");var o=function(){};o.prototype=t,n=new o}return r.length>0&&I8(r,function(i){_8.set(n,i,void 0)}),n}});var yC=b((vce,gC)=>{"use strict";var T8=he(),O8=T8("%Object%"),D8=Tl();gC.exports=function(t){return D8(t),O8(t)}});var vC=b((wce,bC)=>{"use strict";var F8=he(),N8=F8("%String%"),P8=Yh(),R8=Ol();bC.exports=function(t){var r=P8(t,N8);return typeof r=="symbol"?r:R8(r)}});var EC=b((xce,xC)=>{"use strict";var wC=ws();xC.exports=function(t,r){return t===r?t===0?1/t===1/r:!0:wC(t)&&wC(r)}});var IC=b((Ece,AC)=>{"use strict";var kC=wr(),M8=he(),$8=EC(),L8=M8("%TypeError%"),q8=kC("Array.prototype.filter"),SC=kC("Array.prototype.push");AC.exports=function(t,r,n){var o=q8(t,function(s){return $8(s.Key,r)});if(o.length>0){var i=o[0];if(o.length!==1)throw new L8("Assertion failed: more than 1 Record inside `groups` has a `[[Key]]` that is SameValue to `key`");SC(i.Elements,n)}else{var a={Key:r,Elements:[n]};SC(t,a)}}});var CC=b((Sce,_C)=>{"use strict";var B8=he(),j8=mA(),z8=SI(),W8=Gh(),U8=Th(),H8=nC(),V8=hC(),G8=yC(),K8=vC(),J8=Ol(),Z8=B8("%TypeError%"),Y8=og(),Q8=IC();_C.exports=function(t){var r=G8(this),n=H8(r);if(!U8(t))throw new Z8("callbackfn must be a function");var o;arguments.length>1&&(o=arguments[1]);for(var i=0,a=[];i<n;){var s=J8(i),u=W8(r,s),l=K8(j8(t,o,[u,i,r]));Q8(a,l,u),i+=1}var c=V8(null);return Y8(a,function(f){z8(c,f.Key,f.Elements)}),c}});var OC=b((kce,TC)=>{"use strict";var X8=CC();TC.exports=function(){return Array.prototype.group||X8}});var FC=b((Ace,DC)=>{"use strict";var ez=yl(),tz=eA(),rz=OC();DC.exports=function(){var t=rz();return ez(Array.prototype,{group:t},{group:function(){return Array.prototype.group!==t}}),tz("group"),t}});var GC=b(VC=>{"use strict";var Si=(T(),Du(At));function mz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hz=typeof Object.is=="function"?Object.is:mz,gz=Si.useState,yz=Si.useEffect,bz=Si.useLayoutEffect,vz=Si.useDebugValue;function wz(e,t){var r=t(),n=gz({inst:{value:r,getSnapshot:t}}),o=n[0].inst,i=n[1];return bz(function(){o.value=r,o.getSnapshot=t,pg(o)&&i({inst:o})},[e,r,t]),yz(function(){return pg(o)&&i({inst:o}),e(function(){pg(o)&&i({inst:o})})},[e]),vz(r),r}function pg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hz(e,r)}catch{return!0}}function xz(e,t){return t()}var Ez=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xz:wz;VC.useSyncExternalStore=Si.useSyncExternalStore!==void 0?Si.useSyncExternalStore:Ez});var JC=b((Lle,KC)=>{"use strict";KC.exports=GC()});var YC=b(ZC=>{"use strict";var Ll=(T(),Du(At)),Sz=JC();function kz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Az=typeof Object.is=="function"?Object.is:kz,Iz=Sz.useSyncExternalStore,_z=Ll.useRef,Cz=Ll.useEffect,Tz=Ll.useMemo,Oz=Ll.useDebugValue;ZC.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var i=_z(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Tz(function(){function u(d){if(!l){if(l=!0,c=d,d=n(d),o!==void 0&&a.hasValue){var h=a.value;if(o(h,d))return f=h}return f=d}if(h=f,Az(c,d))return h;var g=n(d);return o!==void 0&&o(h,g)?h:(c=d,f=g)}var l=!1,c,f,p=r===void 0?null:r;return[function(){return u(t())},p===null?void 0:function(){return u(p())}]},[t,r,n,o]);var s=Iz(e,i[0],i[1]);return Cz(function(){a.hasValue=!0,a.value=s},[s]),Oz(s),s}});var XC=b((Ble,QC)=>{"use strict";QC.exports=YC()});var wn=b((vbe,Vr)=>{function Hg(){return Vr.exports=Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vr.exports.__esModule=!0,Vr.exports.default=Vr.exports,Hg.apply(this,arguments)}Vr.exports=Hg,Vr.exports.__esModule=!0,Vr.exports.default=Vr.exports});var af=b((Ybe,Gr)=>{function Xg(e){return Gr.exports=Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gr.exports.__esModule=!0,Gr.exports.default=Gr.exports,Xg(e)}Gr.exports=Xg,Gr.exports.__esModule=!0,Gr.exports.default=Gr.exports});var XO=b((Qbe,Hs)=>{var QO=af().default;function mU(e,t){if(QO(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(QO(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Hs.exports=mU,Hs.exports.__esModule=!0,Hs.exports.default=Hs.exports});var eD=b((Xbe,Vs)=>{var hU=af().default,gU=XO();function yU(e){var t=gU(e,"string");return hU(t)==="symbol"?t:String(t)}Vs.exports=yU,Vs.exports.__esModule=!0,Vs.exports.default=Vs.exports});var tD=b((eve,Gs)=>{var bU=eD();function vU(e,t,r){return t=bU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Gs.exports=vU,Gs.exports.__esModule=!0,Gs.exports.default=Gs.exports});var rD=b((tve,Ks)=>{function wU(e){if(Array.isArray(e))return e}Ks.exports=wU,Ks.exports.__esModule=!0,Ks.exports.default=Ks.exports});var nD=b((rve,Js)=>{function xU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(c){l=!0,o=c}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}Js.exports=xU,Js.exports.__esModule=!0,Js.exports.default=Js.exports});var oD=b((nve,Zs)=>{function EU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Zs.exports=EU,Zs.exports.__esModule=!0,Zs.exports.default=Zs.exports});var aD=b((ove,Ys)=>{var iD=oD();function SU(e,t){if(e){if(typeof e=="string")return iD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iD(e,t)}}Ys.exports=SU,Ys.exports.__esModule=!0,Ys.exports.default=Ys.exports});var sD=b((ive,Qs)=>{function kU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Qs.exports=kU,Qs.exports.__esModule=!0,Qs.exports.default=Qs.exports});var uD=b((ave,Xs)=>{var AU=rD(),IU=nD(),_U=aD(),CU=sD();function TU(e,t){return AU(e)||IU(e,t)||_U(e,t)||CU()}Xs.exports=TU,Xs.exports.__esModule=!0,Xs.exports.default=Xs.exports});var lD=b((sf,cD)=>{"use strict";sf.__esModule=!0;sf.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};cD.exports=sf.default});var pD=b((uf,fD)=>{"use strict";uf.__esModule=!0;uf.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};fD.exports=uf.default});var mD=b((cf,dD)=>{"use strict";cf.__esModule=!0;cf.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};dD.exports=cf.default});var gD=b((lf,hD)=>{"use strict";lf.__esModule=!0;lf.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};hD.exports=lf.default});var bD=b((ff,yD)=>{"use strict";ff.__esModule=!0;ff.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};yD.exports=ff.default});var wD=b((pf,vD)=>{"use strict";pf.__esModule=!0;pf.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};vD.exports=pf.default});var ED=b((df,xD)=>{"use strict";df.__esModule=!0;df.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};xD.exports=df.default});var kD=b((mf,SD)=>{"use strict";mf.__esModule=!0;mf.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};SD.exports=mf.default});var ID=b((hf,AD)=>{"use strict";hf.__esModule=!0;hf.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};AD.exports=hf.default});var CD=b((gf,_D)=>{"use strict";gf.__esModule=!0;gf.default={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};_D.exports=gf.default});var OD=b((yf,TD)=>{"use strict";yf.__esModule=!0;yf.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};TD.exports=yf.default});var FD=b((bf,DD)=>{"use strict";bf.__esModule=!0;bf.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};DD.exports=bf.default});var PD=b((vf,ND)=>{"use strict";vf.__esModule=!0;vf.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};ND.exports=vf.default});var MD=b((wf,RD)=>{"use strict";wf.__esModule=!0;wf.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};RD.exports=wf.default});var LD=b((xf,$D)=>{"use strict";xf.__esModule=!0;xf.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};$D.exports=xf.default});var BD=b((Ef,qD)=>{"use strict";Ef.__esModule=!0;Ef.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};qD.exports=Ef.default});var zD=b((Sf,jD)=>{"use strict";Sf.__esModule=!0;Sf.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};jD.exports=Sf.default});var UD=b((kf,WD)=>{"use strict";kf.__esModule=!0;kf.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};WD.exports=kf.default});var VD=b((Af,HD)=>{"use strict";Af.__esModule=!0;Af.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};HD.exports=Af.default});var KD=b((If,GD)=>{"use strict";If.__esModule=!0;If.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};GD.exports=If.default});var ZD=b((_f,JD)=>{"use strict";_f.__esModule=!0;_f.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};JD.exports=_f.default});var QD=b((Cf,YD)=>{"use strict";Cf.__esModule=!0;Cf.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};YD.exports=Cf.default});var eF=b((Tf,XD)=>{"use strict";Tf.__esModule=!0;Tf.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};XD.exports=Tf.default});var rF=b((Of,tF)=>{"use strict";Of.__esModule=!0;Of.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};tF.exports=Of.default});var oF=b((Df,nF)=>{"use strict";Df.__esModule=!0;Df.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};nF.exports=Df.default});var aF=b((Ff,iF)=>{"use strict";Ff.__esModule=!0;Ff.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};iF.exports=Ff.default});var uF=b((Nf,sF)=>{"use strict";Nf.__esModule=!0;Nf.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};sF.exports=Nf.default});var lF=b((Pf,cF)=>{"use strict";Pf.__esModule=!0;Pf.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};cF.exports=Pf.default});var pF=b((Rf,fF)=>{"use strict";Rf.__esModule=!0;Rf.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};fF.exports=Rf.default});var mF=b((Mf,dF)=>{"use strict";Mf.__esModule=!0;Mf.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};dF.exports=Mf.default});var gF=b(($f,hF)=>{"use strict";$f.__esModule=!0;$f.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};hF.exports=$f.default});var bF=b((Lf,yF)=>{"use strict";Lf.__esModule=!0;Lf.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};yF.exports=Lf.default});var wF=b((qf,vF)=>{"use strict";qf.__esModule=!0;qf.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};vF.exports=qf.default});var EF=b((Bf,xF)=>{"use strict";Bf.__esModule=!0;Bf.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};xF.exports=Bf.default});var kF=b((jf,SF)=>{"use strict";jf.__esModule=!0;jf.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};SF.exports=jf.default});var IF=b((zf,AF)=>{"use strict";zf.__esModule=!0;zf.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};AF.exports=zf.default});var CF=b((Wf,_F)=>{"use strict";Wf.__esModule=!0;Wf.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};_F.exports=Wf.default});var TF=b(ue=>{"use strict";ue.__esModule=!0;function fe(e){return e&&e.__esModule?e.default:e}var OU=lD();ue.threezerotwofour=fe(OU);var DU=pD();ue.apathy=fe(DU);var FU=mD();ue.ashes=fe(FU);var NU=gD();ue.atelierDune=fe(NU);var PU=bD();ue.atelierForest=fe(PU);var RU=wD();ue.atelierHeath=fe(RU);var MU=ED();ue.atelierLakeside=fe(MU);var $U=kD();ue.atelierSeaside=fe($U);var LU=ID();ue.bespin=fe(LU);var qU=CD();ue.brewer=fe(qU);var BU=OD();ue.bright=fe(BU);var jU=FD();ue.chalk=fe(jU);var zU=PD();ue.codeschool=fe(zU);var WU=MD();ue.colors=fe(WU);var UU=LD();ue.default=fe(UU);var HU=BD();ue.eighties=fe(HU);var VU=zD();ue.embers=fe(VU);var GU=UD();ue.flat=fe(GU);var KU=VD();ue.google=fe(KU);var JU=KD();ue.grayscale=fe(JU);var ZU=ZD();ue.greenscreen=fe(ZU);var YU=QD();ue.harmonic=fe(YU);var QU=eF();ue.hopscotch=fe(QU);var XU=rF();ue.isotope=fe(XU);var eH=oF();ue.marrakesh=fe(eH);var tH=aF();ue.mocha=fe(tH);var rH=uF();ue.monokai=fe(rH);var nH=lF();ue.ocean=fe(nH);var oH=pF();ue.paraiso=fe(oH);var iH=mF();ue.pop=fe(iH);var aH=gF();ue.railscasts=fe(aH);var sH=bF();ue.shapeshifter=fe(sH);var uH=wF();ue.solarized=fe(uH);var cH=EF();ue.summerfruit=fe(cH);var lH=kF();ue.tomorrow=fe(lH);var fH=IF();ue.tube=fe(fH);var pH=CF();ue.twilight=fe(pH)});var DF=b((uve,OF)=>{"use strict";OF.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var NF=b((cve,FF)=>{FF.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var MF=b((lve,RF)=>{"use strict";var dH=NF(),mH=Array.prototype.concat,hH=Array.prototype.slice,PF=RF.exports=function(t){for(var r=[],n=0,o=t.length;n<o;n++){var i=t[n];dH(i)?r=mH.call(r,hH.call(i)):r.push(i)}return r};PF.wrap=function(e){return function(){return e(PF(arguments))}}});var BF=b((fve,qF)=>{var eu=DF(),tu=MF(),$F=Object.hasOwnProperty,LF=Object.create(null);for(Uf in eu)$F.call(eu,Uf)&&(LF[eu[Uf]]=Uf);var Uf,Tt=qF.exports={to:{},get:{}};Tt.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Tt.get.hsl(e),n="hsl";break;case"hwb":r=Tt.get.hwb(e),n="hwb";break;default:r=Tt.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Tt.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,a=[0,0,0,1],s,u,l;if(s=e.match(r)){for(l=s[2],s=s[1],u=0;u<3;u++){var c=u*2;a[u]=parseInt(s.slice(c,c+2),16)}l&&(a[3]=parseInt(l,16)/255)}else if(s=e.match(t)){for(s=s[1],l=s[3],u=0;u<3;u++)a[u]=parseInt(s[u]+s[u],16);l&&(a[3]=parseInt(l+l,16)/255)}else if(s=e.match(n)){for(u=0;u<3;u++)a[u]=parseInt(s[u+1],0);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else if(s=e.match(o)){for(u=0;u<3;u++)a[u]=Math.round(parseFloat(s[u+1])*2.55);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else return(s=e.match(i))?s[1]==="transparent"?[0,0,0,0]:$F.call(eu,s[1])?(a=eu[s[1]],a[3]=1,a):null:null;for(u=0;u<3;u++)a[u]=En(a[u],0,255);return a[3]=En(a[3],0,1),a};Tt.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=En(parseFloat(r[2]),0,100),a=En(parseFloat(r[3]),0,100),s=En(isNaN(n)?1:n,0,1);return[o,i,a,s]}return null};Tt.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=En(parseFloat(r[2]),0,100),a=En(parseFloat(r[3]),0,100),s=En(isNaN(n)?1:n,0,1);return[o,i,a,s]}return null};Tt.to.hex=function(){var e=tu(arguments);return"#"+Hf(e[0])+Hf(e[1])+Hf(e[2])+(e[3]<1?Hf(Math.round(e[3]*255)):"")};Tt.to.rgb=function(){var e=tu(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Tt.to.rgb.percent=function(){var e=tu(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Tt.to.hsl=function(){var e=tu(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Tt.to.hwb=function(){var e=tu(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Tt.to.keyword=function(e){return LF[e.slice(0,3)]};function En(e,t,r){return Math.min(Math.max(t,e),r)}function Hf(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var zF=b((pve,jF)=>{"use strict";jF.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ey=b((dve,VF)=>{var oo=zF(),HF={};for(Vf in oo)oo.hasOwnProperty(Vf)&&(HF[oo[Vf]]=Vf);var Vf,X=VF.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(at in X)if(X.hasOwnProperty(at)){if(!("channels"in X[at]))throw new Error("missing channels property: "+at);if(!("labels"in X[at]))throw new Error("missing channel labels property: "+at);if(X[at].labels.length!==X[at].channels)throw new Error("channel and label counts mismatch: "+at);WF=X[at].channels,UF=X[at].labels,delete X[at].channels,delete X[at].labels,Object.defineProperty(X[at],"channels",{value:WF}),Object.defineProperty(X[at],"labels",{value:UF})}var WF,UF,at;X.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=i-o,s,u,l;return i===o?s=0:t===i?s=(r-n)/a:r===i?s=2+(n-t)/a:n===i&&(s=4+(t-r)/a),s=Math.min(s*60,360),s<0&&(s+=360),l=(o+i)/2,i===o?u=0:l<=.5?u=a/(i+o):u=a/(2-i-o),[s,u*100,l*100]};X.rgb.hsv=function(e){var t,r,n,o,i,a=e[0]/255,s=e[1]/255,u=e[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),f=function(p){return(l-p)/6/c+1/2};return c===0?o=i=0:(i=c/l,t=f(a),r=f(s),n=f(u),a===l?o=n-r:s===l?o=1/3+t-n:u===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[o*360,i*100,l*100]};X.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],o=X.rgb.hsl(e)[0],i=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[o,i*100,n*100]};X.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o,i,a,s;return s=Math.min(1-t,1-r,1-n),o=(1-t-s)/(1-s)||0,i=(1-r-s)/(1-s)||0,a=(1-n-s)/(1-s)||0,[o*100,i*100,a*100,s*100]};function gH(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}X.rgb.keyword=function(e){var t=HF[e];if(t)return t;var r=1/0,n;for(var o in oo)if(oo.hasOwnProperty(o)){var i=oo[o],a=gH(e,i);a<r&&(r=a,n=o)}return n};X.keyword.rgb=function(e){return oo[e]};X.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var o=t*.4124+r*.3576+n*.1805,i=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[o*100,i*100,a*100]};X.rgb.lab=function(e){var t=X.rgb.xyz(e),r=t[0],n=t[1],o=t[2],i,a,s;return r/=95.047,n/=100,o/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=116*n-16,a=500*(r-n),s=200*(n-o),[i,a,s]};X.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,o,i,a,s,u;if(r===0)return u=n*255,[u,u,u];n<.5?i=n*(1+r):i=n+r-n*r,o=2*n-i,s=[0,0,0];for(var l=0;l<3;l++)a=t+1/3*-(l-1),a<0&&a++,a>1&&a--,6*a<1?u=o+(i-o)*6*a:2*a<1?u=i:3*a<2?u=o+(i-o)*(2/3-a)*6:u=o,s[l]=u*255;return s};X.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,i=Math.max(n,.01),a,s;return n*=2,r*=n<=1?n:2-n,o*=i<=1?i:2-i,s=(n+r)/2,a=n===0?2*o/(i+o):2*r/(n+r),[t,a*100,s*100]};X.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*n*(1-r),s=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,a];case 1:return[s,n,a];case 2:return[a,n,u];case 3:return[a,s,n];case 4:return[u,a,n];case 5:return[n,a,s]}};X.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=Math.max(n,.01),i,a,s;return s=(2-r)*n,i=(2-r)*o,a=r*o,a/=i<=1?i:2-i,a=a||0,s/=2,[t,a*100,s*100]};X.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,o=r+n,i,a,s,u;o>1&&(r/=o,n/=o),i=Math.floor(6*t),a=1-n,s=6*t-i,i&1&&(s=1-s),u=r+s*(a-r);var l,c,f;switch(i){default:case 6:case 0:l=a,c=u,f=r;break;case 1:l=u,c=a,f=r;break;case 2:l=r,c=a,f=u;break;case 3:l=r,c=u,f=a;break;case 4:l=u,c=r,f=a;break;case 5:l=a,c=r,f=u;break}return[l*255,c*255,f*255]};X.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100,i,a,s;return i=1-Math.min(1,t*(1-o)+o),a=1-Math.min(1,r*(1-o)+o),s=1-Math.min(1,n*(1-o)+o),[i*255,a*255,s*255]};X.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o,i,a;return o=t*3.2406+r*-1.5372+n*-.4986,i=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[o*255,i*255,a*255]};X.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=116*r-16,i=500*(t-r),a=200*(r-n),[o,i,a]};X.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;i=(t+16)/116,o=r/500+i,a=i-n/200;var s=Math.pow(i,3),u=Math.pow(o,3),l=Math.pow(a,3);return i=s>.008856?s:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,a=l>.008856?l:(a-16/116)/7.787,o*=95.047,i*=100,a*=108.883,[o,i,a]};X.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return o=Math.atan2(n,r),i=o*360/2/Math.PI,i<0&&(i+=360),a=Math.sqrt(r*r+n*n),[t,a,i]};X.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return a=n/360*2*Math.PI,o=r*Math.cos(a),i=r*Math.sin(a),[t,o,i]};X.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:X.rgb.hsv(e)[2];if(o=Math.round(o/50),o===0)return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return o===2&&(i+=60),i};X.hsv.ansi16=function(e){return X.rgb.ansi16(X.hsv.rgb(e),e[2])};X.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var o=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return o};X.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,o=(t>>1&1)*r*255,i=(t>>2&1)*r*255;return[n,o,i]};X.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,o=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[n,o,i]};X.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};X.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(s){return s+s}).join(""));var n=parseInt(r,16),o=n>>16&255,i=n>>8&255,a=n&255;return[o,i,a]};X.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.max(Math.max(t,r),n),i=Math.min(Math.min(t,r),n),a=o-i,s,u;return a<1?s=i/(1-a):s=0,a<=0?u=0:o===t?u=(r-n)/a%6:o===r?u=2+(n-t)/a:u=4+(t-r)/a+4,u/=6,u%=1,[u*360,a*100,s*100]};X.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(o=(r-.5*n)/(1-n)),[e[0],n*100,o*100]};X.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],n*100,o*100]};X.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var o=[0,0,0],i=t%1*6,a=i%1,s=1-a,u=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return u=(1-r)*n,[(r*o[0]+u)*255,(r*o[1]+u)*255,(r*o[2]+u)*255]};X.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),o=0;return n>0&&(o=t/n),[e[0],o*100,n*100]};X.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,o=0;return n>0&&n<.5?o=t/(2*n):n>=.5&&n<1&&(o=t/(2*(1-n))),[e[0],o*100,n*100]};X.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};X.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,o=n-t,i=0;return o<1&&(i=(n-o)/(1-o)),[e[0],o*100,i*100]};X.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};X.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};X.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};X.gray.hsl=X.gray.hsv=function(e){return[0,0,e[0]]};X.gray.hwb=function(e){return[0,100,e[0]]};X.gray.cmyk=function(e){return[0,0,0,e[0]]};X.gray.lab=function(e){return[e[0],0,0]};X.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};X.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var KF=b((mve,GF)=>{var Gf=ey();function yH(){for(var e={},t=Object.keys(Gf),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function bH(e){var t=yH(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),o=Object.keys(Gf[n]),i=o.length,a=0;a<i;a++){var s=o[a],u=t[s];u.distance===-1&&(u.distance=t[n].distance+1,u.parent=n,r.unshift(s))}return t}function vH(e,t){return function(r){return t(e(r))}}function wH(e,t){for(var r=[t[e].parent,e],n=Gf[t[e].parent][e],o=t[e].parent;t[o].parent;)r.unshift(t[o].parent),n=vH(Gf[t[o].parent][o],n),o=t[o].parent;return n.conversion=r,n}GF.exports=function(e){for(var t=bH(e),r={},n=Object.keys(t),o=n.length,i=0;i<o;i++){var a=n[i],s=t[a];s.parent!==null&&(r[a]=wH(a,t))}return r}});var ZF=b((hve,JF)=>{var ty=ey(),xH=KF(),Fi={},EH=Object.keys(ty);function SH(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function kH(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var o=n.length,i=0;i<o;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}EH.forEach(function(e){Fi[e]={},Object.defineProperty(Fi[e],"channels",{value:ty[e].channels}),Object.defineProperty(Fi[e],"labels",{value:ty[e].labels});var t=xH(e),r=Object.keys(t);r.forEach(function(n){var o=t[n];Fi[e][n]=kH(o),Fi[e][n].raw=SH(o)})});JF.exports=Fi});var XF=b((gve,QF)=>{"use strict";var ru=BF(),Ot=ZF(),oy=[].slice,YF=["keyword","gray","hex"],ry={};Object.keys(Ot).forEach(function(e){ry[oy.call(Ot[e].labels).sort().join("")]=e});var Kf={};function Ye(e,t){if(!(this instanceof Ye))return new Ye(e,t);if(t&&t in YF&&(t=null),t&&!(t in Ot))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Ye)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var o=ru.get(e);if(o===null)throw new Error("Unable to parse color from string: "+e);this.model=o.model,n=Ot[this.model].channels,this.color=o.value.slice(0,n),this.valpha=typeof o.value[n]=="number"?o.value[n]:1}else if(e.length){this.model=t||"rgb",n=Ot[this.model].channels;var i=oy.call(e,0,n);this.color=ny(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var s=a.sort().join("");if(!(s in ry))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=ry[s];var u=Ot[this.model].labels,l=[];for(r=0;r<u.length;r++)l.push(e[u[r]]);this.color=ny(l)}if(Kf[this.model])for(n=Ot[this.model].channels,r=0;r<n;r++){var c=Kf[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ye.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in ru.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return ru.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return ru.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Ot[this.model].channels,r=Ot[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Ye(this.color.map(IH(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Ye(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:Ce("rgb",0,je(255)),green:Ce("rgb",1,je(255)),blue:Ce("rgb",2,je(255)),hue:Ce(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:Ce("hsl",1,je(100)),lightness:Ce("hsl",2,je(100)),saturationv:Ce("hsv",1,je(100)),value:Ce("hsv",2,je(100)),chroma:Ce("hcg",1,je(100)),gray:Ce("hcg",2,je(100)),white:Ce("hwb",1,je(100)),wblack:Ce("hwb",2,je(100)),cyan:Ce("cmyk",0,je(100)),magenta:Ce("cmyk",1,je(100)),yellow:Ce("cmyk",2,je(100)),black:Ce("cmyk",3,je(100)),x:Ce("xyz",0,je(100)),y:Ce("xyz",1,je(100)),z:Ce("xyz",2,je(100)),l:Ce("lab",0,je(100)),a:Ce("lab",1),b:Ce("lab",2),keyword:function(e){return arguments.length?new Ye(e):Ot[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Ye(e):ru.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Ye.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),o=t===void 0?.5:t,i=2*o-1,a=r.alpha()-n.alpha(),s=((i*a===-1?i:(i+a)/(1+i*a))+1)/2,u=1-s;return Ye.rgb(s*r.red()+u*n.red(),s*r.green()+u*n.green(),s*r.blue()+u*n.blue(),r.alpha()*o+n.alpha()*(1-o))}};Object.keys(Ot).forEach(function(e){if(YF.indexOf(e)===-1){var t=Ot[e].channels;Ye.prototype[e]=function(){if(this.model===e)return new Ye(this);if(arguments.length)return new Ye(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new Ye(_H(Ot[this.model][e].raw(this.color)).concat(r),e)},Ye[e]=function(r){return typeof r=="number"&&(r=ny(oy.call(arguments),t)),new Ye(r,e)}}});function AH(e,t){return Number(e.toFixed(t))}function IH(e){return function(t){return AH(t,e)}}function Ce(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(Kf[n]||(Kf[n]=[]))[t]=r}),e=e[0],function(n){var o;return arguments.length?(r&&(n=r(n)),o=this[e](),o.color[t]=n,o):(o=this[e]().color[t],r&&(o=r(o)),o)}}function je(e){return function(t){return Math.max(0,Math.min(e,t))}}function _H(e){return Array.isArray(e)?e:[e]}function ny(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}QF.exports=Ye});var bN=b((yve,yN)=>{var CH="Expected a function",eN="__lodash_placeholder__",ao=1,Zf=2,TH=4,io=8,nu=16,Ni=32,ou=64,sN=128,OH=256,uN=512,tN=1/0,DH=9007199254740991,FH=17976931348623157e292,rN=0/0,NH=[["ary",sN],["bind",ao],["bindKey",Zf],["curry",io],["curryRight",nu],["flip",uN],["partial",Ni],["partialRight",ou],["rearg",OH]],PH="[object Function]",RH="[object GeneratorFunction]",MH="[object Symbol]",$H=/[\\^$.*+?()[\]{}|]/g,LH=/^\s+|\s+$/g,qH=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,BH=/\{\n\/\* \[wrapped with (.+)\] \*/,jH=/,? & /,zH=/^[-+]0x[0-9a-f]+$/i,WH=/^0b[01]+$/i,UH=/^\[object .+?Constructor\]$/,HH=/^0o[0-7]+$/i,VH=/^(?:0|[1-9]\d*)$/,GH=parseInt,KH=typeof global=="object"&&global&&global.Object===Object&&global,JH=typeof self=="object"&&self&&self.Object===Object&&self,au=KH||JH||Function("return this")();function cN(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function ZH(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function YH(e,t){var r=e?e.length:0;return!!r&&XH(e,t,0)>-1}function QH(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function XH(e,t,r){if(t!==t)return QH(e,eV,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function eV(e){return e!==e}function tV(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}function rV(e,t){return e?.[t]}function nV(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function lN(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r];(a===t||a===eN)&&(e[r]=eN,i[o++]=r)}return i}var oV=Function.prototype,fN=Object.prototype,iy=au["__core-js_shared__"],nN=function(){var e=/[^.]+$/.exec(iy&&iy.keys&&iy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pN=oV.toString,iV=fN.hasOwnProperty,dN=fN.toString,aV=RegExp("^"+pN.call(iV).replace($H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sV=Object.create,Jf=Math.max,uV=Math.min,oN=function(){var e=iN(Object,"defineProperty"),t=iN.name;return t&&t.length>2?e:void 0}();function cV(e){return Pi(e)?sV(e):{}}function lV(e){if(!Pi(e)||xV(e))return!1;var t=AV(e)||nV(e)?aV:UH;return t.test(SV(e))}function fV(e,t,r,n){for(var o=-1,i=e.length,a=r.length,s=-1,u=t.length,l=Jf(i-a,0),c=Array(u+l),f=!n;++s<u;)c[s]=t[s];for(;++o<a;)(f||o<i)&&(c[r[o]]=e[o]);for(;l--;)c[s++]=e[o++];return c}function pV(e,t,r,n){for(var o=-1,i=e.length,a=-1,s=r.length,u=-1,l=t.length,c=Jf(i-s,0),f=Array(c+l),p=!n;++o<c;)f[o]=e[o];for(var d=o;++u<l;)f[d+u]=t[u];for(;++a<s;)(p||o<i)&&(f[d+r[a]]=e[o++]);return f}function dV(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function mV(e,t,r){var n=t&ao,o=iu(e);function i(){var a=this&&this!==au&&this instanceof i?o:e;return a.apply(n?r:this,arguments)}return i}function iu(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=cV(e.prototype),n=e.apply(r,t);return Pi(n)?n:r}}function hV(e,t,r){var n=iu(e);function o(){for(var i=arguments.length,a=Array(i),s=i,u=hN(o);s--;)a[s]=arguments[s];var l=i<3&&a[0]!==u&&a[i-1]!==u?[]:lN(a,u);if(i-=l.length,i<r)return mN(e,t,ay,o.placeholder,void 0,a,l,void 0,void 0,r-i);var c=this&&this!==au&&this instanceof o?n:e;return cN(c,this,a)}return o}function ay(e,t,r,n,o,i,a,s,u,l){var c=t&sN,f=t&ao,p=t&Zf,d=t&(io|nu),h=t&uN,g=p?void 0:iu(e);function y(){for(var w=arguments.length,x=Array(w),A=w;A--;)x[A]=arguments[A];if(d)var O=hN(y),D=tV(x,O);if(n&&(x=fV(x,n,o,d)),i&&(x=pV(x,i,a,d)),w-=D,d&&w<l){var F=lN(x,O);return mN(e,t,ay,y.placeholder,r,x,F,s,u,l-w)}var R=f?r:this,P=p?R[e]:e;return w=x.length,s?x=EV(x,s):h&&w>1&&x.reverse(),c&&u<w&&(x.length=u),this&&this!==au&&this instanceof y&&(P=g||iu(P)),P.apply(R,x)}return y}function gV(e,t,r,n){var o=t&ao,i=iu(e);function a(){for(var s=-1,u=arguments.length,l=-1,c=n.length,f=Array(c+u),p=this&&this!==au&&this instanceof a?i:e;++l<c;)f[l]=n[l];for(;u--;)f[l++]=arguments[++s];return cN(p,o?r:this,f)}return a}function mN(e,t,r,n,o,i,a,s,u,l){var c=t&io,f=c?a:void 0,p=c?void 0:a,d=c?i:void 0,h=c?void 0:i;t|=c?Ni:ou,t&=~(c?ou:Ni),t&TH||(t&=~(ao|Zf));var g=r(e,t,o,d,f,h,p,s,u,l);return g.placeholder=n,gN(g,e,t)}function yV(e,t,r,n,o,i,a,s){var u=t&Zf;if(!u&&typeof e!="function")throw new TypeError(CH);var l=n?n.length:0;if(l||(t&=~(Ni|ou),n=o=void 0),a=a===void 0?a:Jf(aN(a),0),s=s===void 0?s:aN(s),l-=o?o.length:0,t&ou){var c=n,f=o;n=o=void 0}var p=[e,t,r,n,o,c,f,i,a,s];if(e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],s=p[9]=p[9]==null?u?0:e.length:Jf(p[9]-l,0),!s&&t&(io|nu)&&(t&=~(io|nu)),!t||t==ao)var d=mV(e,t,r);else t==io||t==nu?d=hV(e,t,s):(t==Ni||t==(ao|Ni))&&!o.length?d=gV(e,t,r,n):d=ay.apply(void 0,p);return gN(d,e,t)}function hN(e){var t=e;return t.placeholder}function iN(e,t){var r=rV(e,t);return lV(r)?r:void 0}function bV(e){var t=e.match(BH);return t?t[1].split(jH):[]}function vV(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(qH,`{
/* [wrapped with `+t+`] */
`)}function wV(e,t){return t=t??DH,!!t&&(typeof e=="number"||VH.test(e))&&e>-1&&e%1==0&&e<t}function xV(e){return!!nN&&nN in e}function EV(e,t){for(var r=e.length,n=uV(t.length,r),o=dV(e);n--;){var i=t[n];e[n]=wV(i,r)?o[i]:void 0}return e}var gN=oN?function(e,t,r){var n=t+"";return oN(e,"toString",{configurable:!0,enumerable:!1,value:OV(vV(n,kV(bV(n),r)))})}:DV;function SV(e){if(e!=null){try{return pN.call(e)}catch{}try{return e+""}catch{}}return""}function kV(e,t){return ZH(NH,function(r){var n="_."+r[0];t&r[1]&&!YH(e,n)&&e.push(n)}),e.sort()}function sy(e,t,r){t=r?void 0:t;var n=yV(e,io,void 0,void 0,void 0,void 0,void 0,t);return n.placeholder=sy.placeholder,n}function AV(e){var t=Pi(e)?dN.call(e):"";return t==PH||t==RH}function Pi(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function IV(e){return!!e&&typeof e=="object"}function _V(e){return typeof e=="symbol"||IV(e)&&dN.call(e)==MH}function CV(e){if(!e)return e===0?e:0;if(e=TV(e),e===tN||e===-tN){var t=e<0?-1:1;return t*FH}return e===e?e:0}function aN(e){var t=CV(e),r=t%1;return t===t?r?t-r:t:0}function TV(e){if(typeof e=="number")return e;if(_V(e))return rN;if(Pi(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pi(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(LH,"");var r=WH.test(e);return r||HH.test(e)?GH(e.slice(2),r?2:8):zH.test(e)?rN:+e}function OV(e){return function(){return e}}function DV(e){return e}sy.placeholder={};yN.exports=sy});var gy=b((ap,XN)=>{(function(e,t){typeof ap=="object"&&typeof XN<"u"?t(ap,(T(),Du(At))):typeof define=="function"&&define.amd?define(["exports","react"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.ReactErrorBoundary={},e.React))})(ap,function(e,t){"use strict";function r(f){if(f&&f.__esModule)return f;var p=Object.create(null);return f&&Object.keys(f).forEach(function(d){if(d!=="default"){var h=Object.getOwnPropertyDescriptor(f,d);Object.defineProperty(p,d,h.get?h:{enumerable:!0,get:function(){return f[d]}})}}),p.default=f,Object.freeze(p)}var n=r(t);function o(f,p){return o=Object.setPrototypeOf||function(h,g){return h.__proto__=g,h},o(f,p)}function i(f,p){f.prototype=Object.create(p.prototype),f.prototype.constructor=f,o(f,p)}var a=function(p,d){return p===void 0&&(p=[]),d===void 0&&(d=[]),p.length!==d.length||p.some(function(h,g){return!Object.is(h,d[g])})},s={error:null},u=function(f){i(p,f);function p(){for(var h,g=arguments.length,y=new Array(g),w=0;w<g;w++)y[w]=arguments[w];return h=f.call.apply(f,[this].concat(y))||this,h.state=s,h.resetErrorBoundary=function(){for(var x,A=arguments.length,O=new Array(A),D=0;D<A;D++)O[D]=arguments[D];h.props.onReset==null||(x=h.props).onReset.apply(x,O),h.reset()},h}p.getDerivedStateFromError=function(g){return{error:g}};var d=p.prototype;return d.reset=function(){this.setState(s)},d.componentDidCatch=function(g,y){var w,x;(w=(x=this.props).onError)==null||w.call(x,g,y)},d.componentDidUpdate=function(g,y){var w=this.state.error,x=this.props.resetKeys;if(w!==null&&y.error!==null&&a(g.resetKeys,x)){var A,O;(A=(O=this.props).onResetKeysChange)==null||A.call(O,g.resetKeys,x),this.reset()}},d.render=function(){var g=this.state.error,y=this.props,w=y.fallbackRender,x=y.FallbackComponent,A=y.fallback;if(g!==null){var O={error:g,resetErrorBoundary:this.resetErrorBoundary};if(n.isValidElement(A))return A;if(typeof w=="function")return w(O);if(x)return n.createElement(x,O);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},p}(n.Component);function l(f,p){var d=function(y){return n.createElement(u,p,n.createElement(f,y))},h=f.displayName||f.name||"Unknown";return d.displayName="withErrorBoundary("+h+")",d}function c(f){var p=n.useState(null),d=p[0],h=p[1];if(f!=null)throw f;if(d!=null)throw d;return h}e.ErrorBoundary=u,e.useErrorHandler=c,e.withErrorBoundary=l,Object.defineProperty(e,"__esModule",{value:!0})})});var aZ={};wb(aZ,{default:()=>be});module.exports=Du(aZ);var ha=require("obsidian");var Sb=require("obsidian"),Io=class extends Sb.Component{async load(){if(!this._loaded){this._loaded=!0,await this.onload();for(var t=0,r=this._children.slice();t<r.length;t++)await r[t].load()}}async unload(){if(this._loaded){this._loaded=!1;for(var t=this._children,r=this._events;t.length>0;)await t.pop().unload();for(;r.length>0;)r.pop()();await this.onunload()}}async addChild(t){return this._children.push(t),this._loaded&&await t.load(),t}async removeChild(t){var r=this._children,n=r.indexOf(t);return n!==-1&&(r.splice(n,1),await t.unload()),t}};var Kp=Symbol.for("v1.to-use.peak-dev.org"),Jp=Symbol.for("v1.factory.to-use.peak-dev.org"),_o,ma,Oe=function(){return Object.defineProperties(e(),{this:{get(){if(_o)return _o;throw new TypeError("No current context")}},me:{value:Kp},factory:{value:Jp}});function e(o){let i=new Map;i.prev=o;let a=Object.assign(o?u=>{let l=i.get(u);if(!l){for(let d=i.prev;d;d=d.prev)if(l=d.get(u)){l=Object.assign(Object.assign({},l),{s:l.s||1});break}l=l||{s:2,v:r},i.set(u,l)}let c,f,p;for(;;)switch(l.s){case 0:return _o===a&&ma&&ma.push(u),l.v;case 1:if(c=l.d,!c||s(()=>c.k.every(d=>a(d)===c.c(d)))){l.s=0;break}l.v=c.f;case 2:l.s=4;try{t(i,u,0,s(f=l.v,u,p=[])),p.length&&(l.d={c:a,f,k:p});break}catch(d){l.s=3,l.v=d,l.d=null}case 3:throw l.v;case 4:throw new Error(`Factory ${String(l.v)} didn't resolve ${String(u)}`)}}:u=>Oe.this(u),{def(u,l){return t(i,u,2,l),a},set(u,l){return t(i,u,1,l),a},fork(u){let l=e(i);return u!=null?l(u):l}});return o?a.use=a:a;function s(u,l,c){let f=_o,p=ma;try{return _o=a,ma=c,u(l)}finally{_o=f,ma=p}}}function t(o,i,a,s){if(o.has(i)){let u=o.get(i);if(!u.s)throw new Error(`Already read: ${String(i)}`);u.s=a,u.v=s,u.d=null}else o.set(i,{s:a,v:s})}function r(o){if(typeof o[Kp]=="function")return o[Kp](o);if(n(o))return typeof o.prototype[Jp]=="function"?o.prototype[Jp]():new o;throw new ReferenceError(`No config for ${String(o)}`)}function n(o){return typeof o=="function"&&o.prototype!==void 0&&(Object.getPrototypeOf(o.prototype)!==Object.prototype||Object.getOwnPropertyNames(o.prototype).length>1||o.toString().startsWith("class"))}}();Oe.def(ha.Plugin,()=>{throw new Error("Plugin not created yet")});var ce=class extends Io{constructor(){super(...arguments),this.use=Oe.service(this)}};Oe.service=function(e){return Oe(Fu).addChild(e),Oe.this};Oe.plugin=function(e){let t=Oe.fork().set(ha.Plugin,e).set(e.constructor,e);return e.addChild(t.use(Fu)),t};var Fu=class extends Io{constructor(){super(...arguments),this.children=new Set([this])}onload(){this.loaded=!0}onunload(){this.loaded=!1,this.children.clear()}async addChild(t){this.children.has(t)||(this.children.add(t),this.loaded?super.addChild(t):await super.addChild(t))}};function Nu(e,t){e._loaded&&e.removeChild(t)}function kb(e,t){let r=new ha.Component;r.onload=()=>{Nu(e,r),t()},e.addChild(r)}function Rt(e,t){let r=Object.keys(t).map(n=>_3(e,n,t[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function _3(e,t,r){let n=e[t],o=e.hasOwnProperty(t),i=r(n);return n&&Object.setPrototypeOf(i,n),Object.setPrototypeOf(a,i),e[t]=a,s;function a(...u){return i===n&&e[t]===a&&s(),i.apply(this,u)}function s(){e[t]===a&&(o?e[t]=n:delete e[t]),i!==n&&(i=n,Object.setPrototypeOf(a,n||Function))}}var _b=require("obsidian");var Ab=require("obsidian");function Ib(e){let t=app.workspace;switch(e?.getRoot()){case t.rootSplit:case t.floatingSplit:case t.leftSplit:case t.rightSplit:return!0;default:return!1}}var Zp,Co=(Zp=window.queueMicrotask)!==null&&Zp!==void 0?Zp:(e=>t=>e.then(t))(Promise.resolve());var Yp=2,DZ=Symbol.for(`v${Yp}.layout-storage-events.ophidian.peak-dev.org`);var FZ=`ophidian-layout-storage:v${Yp}:item-load`,NZ=`ophidian-layout-storage:v${Yp}:item-save`;var C3=require("obsidian");var Tb=require("obsidian");var Cb=class extends Tb.Component{constructor(t,r){super(),this.use=t,this.container=r,this.win=this.container.win}[Oe.factory](){return new Qp(this.constructor)}static onload(t){}static onunload(t){}},Qp=class extends ce{constructor(t){super(),this.factory=t,this.instances=new Map,this.watching=!1,this.layoutReadyCallbacks=[]}onload(){var t,r;this.registerEvent(app.workspace.on("layout-change",()=>{app.workspace.layoutReady&&this.layoutReadyCallbacks.length&&(this.layoutReadyCallbacks.forEach(Co),this.layoutReadyCallbacks=[])})),(r=(t=this.factory).onload)===null||r===void 0||r.call(t,this.use)}onLeafChange(t,r){return this.onLayoutReady(()=>t.call(r,app.workspace.activeLeaf)),app.workspace.on("active-leaf-change",n=>{app.workspace.layoutReady&&t.call(r,n)})}onLayoutReady(t){app.workspace.layoutReady?Co(t):this.layoutReadyCallbacks.push(t)}onunload(){var t,r;(r=(t=this.factory).onunload)===null||r===void 0||r.call(t,this.use)}watch(){if(!this._loaded)kb(this,()=>this.watch());else if(!this.watching){let{workspace:t}=app,r=this;this.watching=!0,this.registerEvent(t.on("window-open",n=>{this.onLayoutReady(()=>this.forContainer(n))})),this.register(Rt(t,{clearLayout(n){return async function(){try{return await n.call(this)}finally{r.onLayoutReady(()=>r.forAll())}}}})),this.onLayoutReady(()=>this.forAll())}return this}forWindow(t,r){var n;t===void 0&&(t=(n=window.activeWindow)!==null&&n!==void 0?n:window),r===void 0&&(r=!0);let o=D3(t);if(o)return this.forContainer(o,r)}forContainer(t,r=!0){t=t.getContainer();let n=this.instances.get(t);return!n&&r&&(n=new this.factory(this.use,t),n&&(this.instances.set(t,n),this.addChild(n),t.component.addChild(n),n.register(()=>{Nu(this,n),Nu(t.component,n),this.instances.delete(t)}))),n}forDom(t,r=!0){return this.forWindow(O3(t),r)}forLeaf(t=app.workspace.activeLeaf,r=!0){if(Ib(t))return this.forContainer(t.getContainer(),r)}forView(t,r=!0){return this.forLeaf(t.leaf,r)}forAll(t=!0){return T3().map(r=>this.forContainer(r,t)).filter(r=>r)}};function T3(){return[app.workspace.rootSplit].concat(app.workspace.floatingSplit.children)}function O3(e){return e.win||(e.ownerDocument||e).defaultView||window}function D3(e){if(e===window)return app.workspace.rootSplit;let{floatingSplit:t}=app.workspace;if(t){for(let r of t.children)if(e===r.win)return r}}var F3=require("obsidian");var N3=require("obsidian");var p3=require("obsidian");var Ob=e=>`obsidian-zotero:${e}`;var Mt=({key:e,groupID:t,parentItem:r},n=!1)=>{let o=[e];return!n&&r&&o.push(`a${r}`),typeof t=="number"&&o.push(`g${t}`),o.join("")},Db=(e,t,r=!0)=>(n,...o)=>{let i="";for(let a=0;a<n.length;a++)a>0&&(i+=e(o[a-1])),i+=(r?n.raw:n)[a];return t(i)},td=(e=!0,t)=>Db(r=>r,r=>new RegExp(e?"^"+r+"$":r,t),!0),Xp=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,ed=String.raw`\d+`,Fb=e=>{let t={annotKey:Xp,parentKey:Xp,groupID:ed,page:ed};if(e)for(let r in t)t[r]=`(${t[r]})`;return Db(r=>t[r],r=>r)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Nb=td()`${Xp}(?:g${ed})?`,Pb=td()`${Fb(!0)}`,Rb=td()`(?:${Fb(!1)}n?)+`,To=(e,t)=>{if(e===null)return null;let r;return typeof e=="number"?r=e:r=parseInt(e,10),Number.isInteger(r)?t?r+1:r:null};var Mb=(e,t,{getLogger:r,configure:n})=>{let o=Ob(e);return n({appenders:{out:{type:"console"}},categories:{default:{appenders:["out"],level:t},[o]:{appenders:["out"],level:t}}}),r(o)},$b={ALL:"ALL",TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL",MARK:"MARK",OFF:"OFF"};var $t=()=>(...e)=>e;var Lb=e=>`better-sqlite3-${e}.node`;var u2=se(Qe(),1),Sc=se(i1(),1);var pc=e=>{let t=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(t)};var a2=se(Ud(),1);var rm=se(Qe(),1),Ho=require("obsidian"),s2=se(u1(),1);var c1='"use strict";var Ud=Object.create;var Rr=Object.defineProperty,zd=Object.defineProperties,Kd=Object.getOwnPropertyDescriptor,Gd=Object.getOwnPropertyDescriptors,Hd=Object.getOwnPropertyNames,Wo=Object.getOwnPropertySymbols,Jd=Object.getPrototypeOf,Bo=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable;var ei=(e,t,r)=>t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))Bo.call(t,r)&&ei(e,r,t[r]);if(Wo)for(var r of Wo(t))Vd.call(t,r)&&ei(e,r,t[r]);return e},ti=(e,t)=>zd(e,Gd(t));var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Yd=(e,t)=>{for(var r in t)Rr(e,r,{get:t[r],enumerable:!0})},Qd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Hd(t))!Bo.call(e,i)&&i!==r&&Rr(e,i,{get:()=>t[i],enumerable:!(n=Kd(t,i))||n.enumerable});return e};var Et=(e,t,r)=>(r=e!=null?Ud(Jd(e)):{},Qd(t||!e||!e.__esModule?Rr(r,"default",{value:e,enumerable:!0}):r,e));var ee=(e,t,r)=>(ei(e,typeof t!="symbol"?t+"":t,r),r);var Uo=A((exports,module)=>{(function(t,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("workerpool",[],r):typeof exports=="object"?exports.workerpool=r():t.workerpool=r()})(typeof self!="undefined"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,t,r){"use strict";r.r(t),r.d(t,{IFrameWorker:function(){return i}});function n(){let o=document.createElement("iframe");return o.width=o.height=o.frameBorder="0",o.classList.add("iframe-worker"),o.style.display="contents",o}class i{constructor(s,a){if(this.scriptText=s,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=p=>{p.source===this.worker&&(p.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:p.data})),this.onmessage&&this.onmessage(p))},this.handleError=(p,f,h,l,m)=>{if(f===this.scriptText.toString()){let g=new ErrorEvent("error",{message:p,filename:f,lineno:h,colno:l,error:m});this.dispatchEvent(g),this.onerror&&this.onerror(g)}},typeof a!="undefined")throw new TypeError("Options are not supported for iframe workers");let u=new EventTarget;this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=\n(message, origin) => {\n  parent.postMessage(message, origin || "*")\n};window.importScripts=\n(...urls) => urls.reduce((promise, url) => (\n  promise.then(() => new Promise(resolve => {\n    const script = document.createElement("script")\n    script.src = url\n    script.addEventListener("load", () => resolve())\n    document.body.appendChild(script)\n  }))\n), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${s.substring(0,50)}",error:ev.error}))})</script><script type="module">${s}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((p,f)=>{this.worker.onload=p,this.worker.onerror=f})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(s){(async()=>{try{await this.ready}catch(a){}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:s}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,t,r){var n=r(446),i=r(518),o=r(722),s=r(393),a=new s;function u(m,g){typeof m=="string"?this.script=m||null:(this.script=null,g=m),this.workers=[],this.tasks=[],g=g||{},this.name=g.name,this.forkArgs=Object.freeze(g.forkArgs||[]),this.forkOpts=Object.freeze(g.forkOpts||{}),this.debugPortStart=g.debugPortStart||43210,this.nodeWorker=g.nodeWorker,this.workerType=g.workerType||g.nodeWorker||"auto",this.maxQueueSize=g.maxQueueSize||1/0,this.onCreateWorker=g.onCreateWorker||function(){return null},this.onTerminateWorker=g.onTerminateWorker||function(){return null},g&&"maxWorkers"in g?(p(g.maxWorkers),this.maxWorkers=g.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),g&&"minWorkers"in g&&(g.minWorkers==="max"?this.minWorkers=this.maxWorkers:(f(g.minWorkers),this.minWorkers=g.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}u.prototype.exec=function(m,g,E){if(g&&!Array.isArray(g))throw new TypeError(\'Array expected as argument "params"\');if(typeof m=="string"){var _=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var C=this.tasks,$={method:m,params:g,resolver:_,timeout:null,options:E};C.push($);var L=_.promise.timeout;return _.promise.timeout=function(X){return C.indexOf($)!==-1?($.timeout=X,_.promise):L.call(_.promise,X)},this._next(),_.promise}else{if(typeof m=="function")return this.exec("run",[String(m),g]);throw new TypeError(\'Function or string expected as argument "method"\')}},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var m=this;return this.exec("methods").then(function(g){var E={};return g.forEach(function(_){E[_]=function(){return m.exec(_,Array.prototype.slice.call(arguments))}}),E})},u.prototype._next=function(){if(this.tasks.length>0){var m=this._getWorker();if(m){var g=this,E=this.tasks.shift();if(E.resolver.promise.pending){var _=m.exec(E.method,E.params,E.resolver,E.options).then(g._boundNext).catch(function(){if(m.terminated)return g._removeWorker(m)}).then(function(){g._next()});typeof E.timeout=="number"&&_.timeout(E.timeout)}else g._next()}}},u.prototype._getWorker=function(){for(var m=this.workers,g=0;g<m.length;g++){var E=m[g];if(E.busy()===!1)return E}return m.length<this.maxWorkers?(E=this._createWorkerHandler(),m.push(E),E):null},u.prototype._removeWorker=function(m){var g=this;return a.releasePort(m.debugPort),this._removeWorkerFromList(m),this._ensureMinWorkers(),new n(function(E,_){m.terminate(!1,function(C){g.onTerminateWorker({forkArgs:m.forkArgs,forkOpts:m.forkOpts,script:m.script}),C?_(C):E(m)})})},u.prototype._removeWorkerFromList=function(m){var g=this.workers.indexOf(m);g!==-1&&this.workers.splice(g,1)},u.prototype.terminate=function(m,g){var E=this;this.tasks.forEach(function(G){G.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var _=function(X){this._removeWorkerFromList(X)},C=_.bind(this),$=[],L=this.workers.slice();return L.forEach(function(G){var X=G.terminateAndNotify(m,g).then(C).always(function(){E.onTerminateWorker({forkArgs:G.forkArgs,forkOpts:G.forkOpts,script:G.script})});$.push(X)}),n.all($)},u.prototype.stats=function(){var m=this.workers.length,g=this.workers.filter(function(E){return E.busy()}).length;return{totalWorkers:m,busyWorkers:g,idleWorkers:m-g,pendingTasks:this.tasks.length,activeTasks:g}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var m=this.workers.length;m<this.minWorkers;m++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var m=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new i(m.script||this.script,{forkArgs:m.forkArgs||this.forkArgs,forkOpts:m.forkOpts||this.forkOpts,debugPort:a.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function p(m){if(!h(m)||!l(m)||m<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function f(m){if(!h(m)||!l(m)||m<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function h(m){return typeof m=="number"}function l(m){return Math.round(m)==m}e.exports=u},446:function(e){"use strict";function t(o,s){var a=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],p=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var f=function(g,E){u.push(g),p.push(E)};this.then=function(m,g){return new t(function(E,_){var C=m?r(m,E,_):E,$=g?r(g,E,_):_;f(C,$)},a)};var h=function(g){return a.resolved=!0,a.rejected=!1,a.pending=!1,u.forEach(function(E){E(g)}),f=function(_,C){_(g)},h=l=function(){},a},l=function(g){return a.resolved=!1,a.rejected=!0,a.pending=!1,p.forEach(function(E){E(g)}),f=function(_,C){C(g)},h=l=function(){},a};this.cancel=function(){return s?s.cancel():l(new n),a},this.timeout=function(m){if(s)s.timeout(m);else{var g=setTimeout(function(){l(new i("Promise timed out after "+m+" ms"))},m);a.always(function(){clearTimeout(g)})}return a},o(function(m){h(m)},function(m){l(m)})}function r(o,s,a){return function(u){try{var p=o(u);p&&typeof p.then=="function"&&typeof p.catch=="function"?p.then(s,a):s(p)}catch(f){a(f)}}}t.prototype.catch=function(o){return this.then(null,o)},t.prototype.always=function(o){return this.then(o,o)},t.all=function(o){return new t(function(s,a){var u=o.length,p=[];u?o.forEach(function(f,h){f.then(function(l){p[h]=l,u--,u==0&&s(p)},function(l){u=0,a(l)})}):s(p)})},t.defer=function(){var o={};return o.promise=new t(function(s,a){o.resolve=s,o.reject=a}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",t.TimeoutError=i,e.exports=t},518:function(e,t,r){"use strict";function n(S,T){var b=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!b){if(Array.isArray(S)||(b=i(S))||T&&S&&typeof S.length=="number"){b&&(S=b);var O=0,k=function(){};return{s:k,n:function(){return O>=S.length?{done:!0}:{done:!1,value:S[O++]}},e:function(z){throw z},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,M=!1,q;return{s:function(){b=b.call(S)},n:function(){var z=b.next();return W=z.done,z},e:function(z){M=!0,q=z},f:function(){try{!W&&b.return!=null&&b.return()}finally{if(M)throw q}}}}function i(S,T){if(S){if(typeof S=="string")return o(S,T);var b=Object.prototype.toString.call(S).slice(8,-1);if(b==="Object"&&S.constructor&&(b=S.constructor.name),b==="Map"||b==="Set")return Array.from(S);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return o(S,T)}}function o(S,T){(T==null||T>S.length)&&(T=S.length);for(var b=0,O=new Array(T);b<T;b++)O[b]=S[b];return O}function s(S){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},s(S)}var a=r(446),u=r(722),p=r(781),f=r(162),h=f.IFrameWorker,l="__workerpool-terminate__",m=1e3;function g(){var S=_();if(!S)throw new Error("WorkerPool: workerType = \'thread\' is not supported, Node >= 11.7.0 required");return S}function E(){if(typeof Worker!="function"&&((typeof Worker=="undefined"?"undefined":s(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function _(){try{return p("worker_threads")}catch(S){if(s(S)==="object"&&S!==null&&S.code==="MODULE_NOT_FOUND")return null;throw S}}function C(){if(u.platform==="browser"){if(typeof Blob=="undefined")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var S=new Blob([r(710)],{type:"text/javascript"});return window.URL.createObjectURL(S)}else return __dirname+"/worker.js"}function $(S,T){if(T.workerType==="iframe")return L(S,h,T);if(T.workerType==="web")return E(),L(S,Worker,T);if(T.workerType==="thread")return b=g(),G(S,b);if(T.workerType==="process"||!T.workerType)return X(S,R(T),p("child_process"));if(u.platform==="browser")return E(),L(S,Worker);var b=_();return b?G(S,b):X(S,R(T),p("child_process"))}function L(S,T,b){var O=new T(S,b!=null&&b.name?{name:"".concat(b.name,"-").concat(Date.now())}:void 0);return O.isBrowserWorker=!0,O.on=function(k,W){this.addEventListener(k,function(M){W(M.data)})},O.send=function(k){this.postMessage(k)},O}function G(S,T){var b=new T.Worker(S,{stdout:!1,stderr:!1});return b.isWorkerThread=!0,b.send=function(O){this.postMessage(O)},b.kill=function(){return this.terminate(),!0},b.disconnect=function(){this.terminate()},b}function X(S,T,b){var O=b.fork(S,T.forkArgs,T.forkOpts);return O.isChildProcess=!0,O}function R(S){S=S||{};var T=process.execArgv.join(" "),b=T.indexOf("--inspect")!==-1,O=T.indexOf("--debug-brk")!==-1,k=[];return b&&(k.push("--inspect="+S.debugPort),O&&k.push("--debug-brk")),process.execArgv.forEach(function(W){W.indexOf("--max-old-space-size")>-1&&k.push(W)}),Object.assign({},S,{forkArgs:S.forkArgs,forkOpts:Object.assign({},S.forkOpts,{execArgv:(S.forkOpts&&S.forkOpts.execArgv||[]).concat(k)})})}function K(S){for(var T=new Error(""),b=Object.keys(S),O=0;O<b.length;O++)T[b[O]]=S[b[O]];return T}function B(S,T){var b=this,O=T||{};this.script=S||C(),this.worker=$(this.script,O),this.debugPort=O.debugPort,this.forkOpts=O.forkOpts,this.forkArgs=O.forkArgs,S||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(q){if(!b.terminated)if(typeof q=="string"&&q==="ready")b.worker.ready=!0,W();else{var U=q.id,z=b.processing[U];z!==void 0&&(q.isEvent?z.options&&typeof z.options.on=="function"&&z.options.on(q.payload):(delete b.processing[U],b.terminating===!0&&b.terminate(),q.error?z.resolver.reject(K(q.error)):z.resolver.resolve(q.result)))}});function k(q){b.terminated=!0;for(var U in b.processing)b.processing[U]!==void 0&&b.processing[U].resolver.reject(q);b.processing=Object.create(null)}function W(){var q=n(b.requestQueue.splice(0)),U;try{for(q.s();!(U=q.n()).done;){var z=U.value;b.worker.send(z)}}catch(J){q.e(J)}finally{q.f()}}var M=this.worker;this.worker.on("error",k),this.worker.on("exit",function(q,U){var z=`Workerpool Worker terminated Unexpectedly\n`;z+="    exitCode: `"+q+"`\\n",z+="    signalCode: `"+U+"`\\n",z+="    workerpool.script: `"+b.script+"`\\n",z+="    spawnArgs: `"+M.spawnargs+"`\\n",z+="    spawnfile: `"+M.spawnfile+"`\\n",z+="    stdout: `"+M.stdout+"`\\n",z+="    stderr: `"+M.stderr+"`\\n",k(new Error(z))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}B.prototype.methods=function(){return this.exec("methods")},B.prototype.exec=function(S,T,b,O){b||(b=a.defer());var k=++this.lastId;this.processing[k]={id:k,resolver:b,options:O};var W={id:k,method:S,params:T};this.terminated?b.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(W):this.requestQueue.push(W);var M=this;return b.promise.catch(function(q){if(q instanceof a.CancellationError||q instanceof a.TimeoutError)return delete M.processing[k],M.terminateAndNotify(!0).then(function(){throw q},function(U){throw U});throw q})},B.prototype.busy=function(){return Object.keys(this.processing).length>0},B.prototype.terminate=function(S,T){var b=this;if(S){for(var O in this.processing)this.processing[O]!==void 0&&this.processing[O].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var k=function(q){if(b.terminated=!0,b.worker!=null&&b.worker.removeAllListeners&&b.worker.removeAllListeners("message"),b.worker=null,b.terminating=!1,b.terminationHandler)b.terminationHandler(q,b);else if(q)throw q};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){k(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var W=setTimeout(function(){b.worker&&b.worker.kill()},m);this.worker.once("exit",function(){clearTimeout(W),b.worker&&(b.worker.killed=!0),k()}),this.worker.ready?this.worker.send(l):this.requestQueue.push(l)}else this.worker.kill(),this.worker.killed=!0,k();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");k()}},B.prototype.terminateAndNotify=function(S,T){var b=a.defer();return T&&(b.promise.timeout=T),this.terminate(S,function(O,k){O?b.reject(O):b.resolve(k)}),b.promise},e.exports=B,e.exports._tryRequireWorkerThreads=_,e.exports._setupProcessWorker=X,e.exports._setupBrowserWorker=L,e.exports._setupWorkerThreadWorker=G,e.exports.ensureWorkerThreads=g},393:function(e){"use strict";var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,t,r){var n=r(781),i=function(u){return typeof u!="undefined"&&u.versions!=null&&u.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process!="undefined"&&i(process)?"node":"browser";var o=s("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window!="undefined",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function s(a){try{return n(a)}catch(u){return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\\\" + module + \\\\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self!="undefined"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process!="undefined"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error(\'Unknown method "\'+e.method+\'"\')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(722);e.pool=function(n,i){var o=__webpack_require__(799);return new o(n,i)},e.worker=function(n){var i=__webpack_require__(52);i.add(n)},e.workerEmit=function(n){var i=__webpack_require__(52);i.emit(n)},e.Promise=__webpack_require__(446),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})});var pi=A((es,mi)=>{(function(e){if(typeof es=="object"&&typeof mi!="undefined")mi.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function n(i,o,s){function a(f,h){if(!o[f]){if(!i[f]){var l=typeof require=="function"&&require;if(!h&&l)return l(f,!0);if(u)return u(f,!0);var m=new Error("Cannot find module \'"+f+"\'");throw m.code="MODULE_NOT_FOUND",m}var g=o[f]={exports:{}};i[f][0].call(g.exports,function(E){var _=i[f][1][E];return a(_||E)},g,g.exports,n,i,o,s)}return o[f].exports}for(var u=typeof require=="function"&&require,p=0;p<s.length;p++)a(s[p]);return a}({1:[function(n,i,o){(function(s){"use strict";var a=s.MutationObserver||s.WebKitMutationObserver,u;if(a){var p=0,f=new a(E),h=s.document.createTextNode("");f.observe(h,{characterData:!0}),u=function(){h.data=p=++p%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var l=new s.MessageChannel;l.port1.onmessage=E,u=function(){l.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?u=function(){var C=s.document.createElement("script");C.onreadystatechange=function(){E(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},s.document.documentElement.appendChild(C)}:u=function(){setTimeout(E,0)};var m,g=[];function E(){m=!0;for(var C,$,L=g.length;L;){for($=g,g=[],C=-1;++C<L;)$[C]();L=g.length}m=!1}i.exports=_;function _(C){g.push(C)===1&&!m&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,i,o){"use strict";var s=n(1);function a(){}var u={},p=["REJECTED"],f=["FULFILLED"],h=["PENDING"];i.exports=l;function l(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,R!==a&&_(this,R)}l.prototype.catch=function(R){return this.then(null,R)},l.prototype.then=function(R,K){if(typeof R!="function"&&this.state===f||typeof K!="function"&&this.state===p)return this;var B=new this.constructor(a);if(this.state!==h){var S=this.state===f?R:K;g(B,S,this.outcome)}else this.queue.push(new m(B,R,K));return B};function m(R,K,B){this.promise=R,typeof K=="function"&&(this.onFulfilled=K,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(R){u.resolve(this.promise,R)},m.prototype.otherCallFulfilled=function(R){g(this.promise,this.onFulfilled,R)},m.prototype.callRejected=function(R){u.reject(this.promise,R)},m.prototype.otherCallRejected=function(R){g(this.promise,this.onRejected,R)};function g(R,K,B){s(function(){var S;try{S=K(B)}catch(T){return u.reject(R,T)}S===R?u.reject(R,new TypeError("Cannot resolve promise with itself")):u.resolve(R,S)})}u.resolve=function(R,K){var B=C(E,K);if(B.status==="error")return u.reject(R,B.value);var S=B.value;if(S)_(R,S);else{R.state=f,R.outcome=K;for(var T=-1,b=R.queue.length;++T<b;)R.queue[T].callFulfilled(K)}return R},u.reject=function(R,K){R.state=p,R.outcome=K;for(var B=-1,S=R.queue.length;++B<S;)R.queue[B].callRejected(K);return R};function E(R){var K=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof K=="function")return function(){K.apply(R,arguments)}}function _(R,K){var B=!1;function S(k){B||(B=!0,u.reject(R,k))}function T(k){B||(B=!0,u.resolve(R,k))}function b(){K(T,S)}var O=C(b);O.status==="error"&&S(O.value)}function C(R,K){var B={};try{B.value=R(K),B.status="success"}catch(S){B.status="error",B.value=S}return B}l.resolve=$;function $(R){return R instanceof this?R:u.resolve(new this(a),R)}l.reject=L;function L(R){var K=new this(a);return u.reject(K,R)}l.all=G;function G(R){var K=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=R.length,S=!1;if(!B)return this.resolve([]);for(var T=new Array(B),b=0,O=-1,k=new this(a);++O<B;)W(R[O],O);return k;function W(M,q){K.resolve(M).then(U,function(z){S||(S=!0,u.reject(k,z))});function U(z){T[q]=z,++b===B&&!S&&(S=!0,u.resolve(k,T))}}}l.race=X;function X(R){var K=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=R.length,S=!1;if(!B)return this.resolve([]);for(var T=-1,b=new this(a);++T<B;)O(R[T]);return b;function O(k){K.resolve(k).then(function(W){S||(S=!0,u.resolve(b,W))},function(W){S||(S=!0,u.reject(b,W))})}}},{1:1}],3:[function(n,i,o){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};function a(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(c){return}}var p=u();function f(){try{if(!p||!p.open)return!1;var c=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!c||y)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(d){return!1}}function h(c,y){c=c||[],y=y||{};try{return new Blob(c,y)}catch(v){if(v.name!=="TypeError")throw v;for(var d=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,w=new d,x=0;x<c.length;x+=1)w.append(c[x]);return w.getBlob(y.type)}}typeof Promise=="undefined"&&n(3);var l=Promise;function m(c,y){y&&c.then(function(d){y(null,d)},function(d){y(d)})}function g(c,y,d){typeof y=="function"&&c.then(y),typeof d=="function"&&c.catch(d)}function E(c){return typeof c!="string"&&(console.warn(c+" used as a key, but it is not a string."),c=String(c)),c}function _(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",$=void 0,L={},G=Object.prototype.toString,X="readonly",R="readwrite";function K(c){for(var y=c.length,d=new ArrayBuffer(y),w=new Uint8Array(d),x=0;x<y;x++)w[x]=c.charCodeAt(x);return d}function B(c){return new l(function(y){var d=c.transaction(C,R),w=h([""]);d.objectStore(C).put(w,"key"),d.onabort=function(x){x.preventDefault(),x.stopPropagation(),y(!1)},d.oncomplete=function(){var x=navigator.userAgent.match(/Chrome\\/(\\d+)/),v=navigator.userAgent.match(/Edge\\//);y(v||!x||parseInt(x[1],10)>=43)}}).catch(function(){return!1})}function S(c){return typeof $=="boolean"?l.resolve($):B(c).then(function(y){return $=y,$})}function T(c){var y=L[c.name],d={};d.promise=new l(function(w,x){d.resolve=w,d.reject=x}),y.deferredOperations.push(d),y.dbReady?y.dbReady=y.dbReady.then(function(){return d.promise}):y.dbReady=d.promise}function b(c){var y=L[c.name],d=y.deferredOperations.pop();if(d)return d.resolve(),d.promise}function O(c,y){var d=L[c.name],w=d.deferredOperations.pop();if(w)return w.reject(y),w.promise}function k(c,y){return new l(function(d,w){if(L[c.name]=L[c.name]||xo(),c.db)if(y)T(c),c.db.close();else return d(c.db);var x=[c.name];y&&x.push(c.version);var v=p.open.apply(p,x);y&&(v.onupgradeneeded=function(I){var D=v.result;try{D.createObjectStore(c.storeName),I.oldVersion<=1&&D.createObjectStore(C)}catch(F){if(F.name==="ConstraintError")console.warn(\'The database "\'+c.name+\'" has been upgraded from version \'+I.oldVersion+" to version "+I.newVersion+\', but the storage "\'+c.storeName+\'" already exists.\');else throw F}}),v.onerror=function(I){I.preventDefault(),w(v.error)},v.onsuccess=function(){var I=v.result;I.onversionchange=function(D){D.target.close()},d(I),b(c)}})}function W(c){return k(c,!1)}function M(c){return k(c,!0)}function q(c,y){if(!c.db)return!0;var d=!c.db.objectStoreNames.contains(c.storeName),w=c.version<c.db.version,x=c.version>c.db.version;if(w&&(c.version!==y&&console.warn(\'The database "\'+c.name+`" can\'t be downgraded from version `+c.db.version+" to version "+c.version+"."),c.version=c.db.version),x||d){if(d){var v=c.db.version+1;v>c.version&&(c.version=v)}return!0}return!1}function U(c){return new l(function(y,d){var w=new FileReader;w.onerror=d,w.onloadend=function(x){var v=btoa(x.target.result||"");y({__local_forage_encoded_blob:!0,data:v,type:c.type})},w.readAsBinaryString(c)})}function z(c){var y=K(atob(c.data));return h([y],{type:c.type})}function J(c){return c&&c.__local_forage_encoded_blob}function Fr(c){var y=this,d=y._initReady().then(function(){var w=L[y._dbInfo.name];if(w&&w.dbReady)return w.dbReady});return g(d,c,c),d}function Kl(c){T(c);for(var y=L[c.name],d=y.forages,w=0;w<d.length;w++){var x=d[w];x._dbInfo.db&&(x._dbInfo.db.close(),x._dbInfo.db=null)}return c.db=null,W(c).then(function(v){return c.db=v,q(c)?M(c):v}).then(function(v){c.db=y.db=v;for(var I=0;I<d.length;I++)d[I]._dbInfo.db=v}).catch(function(v){throw O(c,v),v})}function Ge(c,y,d,w){w===void 0&&(w=1);try{var x=c.db.transaction(c.storeName,y);d(null,x)}catch(v){if(w>0&&(!c.db||v.name==="InvalidStateError"||v.name==="NotFoundError"))return l.resolve().then(function(){if(!c.db||v.name==="NotFoundError"&&!c.db.objectStoreNames.contains(c.storeName)&&c.version<=c.db.version)return c.db&&(c.version=c.db.version+1),M(c)}).then(function(){return Kl(c).then(function(){Ge(c,y,d,w-1)})}).catch(d);d(v)}}function xo(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Gl(c){var y=this,d={db:null};if(c)for(var w in c)d[w]=c[w];var x=L[d.name];x||(x=xo(),L[d.name]=x),x.forages.push(y),y._initReady||(y._initReady=y.ready,y.ready=Fr);var v=[];function I(){return l.resolve()}for(var D=0;D<x.forages.length;D++){var F=x.forages[D];F!==y&&v.push(F._initReady().catch(I))}var N=x.forages.slice(0);return l.all(v).then(function(){return d.db=x.db,W(d)}).then(function(P){return d.db=P,q(d,y._defaultConfig.version)?M(d):P}).then(function(P){d.db=x.db=P,y._dbInfo=d;for(var j=0;j<N.length;j++){var H=N[j];H!==y&&(H._dbInfo.db=d.db,H._dbInfo.version=d.version)}})}function Hl(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){Ge(d._dbInfo,X,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=F.get(c);N.onsuccess=function(){var P=N.result;P===void 0&&(P=null),J(P)&&(P=z(P)),x(P)},N.onerror=function(){v(N.error)}}catch(P){v(P)}})}).catch(v)});return m(w,y),w}function Jl(c,y){var d=this,w=new l(function(x,v){d.ready().then(function(){Ge(d._dbInfo,X,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=F.openCursor(),P=1;N.onsuccess=function(){var j=N.result;if(j){var H=j.value;J(H)&&(H=z(H));var Q=c(H,j.key,P++);Q!==void 0?x(Q):j.continue()}else x()},N.onerror=function(){v(N.error)}}catch(j){v(j)}})}).catch(v)});return m(w,y),w}function Vl(c,y,d){var w=this;c=E(c);var x=new l(function(v,I){var D;w.ready().then(function(){return D=w._dbInfo,G.call(y)==="[object Blob]"?S(D.db).then(function(F){return F?y:U(y)}):y}).then(function(F){Ge(w._dbInfo,R,function(N,P){if(N)return I(N);try{var j=P.objectStore(w._dbInfo.storeName);F===null&&(F=void 0);var H=j.put(F,c);P.oncomplete=function(){F===void 0&&(F=null),v(F)},P.onabort=P.onerror=function(){var Q=H.error?H.error:H.transaction.error;I(Q)}}catch(Q){I(Q)}})}).catch(I)});return m(x,d),x}function Yl(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){Ge(d._dbInfo,R,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=F.delete(c);D.oncomplete=function(){x()},D.onerror=function(){v(N.error)},D.onabort=function(){var P=N.error?N.error:N.transaction.error;v(P)}}catch(P){v(P)}})}).catch(v)});return m(w,y),w}function Ql(c){var y=this,d=new l(function(w,x){y.ready().then(function(){Ge(y._dbInfo,R,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),F=D.clear();I.oncomplete=function(){w()},I.onabort=I.onerror=function(){var N=F.error?F.error:F.transaction.error;x(N)}}catch(N){x(N)}})}).catch(x)});return m(d,c),d}function Zl(c){var y=this,d=new l(function(w,x){y.ready().then(function(){Ge(y._dbInfo,X,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),F=D.count();F.onsuccess=function(){w(F.result)},F.onerror=function(){x(F.error)}}catch(N){x(N)}})}).catch(x)});return m(d,c),d}function Xl(c,y){var d=this,w=new l(function(x,v){if(c<0){x(null);return}d.ready().then(function(){Ge(d._dbInfo,X,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=!1,P=F.openKeyCursor();P.onsuccess=function(){var j=P.result;if(!j){x(null);return}c===0||N?x(j.key):(N=!0,j.advance(c))},P.onerror=function(){v(P.error)}}catch(j){v(j)}})}).catch(v)});return m(w,y),w}function ed(c){var y=this,d=new l(function(w,x){y.ready().then(function(){Ge(y._dbInfo,X,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),F=D.openKeyCursor(),N=[];F.onsuccess=function(){var P=F.result;if(!P){w(N);return}N.push(P.key),P.continue()},F.onerror=function(){x(F.error)}}catch(P){x(P)}})}).catch(x)});return m(d,c),d}function td(c,y){y=_.apply(this,arguments);var d=this.config();c=typeof c!="function"&&c||{},c.name||(c.name=c.name||d.name,c.storeName=c.storeName||d.storeName);var w=this,x;if(!c.name)x=l.reject("Invalid arguments");else{var v=c.name===d.name&&w._dbInfo.db,I=v?l.resolve(w._dbInfo.db):W(c).then(function(D){var F=L[c.name],N=F.forages;F.db=D;for(var P=0;P<N.length;P++)N[P]._dbInfo.db=D;return D});c.storeName?x=I.then(function(D){if(D.objectStoreNames.contains(c.storeName)){var F=D.version+1;T(c);var N=L[c.name],P=N.forages;D.close();for(var j=0;j<P.length;j++){var H=P[j];H._dbInfo.db=null,H._dbInfo.version=F}var Q=new l(function(Z,ue){var se=p.open(c.name,F);se.onerror=function(De){var Wt=se.result;Wt.close(),ue(De)},se.onupgradeneeded=function(){var De=se.result;De.deleteObjectStore(c.storeName)},se.onsuccess=function(){var De=se.result;De.close(),Z(De)}});return Q.then(function(Z){N.db=Z;for(var ue=0;ue<P.length;ue++){var se=P[ue];se._dbInfo.db=Z,b(se._dbInfo)}}).catch(function(Z){throw(O(c,Z)||l.resolve()).catch(function(){}),Z})}}):x=I.then(function(D){T(c);var F=L[c.name],N=F.forages;D.close();for(var P=0;P<N.length;P++){var j=N[P];j._dbInfo.db=null}var H=new l(function(Q,Z){var ue=p.deleteDatabase(c.name);ue.onerror=function(){var se=ue.result;se&&se.close(),Z(ue.error)},ue.onblocked=function(){console.warn(\'dropInstance blocked for database "\'+c.name+\'" until all open connections are closed\')},ue.onsuccess=function(){var se=ue.result;se&&se.close(),Q(se)}});return H.then(function(Q){F.db=Q;for(var Z=0;Z<N.length;Z++){var ue=N[Z];b(ue._dbInfo)}}).catch(function(Q){throw(O(c,Q)||l.resolve()).catch(function(){}),Q})})}return m(x,y),x}var rd={_driver:"asyncStorage",_initStorage:Gl,_support:f(),iterate:Jl,getItem:Hl,setItem:Vl,removeItem:Yl,clear:Ql,length:Zl,key:Xl,keys:ed,dropInstance:td};function nd(){return typeof openDatabase=="function"}var Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",id="~~local_forage_type~",Eo=/^~~local_forage_type~([^~]+)~/,Nr="__lfsc__:",Kn=Nr.length,Gn="arbf",Hn="blob",So="si08",_o="ui08",Io="uic8",ko="si16",Oo="si32",To="ur16",Do="ui32",Ao="fl32",Fo="fl64",No=Kn+Gn.length,Co=Object.prototype.toString;function Ro(c){var y=c.length*.75,d=c.length,w,x=0,v,I,D,F;c[c.length-1]==="="&&(y--,c[c.length-2]==="="&&y--);var N=new ArrayBuffer(y),P=new Uint8Array(N);for(w=0;w<d;w+=4)v=Ve.indexOf(c[w]),I=Ve.indexOf(c[w+1]),D=Ve.indexOf(c[w+2]),F=Ve.indexOf(c[w+3]),P[x++]=v<<2|I>>4,P[x++]=(I&15)<<4|D>>2,P[x++]=(D&3)<<6|F&63;return N}function Jn(c){var y=new Uint8Array(c),d="",w;for(w=0;w<y.length;w+=3)d+=Ve[y[w]>>2],d+=Ve[(y[w]&3)<<4|y[w+1]>>4],d+=Ve[(y[w+1]&15)<<2|y[w+2]>>6],d+=Ve[y[w+2]&63];return y.length%3===2?d=d.substring(0,d.length-1)+"=":y.length%3===1&&(d=d.substring(0,d.length-2)+"=="),d}function od(c,y){var d="";if(c&&(d=Co.call(c)),c&&(d==="[object ArrayBuffer]"||c.buffer&&Co.call(c.buffer)==="[object ArrayBuffer]")){var w,x=Nr;c instanceof ArrayBuffer?(w=c,x+=Gn):(w=c.buffer,d==="[object Int8Array]"?x+=So:d==="[object Uint8Array]"?x+=_o:d==="[object Uint8ClampedArray]"?x+=Io:d==="[object Int16Array]"?x+=ko:d==="[object Uint16Array]"?x+=To:d==="[object Int32Array]"?x+=Oo:d==="[object Uint32Array]"?x+=Do:d==="[object Float32Array]"?x+=Ao:d==="[object Float64Array]"?x+=Fo:y(new Error("Failed to get type for BinaryArray"))),y(x+Jn(w))}else if(d==="[object Blob]"){var v=new FileReader;v.onload=function(){var I=id+c.type+"~"+Jn(this.result);y(Nr+Hn+I)},v.readAsArrayBuffer(c)}else try{y(JSON.stringify(c))}catch(I){console.error("Couldn\'t convert value into a JSON string: ",c),y(null,I)}}function sd(c){if(c.substring(0,Kn)!==Nr)return JSON.parse(c);var y=c.substring(No),d=c.substring(Kn,No),w;if(d===Hn&&Eo.test(y)){var x=y.match(Eo);w=x[1],y=y.substring(x[0].length)}var v=Ro(y);switch(d){case Gn:return v;case Hn:return h([v],{type:w});case So:return new Int8Array(v);case _o:return new Uint8Array(v);case Io:return new Uint8ClampedArray(v);case ko:return new Int16Array(v);case To:return new Uint16Array(v);case Oo:return new Int32Array(v);case Do:return new Uint32Array(v);case Ao:return new Float32Array(v);case Fo:return new Float64Array(v);default:throw new Error("Unkown type: "+d)}}var Vn={serialize:od,deserialize:sd,stringToBuffer:Ro,bufferToString:Jn};function Po(c,y,d,w){c.executeSql("CREATE TABLE IF NOT EXISTS "+y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],d,w)}function ad(c){var y=this,d={db:null};if(c)for(var w in c)d[w]=typeof c[w]!="string"?c[w].toString():c[w];var x=new l(function(v,I){try{d.db=openDatabase(d.name,String(d.version),d.description,d.size)}catch(D){return I(D)}d.db.transaction(function(D){Po(D,d,function(){y._dbInfo=d,v()},function(F,N){I(N)})},I)});return d.serializer=Vn,x}function Ye(c,y,d,w,x,v){c.executeSql(d,w,x,function(I,D){D.code===D.SYNTAX_ERR?I.executeSql("SELECT name FROM sqlite_master WHERE type=\'table\' AND name = ?",[y.storeName],function(F,N){N.rows.length?v(F,D):Po(F,y,function(){F.executeSql(d,w,x,v)},v)},v):v(I,D)},v)}function ud(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"SELECT * FROM "+I.storeName+" WHERE key = ? LIMIT 1",[c],function(F,N){var P=N.rows.length?N.rows.item(0).value:null;P&&(P=I.serializer.deserialize(P)),x(P)},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function cd(c,y){var d=this,w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"SELECT * FROM "+I.storeName,[],function(F,N){for(var P=N.rows,j=P.length,H=0;H<j;H++){var Q=P.item(H),Z=Q.value;if(Z&&(Z=I.serializer.deserialize(Z)),Z=c(Z,Q.key,H+1),Z!==void 0){x(Z);return}}x()},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function qo(c,y,d,w){var x=this;c=E(c);var v=new l(function(I,D){x.ready().then(function(){y===void 0&&(y=null);var F=y,N=x._dbInfo;N.serializer.serialize(y,function(P,j){j?D(j):N.db.transaction(function(H){Ye(H,N,"INSERT OR REPLACE INTO "+N.storeName+" (key, value) VALUES (?, ?)",[c,P],function(){I(F)},function(Q,Z){D(Z)})},function(H){if(H.code===H.QUOTA_ERR){if(w>0){I(qo.apply(x,[c,F,d,w-1]));return}D(H)}})})}).catch(D)});return m(v,d),v}function fd(c,y,d){return qo.apply(this,[c,y,d,1])}function ld(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"DELETE FROM "+I.storeName+" WHERE key = ?",[c],function(){x()},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function dd(c){var y=this,d=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ye(I,v,"DELETE FROM "+v.storeName,[],function(){w()},function(D,F){x(F)})})}).catch(x)});return m(d,c),d}function md(c){var y=this,d=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ye(I,v,"SELECT COUNT(key) as c FROM "+v.storeName,[],function(D,F){var N=F.rows.item(0).c;w(N)},function(D,F){x(F)})})}).catch(x)});return m(d,c),d}function pd(c,y){var d=this,w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"SELECT key FROM "+I.storeName+" WHERE id = ? LIMIT 1",[c+1],function(F,N){var P=N.rows.length?N.rows.item(0).key:null;x(P)},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function hd(c){var y=this,d=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ye(I,v,"SELECT key FROM "+v.storeName,[],function(D,F){for(var N=[],P=0;P<F.rows.length;P++)N.push(F.rows.item(P).key);w(N)},function(D,F){x(F)})})}).catch(x)});return m(d,c),d}function gd(c){return new l(function(y,d){c.transaction(function(w){w.executeSql("SELECT name FROM sqlite_master WHERE type=\'table\' AND name <> \'__WebKitDatabaseInfoTable__\'",[],function(x,v){for(var I=[],D=0;D<v.rows.length;D++)I.push(v.rows.item(D).name);y({db:c,storeNames:I})},function(x,v){d(v)})},function(w){d(w)})})}function yd(c,y){y=_.apply(this,arguments);var d=this.config();c=typeof c!="function"&&c||{},c.name||(c.name=c.name||d.name,c.storeName=c.storeName||d.storeName);var w=this,x;return c.name?x=new l(function(v){var I;c.name===d.name?I=w._dbInfo.db:I=openDatabase(c.name,"","",0),c.storeName?v({db:I,storeNames:[c.storeName]}):v(gd(I))}).then(function(v){return new l(function(I,D){v.db.transaction(function(F){function N(Q){return new l(function(Z,ue){F.executeSql("DROP TABLE IF EXISTS "+Q,[],function(){Z()},function(se,De){ue(De)})})}for(var P=[],j=0,H=v.storeNames.length;j<H;j++)P.push(N(v.storeNames[j]));l.all(P).then(function(){I()}).catch(function(Q){D(Q)})},function(F){D(F)})})}):x=l.reject("Invalid arguments"),m(x,y),x}var vd={_driver:"webSQLStorage",_initStorage:ad,_support:nd(),iterate:cd,getItem:ud,setItem:fd,removeItem:ld,clear:dd,length:md,key:pd,keys:hd,dropInstance:yd};function wd(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){return!1}}function Lo(c,y){var d=c.name+"/";return c.storeName!==y.storeName&&(d+=c.storeName+"/"),d}function bd(){var c="_localforage_support_test";try{return localStorage.setItem(c,!0),localStorage.removeItem(c),!1}catch(y){return!0}}function xd(){return!bd()||localStorage.length>0}function Ed(c){var y=this,d={};if(c)for(var w in c)d[w]=c[w];return d.keyPrefix=Lo(c,y._defaultConfig),xd()?(y._dbInfo=d,d.serializer=Vn,l.resolve()):l.reject()}function Sd(c){var y=this,d=y.ready().then(function(){for(var w=y._dbInfo.keyPrefix,x=localStorage.length-1;x>=0;x--){var v=localStorage.key(x);v.indexOf(w)===0&&localStorage.removeItem(v)}});return m(d,c),d}function _d(c,y){var d=this;c=E(c);var w=d.ready().then(function(){var x=d._dbInfo,v=localStorage.getItem(x.keyPrefix+c);return v&&(v=x.serializer.deserialize(v)),v});return m(w,y),w}function Id(c,y){var d=this,w=d.ready().then(function(){for(var x=d._dbInfo,v=x.keyPrefix,I=v.length,D=localStorage.length,F=1,N=0;N<D;N++){var P=localStorage.key(N);if(P.indexOf(v)===0){var j=localStorage.getItem(P);if(j&&(j=x.serializer.deserialize(j)),j=c(j,P.substring(I),F++),j!==void 0)return j}}});return m(w,y),w}function kd(c,y){var d=this,w=d.ready().then(function(){var x=d._dbInfo,v;try{v=localStorage.key(c)}catch(I){v=null}return v&&(v=v.substring(x.keyPrefix.length)),v});return m(w,y),w}function Od(c){var y=this,d=y.ready().then(function(){for(var w=y._dbInfo,x=localStorage.length,v=[],I=0;I<x;I++){var D=localStorage.key(I);D.indexOf(w.keyPrefix)===0&&v.push(D.substring(w.keyPrefix.length))}return v});return m(d,c),d}function Td(c){var y=this,d=y.keys().then(function(w){return w.length});return m(d,c),d}function Dd(c,y){var d=this;c=E(c);var w=d.ready().then(function(){var x=d._dbInfo;localStorage.removeItem(x.keyPrefix+c)});return m(w,y),w}function Ad(c,y,d){var w=this;c=E(c);var x=w.ready().then(function(){y===void 0&&(y=null);var v=y;return new l(function(I,D){var F=w._dbInfo;F.serializer.serialize(y,function(N,P){if(P)D(P);else try{localStorage.setItem(F.keyPrefix+c,N),I(v)}catch(j){(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")&&D(j),D(j)}})})});return m(x,d),x}function Fd(c,y){if(y=_.apply(this,arguments),c=typeof c!="function"&&c||{},!c.name){var d=this.config();c.name=c.name||d.name,c.storeName=c.storeName||d.storeName}var w=this,x;return c.name?x=new l(function(v){c.storeName?v(Lo(c,w._defaultConfig)):v(c.name+"/")}).then(function(v){for(var I=localStorage.length-1;I>=0;I--){var D=localStorage.key(I);D.indexOf(v)===0&&localStorage.removeItem(D)}}):x=l.reject("Invalid arguments"),m(x,y),x}var Nd={_driver:"localStorageWrapper",_initStorage:Ed,_support:wd(),iterate:Id,getItem:_d,setItem:Ad,removeItem:Dd,clear:Sd,length:Td,key:kd,keys:Od,dropInstance:Fd},Cd=function(y,d){return y===d||typeof y=="number"&&typeof d=="number"&&isNaN(y)&&isNaN(d)},Rd=function(y,d){for(var w=y.length,x=0;x<w;){if(Cd(y[x],d))return!0;x++}return!1},Mo=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"},jt={},$o={},xt={INDEXEDDB:rd,WEBSQL:vd,LOCALSTORAGE:Nd},Pd=[xt.INDEXEDDB._driver,xt.WEBSQL._driver,xt.LOCALSTORAGE._driver],Cr=["dropInstance"],Yn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Cr),qd={description:"",driver:Pd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ld(c,y){c[y]=function(){var d=arguments;return c.ready().then(function(){return c[y].apply(c,d)})}}function Qn(){for(var c=1;c<arguments.length;c++){var y=arguments[c];if(y)for(var d in y)y.hasOwnProperty(d)&&(Mo(y[d])?arguments[0][d]=y[d].slice():arguments[0][d]=y[d])}return arguments[0]}var Md=function(){function c(y){a(this,c);for(var d in xt)if(xt.hasOwnProperty(d)){var w=xt[d],x=w._driver;this[d]=x,jt[x]||this.defineDriver(w)}this._defaultConfig=Qn({},qd),this._config=Qn({},this._defaultConfig,y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return c.prototype.config=function(d){if((typeof d=="undefined"?"undefined":s(d))==="object"){if(this._ready)return new Error("Can\'t call config() after localforage has been used.");for(var w in d){if(w==="storeName"&&(d[w]=d[w].replace(/\\W/g,"_")),w==="version"&&typeof d[w]!="number")return new Error("Database version must be a number.");this._config[w]=d[w]}return"driver"in d&&d.driver?this.setDriver(this._config.driver):!0}else return typeof d=="string"?this._config[d]:this._config},c.prototype.defineDriver=function(d,w,x){var v=new l(function(I,D){try{var F=d._driver,N=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!d._driver){D(N);return}for(var P=Yn.concat("_initStorage"),j=0,H=P.length;j<H;j++){var Q=P[j],Z=!Rd(Cr,Q);if((Z||d[Q])&&typeof d[Q]!="function"){D(N);return}}var ue=function(){for(var Wt=function(Wd){return function(){var Bd=new Error("Method "+Wd+" is not implemented by the current driver"),jo=l.reject(Bd);return m(jo,arguments[arguments.length-1]),jo}},Zn=0,jd=Cr.length;Zn<jd;Zn++){var Xn=Cr[Zn];d[Xn]||(d[Xn]=Wt(Xn))}};ue();var se=function(Wt){jt[F]&&console.info("Redefining LocalForage driver: "+F),jt[F]=d,$o[F]=Wt,I()};"_support"in d?d._support&&typeof d._support=="function"?d._support().then(se,D):se(!!d._support):se(!0)}catch(De){D(De)}});return g(v,w,x),v},c.prototype.driver=function(){return this._driver||null},c.prototype.getDriver=function(d,w,x){var v=jt[d]?l.resolve(jt[d]):l.reject(new Error("Driver not found."));return g(v,w,x),v},c.prototype.getSerializer=function(d){var w=l.resolve(Vn);return g(w,d),w},c.prototype.ready=function(d){var w=this,x=w._driverSet.then(function(){return w._ready===null&&(w._ready=w._initDriver()),w._ready});return g(x,d,d),x},c.prototype.setDriver=function(d,w,x){var v=this;Mo(d)||(d=[d]);var I=this._getSupportedDrivers(d);function D(){v._config.driver=v.driver()}function F(j){return v._extend(j),D(),v._ready=v._initStorage(v._config),v._ready}function N(j){return function(){var H=0;function Q(){for(;H<j.length;){var Z=j[H];return H++,v._dbInfo=null,v._ready=null,v.getDriver(Z).then(F).catch(Q)}D();var ue=new Error("No available storage method found.");return v._driverSet=l.reject(ue),v._driverSet}return Q()}}var P=this._driverSet!==null?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=P.then(function(){var j=I[0];return v._dbInfo=null,v._ready=null,v.getDriver(j).then(function(H){v._driver=H._driver,D(),v._wrapLibraryMethodsWithReady(),v._initDriver=N(I)})}).catch(function(){D();var j=new Error("No available storage method found.");return v._driverSet=l.reject(j),v._driverSet}),g(this._driverSet,w,x),this._driverSet},c.prototype.supports=function(d){return!!$o[d]},c.prototype._extend=function(d){Qn(this,d)},c.prototype._getSupportedDrivers=function(d){for(var w=[],x=0,v=d.length;x<v;x++){var I=d[x];this.supports(I)&&w.push(I)}return w},c.prototype._wrapLibraryMethodsWithReady=function(){for(var d=0,w=Yn.length;d<w;d++)Ld(this,Yn[d])},c.prototype.createInstance=function(d){return new c(d)},c}(),$d=new Md;i.exports=$d},{3:3}]},{},[4])(4)})});var je=A(Kr=>{"use strict";Kr.getBooleanOption=(e,t)=>{let r=!1;if(t in e&&typeof(r=e[t])!="boolean")throw new TypeError(`Expected the "${t}" option to be a boolean`);return r};Kr.cppdb=Symbol();Kr.inspect=Symbol.for("nodejs.util.inspect.custom")});var gi=A((D0,ts)=>{"use strict";var hi={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function at(e,t){if(new.target!==at)return new at(e,t);if(typeof t!="string")throw new TypeError("Expected second argument to be a string");Error.call(this,e),hi.value=""+e,Object.defineProperty(this,"message",hi),Error.captureStackTrace(this,at),this.code=t}Object.setPrototypeOf(at,Error);Object.setPrototypeOf(at.prototype,Error.prototype);Object.defineProperty(at.prototype,"name",hi);ts.exports=at});var ns=A((A0,rs)=>{var Gr=require("path").sep||"/";rs.exports=vm;function vm(e){if(typeof e!="string"||e.length<=7||e.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),n=t.substring(0,r),i=t.substring(r+1);return n=="localhost"&&(n=""),n&&(n=Gr+Gr+n),i=i.replace(/^(.+)\\|/,"$1:"),Gr=="\\\\"&&(i=i.replace(/\\//g,"\\\\")),/^.+\\:/.test(i)||(i=Gr+i),n+i}});var as=A((_t,ss)=>{var yi=require("fs"),Jr=require("path"),wm=ns(),Hr=Jr.join,bm=Jr.dirname,is=yi.accessSync&&function(e){try{yi.accessSync(e)}catch(t){return!1}return!0}||yi.existsSync||Jr.existsSync,os={arrow:process.env.NODE_BINDINGS_ARROW||" \\u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function xm(e){typeof e=="string"?e={bindings:e}:e||(e={}),Object.keys(os).map(function(u){u in e||(e[u]=os[u])}),e.module_root||(e.module_root=_t.getRoot(_t.getFileName())),Jr.extname(e.bindings)!=".node"&&(e.bindings+=".node");for(var t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=e.try.length,o,s,a;n<i;n++){o=Hr.apply(null,e.try[n].map(function(u){return e[u]||u})),r.push(o);try{return s=e.path?t.resolve(o):t(o),e.path||(s.path=o),s}catch(u){if(u.code!=="MODULE_NOT_FOUND"&&u.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(u.message))throw u}}throw a=new Error(`Could not locate the bindings file. Tried:\n`+r.map(function(u){return e.arrow+u}).join(`\n`)),a.tries=r,a}ss.exports=_t=xm;_t.getFileName=function(t){var r=Error.prepareStackTrace,n=Error.stackTraceLimit,i={},o;Error.stackTraceLimit=10,Error.prepareStackTrace=function(a,u){for(var p=0,f=u.length;p<f;p++)if(o=u[p].getFileName(),o!==__filename)if(t){if(o!==t)return}else return},Error.captureStackTrace(i),i.stack,Error.prepareStackTrace=r,Error.stackTraceLimit=n;var s="file://";return o.indexOf(s)===0&&(o=wm(o)),o};_t.getRoot=function(t){for(var r=bm(t),n;;){if(r==="."&&(r=process.cwd()),is(Hr(r,"package.json"))||is(Hr(r,"node_modules")))return r;if(n===r)throw new Error(\'Could not find module root given file: "\'+t+\'". Do you have a `package.json` file? \');n=r,r=Hr(r,"..")}}});var us=A(Ze=>{"use strict";var{cppdb:Le}=je();Ze.prepare=function(t){return this[Le].prepare(t,this,!1)};Ze.exec=function(t){return this[Le].exec(t),this};Ze.close=function(){return this[Le].close(),this};Ze.loadExtension=function(...t){return this[Le].loadExtension(...t),this};Ze.defaultSafeIntegers=function(...t){return this[Le].defaultSafeIntegers(...t),this};Ze.unsafeMode=function(...t){return this[Le].unsafeMode(...t),this};Ze.getters={name:{get:function(){return this[Le].name},enumerable:!0},open:{get:function(){return this[Le].open},enumerable:!0},inTransaction:{get:function(){return this[Le].inTransaction},enumerable:!0},readonly:{get:function(){return this[Le].readonly},enumerable:!0},memory:{get:function(){return this[Le].memory},enumerable:!0}}});var ls=A((N0,fs)=>{"use strict";var{cppdb:Em}=je(),cs=new WeakMap;fs.exports=function(t){if(typeof t!="function")throw new TypeError("Expected first argument to be a function");let r=this[Em],n=Sm(r,this),{apply:i}=Function.prototype,o={default:{value:Vr(i,t,r,n.default)},deferred:{value:Vr(i,t,r,n.deferred)},immediate:{value:Vr(i,t,r,n.immediate)},exclusive:{value:Vr(i,t,r,n.exclusive)},database:{value:this,enumerable:!0}};return Object.defineProperties(o.default.value,o),Object.defineProperties(o.deferred.value,o),Object.defineProperties(o.immediate.value,o),Object.defineProperties(o.exclusive.value,o),o.default.value};var Sm=(e,t)=>{let r=cs.get(e);if(!r){let n={commit:e.prepare("COMMIT",t,!1),rollback:e.prepare("ROLLBACK",t,!1),savepoint:e.prepare("SAVEPOINT `	_bs3.	`",t,!1),release:e.prepare("RELEASE `	_bs3.	`",t,!1),rollbackTo:e.prepare("ROLLBACK TO `	_bs3.	`",t,!1)};cs.set(e,r={default:Object.assign({begin:e.prepare("BEGIN",t,!1)},n),deferred:Object.assign({begin:e.prepare("BEGIN DEFERRED",t,!1)},n),immediate:Object.assign({begin:e.prepare("BEGIN IMMEDIATE",t,!1)},n),exclusive:Object.assign({begin:e.prepare("BEGIN EXCLUSIVE",t,!1)},n)})}return r},Vr=(e,t,r,{begin:n,commit:i,rollback:o,savepoint:s,release:a,rollbackTo:u})=>function(){let f,h,l;r.inTransaction?(f=s,h=a,l=u):(f=n,h=i,l=o),f.run();try{let m=e.call(t,this,arguments);return h.run(),m}catch(m){throw r.inTransaction&&(l.run(),l!==o&&h.run()),m}}});var ms=A((C0,ds)=>{"use strict";var{getBooleanOption:_m,cppdb:Im}=je();ds.exports=function(t,r){if(r==null&&(r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");let n=_m(r,"simple"),i=this[Im].prepare(`PRAGMA ${t}`,this,!0);return n?i.pluck().get():i.all()}});var gs=A((R0,hs)=>{"use strict";var km=require("fs"),Om=require("path"),{promisify:Tm}=require("util"),{cppdb:Dm}=je(),ps=Tm(km.access);hs.exports=async function(t,r){if(r==null&&(r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");t=t.trim();let n="attached"in r?r.attached:"main",i="progress"in r?r.progress:null;if(!t)throw new TypeError("Backup filename cannot be an empty string");if(t===":memory:")throw new TypeError(\'Invalid backup filename ":memory:"\');if(typeof n!="string")throw new TypeError(\'Expected the "attached" option to be a string\');if(!n)throw new TypeError(\'The "attached" option cannot be an empty string\');if(i!=null&&typeof i!="function")throw new TypeError(\'Expected the "progress" option to be a function\');await ps(Om.dirname(t)).catch(()=>{throw new TypeError("Cannot save backup because the directory does not exist")});let o=await ps(t).then(()=>!1,()=>!0);return Am(this[Dm].backup(this,n,t,o),i||null)};var Am=(e,t)=>{let r=0,n=!0;return new Promise((i,o)=>{setImmediate(function s(){try{let a=e.transfer(r);if(!a.remainingPages){e.close(),i(a);return}if(n&&(n=!1,r=100),t){let u=t(a);if(u!==void 0)if(typeof u=="number"&&u===u)r=Math.max(0,Math.min(2147483647,Math.round(u)));else throw new TypeError("Expected progress callback to return a number or undefined")}setImmediate(s)}catch(a){e.close(),o(a)}})})}});var vs=A((P0,ys)=>{"use strict";var{cppdb:Fm}=je();ys.exports=function(t){if(t==null&&(t={}),typeof t!="object")throw new TypeError("Expected first argument to be an options object");let r="attached"in t?t.attached:"main";if(typeof r!="string")throw new TypeError(\'Expected the "attached" option to be a string\');if(!r)throw new TypeError(\'The "attached" option cannot be an empty string\');return this[Fm].serialize(r)}});var bs=A((q0,ws)=>{"use strict";var{getBooleanOption:Yr,cppdb:Nm}=je();ws.exports=function(t,r,n){if(r==null&&(r={}),typeof r=="function"&&(n=r,r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof n!="function")throw new TypeError("Expected last argument to be a function");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");let i="safeIntegers"in r?+Yr(r,"safeIntegers"):2,o=Yr(r,"deterministic"),s=Yr(r,"directOnly"),a=Yr(r,"varargs"),u=-1;if(!a){if(u=n.length,!Number.isInteger(u)||u<0)throw new TypeError("Expected function.length to be a positive integer");if(u>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}return this[Nm].function(n,t,u,i,o,s),this}});var Ss=A((L0,Es)=>{"use strict";var{getBooleanOption:Qr,cppdb:Cm}=je();Es.exports=function(t,r){if(typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object"||r===null)throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");let n="start"in r?r.start:null,i=vi(r,"step",!0),o=vi(r,"inverse",!1),s=vi(r,"result",!1),a="safeIntegers"in r?+Qr(r,"safeIntegers"):2,u=Qr(r,"deterministic"),p=Qr(r,"directOnly"),f=Qr(r,"varargs"),h=-1;if(!f&&(h=Math.max(xs(i),o?xs(o):0),h>0&&(h-=1),h>100))throw new RangeError("User-defined functions cannot have more than 100 arguments");return this[Cm].aggregate(n,i,o,s,t,h,a,u,p),this};var vi=(e,t,r)=>{let n=t in e?e[t]:null;if(typeof n=="function")return n;if(n!=null)throw new TypeError(`Expected the "${t}" option to be a function`);if(r)throw new TypeError(`Missing required option "${t}"`);return null},xs=({length:e})=>{if(Number.isInteger(e)&&e>=0)return e;throw new TypeError("Expected function.length to be a positive integer")}});var Os=A((M0,ks)=>{"use strict";var{cppdb:Rm}=je();ks.exports=function(t,r){if(typeof t!="string")throw new TypeError("Expected first argument to be a string");if(!t)throw new TypeError("Virtual table module name cannot be an empty string");let n=!1;if(typeof r=="object"&&r!==null)n=!0,r=Bm(Is(r,"used",t));else{if(typeof r!="function")throw new TypeError("Expected second argument to be a function or a table definition object");r=Pm(r)}return this[Rm].table(r,t,n),this};function Pm(e){return function(r,n,i,...o){let s={module:r,database:n,table:i},a=jm.call(e,s,o);if(typeof a!="object"||a===null)throw new TypeError(`Virtual table module "${r}" did not return a table definition object`);return Is(a,"returned",r)}}function Is(e,t,r){if(!tr.call(e,"rows"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition without a "rows" property`);if(!tr.call(e,"columns"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition without a "columns" property`);let n=e.rows;if(typeof n!="function"||Object.getPrototypeOf(n)!==Wm)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "rows" property (should be a generator function)`);let i=e.columns;if(!Array.isArray(i)||!(i=[...i]).every(p=>typeof p=="string"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "columns" property (should be an array of strings)`);if(i.length!==new Set(i).size)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with duplicate column names`);if(!i.length)throw new RangeError(`Virtual table module "${r}" ${t} a table definition with zero columns`);let o;if(tr.call(e,"parameters")){if(o=e.parameters,!Array.isArray(o)||!(o=[...o]).every(p=>typeof p=="string"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "parameters" property (should be an array of strings)`)}else o=$m(n);if(o.length!==new Set(o).size)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with duplicate parameter names`);if(o.length>32)throw new RangeError(`Virtual table module "${r}" ${t} a table definition with more than the maximum number of 32 parameters`);for(let p of o)if(i.includes(p))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with column "${p}" which was ambiguously defined as both a column and parameter`);let s=2;if(tr.call(e,"safeIntegers")){let p=e.safeIntegers;if(typeof p!="boolean")throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "safeIntegers" property (should be a boolean)`);s=+p}let a=!1;if(tr.call(e,"directOnly")&&(a=e.directOnly,typeof a!="boolean"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "directOnly" property (should be a boolean)`);return[`CREATE TABLE x(${[...o.map(_s).map(p=>`${p} HIDDEN`),...i.map(_s)].join(", ")});`,qm(n,new Map(i.map((p,f)=>[p,o.length+f])),r),o,s,a]}function qm(e,t,r){return function*(...i){let o=i.map(s=>Buffer.isBuffer(s)?Buffer.from(s):s);for(let s=0;s<t.size;++s)o.push(null);for(let s of e(...i))if(Array.isArray(s))Lm(s,o,t.size,r),yield o;else if(typeof s=="object"&&s!==null)Mm(s,o,t,r),yield o;else throw new TypeError(`Virtual table module "${r}" yielded something that isn\'t a valid row object`)}}function Lm(e,t,r,n){if(e.length!==r)throw new TypeError(`Virtual table module "${n}" yielded a row with an incorrect number of columns`);let i=t.length-r;for(let o=0;o<r;++o)t[o+i]=e[o]}function Mm(e,t,r,n){let i=0;for(let o of Object.keys(e)){let s=r.get(o);if(s===void 0)throw new TypeError(`Virtual table module "${n}" yielded a row with an undeclared column "${o}"`);t[s]=e[o],i+=1}if(i!==r.size)throw new TypeError(`Virtual table module "${n}" yielded a row with missing columns`)}function $m({length:e}){if(!Number.isInteger(e)||e<0)throw new TypeError("Expected function.length to be a positive integer");let t=[];for(let r=0;r<e;++r)t.push(`$${r+1}`);return t}var{hasOwnProperty:tr}=Object.prototype,{apply:jm}=Function.prototype,Wm=Object.getPrototypeOf(function*(){}),_s=e=>`"${e.replace(/"/g,\'""\')}"`,Bm=e=>()=>e});var Ds=A(($0,Ts)=>{"use strict";var Um=function(){};Ts.exports=function(t,r){return Object.assign(new Um,this)}});var Cs=A((j0,Ns)=>{"use strict";var zm=require("fs"),As=require("path"),rr=je(),Km=gi(),Fs;function ye(e,t){if(new.target==null)return new ye(e,t);let r;if(Buffer.isBuffer(e)&&(r=e,e=":memory:"),e==null&&(e=""),t==null&&(t={}),typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof t!="object")throw new TypeError("Expected second argument to be an options object");if("readOnly"in t)throw new TypeError(\'Misspelled option "readOnly" should be "readonly"\');if("memory"in t)throw new TypeError(\'Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)\');let n=e.trim(),i=n===""||n===":memory:",o=rr.getBooleanOption(t,"readonly"),s=rr.getBooleanOption(t,"fileMustExist"),a=rr.getBooleanOption(t,"uriPath"),u="timeout"in t?t.timeout:5e3,p="verbose"in t?t.verbose:null,f="nativeBinding"in t?t.nativeBinding:null;if(o&&i&&!r)throw new TypeError("In-memory/temporary databases cannot be readonly");if(!Number.isInteger(u)||u<0)throw new TypeError(\'Expected the "timeout" option to be a positive integer\');if(u>2147483647)throw new RangeError(\'Option "timeout" cannot be greater than 2147483647\');if(p!=null&&typeof p!="function")throw new TypeError(\'Expected the "verbose" option to be a function\');if(f!=null&&typeof f!="string")throw new TypeError(\'Expected the "nativeBinding" option to be a string\');let h;if(f==null?h=Fs||(Fs=as()("better_sqlite3.node")):h=require(As.resolve(f).replace(/(\\.node)?$/,".node")),h.isInitialized||(h.setErrorConstructor(Km),h.isInitialized=!0),!i&&!a&&!zm.existsSync(As.dirname(n)))throw new TypeError("Cannot open database because the directory does not exist");Object.defineProperties(this,$e({[rr.cppdb]:{value:new h.Database(n,e,i,o,s,a,u,p||null,r||null)}},ut.getters))}var ut=us();ye.prototype.prepare=ut.prepare;ye.prototype.transaction=ls();ye.prototype.pragma=ms();ye.prototype.backup=gs();ye.prototype.serialize=vs();ye.prototype.function=bs();ye.prototype.aggregate=Ss();ye.prototype.table=Os();ye.prototype.loadExtension=ut.loadExtension;ye.prototype.exec=ut.exec;ye.prototype.close=ut.close;ye.prototype.defaultSafeIntegers=ut.defaultSafeIntegers;ye.prototype.unsafeMode=ut.unsafeMode;ye.prototype[rr.inspect]=Ds();Ns.exports=ye});var Rs=A((B0,wi)=>{"use strict";wi.exports=Cs();wi.exports.SqliteError=gi()});var qs=A((U0,Ps)=>{var It=1e3,kt=It*60,Ot=kt*60,ct=Ot*24,Gm=ct*7,Hm=ct*365.25;Ps.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Jm(e);if(r==="number"&&isFinite(e))return t.long?Ym(e):Vm(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Jm(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Hm;case"weeks":case"week":case"w":return r*Gm;case"days":case"day":case"d":return r*ct;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ot;case"minutes":case"minute":case"mins":case"min":case"m":return r*kt;case"seconds":case"second":case"secs":case"sec":case"s":return r*It;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Vm(e){var t=Math.abs(e);return t>=ct?Math.round(e/ct)+"d":t>=Ot?Math.round(e/Ot)+"h":t>=kt?Math.round(e/kt)+"m":t>=It?Math.round(e/It)+"s":e+"ms"}function Ym(e){var t=Math.abs(e);return t>=ct?Zr(e,t,ct,"day"):t>=Ot?Zr(e,t,Ot,"hour"):t>=kt?Zr(e,t,kt,"minute"):t>=It?Zr(e,t,It,"second"):e+" ms"}function Zr(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Ms=A((z0,Ls)=>{function Qm(e){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=qs(),r.destroy=p,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let h=0;for(let l=0;l<f.length;l++)h=(h<<5)-h+f.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(f){let h,l=null,m,g;function E(..._){if(!E.enabled)return;let C=E,$=Number(new Date),L=$-(h||$);C.diff=L,C.prev=h,C.curr=$,h=$,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let G=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(R,K)=>{if(R==="%%")return"%";G++;let B=r.formatters[K];if(typeof B=="function"){let S=_[G];R=B.call(C,S),_.splice(G,1),G--}return R}),r.formatArgs.call(C,_),(C.log||r.log).apply(C,_)}return E.namespace=f,E.useColors=r.useColors(),E.color=r.selectColor(f),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(f)),g),set:_=>{l=_}}),typeof r.init=="function"&&r.init(E),E}function n(f,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+f);return l.log=this.log,l}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,l=(typeof f=="string"?f:"").split(/[\\s,]+/),m=l.length;for(h=0;h<m;h++)l[h]&&(f=l[h].replace(/\\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(f))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\\.\\*\\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ls.exports=Qm});var pe=A((ke,Xr)=>{ke.formatArgs=Xm;ke.save=ep;ke.load=tp;ke.useColors=Zm;ke.storage=rp();ke.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zm(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)}function Xm(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Xr.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}ke.log=console.debug||console.log||(()=>{});function ep(e){try{e?ke.storage.setItem("debug",e):ke.storage.removeItem("debug")}catch(t){}}function tp(){let e;try{e=ke.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function rp(){try{return localStorage}catch(e){}}Xr.exports=Ms()(ke);var{formatters:np}=Xr.exports;np.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var js=A((K0,$s)=>{"use strict";$s.exports=ip;function Tt(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function ip(e){if(e=e||{},e.circles)return op(e);return e.proto?n:r;function t(i,o){for(var s=Object.keys(i),a=new Array(s.length),u=0;u<s.length;u++){var p=s[u],f=i[p];typeof f!="object"||f===null?a[p]=f:f instanceof Date?a[p]=new Date(f):ArrayBuffer.isView(f)?a[p]=Tt(f):a[p]=o(f)}return a}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var o={};for(var s in i)if(Object.hasOwnProperty.call(i,s)!==!1){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(t(Array.from(a),r)):a instanceof Set?o[s]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?o[s]=Tt(a):o[s]=r(a)}return o}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var o={};for(var s in i){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(t(Array.from(a),n)):a instanceof Set?o[s]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?o[s]=Tt(a):o[s]=n(a)}return o}}function op(e){var t=[],r=[];return e.proto?o:i;function n(s,a){for(var u=Object.keys(s),p=new Array(u.length),f=0;f<u.length;f++){var h=u[f],l=s[h];if(typeof l!="object"||l===null)p[h]=l;else if(l instanceof Date)p[h]=new Date(l);else if(ArrayBuffer.isView(l))p[h]=Tt(l);else{var m=t.indexOf(l);m!==-1?p[h]=r[m]:p[h]=a(l)}}return p}function i(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,i);if(s instanceof Map)return new Map(n(Array.from(s),i));if(s instanceof Set)return new Set(n(Array.from(s),i));var a={};t.push(s),r.push(a);for(var u in s)if(Object.hasOwnProperty.call(s,u)!==!1){var p=s[u];if(typeof p!="object"||p===null)a[u]=p;else if(p instanceof Date)a[u]=new Date(p);else if(p instanceof Map)a[u]=new Map(n(Array.from(p),i));else if(p instanceof Set)a[u]=new Set(n(Array.from(p),i));else if(ArrayBuffer.isView(p))a[u]=Tt(p);else{var f=t.indexOf(p);f!==-1?a[u]=r[f]:a[u]=i(p)}}return t.pop(),r.pop(),a}function o(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,o);if(s instanceof Map)return new Map(n(Array.from(s),o));if(s instanceof Set)return new Set(n(Array.from(s),o));var a={};t.push(s),r.push(a);for(var u in s){var p=s[u];if(typeof p!="object"||p===null)a[u]=p;else if(p instanceof Date)a[u]=new Date(p);else if(p instanceof Map)a[u]=new Map(n(Array.from(p),o));else if(p instanceof Set)a[u]=new Set(n(Array.from(p),o));else if(ArrayBuffer.isView(p))a[u]=Tt(p);else{var f=t.indexOf(p);f!==-1?a[u]=r[f]:a[u]=o(p)}}return t.pop(),r.pop(),a}}});var lt=A((G0,zs)=>{var sp=require("util"),ft=pe()("log4js:configuration"),en=[],tn=[],Ws=e=>!e,Bs=e=>e&&typeof e=="object"&&!Array.isArray(e),ap=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),up=e=>e&&typeof e=="number"&&Number.isInteger(e),cp=e=>{tn.push(e),ft(`Added listener, now ${tn.length} listeners`)},fp=e=>{en.push(e),ft(`Added pre-processing listener, now ${en.length} listeners`)},Us=(e,t,r)=>{(Array.isArray(t)?t:[t]).forEach(i=>{if(i)throw new Error(`Problem with log4js configuration: (${sp.inspect(e,{depth:5})}) - ${r}`)})},lp=e=>{ft("New configuration to be validated: ",e),Us(e,Ws(Bs(e)),"must be an object."),ft(`Calling pre-processing listeners (${en.length})`),en.forEach(t=>t(e)),ft("Configuration pre-processing finished."),ft(`Calling configuration listeners (${tn.length})`),tn.forEach(t=>t(e)),ft("Configuration finished.")};zs.exports={configure:lp,addListener:cp,addPreProcessingListener:fp,throwExceptionIf:Us,anObject:Bs,anInteger:up,validIdentifier:ap,not:Ws}});var rn=A((H0,Ae)=>{"use strict";function Ks(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function dt(e){return Ks(e,2)}function dp(e){var t=Math.abs(e),r=String(Math.floor(t/60)),n=String(t%60);return r=("0"+r).slice(-2),n=("0"+n).slice(-2),e===0?"Z":(e<0?"+":"-")+r+":"+n}function Gs(e,t){typeof e!="string"&&(t=e,e=Ae.exports.ISO8601_FORMAT),t||(t=Ae.exports.now());var r=dt(t.getDate()),n=dt(t.getMonth()+1),i=dt(t.getFullYear()),o=dt(i.substring(2,4)),s=e.indexOf("yyyy")>-1?i:o,a=dt(t.getHours()),u=dt(t.getMinutes()),p=dt(t.getSeconds()),f=Ks(t.getMilliseconds(),3),h=dp(t.getTimezoneOffset()),l=e.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,s).replace(/hh/g,a).replace(/mm/g,u).replace(/ss/g,p).replace(/SSS/g,f).replace(/O/g,h);return l}function Xe(e,t,r,n){e["set"+(n?"":"UTC")+t](r)}function mp(e,t,r){var n=e.indexOf("O")<0,i=!1,o=[{pattern:/y{1,4}/,regexp:"\\\\d{1,4}",fn:function(h,l){Xe(h,"FullYear",l,n)}},{pattern:/MM/,regexp:"\\\\d{1,2}",fn:function(h,l){Xe(h,"Month",l-1,n),h.getMonth()!==l-1&&(i=!0)}},{pattern:/dd/,regexp:"\\\\d{1,2}",fn:function(h,l){i&&Xe(h,"Month",h.getMonth()-1,n),Xe(h,"Date",l,n)}},{pattern:/hh/,regexp:"\\\\d{1,2}",fn:function(h,l){Xe(h,"Hours",l,n)}},{pattern:/mm/,regexp:"\\\\d\\\\d",fn:function(h,l){Xe(h,"Minutes",l,n)}},{pattern:/ss/,regexp:"\\\\d\\\\d",fn:function(h,l){Xe(h,"Seconds",l,n)}},{pattern:/SSS/,regexp:"\\\\d\\\\d\\\\d",fn:function(h,l){Xe(h,"Milliseconds",l,n)}},{pattern:/O/,regexp:"[+-]\\\\d{1,2}:?\\\\d{2}?|Z",fn:function(h,l){l==="Z"?l=0:l=l.replace(":","");var m=Math.abs(l),g=(l>0?-1:1)*(m%100+Math.floor(m/100)*60);h.setUTCMinutes(h.getUTCMinutes()+g)}}],s=o.reduce(function(h,l){return l.pattern.test(h.regexp)?(l.index=h.regexp.match(l.pattern).index,h.regexp=h.regexp.replace(l.pattern,"("+l.regexp+")")):l.index=-1,h},{regexp:e,index:[]}),a=o.filter(function(h){return h.index>-1});a.sort(function(h,l){return h.index-l.index});var u=new RegExp(s.regexp),p=u.exec(t);if(p){var f=r||Ae.exports.now();return a.forEach(function(h,l){h.fn(f,p[l+1])}),f}throw new Error("String \'"+t+"\' could not be parsed as \'"+e+"\'")}function pp(e,t,r){if(!e)throw new Error("pattern must be supplied");return mp(e,t,r)}function hp(){return new Date}Ae.exports=Gs;Ae.exports.asString=Gs;Ae.exports.parse=pp;Ae.exports.now=hp;Ae.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";Ae.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";Ae.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";Ae.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var xi=A((J0,ia)=>{var et=rn(),Hs=require("os"),ir=require("util"),nr=require("path"),Js=require("url"),Vs=pe()("log4js:layouts"),Ys={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function Qs(e){return e?`\\x1B[${Ys[e][0]}m`:""}function Zs(e){return e?`\\x1B[${Ys[e][1]}m`:""}function gp(e,t){return Qs(t)+e+Zs(t)}function Xs(e,t){return gp(ir.format("[%s] [%s] %s - ",et.asString(e.startTime),e.level.toString(),e.categoryName),t)}function ea(e){return Xs(e)+ir.format(...e.data)}function nn(e){return Xs(e,e.level.colour)+ir.format(...e.data)}function ta(e){return ir.format(...e.data)}function ra(e){return e.data[0]}function na(e,t){let r="%r %p %c - %m%n",n=/%(-?[0-9]+)?(\\.?-?[0-9]+)?([[\\]cdhmnprzxXyflos%])(\\{([^}]+)\\})?|([^%]+)/;e=e||r;function i(b,O){let k=b.categoryName;if(O){let W=parseInt(O,10),M=k.split(".");W<M.length&&(k=M.slice(M.length-W).join("."))}return k}function o(b,O){let k=et.ISO8601_FORMAT;if(O)switch(k=O,k){case"ISO8601":case"ISO8601_FORMAT":k=et.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":k=et.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),Vs("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":k=et.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),Vs("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":k=et.DATETIME_FORMAT;break}return et.asString(k,b.startTime)}function s(){return Hs.hostname().toString()}function a(b){return ir.format(...b.data)}function u(){return Hs.EOL}function p(b){return b.level.toString()}function f(b){return et.asString("hh:mm:ss",b.startTime)}function h(b){return Qs(b.level.colour)}function l(b){return Zs(b.level.colour)}function m(){return"%"}function g(b){return b&&b.pid?b.pid.toString():process.pid.toString()}function E(){return g()}function _(b,O){return typeof t[O]!="undefined"?typeof t[O]=="function"?t[O](b):t[O]:null}function C(b,O){let k=b.context[O];return typeof k!="undefined"?typeof k=="function"?k(b):k:null}function $(b,O){let k=b.fileName||"";if(k=function(M){let q="file://";return M.startsWith(q)&&(typeof Js.fileURLToPath=="function"?M=Js.fileURLToPath(M):(M=nr.normalize(M.replace(new RegExp(`^${q}`),"")),process.platform==="win32"&&(M.startsWith("\\\\")?M=M.slice(1):M=nr.sep+nr.sep+M))),M}(k),O){let M=parseInt(O,10),q=k.split(nr.sep);q.length>M&&(k=q.slice(-M).join(nr.sep))}return k}function L(b){return b.lineNumber?`${b.lineNumber}`:""}function G(b){return b.columnNumber?`${b.columnNumber}`:""}function X(b){return b.callStack||""}let R={c:i,d:o,h:s,m:a,n:u,p,r:f,"[":h,"]":l,y:E,z:g,"%":m,x:_,X:C,f:$,l:L,o:G,s:X};function K(b,O,k){return R[b](O,k)}function B(b,O){let k;return b?(k=parseInt(b.slice(1),10),k>0?O.slice(0,k):O.slice(k)):O}function S(b,O){let k;if(b)if(b.charAt(0)==="-")for(k=parseInt(b.slice(1),10);O.length<k;)O+=" ";else for(k=parseInt(b,10);O.length<k;)O=` ${O}`;return O}function T(b,O,k){let W=b;return W=B(O,W),W=S(k,W),W}return function(b){let O="",k,W=e;for(;(k=n.exec(W))!==null;){let M=k[1],q=k[2],U=k[3],z=k[5],J=k[6];if(J)O+=J.toString();else{let Fr=K(U,b,z);O+=T(Fr,q,M)}W=W.slice(k.index+k[0].length)}return O}}var bi={messagePassThrough(){return ta},basic(){return ea},colored(){return nn},coloured(){return nn},pattern(e){return na(e&&e.pattern,e&&e.tokens)},dummy(){return ra}};ia.exports={basicLayout:ea,messagePassThroughLayout:ta,patternLayout:na,colouredLayout:nn,coloredLayout:nn,dummyLayout:ra,addLayout(e,t){bi[e]=t},layout(e,t){return bi[e]&&bi[e](t)}}});var mt=A((V0,sa)=>{var fe=lt(),oa=["white","grey","black","blue","cyan","green","magenta","red","yellow"],le=class{constructor(t,r,n){this.level=t,this.levelStr=r,this.colour=n}toString(){return this.levelStr}static getLevel(t,r){return t?t instanceof le?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),le[t.toString().toUpperCase()]||r):r}static addLevels(t){t&&(Object.keys(t).forEach(n=>{let i=n.toUpperCase();le[i]=new le(t[n].value,i,t[n].colour);let o=le.levels.findIndex(s=>s.levelStr===i);o>-1?le.levels[o]=le[i]:le.levels.push(le[i])}),le.levels.sort((n,i)=>n.level-i.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level===t.level}};le.levels=[];le.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});fe.addListener(e=>{let t=e.levels;t&&(fe.throwExceptionIf(e,fe.not(fe.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{fe.throwExceptionIf(e,fe.not(fe.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),fe.throwExceptionIf(e,fe.not(fe.anObject(t[n])),`level "${n}" must be an object`),fe.throwExceptionIf(e,fe.not(t[n].value),`level "${n}" must have a \'value\' property`),fe.throwExceptionIf(e,fe.not(fe.anInteger(t[n].value)),`level "${n}".value must have an integer value`),fe.throwExceptionIf(e,fe.not(t[n].colour),`level "${n}" must have a \'colour\' property`),fe.throwExceptionIf(e,fe.not(oa.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${oa.join(", ")}`)}))});fe.addListener(e=>{le.addLevels(e.levels)});sa.exports=le});var ga=A(sr=>{"use strict";var{parse:ca,stringify:fa}=JSON,{keys:yp}=Object,or=String,la="string",aa={},on="object",da=(e,t)=>t,vp=e=>e instanceof or?or(e):e,wp=(e,t)=>typeof t===la?new or(t):t,ma=(e,t,r,n)=>{let i=[];for(let o=yp(r),{length:s}=o,a=0;a<s;a++){let u=o[a],p=r[u];if(p instanceof or){let f=e[p];typeof f===on&&!t.has(f)?(t.add(f),r[u]=aa,i.push({k:u,a:[e,t,f,n]})):r[u]=n.call(r,u,f)}else r[u]!==aa&&(r[u]=n.call(r,u,p))}for(let{length:o}=i,s=0;s<o;s++){let{k:a,a:u}=i[s];r[a]=n.call(r,a,ma.apply(null,u))}return r},ua=(e,t,r)=>{let n=or(t.push(r)-1);return e.set(r,n),n},pa=(e,t)=>{let r=ca(e,wp).map(vp),n=r[0],i=t||da,o=typeof n===on&&n?ma(r,new Set,n,i):n;return i.call({"":o},"",o)};sr.parse=pa;var ha=(e,t,r)=>{let n=t&&typeof t===on?(f,h)=>f===""||-1<t.indexOf(f)?h:void 0:t||da,i=new Map,o=[],s=[],a=+ua(i,o,n.call({"":e},"",e)),u=!a;for(;a<o.length;)u=!0,s[a]=fa(o[a++],p,r);return"["+s.join(",")+"]";function p(f,h){if(u)return u=!u,h;let l=n.call(this,f,h);switch(typeof l){case on:if(l===null)return l;case la:return i.get(l)||ua(i,o,l)}return l}};sr.stringify=ha;var bp=e=>ca(ha(e));sr.toJSON=bp;var xp=e=>pa(fa(e));sr.fromJSON=xp});var Ei=A((Q0,wa)=>{var ya=ga(),va=mt(),Dt=class{constructor(t,r,n,i,o){this.startTime=new Date,this.categoryName=t,this.data=n,this.level=r,this.context=Object.assign({},i),this.pid=process.pid,o&&(this.functionName=o.functionName,this.fileName=o.fileName,this.lineNumber=o.lineNumber,this.columnNumber=o.columnNumber,this.callStack=o.callStack)}serialise(){return ya.stringify(this,(t,r)=>(r&&r.message&&r.stack?r=Object.assign({message:r.message,stack:r.stack},r):typeof r=="number"&&(Number.isNaN(r)||!Number.isFinite(r))?r=r.toString():typeof r=="undefined"&&(r=typeof r),r))}static deserialise(t){let r;try{let n=ya.parse(t,(i,o)=>{if(o&&o.message&&o.stack){let s=new Error(o);Object.keys(o).forEach(a=>{s[a]=o[a]}),o=s}return o});n.location={functionName:n.functionName,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,callStack:n.callStack},r=new Dt(n.categoryName,va.getLevel(n.level.levelStr),n.data,n.context,n.location),r.startTime=new Date(n.startTime),r.pid=n.pid,r.cluster=n.cluster}catch(n){r=new Dt("log4js",va.ERROR,["Unable to parse log:",t,"because: ",n])}return r}};wa.exports=Dt});var an=A((Z0,Ea)=>{var Fe=pe()("log4js:clustering"),Ep=Ei(),Sp=lt(),At=!1,Ne=null;try{Ne=require("cluster")}catch(e){Fe("cluster module not present"),At=!0}var _i=[],ur=!1,ar="NODE_APP_INSTANCE",ba=()=>ur&&process.env[ar]==="0",Si=()=>At||Ne&&Ne.isMaster||ba(),xa=e=>{_i.forEach(t=>t(e))},sn=(e,t)=>{if(Fe("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){Fe("received message: ",t.data);let r=Ep.deserialise(t.data);xa(r)}};At||Sp.addListener(e=>{_i.length=0,{pm2:ur,disableClustering:At,pm2InstanceVar:ar="NODE_APP_INSTANCE"}=e,Fe(`clustering disabled ? ${At}`),Fe(`cluster.isMaster ? ${Ne&&Ne.isMaster}`),Fe(`pm2 enabled ? ${ur}`),Fe(`pm2InstanceVar = ${ar}`),Fe(`process.env[${ar}] = ${process.env[ar]}`),ur&&process.removeListener("message",sn),Ne&&Ne.removeListener&&Ne.removeListener("message",sn),At||e.disableClustering?Fe("Not listening for cluster messages, because clustering disabled."):ba()?(Fe("listening for PM2 broadcast messages"),process.on("message",sn)):Ne&&Ne.isMaster?(Fe("listening for cluster messages"),Ne.on("message",sn)):Fe("not listening for messages, because we are not a master process")});Ea.exports={onlyOnMaster:(e,t)=>Si()?e():t,isMaster:Si,send:e=>{Si()?xa(e):(ur||(e.cluster={workerId:Ne.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{_i.push(e)}}});var Ia=A((X0,_a)=>{function _p(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},r=Object.keys(t),n=e.slice(-1).toLocaleUpperCase(),i=e.slice(0,-1).trim();if(r.indexOf(n)<0||!Number.isInteger(Number(i)))throw Error(`maxLogSize: "${e}" is invalid`);return i*t[n]}function Ip(e,t){let r=Object.assign({},t);return Object.keys(e).forEach(n=>{r[n]&&(r[n]=e[n](t[n]))}),r}function Ii(e){return Ip({maxLogSize:_p},e)}var Sa={dateFile:Ii,file:Ii,fileSync:Ii};_a.exports.modifyConfig=e=>Sa[e.type]?Sa[e.type](e):e});var Oa=A((ex,ka)=>{var kp=console.log.bind(console);function Op(e,t){return r=>{kp(e(r,t))}}function Tp(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Op(r,e.timezoneOffset)}ka.exports.configure=Tp});var Da=A(Ta=>{function Dp(e,t){return r=>{process.stdout.write(`${e(r,t)}\n`)}}function Ap(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Dp(r,e.timezoneOffset)}Ta.configure=Ap});var Fa=A((rx,Aa)=>{function Fp(e,t){return r=>{process.stderr.write(`${e(r,t)}\n`)}}function Np(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Fp(r,e.timezoneOffset)}Aa.exports.configure=Np});var Ca=A((nx,Na)=>{function Cp(e,t,r,n){let i=n.getLevel(e),o=n.getLevel(t,n.FATAL);return s=>{let a=s.level;i.isLessThanOrEqualTo(a)&&o.isGreaterThanOrEqualTo(a)&&r(s)}}function Rp(e,t,r,n){let i=r(e.appender);return Cp(e.level,e.maxLevel,i,n)}Na.exports.configure=Rp});var qa=A((ix,Pa)=>{var Ra=pe()("log4js:categoryFilter");function Pp(e,t){return typeof e=="string"&&(e=[e]),r=>{Ra(`Checking ${r.categoryName} against ${e}`),e.indexOf(r.categoryName)===-1&&(Ra("Not excluded, sending to appender"),t(r))}}function qp(e,t,r){let n=r(e.appender);return Pp(e.exclude,n)}Pa.exports.configure=qp});var $a=A((ox,Ma)=>{var La=pe()("log4js:noLogFilter");function Lp(e){return e.filter(r=>r!=null&&r!=="")}function Mp(e,t){return r=>{La(`Checking data: ${r.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=Lp(e);let n=new RegExp(e.join("|"),"i");(e.length===0||r.data.findIndex(i=>n.test(i))<0)&&(La("Not excluded, sending to appender"),t(r))}}function $p(e,t,r){let n=r(e.appender);return Mp(e.exclude,n)}Ma.exports.configure=$p});var Ee=A(ki=>{"use strict";ki.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};ki.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Wa=A((ax,ja)=>{var tt=require("constants"),jp=process.cwd,un=null,Wp=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return un||(un=jp.call(process)),un};try{process.cwd()}catch(e){}typeof process.chdir=="function"&&(Oi=process.chdir,process.chdir=function(e){un=null,Oi.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Oi));var Oi;ja.exports=Bp;function Bp(e){tt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,h,l){l&&process.nextTick(l)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,h,l,m){m&&process.nextTick(m)},e.lchownSync=function(){}),Wp==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function h(l,m,g){var E=Date.now(),_=0;f(l,m,function C($){if($&&($.code==="EACCES"||$.code==="EPERM"||$.code==="EBUSY")&&Date.now()-E<6e4){setTimeout(function(){e.stat(m,function(L,G){L&&L.code==="ENOENT"?f(l,m,C):g($)})},_),_<100&&(_+=10);return}g&&g($)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function h(l,m,g,E,_,C){var $;if(C&&typeof C=="function"){var L=0;$=function(G,X,R){if(G&&G.code==="EAGAIN"&&L<10)return L++,f.call(e,l,m,g,E,_,$);C.apply(this,arguments)}}return f.call(e,l,m,g,E,_,$)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(h,l,m,g,E){for(var _=0;;)try{return f.call(e,h,l,m,g,E)}catch(C){if(C.code==="EAGAIN"&&_<10){_++;continue}throw C}}}(e.readSync);function t(f){f.lchmod=function(h,l,m){f.open(h,tt.O_WRONLY|tt.O_SYMLINK,l,function(g,E){if(g){m&&m(g);return}f.fchmod(E,l,function(_){f.close(E,function(C){m&&m(_||C)})})})},f.lchmodSync=function(h,l){var m=f.openSync(h,tt.O_WRONLY|tt.O_SYMLINK,l),g=!0,E;try{E=f.fchmodSync(m,l),g=!1}finally{if(g)try{f.closeSync(m)}catch(_){}else f.closeSync(m)}return E}}function r(f){tt.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(h,l,m,g){f.open(h,tt.O_SYMLINK,function(E,_){if(E){g&&g(E);return}f.futimes(_,l,m,function(C){f.close(_,function($){g&&g(C||$)})})})},f.lutimesSync=function(h,l,m){var g=f.openSync(h,tt.O_SYMLINK),E,_=!0;try{E=f.futimesSync(g,l,m),_=!1}finally{if(_)try{f.closeSync(g)}catch(C){}else f.closeSync(g)}return E}):f.futimes&&(f.lutimes=function(h,l,m,g){g&&process.nextTick(g)},f.lutimesSync=function(){})}function n(f){return f&&function(h,l,m){return f.call(e,h,l,function(g){p(g)&&(g=null),m&&m.apply(this,arguments)})}}function i(f){return f&&function(h,l){try{return f.call(e,h,l)}catch(m){if(!p(m))throw m}}}function o(f){return f&&function(h,l,m,g){return f.call(e,h,l,m,function(E){p(E)&&(E=null),g&&g.apply(this,arguments)})}}function s(f){return f&&function(h,l,m){try{return f.call(e,h,l,m)}catch(g){if(!p(g))throw g}}}function a(f){return f&&function(h,l,m){typeof l=="function"&&(m=l,l=null);function g(E,_){_&&(_.uid<0&&(_.uid+=4294967296),_.gid<0&&(_.gid+=4294967296)),m&&m.apply(this,arguments)}return l?f.call(e,h,l,g):f.call(e,h,g)}}function u(f){return f&&function(h,l){var m=l?f.call(e,h,l):f.call(e,h);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function p(f){if(!f||f.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var za=A((ux,Ua)=>{var Ba=require("stream").Stream;Ua.exports=Up;function Up(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Ba.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var p=s[a];this[p]=i[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,h){if(f){o.emit("error",f),o.readable=!1;return}o.fd=h,o.emit("open",h),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Ba.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Ga=A((cx,Ka)=>{"use strict";Ka.exports=Kp;var zp=Object.getPrototypeOf||function(e){return e.__proto__};function Kp(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:zp(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var de=A((fx,Ai)=>{var re=require("fs"),Gp=Wa(),Hp=za(),Jp=Ga(),cn=require("util"),he,ln;typeof Symbol=="function"&&typeof Symbol.for=="function"?(he=Symbol.for("graceful-fs.queue"),ln=Symbol.for("graceful-fs.previous")):(he="___graceful-fs.queue",ln="___graceful-fs.previous");function Vp(){}function Va(e,t){Object.defineProperty(e,he,{get:function(){return t}})}var pt=Vp;cn.debuglog?pt=cn.debuglog("gfs4"):/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||"")&&(pt=function(){var e=cn.format.apply(cn,arguments);e="GFS4: "+e.split(/\\n/).join(`\nGFS4: `),console.error(e)});re[he]||(Ha=global[he]||[],Va(re,Ha),re.close=function(e){function t(r,n){return e.call(re,r,function(i){i||Ja(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,ln,{value:e}),t}(re.close),re.closeSync=function(e){function t(r){e.apply(re,arguments),Ja()}return Object.defineProperty(t,ln,{value:e}),t}(re.closeSync),/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){pt(re[he]),require("assert").equal(re[he].length,0)}));var Ha;global[he]||Va(global,re[he]);Ai.exports=Ti(Jp(re));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!re.__patched&&(Ai.exports=Ti(re),re.__patched=!0);function Ti(e){Gp(e),e.gracefulify=Ti,e.createReadStream=X,e.createWriteStream=R;var t=e.readFile;e.readFile=r;function r(S,T,b){return typeof T=="function"&&(b=T,T=null),O(S,T,b);function O(k,W,M,q){return t(k,W,function(U){U&&(U.code==="EMFILE"||U.code==="ENFILE")?Ft([O,[k,W,M],U,q||Date.now(),Date.now()]):typeof M=="function"&&M.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,M,q,U,z){return n(W,M,q,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,M,q,U,z){return o(W,M,q,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=u);function u(S,T,b,O){return typeof b=="function"&&(O=b,b=0),k(S,T,b,O);function k(W,M,q,U,z){return a(W,M,q,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var p=e.readdir;e.readdir=h;var f=/^v[0-5]\\./;function h(S,T,b){typeof T=="function"&&(b=T,T=null);var O=f.test(process.version)?function(M,q,U,z){return p(M,k(M,q,U,z))}:function(M,q,U,z){return p(M,q,k(M,q,U,z))};return O(S,T,b);function k(W,M,q,U){return function(z,J){z&&(z.code==="EMFILE"||z.code==="ENFILE")?Ft([O,[W,M,q],z,U||Date.now(),Date.now()]):(J&&J.sort&&J.sort(),typeof q=="function"&&q.call(this,z,J))}}}if(process.version.substr(0,4)==="v0.8"){var l=Hp(e);C=l.ReadStream,L=l.WriteStream}var m=e.ReadStream;m&&(C.prototype=Object.create(m.prototype),C.prototype.open=$);var g=e.WriteStream;g&&(L.prototype=Object.create(g.prototype),L.prototype.open=G),Object.defineProperty(e,"ReadStream",{get:function(){return C},set:function(S){C=S},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return L},set:function(S){L=S},enumerable:!0,configurable:!0});var E=C;Object.defineProperty(e,"FileReadStream",{get:function(){return E},set:function(S){E=S},enumerable:!0,configurable:!0});var _=L;Object.defineProperty(e,"FileWriteStream",{get:function(){return _},set:function(S){_=S},enumerable:!0,configurable:!0});function C(S,T){return this instanceof C?(m.apply(this,arguments),this):C.apply(Object.create(C.prototype),arguments)}function $(){var S=this;B(S.path,S.flags,S.mode,function(T,b){T?(S.autoClose&&S.destroy(),S.emit("error",T)):(S.fd=b,S.emit("open",b),S.read())})}function L(S,T){return this instanceof L?(g.apply(this,arguments),this):L.apply(Object.create(L.prototype),arguments)}function G(){var S=this;B(S.path,S.flags,S.mode,function(T,b){T?(S.destroy(),S.emit("error",T)):(S.fd=b,S.emit("open",b))})}function X(S,T){return new e.ReadStream(S,T)}function R(S,T){return new e.WriteStream(S,T)}var K=e.open;e.open=B;function B(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,M,q,U,z){return K(W,M,q,function(J,Fr){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}return e}function Ft(e){pt("ENQUEUE",e[0].name,e[1]),re[he].push(e),Di()}var fn;function Ja(){for(var e=Date.now(),t=0;t<re[he].length;++t)re[he][t].length>2&&(re[he][t][3]=e,re[he][t][4]=e);Di()}function Di(){if(clearTimeout(fn),fn=void 0,re[he].length!==0){var e=re[he].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)pt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){pt("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),p=Math.min(u*1.2,100);a>=p?(pt("RETRY",t.name,r),t.apply(null,r.concat([i]))):re[he].push(e)}fn===void 0&&(fn=setTimeout(Di,0))}}});var Fi=A(ht=>{"use strict";var Ya=Ee().fromCallback,Ce=de(),Yp=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Ce[e]=="function");Object.keys(Ce).forEach(e=>{e!=="promises"&&(ht[e]=Ce[e])});Yp.forEach(e=>{ht[e]=Ya(Ce[e])});ht.exists=function(e,t){return typeof t=="function"?Ce.exists(e,t):new Promise(r=>Ce.exists(e,r))};ht.read=function(e,t,r,n,i,o){return typeof o=="function"?Ce.read(e,t,r,n,i,o):new Promise((s,a)=>{Ce.read(e,t,r,n,i,(u,p,f)=>{if(u)return a(u);s({bytesRead:p,buffer:f})})})};ht.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Ce.write(e,t,...r):new Promise((n,i)=>{Ce.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof Ce.realpath.native=="function"&&(ht.realpath.native=Ya(Ce.realpath.native))});var Ci=A((dx,Za)=>{"use strict";var Ni=require("path");function Qa(e){return e=Ni.normalize(Ni.resolve(e)).split(Ni.sep),e.length>0?e[0]:null}var Qp=/[<>:"|?*]/;function Zp(e){let t=Qa(e);return e=e.replace(t,""),Qp.test(e)}Za.exports={getRootPath:Qa,invalidWin32Path:Zp}});var eu=A((mx,Xa)=>{"use strict";var Xp=de(),Ri=require("path"),eh=Ci().invalidWin32Path,th=parseInt("0777",8);function Pi(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&eh(e)){let s=new Error(e+" contains invalid WIN32 path characters.");return s.code="EINVAL",r(s)}let i=t.mode,o=t.fs||Xp;i===void 0&&(i=th&~process.umask()),n||(n=null),r=r||function(){},e=Ri.resolve(e),o.mkdir(e,i,s=>{if(!s)return n=n||e,r(null,n);switch(s.code){case"ENOENT":if(Ri.dirname(e)===e)return r(s);Pi(Ri.dirname(e),t,(a,u)=>{a?r(a,u):Pi(e,t,r,u)});break;default:o.stat(e,(a,u)=>{a||!u.isDirectory()?r(s,n):r(null,n)});break}})}Xa.exports=Pi});var ru=A((px,tu)=>{"use strict";var rh=de(),qi=require("path"),nh=Ci().invalidWin32Path,ih=parseInt("0777",8);function Li(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||rh;if(process.platform==="win32"&&nh(e)){let o=new Error(e+" contains invalid WIN32 path characters.");throw o.code="EINVAL",o}n===void 0&&(n=ih&~process.umask()),r||(r=null),e=qi.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(o){if(o.code==="ENOENT"){if(qi.dirname(e)===e)throw o;r=Li(qi.dirname(e),t,r),Li(e,t,r)}else{let s;try{s=i.statSync(e)}catch(a){throw o}if(!s.isDirectory())throw o}}return r}tu.exports=Li});var Oe=A((hx,nu)=>{"use strict";var oh=Ee().fromCallback,Mi=oh(eu()),$i=ru();nu.exports={mkdirs:Mi,mkdirsSync:$i,mkdirp:Mi,mkdirpSync:$i,ensureDir:Mi,ensureDirSync:$i}});var ji=A((gx,ou)=>{"use strict";var ve=de(),iu=require("os"),dn=require("path");function sh(){let e=dn.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=dn.join(iu.tmpdir(),e);let t=new Date(1435410243862);ve.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=ve.openSync(e,"r+");return ve.futimesSync(r,t,t),ve.closeSync(r),ve.statSync(e).mtime>1435410243e3}function ah(e){let t=dn.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=dn.join(iu.tmpdir(),t);let r=new Date(1435410243862);ve.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);ve.open(t,"r+",(i,o)=>{if(i)return e(i);ve.futimes(o,r,r,s=>{if(s)return e(s);ve.close(o,a=>{if(a)return e(a);ve.stat(t,(u,p)=>{if(u)return e(u);e(null,p.mtime>1435410243e3)})})})})})}function uh(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function ch(e,t,r,n){ve.open(e,"r+",(i,o)=>{if(i)return n(i);ve.futimes(o,t,r,s=>{ve.close(o,a=>{n&&n(s||a)})})})}function fh(e,t,r){let n=ve.openSync(e,"r+");return ve.futimesSync(n,t,r),ve.closeSync(n)}ou.exports={hasMillisRes:ah,hasMillisResSync:sh,timeRemoveMillis:uh,utimesMillis:ch,utimesMillisSync:fh}});var lr=A((yx,lu)=>{"use strict";var Re=de(),Se=require("path"),su=10,au=5,lh=0,Bi=process.versions.node.split("."),uu=Number.parseInt(Bi[0],10),cu=Number.parseInt(Bi[1],10),dh=Number.parseInt(Bi[2],10);function cr(){if(uu>su)return!0;if(uu===su){if(cu>au)return!0;if(cu===au&&dh>=lh)return!0}return!1}function mh(e,t,r){cr()?Re.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);Re.stat(t,{bigint:!0},(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))}):Re.stat(e,(n,i)=>{if(n)return r(n);Re.stat(t,(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))})}function ph(e,t){let r,n;cr()?r=Re.statSync(e,{bigint:!0}):r=Re.statSync(e);try{cr()?n=Re.statSync(t,{bigint:!0}):n=Re.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function hh(e,t,r,n){mh(e,t,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;return a&&a.ino&&a.dev&&a.ino===s.ino&&a.dev===s.dev?n(new Error("Source and destination must not be the same.")):s.isDirectory()&&Ui(e,t)?n(new Error(fr(e,t,r))):n(null,{srcStat:s,destStat:a})})}function gh(e,t,r){let{srcStat:n,destStat:i}=ph(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&Ui(e,t))throw new Error(fr(e,t,r));return{srcStat:n,destStat:i}}function Wi(e,t,r,n,i){let o=Se.resolve(Se.dirname(e)),s=Se.resolve(Se.dirname(r));if(s===o||s===Se.parse(s).root)return i();cr()?Re.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(fr(e,r,n))):Wi(e,t,s,n,i)):Re.stat(s,(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(fr(e,r,n))):Wi(e,t,s,n,i))}function fu(e,t,r,n){let i=Se.resolve(Se.dirname(e)),o=Se.resolve(Se.dirname(r));if(o===i||o===Se.parse(o).root)return;let s;try{cr()?s=Re.statSync(o,{bigint:!0}):s=Re.statSync(o)}catch(a){if(a.code==="ENOENT")return;throw a}if(s.ino&&s.dev&&s.ino===t.ino&&s.dev===t.dev)throw new Error(fr(e,r,n));return fu(e,t,o,n)}function Ui(e,t){let r=Se.resolve(e).split(Se.sep).filter(i=>i),n=Se.resolve(t).split(Se.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function fr(e,t,r){return`Cannot ${r} \'${e}\' to a subdirectory of itself, \'${t}\'.`}lu.exports={checkPaths:hh,checkPathsSync:gh,checkParentPaths:Wi,checkParentPathsSync:fu,isSrcSubdir:Ui}});var mu=A((vx,du)=>{"use strict";du.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}});var vu=A((wx,yu)=>{"use strict";var te=de(),dr=require("path"),yh=Oe().mkdirsSync,vh=ji().utimesMillisSync,mr=lr();function wh(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=mr.checkPathsSync(e,t,"copy");return mr.checkParentPathsSync(e,n,t,"copy"),bh(i,e,t,r)}function bh(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=dr.dirname(r);return te.existsSync(i)||yh(i),pu(e,t,r,n)}function pu(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return xh(e,t,r,n)}function xh(e,t,r,n){let o=(n.dereference?te.statSync:te.lstatSync)(t);if(o.isDirectory())return Ih(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Eh(o,e,t,r,n);if(o.isSymbolicLink())return Th(e,t,r,n)}function Eh(e,t,r,n,i){return t?Sh(e,r,n,i):hu(e,r,n,i)}function Sh(e,t,r,n){if(n.overwrite)return te.unlinkSync(r),hu(e,t,r,n);if(n.errorOnExist)throw new Error(`\'${r}\' already exists`)}function hu(e,t,r,n){return typeof te.copyFileSync=="function"?(te.copyFileSync(t,r),te.chmodSync(r,e.mode),n.preserveTimestamps?vh(r,e.atime,e.mtime):void 0):_h(e,t,r,n)}function _h(e,t,r,n){let o=mu()(65536),s=te.openSync(t,"r"),a=te.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let p=te.readSync(s,o,0,65536,u);te.writeSync(a,o,0,p),u+=p}n.preserveTimestamps&&te.futimesSync(a,e.atime,e.mtime),te.closeSync(s),te.closeSync(a)}function Ih(e,t,r,n,i){if(!t)return kh(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory \'${n}\' with directory \'${r}\'.`);return gu(r,n,i)}function kh(e,t,r,n){return te.mkdirSync(r),gu(t,r,n),te.chmodSync(r,e.mode)}function gu(e,t,r){te.readdirSync(e).forEach(n=>Oh(n,e,t,r))}function Oh(e,t,r,n){let i=dr.join(t,e),o=dr.join(r,e),{destStat:s}=mr.checkPathsSync(i,o,"copy");return pu(s,i,o,n)}function Th(e,t,r,n){let i=te.readlinkSync(t);if(n.dereference&&(i=dr.resolve(process.cwd(),i)),e){let o;try{o=te.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return te.symlinkSync(i,r);throw s}if(n.dereference&&(o=dr.resolve(process.cwd(),o)),mr.isSrcSubdir(i,o))throw new Error(`Cannot copy \'${i}\' to a subdirectory of itself, \'${o}\'.`);if(te.statSync(r).isDirectory()&&mr.isSrcSubdir(o,i))throw new Error(`Cannot overwrite \'${o}\' with \'${i}\'.`);return Dh(i,r)}else return te.symlinkSync(i,r)}function Dh(e,t){return te.unlinkSync(t),te.symlinkSync(e,t)}yu.exports=wh});var zi=A((bx,wu)=>{"use strict";wu.exports={copySync:vu()}});var We=A((xx,xu)=>{"use strict";var Ah=Ee().fromPromise,bu=Fi();function Fh(e){return bu.access(e).then(()=>!0).catch(()=>!1)}xu.exports={pathExists:Ah(Fh),pathExistsSync:bu.existsSync}});var Au=A((Ex,Du)=>{"use strict";var ge=de(),pr=require("path"),Nh=Oe().mkdirs,Ch=We().pathExists,Rh=ji().utimesMillis,hr=lr();function Ph(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`),hr.checkPaths(e,t,"copy",(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;hr.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?_u(Eu,a,e,t,r,n):Eu(a,e,t,r,n))})}function Eu(e,t,r,n,i){let o=pr.dirname(r);Ch(o,(s,a)=>{if(s)return i(s);if(a)return Ki(e,t,r,n,i);Nh(o,u=>u?i(u):Ki(e,t,r,n,i))})}function _u(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function Ki(e,t,r,n,i){return n.filter?_u(Su,e,t,r,n,i):Su(e,t,r,n,i)}function Su(e,t,r,n,i){(n.dereference?ge.stat:ge.lstat)(t,(s,a)=>{if(s)return i(s);if(a.isDirectory())return $h(a,e,t,r,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return qh(a,e,t,r,n,i);if(a.isSymbolicLink())return Bh(e,t,r,n,i)})}function qh(e,t,r,n,i,o){return t?Lh(e,r,n,i,o):Iu(e,r,n,i,o)}function Lh(e,t,r,n,i){if(n.overwrite)ge.unlink(r,o=>o?i(o):Iu(e,t,r,n,i));else return n.errorOnExist?i(new Error(`\'${r}\' already exists`)):i()}function Iu(e,t,r,n,i){return typeof ge.copyFile=="function"?ge.copyFile(t,r,o=>o?i(o):ku(e,r,n,i)):Mh(e,t,r,n,i)}function Mh(e,t,r,n,i){let o=ge.createReadStream(t);o.on("error",s=>i(s)).once("open",()=>{let s=ge.createWriteStream(r,{mode:e.mode});s.on("error",a=>i(a)).on("open",()=>o.pipe(s)).once("close",()=>ku(e,r,n,i))})}function ku(e,t,r,n){ge.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?Rh(t,e.atime,e.mtime,n):n())}function $h(e,t,r,n,i,o){return t?t&&!t.isDirectory()?o(new Error(`Cannot overwrite non-directory \'${n}\' with directory \'${r}\'.`)):Ou(r,n,i,o):jh(e,r,n,i,o)}function jh(e,t,r,n,i){ge.mkdir(r,o=>{if(o)return i(o);Ou(t,r,n,s=>s?i(s):ge.chmod(r,e.mode,i))})}function Ou(e,t,r,n){ge.readdir(e,(i,o)=>i?n(i):Tu(o,e,t,r,n))}function Tu(e,t,r,n,i){let o=e.pop();return o?Wh(e,o,t,r,n,i):i()}function Wh(e,t,r,n,i,o){let s=pr.join(r,t),a=pr.join(n,t);hr.checkPaths(s,a,"copy",(u,p)=>{if(u)return o(u);let{destStat:f}=p;Ki(f,s,a,i,h=>h?o(h):Tu(e,r,n,i,o))})}function Bh(e,t,r,n,i){ge.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=pr.resolve(process.cwd(),s)),e)ge.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ge.symlink(s,r,i):i(a):(n.dereference&&(u=pr.resolve(process.cwd(),u)),hr.isSrcSubdir(s,u)?i(new Error(`Cannot copy \'${s}\' to a subdirectory of itself, \'${u}\'.`)):e.isDirectory()&&hr.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite \'${u}\' with \'${s}\'.`)):Uh(s,r,i)));else return ge.symlink(s,r,i)})}function Uh(e,t,r){ge.unlink(t,n=>n?r(n):ge.symlink(e,t,r))}Du.exports=Ph});var Gi=A((Sx,Fu)=>{"use strict";var zh=Ee().fromCallback;Fu.exports={copy:zh(Au())}});var ju=A((_x,$u)=>{"use strict";var Nu=de(),qu=require("path"),V=require("assert"),gr=process.platform==="win32";function Lu(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Nu[r],r=r+"Sync",e[r]=e[r]||Nu[r]}),e.maxBusyTries=e.maxBusyTries||3}function Hi(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),V(e,"rimraf: missing path"),V.strictEqual(typeof e,"string","rimraf: path should be a string"),V.strictEqual(typeof r,"function","rimraf: callback function required"),V(t,"rimraf: invalid options argument provided"),V.strictEqual(typeof t,"object","rimraf: options should be object"),Lu(t),Cu(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>Cu(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Cu(e,t,r){V(e),V(t),V(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&gr)return Ru(e,t,n,r);if(i&&i.isDirectory())return mn(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return gr?Ru(e,t,o,r):mn(e,t,o,r);if(o.code==="EISDIR")return mn(e,t,o,r)}return r(o)})})}function Ru(e,t,r,n){V(e),V(t),V(typeof n=="function"),r&&V(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?mn(e,t,r,n):t.unlink(e,n)})})}function Pu(e,t,r){let n;V(e),V(t),r&&V(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?pn(e,t,r):t.unlinkSync(e)}function mn(e,t,r,n){V(e),V(t),r&&V(r instanceof Error),V(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Kh(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Kh(e,t,r){V(e),V(t),V(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Hi(qu.join(e,a),t,u=>{if(!s){if(u)return r(s=u);--o===0&&t.rmdir(e,r)}})})})}function Mu(e,t){let r;t=t||{},Lu(t),V(e,"rimraf: missing path"),V.strictEqual(typeof e,"string","rimraf: path should be a string"),V(t,"rimraf: missing options"),V.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&gr&&Pu(e,t,n)}try{r&&r.isDirectory()?pn(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return gr?Pu(e,t,n):pn(e,t,n);if(n.code!=="EISDIR")throw n;pn(e,t,n)}}function pn(e,t,r){V(e),V(t),r&&V(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Gh(e,t);else if(n.code!=="ENOENT")throw n}}function Gh(e,t){if(V(e),V(t),t.readdirSync(e).forEach(r=>Mu(qu.join(e,r),t)),gr){let r=Date.now();do try{return t.rmdirSync(e,t)}catch(n){}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}$u.exports=Hi;Hi.sync=Mu});var yr=A((Ix,Bu)=>{"use strict";var Hh=Ee().fromCallback,Wu=ju();Bu.exports={remove:Hh(Wu),removeSync:Wu.sync}});var Yu=A((kx,Vu)=>{"use strict";var Jh=Ee().fromCallback,Ku=de(),Gu=require("path"),Hu=Oe(),Ju=yr(),Uu=Jh(function(t,r){r=r||function(){},Ku.readdir(t,(n,i)=>{if(n)return Hu.mkdirs(t,r);i=i.map(s=>Gu.join(t,s)),o();function o(){let s=i.pop();if(!s)return r();Ju.remove(s,a=>{if(a)return r(a);o()})}})});function zu(e){let t;try{t=Ku.readdirSync(e)}catch(r){return Hu.mkdirsSync(e)}t.forEach(r=>{r=Gu.join(e,r),Ju.removeSync(r)})}Vu.exports={emptyDirSync:zu,emptydirSync:zu,emptyDir:Uu,emptydir:Uu}});var ec=A((Ox,Xu)=>{"use strict";var Vh=Ee().fromCallback,Qu=require("path"),vr=de(),Zu=Oe(),Yh=We().pathExists;function Qh(e,t){function r(){vr.writeFile(e,"",n=>{if(n)return t(n);t()})}vr.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=Qu.dirname(e);Yh(o,(s,a)=>{if(s)return t(s);if(a)return r();Zu.mkdirs(o,u=>{if(u)return t(u);r()})})})}function Zh(e){let t;try{t=vr.statSync(e)}catch(n){}if(t&&t.isFile())return;let r=Qu.dirname(e);vr.existsSync(r)||Zu.mkdirsSync(r),vr.writeFileSync(e,"")}Xu.exports={createFile:Vh(Qh),createFileSync:Zh}});var oc=A((Tx,ic)=>{"use strict";var Xh=Ee().fromCallback,rc=require("path"),gt=de(),nc=Oe(),tc=We().pathExists;function eg(e,t,r){function n(i,o){gt.link(i,o,s=>{if(s)return r(s);r(null)})}tc(t,(i,o)=>{if(i)return r(i);if(o)return r(null);gt.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);let a=rc.dirname(t);tc(a,(u,p)=>{if(u)return r(u);if(p)return n(e,t);nc.mkdirs(a,f=>{if(f)return r(f);n(e,t)})})})})}function tg(e,t){if(gt.existsSync(t))return;try{gt.lstatSync(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=rc.dirname(t);return gt.existsSync(n)||nc.mkdirsSync(n),gt.linkSync(e,t)}ic.exports={createLink:Xh(eg),createLinkSync:tg}});var ac=A((Dx,sc)=>{"use strict";var rt=require("path"),wr=de(),rg=We().pathExists;function ng(e,t,r){if(rt.isAbsolute(e))return wr.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=rt.dirname(t),i=rt.join(n,e);return rg(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):wr.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:rt.relative(n,e)})))}}function ig(e,t){let r;if(rt.isAbsolute(e)){if(r=wr.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=rt.dirname(t),i=rt.join(n,e);if(r=wr.existsSync(i),r)return{toCwd:i,toDst:e};if(r=wr.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:rt.relative(n,e)}}}sc.exports={symlinkPaths:ng,symlinkPathsSync:ig}});var fc=A((Ax,cc)=>{"use strict";var uc=de();function og(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);uc.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function sg(e,t){let r;if(t)return t;try{r=uc.lstatSync(e)}catch(n){return"file"}return r&&r.isDirectory()?"dir":"file"}cc.exports={symlinkType:og,symlinkTypeSync:sg}});var yc=A((Fx,gc)=>{"use strict";var ag=Ee().fromCallback,dc=require("path"),Nt=de(),mc=Oe(),ug=mc.mkdirs,cg=mc.mkdirsSync,pc=ac(),fg=pc.symlinkPaths,lg=pc.symlinkPathsSync,hc=fc(),dg=hc.symlinkType,mg=hc.symlinkTypeSync,lc=We().pathExists;function pg(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,lc(t,(i,o)=>{if(i)return n(i);if(o)return n(null);fg(e,t,(s,a)=>{if(s)return n(s);e=a.toDst,dg(a.toCwd,r,(u,p)=>{if(u)return n(u);let f=dc.dirname(t);lc(f,(h,l)=>{if(h)return n(h);if(l)return Nt.symlink(e,t,p,n);ug(f,m=>{if(m)return n(m);Nt.symlink(e,t,p,n)})})})})})}function hg(e,t,r){if(Nt.existsSync(t))return;let i=lg(e,t);e=i.toDst,r=mg(i.toCwd,r);let o=dc.dirname(t);return Nt.existsSync(o)||cg(o),Nt.symlinkSync(e,t,r)}gc.exports={createSymlink:ag(pg),createSymlinkSync:hg}});var wc=A((Nx,vc)=>{"use strict";var hn=ec(),gn=oc(),yn=yc();vc.exports={createFile:hn.createFile,createFileSync:hn.createFileSync,ensureFile:hn.createFile,ensureFileSync:hn.createFileSync,createLink:gn.createLink,createLinkSync:gn.createLinkSync,ensureLink:gn.createLink,ensureLinkSync:gn.createLinkSync,createSymlink:yn.createSymlink,createSymlinkSync:yn.createSymlinkSync,ensureSymlink:yn.createSymlink,ensureSymlinkSync:yn.createSymlinkSync}});var Sc=A((Cx,Ec)=>{var Ct;try{Ct=de()}catch(e){Ct=require("fs")}function gg(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Ct,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(o,s){if(o)return r(o);s=xc(s);var a;try{a=JSON.parse(s,t?t.reviver:null)}catch(u){return i?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,a)})}function yg(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Ct,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=xc(i),JSON.parse(i,t.reviver)}catch(o){if(n)throw o.message=e+": "+o.message,o;return null}}function bc(e,t){var r,n=`\n`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\\n/g,n)+n}function vg(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||Ct,o="";try{o=bc(t,r)}catch(s){n&&n(s,null);return}i.writeFile(e,o,r,n)}function wg(e,t,r){r=r||{};var n=r.fs||Ct,i=bc(t,r);return n.writeFileSync(e,i,r)}function xc(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\\uFEFF/,""),e}var bg={readFile:gg,readFileSync:yg,writeFile:vg,writeFileSync:wg};Ec.exports=bg});var wn=A((Rx,Ic)=>{"use strict";var _c=Ee().fromCallback,vn=Sc();Ic.exports={readJson:_c(vn.readFile),readJsonSync:vn.readFileSync,writeJson:_c(vn.writeFile),writeJsonSync:vn.writeFileSync}});var Tc=A((Px,Oc)=>{"use strict";var xg=require("path"),Eg=Oe(),Sg=We().pathExists,kc=wn();function _g(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=xg.dirname(e);Sg(i,(o,s)=>{if(o)return n(o);if(s)return kc.writeJson(e,t,r,n);Eg.mkdirs(i,a=>{if(a)return n(a);kc.writeJson(e,t,r,n)})})}Oc.exports=_g});var Ac=A((qx,Dc)=>{"use strict";var Ig=de(),kg=require("path"),Og=Oe(),Tg=wn();function Dg(e,t,r){let n=kg.dirname(e);Ig.existsSync(n)||Og.mkdirsSync(n),Tg.writeJsonSync(e,t,r)}Dc.exports=Dg});var Nc=A((Lx,Fc)=>{"use strict";var Ag=Ee().fromCallback,we=wn();we.outputJson=Ag(Tc());we.outputJsonSync=Ac();we.outputJSON=we.outputJson;we.outputJSONSync=we.outputJsonSync;we.writeJSON=we.writeJson;we.writeJSONSync=we.writeJsonSync;we.readJSON=we.readJson;we.readJSONSync=we.readJsonSync;Fc.exports=we});var Mc=A((Mx,Lc)=>{"use strict";var Pc=de(),Fg=require("path"),Ng=zi().copySync,qc=yr().removeSync,Cg=Oe().mkdirpSync,Cc=lr();function Rg(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=Cc.checkPathsSync(e,t,"move");return Cc.checkParentPathsSync(e,i,t,"move"),Cg(Fg.dirname(t)),Pg(e,t,n)}function Pg(e,t,r){if(r)return qc(t),Rc(e,t,r);if(Pc.existsSync(t))throw new Error("dest already exists.");return Rc(e,t,r)}function Rc(e,t,r){try{Pc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return qg(e,t,r)}}function qg(e,t,r){return Ng(e,t,{overwrite:r,errorOnExist:!0}),qc(e)}Lc.exports=Rg});var jc=A(($x,$c)=>{"use strict";$c.exports={moveSync:Mc()}});var Kc=A((jx,zc)=>{"use strict";var Lg=de(),Mg=require("path"),$g=Gi().copy,Uc=yr().remove,jg=Oe().mkdirp,Wg=We().pathExists,Wc=lr();function Bg(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;Wc.checkPaths(e,t,"move",(o,s)=>{if(o)return n(o);let{srcStat:a}=s;Wc.checkParentPaths(e,a,t,"move",u=>{if(u)return n(u);jg(Mg.dirname(t),p=>p?n(p):Ug(e,t,i,n))})})}function Ug(e,t,r,n){if(r)return Uc(t,i=>i?n(i):Bc(e,t,r,n));Wg(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):Bc(e,t,r,n))}function Bc(e,t,r,n){Lg.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):zg(e,t,r,n):n())}function zg(e,t,r,n){$g(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Uc(e,n))}zc.exports=Bg});var Hc=A((Wx,Gc)=>{"use strict";var Kg=Ee().fromCallback;Gc.exports={move:Kg(Kc())}});var Qc=A((Bx,Yc)=>{"use strict";var Gg=Ee().fromCallback,br=de(),Jc=require("path"),Vc=Oe(),Hg=We().pathExists;function Jg(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Jc.dirname(e);Hg(i,(o,s)=>{if(o)return n(o);if(s)return br.writeFile(e,t,r,n);Vc.mkdirs(i,a=>{if(a)return n(a);br.writeFile(e,t,r,n)})})}function Vg(e,...t){let r=Jc.dirname(e);if(br.existsSync(r))return br.writeFileSync(e,...t);Vc.mkdirsSync(r),br.writeFileSync(e,...t)}Yc.exports={outputFile:Gg(Jg),outputFileSync:Vg}});var Vi=A((Ux,Ji)=>{"use strict";Ji.exports=Object.assign({},Fi(),zi(),Gi(),Yu(),wc(),Nc(),Oe(),jc(),Hc(),Qc(),We(),yr());var Zc=require("fs");Object.getOwnPropertyDescriptor(Zc,"promises")&&Object.defineProperty(Ji.exports,"promises",{get(){return Zc.promises}})});var ef=A((zx,Xc)=>{Xc.exports=()=>new Date});var rf=A((Kx,tf)=>{var Yg=pe()("streamroller:fileNameFormatter"),Qg=require("path"),Zg=".gz",Xg=".";tf.exports=({file:e,keepFileExt:t,needsIndex:r,alwaysIncludeDate:n,compress:i,fileNameSep:o})=>{let s=o||Xg,a=Qg.join(e.dir,e.name),u=m=>m+e.ext,p=(m,g,E)=>(r||!E)&&g?m+s+g:m,f=(m,g,E)=>(g>0||n)&&E?m+s+E:m,h=(m,g)=>g&&i?m+Zg:m,l=t?[f,p,u,h]:[u,f,p,h];return({date:m,index:g})=>(Yg(`_formatFileName: date=${m}, index=${g}`),l.reduce((E,_)=>_(E,g,m),a))}});var af=A((Gx,sf)=>{var yt=pe()("streamroller:fileNameParser"),nf=".gz",of=rn(),ey=".";sf.exports=({file:e,keepFileExt:t,pattern:r,fileNameSep:n})=>{let i=n||ey,o=(l,m)=>l.endsWith(nf)?(yt("it is gzipped"),m.isCompressed=!0,l.slice(0,-1*nf.length)):l,s="__NOT_MATCHING__",h=[o,t?l=>l.startsWith(e.name)&&l.endsWith(e.ext)?(yt("it starts and ends with the right things"),l.slice(e.name.length+1,-1*e.ext.length)):s:l=>l.startsWith(e.base)?(yt("it starts with the right things"),l.slice(e.base.length+1)):s,r?(l,m)=>{let g=l.split(i),E=g[g.length-1];yt("items: ",g,", indexStr: ",E);let _=l;E!==void 0&&E.match(/^\\d+$/)?(_=l.slice(0,-1*(E.length+1)),yt(`dateStr is ${_}`),r&&!_&&(_=E,E="0")):E="0";try{let C=of.parse(r,_,new Date(0,0));return of.asString(r,C)!==_?l:(m.index=parseInt(E,10),m.date=_,m.timestamp=C.getTime(),"")}catch(C){return yt(`Problem parsing ${_} as ${r}, error was: `,C),l}}:(l,m)=>l.match(/^\\d+$/)?(yt("it has an index"),m.index=parseInt(l,10),""):l];return l=>{let m={filename:l,index:0,isCompressed:!1};return h.reduce((E,_)=>_(E,m),l)?null:m}}});var cf=A((Hx,uf)=>{var _e=pe()("streamroller:moveAndMaybeCompressFile"),He=Vi(),ty=require("zlib"),ry=function(e){let t={mode:parseInt("0600",8),compress:!1},r=Object.assign({},t,e);return _e(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(r)}`),r},ny=async(e,t,r)=>{if(r=ry(r),e===t){_e("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await He.pathExists(e))if(_e(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${r.compress?"with":"without"} compress`),r.compress)await new Promise((n,i)=>{let o=!1,s=He.createWriteStream(t,{mode:r.mode,flags:"wx"}).on("open",()=>{o=!0;let a=He.createReadStream(e).on("open",()=>{a.pipe(ty.createGzip()).pipe(s)}).on("error",u=>{_e(`moveAndMaybeCompressFile: error reading ${e}`,u),s.destroy(u)})}).on("finish",()=>{_e(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),He.unlink(e).then(n).catch(a=>{_e(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,a),He.truncate(e).then(n).catch(u=>{_e(`moveAndMaybeCompressFile: error truncating ${e}`,u),i(u)})})}).on("error",a=>{o?(_e(`moveAndMaybeCompressFile: error writing ${t}, deleting`,a),He.unlink(t).then(()=>{i(a)}).catch(u=>{_e(`moveAndMaybeCompressFile: error deleting ${t}`,u),i(u)})):(_e(`moveAndMaybeCompressFile: error creating ${t}`,a),i(a))})}).catch(()=>{});else{_e(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await He.move(e,t,{overwrite:!0})}catch(n){if(_e(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),n.code!=="ENOENT"){_e("moveAndMaybeCompressFile: trying copy+truncate instead");try{await He.copy(e,t,{overwrite:!0}),await He.truncate(e)}catch(i){_e("moveAndMaybeCompressFile: error copy+truncate",i)}}}}};uf.exports=ny});var En=A((Jx,ff)=>{var Te=pe()("streamroller:RollingFileWriteStream"),wt=Vi(),vt=require("path"),iy=require("os"),bn=ef(),xn=rn(),{Writable:oy}=require("stream"),sy=rf(),ay=af(),uy=cf(),cy=e=>(Te(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>wt.unlink(t).catch(r=>{Te(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${r}`)})))),Yi=class extends oy{constructor(t,r){if(Te(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(vt.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${vt.sep}`)===0&&(t=t.replace("~",iy.homedir())),super(r),this.options=this._parseOption(r),this.fileObject=vt.parse(t),this.fileObject.dir===""&&(this.fileObject=vt.parse(vt.join(process.cwd(),t))),this.fileFormatter=sy({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=ay({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=xn(this.options.pattern,bn())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),Te(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=wt.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=xn(this.options.pattern,t.mtime))}catch(t){return}}_parseOption(t){let r={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},r,t);if(!n.maxSize)delete n.maxSize;else if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`);if(n.numBackups||n.numBackups===0){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return Te(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,r,n){this._shouldRoll().then(()=>{Te(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,r,i=>{this.state.currentSize+=t.length,n(i)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(Te(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==xn(this.options.pattern,bn())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return Te("_roll: closing the current stream"),new Promise((t,r)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(r)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),r=this.state.currentDate?t.filter(n=>n.date===this.state.currentDate):t;for(let n=r.length;n>=0;n--){Te(`_moveOldFiles: i = ${n}`);let i=this.fileFormatter({date:this.state.currentDate,index:n}),o=this.fileFormatter({date:this.state.currentDate,index:n+1}),s={compress:this.options.compress&&n===0,mode:this.options.mode};await uy(i,o,s)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?xn(this.options.pattern,bn()):null,Te(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((n,i)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(n).catch(i)})})}async _getExistingFiles(){let t=await wt.readdir(this.fileObject.dir).catch(()=>[]);Te(`_getExistingFiles: files=${t}`);let r=t.map(i=>this.fileNameParser(i)).filter(i=>i),n=i=>(i.timestamp?i.timestamp:bn().getTime())-i.index;return r.sort((i,o)=>n(i)-n(o)),r}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),r=o=>{try{return wt.mkdirSync(o,{recursive:!0})}catch(s){if(s.code==="ENOENT")return r(vt.dirname(o)),r(o);if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;try{if(wt.statSync(o).isDirectory())return o;throw s}catch(a){throw s}}};r(this.fileObject.dir);let n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},i=function(o,s,a){return o[a]=o[s],delete o[s],o};wt.appendFileSync(t,"",i($e({},n),"flags","flag")),this.currentFileStream=wt.createWriteStream(t,n),this.currentFileStream.on("error",o=>{this.emit("error",o)})}async _clean(){let t=await this._getExistingFiles();if(Te(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),Te("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let r=t.slice(0,t.length-this.options.numToKeep).map(n=>vt.format({dir:this.fileObject.dir,base:n.filename}));await cy(r)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};ff.exports=Yi});var df=A((Yx,lf)=>{var fy=En(),Qi=class extends fy{constructor(t,r,n,i){i||(i={}),r&&(i.maxSize=r),!i.numBackups&&i.numBackups!==0&&(!n&&n!==0&&(n=1),i.numBackups=n),super(t,i),this.backups=i.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};lf.exports=Qi});var pf=A((Qx,mf)=>{var ly=En(),Zi=class extends ly{constructor(t,r,n){r&&typeof r=="object"&&(n=r,r=null),n||(n={}),r||(r="yyyy-MM-dd"),n.pattern=r,!n.numBackups&&n.numBackups!==0?(!n.daysToKeep&&n.daysToKeep!==0?n.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),n.numBackups=n.daysToKeep):n.daysToKeep=n.numBackups,super(t,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};mf.exports=Zi});var Xi=A((Zx,hf)=>{hf.exports={RollingFileWriteStream:En(),RollingFileStream:df(),DateRollingFileStream:pf()}});var bf=A((Xx,wf)=>{var gf=pe()("log4js:file"),eo=require("path"),dy=Xi(),vf=require("os"),my=vf.EOL,Sn=!1,_n=new Set;function yf(){_n.forEach(e=>{e.sighupHandler()})}function py(e,t,r,n,i,o){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(eo.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${eo.sep}.+)`),vf.homedir()),e=eo.normalize(e),n=!n&&n!==0?5:n,gf("Creating file appender (",e,", ",r,", ",n,", ",i,", ",o,")");function s(p,f,h,l){let m=new dy.RollingFileStream(p,f,h,l);return m.on("error",g=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",p,g)}),m.on("drain",()=>{process.emit("log4js:pause",!1)}),m}let a=s(e,r,n,i),u=function(p){if(a.writable){if(i.removeColor===!0){let f=/\\x1b[[0-9;]*m/g;p.data=p.data.map(h=>typeof h=="string"?h.replace(f,""):h)}a.write(t(p,o)+my,"utf8")||process.emit("log4js:pause",!0)}};return u.reopen=function(){a.end(()=>{a=s(e,r,n,i)})},u.sighupHandler=function(){gf("SIGHUP handler called."),u.reopen()},u.shutdown=function(p){_n.delete(u),_n.size===0&&Sn&&(process.removeListener("SIGHUP",yf),Sn=!1),a.end("","utf-8",p)},_n.add(u),Sn||(process.on("SIGHUP",yf),Sn=!0),u}function hy(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,py(e.filename,r,e.maxLogSize,e.backups,e,e.timezoneOffset)}wf.exports.configure=hy});var Ef=A((eE,xf)=>{var gy=Xi(),yy=require("os"),vy=yy.EOL;function wy(e,t,r){let n=new gy.DateRollingFileStream(e,t,r);return n.on("error",i=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,i)}),n.on("drain",()=>{process.emit("log4js:pause",!1)}),n}function by(e,t,r,n,i){n.maxSize=n.maxLogSize;let o=wy(e,t,n),s=function(a){o.writable&&(o.write(r(a,i)+vy,"utf8")||process.emit("log4js:pause",!0))};return s.shutdown=function(a){o.end("","utf-8",a)},s}function xy(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,by(e.filename,e.pattern,r,e,e.timezoneOffset)}xf.exports.configure=xy});var kf=A((tE,If)=>{var Je=pe()("log4js:fileSync"),Ue=require("path"),Be=require("fs"),Sf=require("os"),Ey=Sf.EOL;function _f(e,t){let r=n=>{try{return Be.mkdirSync(n,{recursive:!0})}catch(i){if(i.code==="ENOENT")return r(Ue.dirname(n)),r(n);if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(Be.statSync(n).isDirectory())return n;throw i}catch(o){throw i}}};r(Ue.dirname(e)),Be.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var to=class{constructor(t,r,n,i){if(Je("In RollingFileStream"),r<0)throw new Error(`maxLogSize (${r}) should be > 0`);this.filename=t,this.size=r,this.backups=n,this.options=i,this.currentSize=0;function o(s){let a=0;try{a=Be.statSync(s).size}catch(u){_f(s,i)}return a}this.currentSize=o(this.filename)}shouldRoll(){return Je("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let r=this,n=new RegExp(`^${Ue.basename(t)}`);function i(p){return n.test(p)}function o(p){return parseInt(p.slice(`${Ue.basename(t)}.`.length),10)||0}function s(p,f){return o(p)-o(f)}function a(p){let f=o(p);if(Je(`Index of ${p} is ${f}`),r.backups===0)Be.truncateSync(t,0);else if(f<r.backups){try{Be.unlinkSync(`${t}.${f+1}`)}catch(h){}Je(`Renaming ${p} -> ${t}.${f+1}`),Be.renameSync(Ue.join(Ue.dirname(t),p),`${t}.${f+1}`)}}function u(){Je("Renaming the old files"),Be.readdirSync(Ue.dirname(t)).filter(i).sort(s).reverse().forEach(a)}Je("Rolling, rolling, rolling"),u()}write(t,r){let n=this;function i(){Je("writing the chunk to the file"),n.currentSize+=t.length,Be.appendFileSync(n.filename,t)}Je("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),i()}};function Sy(e,t,r,n,i,o){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Ue.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Ue.sep}.+)`),Sf.homedir()),e=Ue.normalize(e),n=!n&&n!==0?5:n,Je("Creating fileSync appender (",e,", ",r,", ",n,", ",i,", ",o,")");function s(u,p,f){let h;return p?h=new to(u,p,f,i):h=(l=>(_f(l,i),{write(m){Be.appendFileSync(l,m)}}))(u),h}let a=s(e,r,n);return u=>{a.write(t(u,o)+Ey)}}function _y(e,t){let r=t.basicLayout;e.layout&&(r=t.layout(e.layout.type,e.layout));let n={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return Sy(e.filename,r,e.maxLogSize,e.backups,n,e.timezoneOffset)}If.exports.configure=_y});var Tf=A((rE,Of)=>{var ze=pe()("log4js:tcp"),Iy=require("net");function ky(e,t){let r=!1,n=[],i,o=3,s="__LOG4JS__";function a(h){ze("Writing log event to socket"),r=i.write(`${t(h)}${s}`,"utf8")}function u(){let h;for(ze("emptying buffer");h=n.shift();)a(h)}function p(){ze(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),s=`${e.endMsg||"__LOG4JS__"}`,i=Iy.createConnection(e.port||5e3,e.host||"localhost"),i.on("connect",()=>{ze("socket connected"),u(),r=!0}),i.on("drain",()=>{ze("drain event received, emptying buffer"),r=!0,u()}),i.on("timeout",i.end.bind(i)),i.on("error",h=>{ze("connection error",h),r=!1,u()}),i.on("close",p)}p();function f(h){r?a(h):(ze("buffering log event because it cannot write at the moment"),n.push(h))}return f.shutdown=function(h){ze("shutdown called"),n.length&&o?(ze("buffer has items, waiting 100ms to empty"),o-=1,setTimeout(()=>{f.shutdown(h)},100)):(i.removeAllListeners("close"),i.end(h))},f}function Oy(e,t){ze(`configure with config = ${e}`);let r=function(n){return n.serialise()};return e.layout&&(r=t.layout(e.layout.type,e.layout)),ky(e,r)}Of.exports.configure=Oy});var io=A((nE,no)=>{var ro=require("path"),nt=pe()("log4js:appenders"),Pe=lt(),Df=an(),Ty=mt(),Dy=xi(),Ay=Ia(),Me=new Map;Me.set("console",Oa());Me.set("stdout",Da());Me.set("stderr",Fa());Me.set("logLevelFilter",Ca());Me.set("categoryFilter",qa());Me.set("noLogFilter",$a());Me.set("file",bf());Me.set("dateFile",Ef());Me.set("fileSync",kf());Me.set("tcp",Tf());var xr=new Map,In=(e,t)=>{let r;try{let n=`${e}.cjs`;r=require.resolve(n),nt("Loading module from ",n)}catch(n){r=e,nt("Loading module from ",e)}try{return require(r)}catch(n){Pe.throwExceptionIf(t,n.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${n})`);return}},Fy=(e,t)=>Me.get(e)||In(`./${e}`,t)||In(e,t)||require.main&&require.main.filename&&In(ro.join(ro.dirname(require.main.filename),e),t)||In(ro.join(process.cwd(),e),t),kn=new Set,Af=(e,t)=>{if(xr.has(e))return xr.get(e);if(!t.appenders[e])return!1;if(kn.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);kn.add(e),nt(`Creating appender ${e}`);let r=Ny(e,t);return kn.delete(e),xr.set(e,r),r},Ny=(e,t)=>{let r=t.appenders[e],n=r.type.configure?r.type:Fy(r.type,t);return Pe.throwExceptionIf(t,Pe.not(n),`appender "${e}" is not valid (type "${r.type}" could not be found)`),n.appender&&(process.emitWarning(`Appender ${r.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),nt("[log4js-node-DEP0001]",`DEPRECATION: Appender ${r.type} exports an appender function.`)),n.shutdown&&(process.emitWarning(`Appender ${r.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),nt("[log4js-node-DEP0002]",`DEPRECATION: Appender ${r.type} exports a shutdown function.`)),nt(`${e}: clustering.isMaster ? ${Df.isMaster()}`),nt(`${e}: appenderModule is ${require("util").inspect(n)}`),Df.onlyOnMaster(()=>(nt(`calling appenderModule.configure for ${e} / ${r.type}`),n.configure(Ay.modifyConfig(r),Dy,i=>Af(i,t),Ty)),()=>{})},Ff=e=>{if(xr.clear(),kn.clear(),!e)return;let t=[];Object.values(e.categories).forEach(r=>{t.push(...r.appenders)}),Object.keys(e.appenders).forEach(r=>{(t.includes(r)||e.appenders[r].type==="tcp-server"||e.appenders[r].type==="multiprocess")&&Af(r,e)})},Nf=()=>{Ff()};Nf();Pe.addListener(e=>{Pe.throwExceptionIf(e,Pe.not(Pe.anObject(e.appenders)),\'must have a property "appenders" of type object.\');let t=Object.keys(e.appenders);Pe.throwExceptionIf(e,Pe.not(t.length),"must define at least one appender."),t.forEach(r=>{Pe.throwExceptionIf(e,Pe.not(e.appenders[r].type),`appender "${r}" is not valid (must be an object with property "type")`)})});Pe.addListener(Ff);no.exports=xr;no.exports.init=Nf});var ao=A((iE,On)=>{var Er=pe()("log4js:categories"),ie=lt(),oo=mt(),Cf=io(),it=new Map;function Rf(e,t,r){if(t.inherit===!1)return;let n=r.lastIndexOf(".");if(n<0)return;let i=r.slice(0,n),o=e.categories[i];o||(o={inherit:!0,appenders:[]}),Rf(e,o,i),!e.categories[i]&&o.appenders&&o.appenders.length&&o.level&&(e.categories[i]=o),t.appenders=t.appenders||[],t.level=t.level||o.level,o.appenders.forEach(s=>{t.appenders.includes(s)||t.appenders.push(s)}),t.parent=o}function Cy(e){if(!e.categories)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r];Rf(e,n,r)})}ie.addPreProcessingListener(e=>Cy(e));ie.addListener(e=>{ie.throwExceptionIf(e,ie.not(ie.anObject(e.categories)),\'must have a property "categories" of type object.\');let t=Object.keys(e.categories);ie.throwExceptionIf(e,ie.not(t.length),"must define at least one category."),t.forEach(r=>{let n=e.categories[r];ie.throwExceptionIf(e,[ie.not(n.appenders),ie.not(n.level)],`category "${r}" is not valid (must be an object with properties "appenders" and "level")`),ie.throwExceptionIf(e,ie.not(Array.isArray(n.appenders)),`category "${r}" is not valid (appenders must be an array of appender names)`),ie.throwExceptionIf(e,ie.not(n.appenders.length),`category "${r}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&ie.throwExceptionIf(e,typeof n.enableCallStack!="boolean",`category "${r}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach(i=>{ie.throwExceptionIf(e,ie.not(Cf.get(i)),`category "${r}" is not valid (appender "${i}" is not defined)`)}),ie.throwExceptionIf(e,ie.not(oo.getLevel(n.level)),`category "${r}" is not valid (level "${n.level}" not recognised; valid levels are ${oo.levels.join(", ")})`)}),ie.throwExceptionIf(e,ie.not(e.categories.default),\'must define a "default" category.\')});var so=e=>{if(it.clear(),!e)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r],i=[];n.appenders.forEach(o=>{i.push(Cf.get(o)),Er(`Creating category ${r}`),it.set(r,{appenders:i,level:oo.getLevel(n.level),enableCallStack:n.enableCallStack||!1})})})},Pf=()=>{so()};Pf();ie.addListener(so);var Rt=e=>{if(Er(`configForCategory: searching for config for ${e}`),it.has(e))return Er(`configForCategory: ${e} exists in config, returning it`),it.get(e);let t;return e.indexOf(".")>0?(Er(`configForCategory: ${e} has hierarchy, cloning from parents`),t=$e({},Rt(e.slice(0,e.lastIndexOf("."))))):(it.has("default")||so({categories:{default:{appenders:["out"],level:"OFF"}}}),Er("configForCategory: cloning default category"),t=$e({},it.get("default"))),it.set(e,t),t},Ry=e=>Rt(e).appenders,Py=e=>Rt(e).level,qy=(e,t)=>{Rt(e).level=t},Ly=e=>Rt(e).enableCallStack===!0,My=(e,t)=>{Rt(e).enableCallStack=t};On.exports=it;On.exports=Object.assign(On.exports,{appendersForCategory:Ry,getLevelForCategory:Py,setLevelForCategory:qy,getEnableCallStackForCategory:Ly,setEnableCallStackForCategory:My,init:Pf})});var jf=A((sE,$f)=>{var qf=pe()("log4js:logger"),$y=Ei(),Ke=mt(),jy=an(),Tn=ao(),Lf=lt(),Wy=/at (?:(.+)\\s+\\()?(?:(.+?):(\\d+)(?::(\\d+))?|([^)]+))\\)?/;function By(e,t=4){try{let r=e.stack.split(`\n`).slice(t),n=Wy.exec(r[0]);if(n&&n.length===6)return{functionName:n[1],fileName:n[2],lineNumber:parseInt(n[3],10),columnNumber:parseInt(n[4],10),callStack:r.join(`\n`)};console.error("log4js.logger - defaultParseCallStack error")}catch(r){console.error("log4js.logger - defaultParseCallStack error",r)}return null}var Sr=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.parseCallStack=By,qf(`Logger created (${this.category}, ${this.level})`)}get level(){return Ke.getLevel(Tn.getLevelForCategory(this.category),Ke.OFF)}set level(t){Tn.setLevelForCategory(this.category,Ke.getLevel(t,this.level))}get useCallStack(){return Tn.getEnableCallStackForCategory(this.category)}set useCallStack(t){Tn.setEnableCallStackForCategory(this.category,t===!0)}log(t,...r){let n=Ke.getLevel(t);n?this.isLevelEnabled(n)&&this._log(n,r):Lf.validIdentifier(t)&&r.length>0?(this.log(Ke.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(Ke.INFO,`[${t}]`,...r)):this.log(Ke.INFO,t,...r)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,r){qf(`sending log data (${t}) to appenders`);let n=new $y(this.category,t,r,this.context,this.useCallStack&&this.parseCallStack(new Error));jy.send(n)}addContext(t,r){this.context[t]=r}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){this.parseCallStack=t}};function Mf(e){let t=Ke.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,o=>o[1].toUpperCase()),i=n[0].toUpperCase()+n.slice(1);Sr.prototype[`is${i}Enabled`]=function(){return this.isLevelEnabled(t)},Sr.prototype[n]=function(...o){this.log(t,...o)}}Ke.levels.forEach(Mf);Lf.addListener(()=>{Ke.levels.forEach(Mf)});$f.exports=Sr});var Uf=A((aE,Bf)=>{var Pt=mt(),Uy=\':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"\';function zy(e){return e.originalUrl||e.url}function Ky(e,t,r){let n=o=>{let s=o.concat();for(let a=0;a<s.length;++a)for(let u=a+1;u<s.length;++u)s[a].token==s[u].token&&s.splice(u--,1);return s},i=[];return i.push({token:":url",replacement:zy(e)}),i.push({token:":protocol",replacement:e.protocol}),i.push({token:":hostname",replacement:e.hostname}),i.push({token:":method",replacement:e.method}),i.push({token:":status",replacement:t.__statusCode||t.statusCode}),i.push({token:":response-time",replacement:t.responseTime}),i.push({token:":date",replacement:new Date().toUTCString()}),i.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),i.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),i.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),i.push({token:":user-agent",replacement:e.headers["user-agent"]}),i.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),i.push({token:/:req\\[([^\\]]+)]/g,replacement(o,s){return e.headers[s.toLowerCase()]}}),i.push({token:/:res\\[([^\\]]+)]/g,replacement(o,s){return t.getHeader(s.toLowerCase())||t.__headers&&t.__headers[s]}}),n(r.concat(i))}function Wf(e,t){for(let r=0;r<t.length;r++)e=e.replace(t[r].token,t[r].replacement);return e}function Gy(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let r=e.map(n=>n.source?n.source:n);t=new RegExp(r.join("|"))}return t}function Hy(e,t,r){let n=t;if(r){let i=r.find(o=>{let s=!1;return o.from&&o.to?s=e>=o.from&&e<=o.to:s=o.codes.indexOf(e)!==-1,s});i&&(n=Pt.getLevel(i.level,n))}return n}Bf.exports=function(t,r){typeof r=="string"||typeof r=="function"?r={format:r}:r=r||{};let n=t,i=Pt.getLevel(r.level,Pt.INFO),o=r.format||Uy;return(s,a,u)=>{if(s._logging!==void 0)return u();if(typeof r.nolog!="function"){let p=Gy(r.nolog);if(p&&p.test(s.originalUrl))return u()}if(n.isLevelEnabled(i)||r.level==="auto"){let p=new Date,{writeHead:f}=a;s._logging=!0,a.writeHead=(m,g)=>{a.writeHead=f,a.writeHead(m,g),a.__statusCode=m,a.__headers=g||{}};let h=!1,l=()=>{if(h)return;if(h=!0,typeof r.nolog=="function"&&r.nolog(s,a)===!0){s._logging=!1;return}a.responseTime=new Date-p,a.statusCode&&r.level==="auto"&&(i=Pt.INFO,a.statusCode>=300&&(i=Pt.WARN),a.statusCode>=400&&(i=Pt.ERROR)),i=Hy(a.statusCode,i,r.statusRules);let m=Ky(s,a,r.tokens||[]);if(r.context&&n.addContext("res",a),typeof o=="function"){let g=o(s,a,E=>Wf(E,m));g&&n.log(i,g)}else n.log(i,Wf(o,m));r.context&&n.removeContext("res")};a.on("end",l),a.on("finish",l),a.on("error",l),a.on("close",l)}return u()}}});var Jf=A((uE,Hf)=>{var zf=pe()("log4js:recording"),Dn=[];function Jy(){return function(e){zf(`received logEvent, number of events now ${Dn.length+1}`),zf("log event was ",e),Dn.push(e)}}function Kf(){return Dn.slice()}function Gf(){Dn.length=0}Hf.exports={configure:Jy,replay:Kf,playback:Kf,reset:Gf,erase:Gf}});var tl=A((cE,el)=>{var ot=pe()("log4js:main"),Vy=require("fs"),Yy=js()({proto:!0}),Qy=lt(),Zy=xi(),Xy=mt(),Vf=io(),Yf=ao(),ev=jf(),tv=an(),rv=Uf(),nv=Jf(),_r=!1;function iv(e){if(!_r)return;ot("Received log event ",e),Yf.appendersForCategory(e.categoryName).forEach(r=>{r(e)})}function ov(e){ot(`Loading configuration from ${e}`);try{return JSON.parse(Vy.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function Qf(e){_r&&Zf();let t=e;return typeof t=="string"&&(t=ov(e)),ot(`Configuration is ${t}`),Qy.configure(Yy(t)),tv.onMessage(iv),_r=!0,Xf}function sv(){return nv}function Zf(e){ot("Shutdown called. Disabling all log writing."),_r=!1;let t=Array.from(Vf.values());Vf.init(),Yf.init();let r=t.reduceRight((s,a)=>a.shutdown?s+1:s,0);if(r===0)return ot("No appenders with shutdown functions found."),e!==void 0&&e();let n=0,i;ot(`Found ${r} appenders with shutdown functions.`);function o(s){i=i||s,n+=1,ot(`Appender shutdowns complete: ${n} / ${r}`),n>=r&&(ot("All shutdown functions completed."),e&&e(i))}return t.filter(s=>s.shutdown).forEach(s=>s.shutdown(o)),null}function av(e){return _r||Qf(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new ev(e||"default")}var Xf={getLogger:av,configure:Qf,shutdown:Zf,connectLogger:rv,levels:Xy,addLayout:Zy.addLayout,recording:sv};el.exports=Xf});var ql=A(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});function Pl(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}Un.assertNever=Pl;Un.default=Pl});var Ul=Et(Uo(),1);var ni={};Yd(ni,{loggerCategory:()=>ri});var ri=e=>`obsidian-zotero:${e}`;var Pr=({key:e,groupID:t,parentItem:r},n=!1)=>{let i=[e];return!n&&r&&i.push(`a${r}`),typeof t=="number"&&i.push(`g${t}`),i.join("")},zo=(e,t,r=!0)=>(n,...i)=>{let o="";for(let s=0;s<n.length;s++)s>0&&(o+=e(i[s-1])),o+=(r?n.raw:n)[s];return t(o)},si=(e=!0,t)=>zo(r=>r,r=>new RegExp(e?"^"+r+"$":r,t),!0),ii=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,oi=String.raw`\\d+`,Ko=e=>{let t={annotKey:ii,parentKey:ii,groupID:oi,page:oi};if(e)for(let r in t)t[r]=`(${t[r]})`;return zo(r=>t[r],r=>r)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Av=si()`${ii}(?:g${oi})?`,Fv=si()`${Ko(!0)}`,Nv=si()`(?:${Ko(!1)}n?)+`;var Zd=/^[0-9]{4}\\-(0[0-9]|10|11|12)\\-(0[0-9]|[1-2][0-9]|30|31) /;var Xd=/^\\-?[0-9]{4}\\-(0[1-9]|10|11|12)\\-(0[1-9]|[1-2][0-9]|30|31) ([0-1][0-9]|[2][0-3]):([0-5][0-9]):([0-5][0-9])$/,em=/^\\-?[0-9]{4}\\-(0[1-9]|10|11|12)\\-(0[1-9]|[1-2][0-9]|30|31) ([0-1][0-9]|[2][0-3]):([0-5][0-9])$/,tm=e=>rm(e)||nm(e)?!1:Zd.test(e),Go=e=>e?tm(e)?e.substring(0,10):"0000-00-00":"";var rm=e=>Xd.test(e),nm=e=>em.test(e);var Ho=(e,t,{getLogger:r,configure:n})=>{let i=ri(e);return n({appenders:{out:{type:"console"}},categories:{default:{appenders:["out"],level:t},[i]:{appenders:["out"],level:t}}}),r(i)};var Jo=()=>(...e)=>e;function Vo(e,t){let r=Object.keys(t).map(n=>im(e,n,t[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function im(e,t,r){let n=e[t],i=e.hasOwnProperty(t),o=r(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(s,o),e[t]=s,a;function s(...u){return o===n&&e[t]===s&&a(),o.apply(this,u)}function a(){e[t]===s&&(i?e[t]=n:delete e[t]),o!==n&&(o=n,Object.setPrototypeOf(s,n||Function))}}var Yo=e=>{let t=r=>async(...n)=>{try{return await r(...n)}catch(i){throw console.error(i),i}};return Vo(e,Object.fromEntries(Object.keys(e).map(r=>[r,t]))),e};var Qo={};var ai;(function(e){e[e.highlight=1]="highlight",e[e.note=2]="note",e[e.image=3]="image",e[e.ink=4]="ink"})(ai=ai||(ai={}));var ui;(function(e){e[e.manual=0]="manual",e[e.auto=1]="auto"})(ui=ui||(ui={}));var ci;(function(e){e[e.importedFile=0]="importedFile",e[e.importedUrl=1]="importedUrl",e[e.linkedFile=2]="linkedFile",e[e.linkedUrl=3]="linkedUrl",e[e.embeddedImage=4]="embeddedImage"})(ci=ci||(ci={}));var qr;(function(e){e[e.fullName=0]="fullName",e[e.nameOnly=1]="nameOnly"})(qr=qr||(qr={}));var fi=["attachment","note","annotation"];var Bt=fi.map(e=>`\'${e}\'`).join(",");var Ie=(e="itemID")=>`--sql\n  ${e} IS NOT NULL\n  AND ${e} NOT IN (SELECT itemID FROM deletedItems)\n`,St=e=>typeof e=="boolean"?"":`AND ${e} = $itemId`;var ce=class{constructor(t){ee(this,"statement");this.statement=t.prepare(this.sql())}get database(){return this.statement.database}runAll(t){return this.statement.all(t)}runAllNoInput(){return this.statement.all()}},Qe=class extends ce{query(t){return this.runAll(t)}},Lr=class extends ce{query(){return this.runAllNoInput()}},Mr=class extends ce{query(t){return this.runAll(t).map(r=>this.parse(r,t))}};var li=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]-t[r];return 0};var di=e=>{var t;return(t=e==null?void 0:e.split("|").map(r=>parseInt(r,10)))!=null?t:[]};var $r=`--sql\n  items.itemID,\n  items.key,\n  annots.type,\n  annots.authorName,\n  annots.text,\n  annots.comment,\n  annots.color,\n  annots.pageLabel,\n  annots.sortIndex,\n  annots.position,\n  annots.isExternal\n`,jr=`--sql\n  itemAnnotations annots\n  JOIN items USING (itemID)\n`,Wr=(e,t,r)=>Object.assign(e,{sortIndex:di(e.sortIndex),position:JSON.parse(e.position),libraryID:t,groupID:r,itemType:"annotation"});var om=`--sql\nSELECT\n  ${$r},\n  annots.parentItemID,\n  parentItems.key as parentItem\nFROM\n  ${jr}\n  JOIN items as parentItems ON annots.parentItemID = parentItems.itemID\nWHERE\n  items.key = $annotKey\n  AND items.libraryID = $libId\n  AND ${Ie("items.itemID")}\n`,Ut=class extends ce{constructor(){super(...arguments);ee(this,"trxCache",{})}sql(){return om}parse(r,n){return Wr(r,n.libId,n.groupID)}query(r){var a,u;let{annotKeys:n,libId:i}=r,o=p=>p.reduce((f,h)=>{let l=this.statement.get({annotKey:h,libId:i});return l&&(f[h]=l),f},{});return((u=(a=this.trxCache)[i])!=null?u:a[i]=this.database.transaction(o))(n)}};var sm=`--sql\nSELECT\n  ${$r}\nFROM\n  ${jr}\nWHERE\n  parentItemID = $attachmentId\n  AND items.libraryID = $libId\n  AND ${Ie()}\n`,zt=class extends Mr{constructor(){super(...arguments);ee(this,"getKeyStatement",this.database.prepare("SELECT key FROM items WHERE itemID = $attachmentId AND libraryID = $libId"))}sql(){return sm}parse(r,n,i){return Object.assign(Wr(r,n.libId,n.groupID),{parentItem:i,parentItemID:n.attachmentId})}query(r){var i;let n=(i=this.getKeyStatement.get(r))==null?void 0:i.key;if(n===void 0)throw new Error("Parent item not found");return this.runAll(r).map(o=>this.parse(o,r,n)).sort((o,s)=>li(o.sortIndex,s.sortIndex))}};var am=`--sql\nSELECT\n  atchs.itemID,\n  atchs.path,\n  items.key,\n  COUNT(atchs.itemID) as annotCount\nFROM\n  itemAttachments atchs\n  JOIN items USING (itemID)\n  LEFT JOIN itemAnnotations annots ON atchs.itemID = annots.parentItemID\nWHERE\n  atchs.parentItemID = $itemId\n  AND libraryID = $libId\n  AND ${Ie("atchs.itemID")}\nGROUP BY atchs.itemID\n`,Kt=class extends Qe{sql(){return am}};var um=`--sql\nSELECT\n  citekey\nFROM\n  citekeys\nWHERE\n  itemID = $itemID\n  AND (libraryID IS NULL OR libraryID = $libId)\n`,Gt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.get({itemID:i,libId:o});return s&&(n[i]=s.citekey),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return um}get(r){return this.statement.get(r)}query(r){return this.trx(r.items)}};var cm=`--sql\nSELECT\n  itemID\nFROM\n  citekeys\nWHERE\n  citekey = $citekey\n`,Ht=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,i)=>{var s;let o=this.get({citekey:i});return n[i]=(s=o==null?void 0:o.itemID)!=null?s:-1,n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return cm}get(r){return this.statement.get(r)}query(r){return this.trx(r.citekeys)}};var Br=e=>`--sql\nSELECT\n  itemID,\n  creators.firstName,\n  creators.lastName,\n  creators.fieldMode,\n  creatorTypes.creatorType,\n  orderIndex\nFROM\n  items\n  LEFT JOIN itemCreators USING (itemID)\n  JOIN creators USING (creatorID)\n  JOIN creatorTypes USING (creatorTypeID)\nWHERE\n  libraryID = $libId\n  ${St(e||"itemID")}\n  AND ${Ie()}\nORDER BY\n  itemID,\n  orderIndex\n`;var Cw=Br(!0);function Zo(e){for(var t={},r=e.length,n=0;n<r;++n){var i=e[n];t[i[0]]=i[1]}return t}var st=Zo;var fm=Br(!1),Jt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.runAll({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return fm}query(r){return st(this.trx(r))}};var Ur=e=>`--sql\nSELECT\n  items.itemID,\n  fieldsCombined.fieldName,\n  itemDataValues.value\nFROM\n  items\n  JOIN itemData USING (itemID)\n  JOIN itemDataValues USING (valueID)\n  JOIN fieldsCombined USING (fieldID)\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE\n  libraryID = $libId\n  ${St(e||"items.itemID")}\n  AND itemTypesCombined.typeName NOT IN (${Bt})\n  AND ${Ie()}\n`;var Eb=Ur(!0);var lm=Ur(!1),Vt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.runAll({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return lm}query(r){return st(this.trx(r))}};var zr=e=>`--sql\nSELECT\n  items.itemID,\n  items.key,\n  itemTypesCombined.typeName as itemType\nFROM \n  items\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE \n  libraryID = $libId\n  ${St(e||"items.itemID")}\n  AND ${Ie()}\n  AND itemType NOT IN (${Bt})\n`,Ab=`--sql\nSELECT\n  items.itemID,\n  items.key,\n  itemTypesCombined.typeName as itemType\nFROM \n  items\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE \n  libraryID = $libId\n  AND items.key = $key\n  AND ${Ie()}\n  AND itemType NOT IN (${Bt})\n`;var dm=zr(!0),Yt=class extends Qe{sql(){return dm}};var Xo=zr(!1),Qt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.statement.get({itemId:i,libId:o});return s&&(n[i]=s),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return Xo}query(r){return this.trx(r)}},Zt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.statement.get({key:i,libId:o});return s&&(n[i]=s),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return Xo}query(r){return this.trx(r)}};var mm=`--sql\nSELECT\n  libraries.libraryID,\n  groups.groupID,\n  CASE\n    libraries.type\n    WHEN \'user\' THEN \'My Library\'\n    WHEN \'group\' THEN groups.name\n    ELSE NULL\n  END AS name\nFROM\n  libraries\n  LEFT JOIN groups USING (libraryID)\nWHERE\n  libraries.libraryID IS NOT NULL\nORDER BY\n  libraryID\n`,Xt=class extends Lr{sql(){return mm}};var pm=`--sql\nSELECT\n  tagID,\n  type,\n  name\nFROM\n  itemTags\n  JOIN items USING (itemID)\n  JOIN tags USING (tagID)\nWHERE\n  itemID = $itemId\n  AND tagID IS NOT NULL\n  AND libraryID = $libId\n`,er=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.runAll({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return pm}query(r){return st(this.trx(r))}};var hm=new Set(Jo()("creators","itemID","itemType","key","libraryID"));var zl=Et(pi(),1);var ol=require("fs"),sl=Et(Rs(),1);var rl=Et(pi(),1),An=Et(tl(),1),uv="INFO",nl=Ho("db-worker",uv,An.default),uo="log4js_loglevel";rl.default.getItem(uo).then(e=>{typeof e=="string"&&e in An.levels&&(nl.level=e,console.debug(`Read from localforage: loglevel ${e}`))});var oe=nl;var Fn=class extends Error{constructor(){super("Database not set")}},il=e=>(0,ol.statSync)(e).mtimeMs,qt=class{constructor(){this.database=null;this.nativeBinding=null;this.opened=!1}get instance(){var t;return(t=this.database)==null?void 0:t.instance}isUpToDate(){return this.database?this.database.mtime===il(this.database.file):null}initDatabase(t,r){return new sl.default(`file:${t}?mode=ro&immutable=1`,{nativeBinding:r,uriPath:!0,verbose:void 0})}open(t){var i,o;let r=t.nativeBinding?this.nativeBinding=t.nativeBinding:this.nativeBinding;if(!r)throw new Error("Failed to open database conn: no native binding provided");let n;if(t.file)n=t.file;else{if(!((i=this.database)!=null&&i.file))throw new Fn;n=this.database.file}try{return(o=this.database)!=null&&o.instance&&(oe.debug("Database opened before, closing: ",this.database.instance.name),this.close()),this.database={mtime:il(n),instance:this.initDatabase(n,r),file:n,prepared:new Map},oe.debug("Database opened: ",n),this.opened=!0,!0}catch(s){if(s.code!=="ENOENT")throw console.error("Failed to open database",n),s;return this.opened=!1,!1}}close(){var t;this.opened=!1,(t=this.instance)==null||t.close(),this.database=null}prepare(t){if(!this.database)throw new Fn;let r=this.database.prepared.get(t);if(r)return r;let n=new t(this.database.instance);return this.database.prepared.set(t,n),n}};function Ir(){this.cache=null,this.matcher=null,this.stemmer=null,this.filter=null}Ir.prototype.add;Ir.prototype.append;Ir.prototype.search;Ir.prototype.update;Ir.prototype.remove;function Lt(e,t){return typeof e!="undefined"?e:t}function co(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Y();return t}function al(e){return Object.keys(e)}function Y(){return Object.create(null)}function ul(e){return[].concat.apply([],e)}function cl(e,t){return t.length-e.length}function bt(e){return e.constructor===Array}function ae(e){return typeof e=="string"}function qe(e){return typeof e=="object"}function kr(e){return typeof e=="function"}function ll(e,t,r,n){if(e&&(t&&(e=fo(e,t)),this.matcher&&(e=fo(e,this.matcher)),this.stemmer&&e.length>1&&(e=fo(e,this.stemmer)),n&&e.length>1&&(e=cv(e)),r||r==="")){let i=e.split(r);return this.filter?fv(i,this.filter):i}return e}var dl=/[\\p{Z}\\p{S}\\p{P}\\p{C}]+/u;function ml(e){let t=Y();for(let r=0,n=e.length;r<n;r++)t[e[r]]=1;return t}function lo(e,t){let r=al(e),n=r.length,i=[],o="",s=0;for(let a=0,u,p;a<n;a++)u=r[a],p=e[u],p?(i[s++]=fl(t?"(?!\\\\b)"+u+"(\\\\b|_)":u),i[s++]=p):o+=(o?"|":"")+u;return o&&(i[s++]=fl(t?"(?!\\\\b)("+o+")(\\\\b|_)":"("+o+")"),i[s]=""),i}function fo(e,t){for(let r=0,n=t.length;r<n&&(e=e.replace(t[r],t[r+1]),!!e);r+=2);return e}function fl(e){return new RegExp(e,"g")}function cv(e){let t="",r="";for(let n=0,i=e.length,o;n<i;n++)(o=e[n])!==r&&(t+=r=o);return t}function fv(e,t){let r=e.length,n=[];for(let i=0,o=0;i<r;i++){let s=e[i];s&&!t[s]&&(n[o++]=s)}return n}var lv=!1,dv="",pl={encode:mo,rtl:lv,tokenize:dv};function mo(e){return ll.call(this,(""+e).toLowerCase(),!1,dl,!1)}var hl={},gl={};function Nn(e){Or(e,"add"),Or(e,"append"),Or(e,"search"),Or(e,"update"),Or(e,"remove")}function Or(e,t){e[t+"Async"]=function(){let r=this,n=arguments,i=n[n.length-1],o;kr(i)&&(o=i,delete n[n.length-1]);let s=new Promise(function(a){setTimeout(function(){r.async=!0;let u=r[t].apply(r,n);r.async=!1,a(u)})});return o?(s.then(o),this):s}}function Cn(e,t,r,n){let i=e.length,o=[],s,a,u=0;n&&(n=[]);for(let p=i-1;p>=0;p--){let f=e[p],h=f.length,l=Y(),m=!s;for(let g=0;g<h;g++){let E=f[g],_=E.length;if(_)for(let C=0,$,L;C<_;C++)if(L=E[C],s){if(s[L]){if(!p){if(r)r--;else if(o[u++]=L,u===t)return o}(p||n)&&(l[L]=1),m=!0}if(n&&($=(a[L]||0)+1,a[L]=$,$<i)){let G=n[$-2]||(n[$-2]=[]);G[G.length]=L}}else l[L]=1}if(n)s||(a=l);else if(!m)return[];s=l}if(n)for(let p=n.length-1,f,h;p>=0;p--){f=n[p],h=f.length;for(let l=0,m;l<h;l++)if(m=f[l],!s[m]){if(r)r--;else if(o[u++]=m,u===t)return o;s[m]=1}}return o}function yl(e,t){let r=Y(),n=Y(),i=[];for(let o=0;o<e.length;o++)r[e[o]]=1;for(let o=0,s;o<t.length;o++){s=t[o];for(let a=0,u;a<s.length;a++)u=s[a],r[u]&&(n[u]||(n[u]=1,i[i.length]=u))}return i}function Rn(e){this.limit=e!==!0&&e,this.cache=Y(),this.queue=[]}var Pn=Rn;function qn(e,t,r){qe(e)&&(e=e.query);let n=this.cache.get(e);return n||(n=this.search(e,t,r),this.cache.set(e,n)),n}Rn.prototype.set=function(e,t){if(!this.cache[e]){let r=this.queue.length;r===this.limit?delete this.cache[this.queue[r-1]]:r++;for(let n=r-1;n>0;n--)this.queue[n]=this.queue[n-1];this.queue[0]=e}this.cache[e]=t};Rn.prototype.get=function(e){let t=this.cache[e];if(this.limit&&t){let r=this.queue.indexOf(e);if(r){let n=this.queue[r-1];this.queue[r-1]=this.queue[r],this.queue[r]=n}}return t};Rn.prototype.del=function(e){for(let t=0,r,n;t<this.queue.length;t++)n=this.queue[t],r=this.cache[n],r.includes(e)&&(this.queue.splice(t--,1),delete this.cache[n])};var wl={memory:{charset:"latin:extra",resolution:3,minlength:4,fastupdate:!1},performance:{resolution:3,minlength:3,optimize:!1,context:{depth:2,resolution:1}},match:{charset:"latin:extra",tokenize:"reverse"},score:{charset:"latin:advanced",resolution:20,minlength:3,context:{depth:3,resolution:9}},default:{}};function po(e){if(ae(e))!1&&!wl[e]&&console.warn("Preset not found: "+e),e=wl[e];else{let t=e.preset;t&&(!1&&!t[t]&&console.warn("Preset not found: "+t),e=Object.assign({},t[t],e))}return e}function bl(e,t,r,n,i,o,s){setTimeout(function(){let a=e(r?r+"."+n:n,JSON.stringify(s));a&&a.then?a.then(function(){t.export(e,t,r,i,o+1)}):t.export(e,t,r,i,o+1)})}function xl(e,t,r,n,i){let o,s;switch(i||(i=0)){case 0:if(o="reg",this.fastupdate){s=Y();for(let a in this.register)s[a]=1}else s=this.register;break;case 1:o="cfg",s={doc:0,opt:this.optimize?1:0};break;case 2:o="map",s=this.map;break;case 3:o="ctx",s=this.ctx;break;default:return}return bl(e,t||this,r,o,n,i,s),!0}function El(e,t){if(t)switch(ae(t)&&(t=JSON.parse(t)),e){case"cfg":this.optimize=!!t.opt;break;case"reg":this.fastupdate=!1,this.register=t;break;case"map":this.map=t;break;case"ctx":this.ctx=t;break}}function Sl(e,t,r,n,i){if(i||(i=0),n||(n=0),n<this.field.length){let o=this.field[n],s=this.index[o];t=this,setTimeout(function(){s.export(e,t,i?o:"",n,i++)||(n++,i=1,t.export(e,t,o,n,i))})}else{let o,s;switch(i){case 1:o="tag",s=this.tagindex;break;case 2:o="store",s=this.store;break;default:return}bl(e,this,r,o,n,i,s)}}function _l(e,t){if(t)switch(ae(t)&&(t=JSON.parse(t)),e){case"tag":this.tagindex=t;break;case"reg":this.fastupdate=!1,this.register=t;for(let n=0,i;n<this.field.length;n++)i=this.index[this.field[n]],i.register=t,i.fastupdate=!1;break;case"store":this.store=t;break;default:e=e.split(".");let r=e[0];e=e[1],r&&e&&this.index[r].import(e,t)}}function be(e,t){if(!(this instanceof be))return new be(e);let r,n,i;e?(!0&&(e=po(e)),r=e.charset,n=e.lang,ae(r)&&(r.indexOf(":")===-1&&(r+=":default"),r=gl[r]),ae(n)&&(n=hl[n])):e={};let o,s,a=e.context||{};this.encode=e.encode||r&&r.encode||mo,this.register=t||Y(),this.resolution=o=e.resolution||9,this.tokenize=i=r&&r.tokenize||e.tokenize||"strict",this.depth=i==="strict"&&a.depth,this.bidirectional=Lt(a.bidirectional,!0),this.optimize=s=Lt(e.optimize,!0),this.fastupdate=Lt(e.fastupdate,!0),this.minlength=e.minlength||1,this.boost=e.boost,this.map=s?co(o):Y(),this.resolution_ctx=o=a.resolution||1,this.ctx=s?co(o):Y(),this.rtl=r&&r.rtl||e.rtl,this.matcher=(i=e.matcher||n&&n.matcher)&&lo(i,!1),this.stemmer=(i=e.stemmer||n&&n.stemmer)&&lo(i,!0),this.filter=(i=e.filter||n&&n.filter)&&ml(i),!0&&(this.cache=(i=e.cache)&&new Pn(i))}var jn=be;be.prototype.append=function(e,t){return this.add(e,t,!0)};be.prototype.add=function(e,t,r,n){if(t&&(e||e===0)){if(!n&&!r&&this.register[e])return this.update(e,t);t=this.encode(""+t);let i=t.length;if(i){let o=Y(),s=Y(),a=this.depth,u=this.resolution;for(let p=0;p<i;p++){let f=t[this.rtl?i-1-p:p],h=f.length;if(f&&h>=this.minlength&&(a||!s[f])){let l=Ln(u,i,p),m="";switch(this.tokenize){case"full":if(h>2){for(let g=0;g<h;g++)for(let E=h;E>g;E--)if(E-g>=this.minlength){let _=Ln(u,i,p,h,g);m=f.substring(g,E),this.push_index(s,m,_,e,r)}break}case"reverse":if(h>1){for(let g=h-1;g>0;g--)if(m=f[g]+m,m.length>=this.minlength){let E=Ln(u,i,p,h,g);this.push_index(s,m,E,e,r)}m=""}case"forward":if(h>1){for(let g=0;g<h;g++)m+=f[g],m.length>=this.minlength&&this.push_index(s,m,l,e,r);break}default:if(this.boost&&(l=Math.min(l/this.boost(t,f,p)|0,u-1)),this.push_index(s,f,l,e,r),a&&i>1&&p<i-1){let g=Y(),E=this.resolution_ctx,_=f,C=Math.min(a+1,i-p);g[_]=1;for(let $=1;$<C;$++)if(f=t[this.rtl?i-1-p-$:p+$],f&&f.length>=this.minlength&&!g[f]){g[f]=1;let L=Ln(E+(i/2>E?0:1),i,p,C-1,$-1),G=this.bidirectional&&f>_;this.push_index(o,G?_:f,L,e,r,G?f:_)}}}}}this.fastupdate||(this.register[e]=1)}}return this};function Ln(e,t,r,n,i){return r&&e>1?t+(n||0)<=e?r+(i||0):(e-1)/(t+(n||0))*(r+(i||0))+1|0:0}be.prototype.push_index=function(e,t,r,n,i,o){let s=o?this.ctx:this.map;if((!e[t]||o&&!e[t][o])&&(this.optimize&&(s=s[r]),o?(e=e[t]||(e[t]=Y()),e[o]=1,s=s[o]||(s[o]=Y())):e[t]=1,s=s[t]||(s[t]=[]),this.optimize||(s=s[r]||(s[r]=[])),(!i||!s.includes(n))&&(s[s.length]=n,this.fastupdate))){let a=this.register[n]||(this.register[n]=[]);a[a.length]=s}};be.prototype.search=function(e,t,r){r||(!t&&qe(e)?(r=e,e=r.query):qe(t)&&(r=t));let n=[],i,o,s,a=0;if(r&&(e=r.query||e,t=r.limit,a=r.offset||0,o=r.context,s=!0&&r.suggest),e&&(e=this.encode(""+e),i=e.length,i>1)){let h=Y(),l=[];for(let m=0,g=0,E;m<i;m++)if(E=e[m],E&&E.length>=this.minlength&&!h[E]){if(!this.optimize&&!s&&!this.map[E])return n;l[g++]=E,h[E]=1}e=l,i=e.length}if(!i)return n;t||(t=100);let u=this.depth&&i>1&&o!==!1,p=0,f;u?(f=e[0],p=1):i>1&&e.sort(cl);for(let h,l;p<i;p++){if(l=e[p],u?(h=this.add_result(n,s,t,a,i===2,l,f),(!s||h!==!1||!n.length)&&(f=l)):h=this.add_result(n,s,t,a,i===1,l),h)return h;if(s&&p===i-1){let m=n.length;if(m){if(m===1)return kl(n[0],t,a)}else{if(u){u=0,p=-1;continue}return n}}}return Cn(n,t,a,s)};be.prototype.add_result=function(e,t,r,n,i,o,s){let a=[],u=s?this.ctx:this.map;if(this.optimize||(u=Il(u,o,s,this.bidirectional)),u){let p=0,f=Math.min(u.length,s?this.resolution_ctx:this.resolution);for(let h=0,l=0,m,g;h<f&&(m=u[h],!(m&&(this.optimize&&(m=Il(m,o,s,this.bidirectional)),n&&m&&i&&(g=m.length,g<=n?(n-=g,m=null):(m=m.slice(n),n=0)),m&&(a[p++]=m,i&&(l+=m.length,l>=r)))));h++);if(p){if(i)return kl(a,r,0);e[e.length]=a;return}}return!t&&a};function kl(e,t,r){return e.length===1?e=e[0]:e=ul(e),r||e.length>t?e.slice(r,r+t):e}function Il(e,t,r,n){if(r){let i=n&&t>r;e=e[i?t:r],e=e&&e[i?r:t]}else e=e[t];return e}be.prototype.contain=function(e){return!!this.register[e]};be.prototype.update=function(e,t){return this.remove(e).add(e,t)};be.prototype.remove=function(e,t){let r=this.register[e];if(r){if(this.fastupdate)for(let n=0,i;n<r.length;n++)i=r[n],i.splice(i.indexOf(e),1);else Mn(this.map,e,this.resolution,this.optimize),this.depth&&Mn(this.ctx,e,this.resolution_ctx,this.optimize);t||delete this.register[e],!0&&this.cache&&this.cache.del(e)}return this};function Mn(e,t,r,n,i){let o=0;if(bt(e))if(i){let s=e.indexOf(t);s!==-1?e.length>1&&(e.splice(s,1),o++):o++}else{i=Math.min(e.length,r);for(let s=0,a;s<i;s++)a=e[s],a&&(o=Mn(a,t,r,n,i),!n&&!o&&delete e[s])}else for(let s in e)o=Mn(e[s],t,r,n,i),o||delete e[s];return o}!0&&(be.prototype.searchCache=qn);!0&&(be.prototype.export=xl,be.prototype.import=El);!0&&Nn(be.prototype);function Ol(e){e=e.data;let t=self._index,r=e.args,n=e.task;switch(n){case"init":let i=e.options||{},o=e.factory,s=i.encode;i.cache=!1,s&&s.indexOf("function")===0&&(i.encode=Function("return "+s)()),o?(Function("return "+o)()(self),self._index=new self.FlexSearch.Index(i),delete self.FlexSearch):self._index=new jn(i);break;default:let a=e.id,u=t[n].apply(t,r);postMessage(n==="search"?{id:a,msg:u}:{id:a})}}var Tl=0;function Tr(e){if(!(this instanceof Tr))return new Tr(e);let t;e?kr(t=e.encode)&&(e.encode=t.toString()):e={};let r=(self||window)._factory;r&&(r=r.toString());let n=typeof window=="undefined"&&self.exports,i=this;this.worker=hv(r,n,e.worker),this.resolver=Y(),this.worker&&(n?this.worker.on("message",function(o){i.resolver[o.id](o.msg),delete i.resolver[o.id]}):this.worker.onmessage=function(o){o=o.data,i.resolver[o.id](o.msg),delete i.resolver[o.id]},this.worker.postMessage({task:"init",factory:r,options:e}))}var Dl=Tr;Dr("add");Dr("append");Dr("search");Dr("update");Dr("remove");function Dr(e){Tr.prototype[e]=Tr.prototype[e+"Async"]=function(){let t=this,r=[].slice.call(arguments),n=r[r.length-1],i;kr(n)&&(i=n,r.splice(r.length-1,1));let o=new Promise(function(s){setTimeout(function(){t.resolver[++Tl]=s,t.worker.postMessage({task:e,id:Tl,args:r})})});return i?(o.then(i),this):o}}function hv(factory,is_node_js,worker_path){let worker;try{worker=is_node_js?eval(\'new (require("worker_threads")["Worker"])("../dist/node/node.js")\'):factory?new Worker(URL.createObjectURL(new Blob(["onmessage="+Ol.toString()],{type:"text/javascript"}))):new Worker(ae(worker_path)?worker_path:"worker/worker.js",{type:"module"})}catch(e){}return worker}function xe(e){if(!(this instanceof xe))return new xe(e);let t=e.document||e.doc||e,r;this.tree=[],this.field=[],this.marker=[],this.register=Y(),this.key=(r=t.key||t.id)&&Wn(r,this.marker)||"id",this.fastupdate=Lt(e.fastupdate,!0),!0&&(this.storetree=(r=t.store)&&r!==!0&&[],this.store=r&&Y()),!0&&(this.tag=(r=t.tag)&&Wn(r,this.marker),this.tagindex=r&&Y()),!0&&(this.cache=(r=e.cache)&&new Pn(r),e.cache=!1),!0&&(this.worker=e.worker),!0&&(this.async=!1),this.index=gv.call(this,e,t)}var Fl=xe;function gv(e,t){let r=Y(),n=t.index||t.field||t;ae(n)&&(n=[n]);for(let i=0,o,s;i<n.length;i++)o=n[i],ae(o)||(s=o,o=o.field),s=qe(s)?Object.assign({},e,s):e,!0&&this.worker&&(r[o]=new Dl(s),r[o].worker||(this.worker=!1)),this.worker||(r[o]=new jn(s,this.register)),this.tree[i]=Wn(o,this.marker),this.field[i]=o;if(!0&&this.storetree){let i=t.store;ae(i)&&(i=[i]);for(let o=0;o<i.length;o++)this.storetree[o]=Wn(i[o],this.marker)}return r}function Wn(e,t){let r=e.split(":"),n=0;for(let i=0;i<r.length;i++)e=r[i],e.indexOf("[]")>=0&&(e=e.substring(0,e.length-2),e&&(t[n]=!0)),e&&(r[n++]=e);return n<r.length&&(r.length=n),n>1?r:r[0]}function go(e,t){if(ae(t))e=e[t];else for(let r=0;e&&r<t.length;r++)e=e[t[r]];return e}function yo(e,t,r,n,i){if(e=e[i],n===r.length-1)t[i]=e;else if(e)if(bt(e)){t=t[i]=new Array(e.length);for(let o=0;o<e.length;o++)yo(e,t,r,n,o)}else t=t[i]||(t[i]=Y()),i=r[++n],yo(e,t,r,n,i)}function vo(e,t,r,n,i,o,s,a){if(e=e[s],e)if(n===t.length-1){if(bt(e)){if(r[n]){for(let u=0;u<e.length;u++)i.add(o,e[u],!0,!0);return}e=e.join(" ")}i.add(o,e,a,!0)}else if(bt(e))for(let u=0;u<e.length;u++)vo(e,t,r,n,i,o,u,a);else s=t[++n],vo(e,t,r,n,i,o,s,a)}xe.prototype.add=function(e,t,r){if(qe(e)&&(t=e,e=go(t,this.key)),t&&(e||e===0)){if(!r&&this.register[e])return this.update(e,t);for(let n=0,i,o;n<this.field.length;n++)o=this.field[n],i=this.tree[n],ae(i)&&(i=[i]),vo(t,i,this.marker,0,this.index[o],e,i[0],r);if(!0&&this.tag){let n=go(t,this.tag),i=Y();ae(n)&&(n=[n]);for(let o=0,s,a;o<n.length;o++)if(s=n[o],!i[s]&&(i[s]=1,a=this.tagindex[s]||(this.tagindex[s]=[]),(!r||!a.includes(e))&&(a[a.length]=e,this.fastupdate))){let u=this.register[e]||(this.register[e]=[]);u[u.length]=a}}if(!0&&this.store&&(!r||!this.store[e])){let n;if(this.storetree){n=Y();for(let i=0,o;i<this.storetree.length;i++)o=this.storetree[i],ae(o)?n[o]=t[o]:yo(t,n,o,0,o[0])}this.store[e]=n||t}}return this};xe.prototype.append=function(e,t){return this.add(e,t,!0)};xe.prototype.update=function(e,t){return this.remove(e).add(e,t)};xe.prototype.remove=function(e){if(qe(e)&&(e=go(e,this.key)),this.register[e]){for(let t=0;t<this.field.length&&(this.index[this.field[t]].remove(e,!this.worker),!this.fastupdate);t++);if(!0&&this.tag&&!this.fastupdate)for(let t in this.tagindex){let r=this.tagindex[t],n=r.indexOf(e);n!==-1&&(r.length>1?r.splice(n,1):delete this.tagindex[t])}!0&&this.store&&delete this.store[e],delete this.register[e]}return this};xe.prototype.search=function(e,t,r,n){r||(!t&&qe(e)?(r=e,e=""):qe(t)&&(r=t,t=0));let i=[],o=[],s,a,u,p,f,h,l=0;if(r)if(bt(r))u=r,r=null;else{if(e=r.query||e,s=r.pluck,u=s||r.index||r.field,p=!0&&r.tag,a=!0&&this.store&&r.enrich,f=r.bool==="and",t=r.limit||t||100,h=r.offset||0,p&&(ae(p)&&(p=[p]),!e)){for(let g=0,E;g<p.length;g++)E=yv.call(this,p[g],t,h,a),E&&(i[i.length]=E,l++);return l?i:[]}ae(u)&&(u=[u])}u||(u=this.field),f=f&&(u.length>1||p&&p.length>1);let m=!n&&(this.worker||this.async)&&[];for(let g=0,E,_,C;g<u.length;g++){let $;if(_=u[g],ae(_)||($=_,_=$.field,e=$.query||e,t=$.limit||t),m){m[g]=this.index[_].searchAsync(e,t,$||r);continue}else n?E=n[g]:E=this.index[_].search(e,t,$||r);if(C=E&&E.length,p&&C){let L=[],G=0;f&&(L[0]=[E]);for(let X=0,R,K;X<p.length;X++)R=p[X],K=this.tagindex[R],C=K&&K.length,C&&(G++,L[L.length]=f?[K]:K);G&&(f?E=Cn(L,t||100,h||0):E=yl(E,L),C=E.length)}if(C)o[l]=_,i[l++]=E;else if(f)return[]}if(m){let g=this;return new Promise(function(E){Promise.all(m).then(function(_){E(g.search(e,t,r,_))})})}if(!l)return[];if(s&&(!a||!this.store))return i[0];for(let g=0,E;g<o.length;g++){if(E=i[g],E.length&&a&&(E=Nl.call(this,E)),s)return E;i[g]={field:o[g],result:E}}return i};function yv(e,t,r,n){let i=this.tagindex[e],o=i&&i.length-r;if(o&&o>0)return(o>t||r)&&(i=i.slice(r,r+t)),n&&(i=Nl.call(this,i)),{tag:e,result:i}}function Nl(e){let t=new Array(e.length);for(let r=0,n;r<e.length;r++)n=e[r],t[r]={id:n,doc:this.store[n]};return t}xe.prototype.contain=function(e){return!!this.register[e]};!0&&(xe.prototype.get=function(e){return this.store[e]},xe.prototype.set=function(e,t){return this.store[e]=t,this});!0&&(xe.prototype.searchCache=qn);!0&&(xe.prototype.export=Sl,xe.prototype.import=_l);!0&&Nn(xe.prototype);var vv=["a","about","above","after","again","against","all","also","am","an","and","any","are","aren\'t","as","at","be","because","been","before","being","below","both","but","by","can","cannot","can\'t","come","could","couldn\'t","did","didn\'t","do","does","doesn\'t","doing","dont","down","during","each","even","few","first","for","from","further","get","go","had","hadn\'t","has","hasn\'t","have","haven\'t","having","he","hed","her","here","here\'s","hers","herself","hes","him","himself","his","how","how\'s","i","id","if","ill","im","in","into","is","isn\'t","it","it\'s","itself","i\'ve","just","know","let\'s","like","make","me","more","most","mustn\'t","my","myself","new","no","nor","not","now","of","off","on","once","only","or","other","ought","our","our\'s","ourselves","out","over","own","same","say","see","shan\'t","she","she\'d","shell","shes","should","shouldn\'t","so","some","such","than","that","that\'s","the","their","theirs","them","themselves","then","there","there\'s","these","they","they\'d","they\'ll","they\'re","they\'ve","this","those","through","time","to","too","until","up","us","very","want","was","wasn\'t","way","we","wed","well","were","weren\'t","we\'ve","what","what\'s","when","when\'s","where","where\'s","which","while","who","whom","who\'s","why","why\'s","will","with","won\'t","would","wouldn\'t","you","you\'d","you\'ll","your","you\'re","your\'s","yourself","yourselves","you\'ve"],wv={ational:"ate",iveness:"ive",fulness:"ful",ousness:"ous",ization:"ize",tional:"tion",biliti:"ble",icate:"ic",ative:"",alize:"al",iciti:"ic",entli:"ent",ousli:"ous",alism:"al",ation:"ate",aliti:"al",iviti:"ive",ement:"",enci:"ence",anci:"ance",izer:"ize",alli:"al",ator:"ate",logi:"log",ical:"ic",ance:"",ence:"",ness:"",able:"",ible:"",ment:"",eli:"e",bli:"ble",ful:"",ant:"",ent:"",ism:"",ate:"",iti:"",ous:"",ive:"",ize:"",al:"",ou:"",er:"",ic:""},bv={},Cl={filter:vv,stemmer:wv,matcher:bv};function Rl(){return new Fl({worker:!0,charset:pl,language:Cl,document:{id:"itemID",index:["title","creators[]:firstName","creators[]:lastName","date"]},tokenize:"full",suggest:!0})}var ne={main:new qt,bbt:new qt},me={libraries:null,search:Rl(),items:new Map},wo=()=>{if(!me.libraries)throw new Error("Library info not loaded");return me.libraries},bo=e=>{let t=wo();if(!t[e])throw new Error("Library not found");return t[e].groupID};var Ml=Et(ql(),1);var xv=(e,t)=>{var n,i;let r;if(typeof e=="number"){let o=(n=me.items.get(t))==null?void 0:n.byId;if(!o)throw new Error("get item by id before cache ready");r=o.get(e)}else if(typeof e=="string"){let o=(i=me.items.get(t))==null?void 0:i.byKey;if(!o)throw new Error("get item by key before cache ready");r=o.get(e)}else(0,Ml.assertNever)(e);return r!=null?r:null},Ev=e=>{if(oe.debug("Reading Better BibTex database"),!ne.bbt.opened)return oe.info("Better BibTex database not enabled, skipping..."),[];let t=ne.bbt.prepare(Gt).query({items:e});return oe.info("Finished reading Better BibTex"),t};function Sv(e){let t=e;return Array.isArray(t.accessDate)&&t.accessDate.length===1&&typeof t.accessDate[0]=="string"}function _v(e){let t=e.replace(" ","T")+"Z";try{return new Date(t)}catch(r){return null}}function zn(e,t){if(!me.libraries)throw new Error("Library info not loaded");let r=me.libraries,n=Ev(t),i=ne.main.prepare(Vt).query(t),o=ne.main.prepare(Jt).query(t);return t.reduce((s,[a,u])=>{if(!a)return s;let p=n[a];p||oe.warn(`Citekey: No item found for itemID ${a}`,p);let f=i[a].reduce((l,m)=>{var E,_;let{value:g}=m;return m.fieldName==="date"&&(g=Go(g).split("-")[0]),((_=l[E=m.fieldName])!=null?_:l[E]=[]).push(g),l},{}),h=ti($e(ti($e({},e[a]),{libraryID:u,groupID:r[u].groupID,itemID:a,creators:o[a],citekey:n[a]}),f),{dateAccessed:Sv(f)?_v(f.accessDate[0]):null});return s[a]=h,s},{})}var Iv=e=>typeof e[0][0]=="string",$l=(e,t)=>{if(e.length===0)return[];if(!t)return e.map(([o,s])=>xv(o,s));let r,n,i;if(Iv(e)){let o=ne.main.prepare(Zt).query(e);return n=e.map(([s,a])=>[o[s].itemID,a]),r=n.reduce((s,[a],u)=>{let[p]=e[u];return s[a]=o[p],s},{}),i=zn(r,n),Ll(i),e.map(([s])=>i[o[s].itemID])}else return n=e,r=ne.main.prepare(Qt).query(n),i=zn(r,n),Ll(i),e.map(([o])=>i[o])};function Ll(e){for(let t of Object.values(e)){let r=me.items.get(t.libraryID);if(!r)throw new Error("Cache not initialized");r.byId.set(t.itemID,t),r.byKey.set(Pr(t,!0),t)}}var jl=()=>me.libraries=ne.main.prepare(Xt).query().reduce((e,t)=>(e[t.libraryID]=t,e),{});var Wl=e=>{let{nativeBinding:t,mainDbPath:r,bbtDbPath:n}=e!=null?e:{};oe.debug("open database",e);let i=ne.main.open({nativeBinding:t,file:r});i||oe.error(`Failed to open main database, no database found at ${r}`);let o=ne.bbt.open({file:n,nativeBinding:t});return o||oe.debug(`Unable to open bbt database, no database found at ${n}`),jl(),[i,o]};var kv=async e=>{oe.debug("Reading main Zotero database for index");let r=ne.main.prepare(Yt).query({libId:e}).reduce((p,f)=>(p[f.itemID]=f,p),{}),n=Object.keys(r).map(p=>[Number(p),e]),i=zn(r,n);oe.info("Finished reading main Zotero database for index"),oe.trace("Start fuse indexing");let o=Object.values(i),s=o.map(p=>p.itemID),a=new Set(s),u=me.items.get(e);if(me.items.set(e,{byId:new Map(o.map(p=>[p.itemID,p])),byKey:new Map(o.map(p=>[Pr(p,!0),p]))}),!u)await Promise.all([...o.map(p=>me.search.addAsync(p.itemID,p))]);else{let p=[...u.byId.keys()].filter(f=>!a.has(f));u.byId.clear(),u.byKey.clear(),await Promise.all([...o.map(f=>me.search.addAsync(f.itemID,f)),...p.map(f=>me.search.removeAsync(f))])}oe.info("Library citation index initialized")},Bl=kv;function Ar(e,t){return(...r)=>{oe.debug(`Reading Zotero database for ${typeof t=="string"?t:t(null,...r)}`);let n=e.apply(null,r);return Promise.resolve(n).then(i=>oe.debug(`Finished reading Zotero database for ${typeof t=="string"?t:t(i,...r)}`)),n}}var Ov={getLibs:()=>Object.values(wo()),initIndex:Bl,openDb:Wl,search:async(e,t)=>{if(!me.items.has(e))throw new Error("Query before index ready");return await me.search.searchAsync(t)},getTags:Ar(e=>ne.main.prepare(er).query(e),"tags"),getItemIDsFromCitekey(e){return ne.bbt.prepare(Ht).query({citekeys:e})},getItemsFromCache:(e,t)=>{let r=me.items.get(t);if(!r)throw new Error("get items before cache ready");let n=[...r.byId.values()].sort((i,o)=>o.dateAccessed&&i.dateAccessed?o.dateAccessed.getTime()-i.dateAccessed.getTime():0);return e<=0?n:n.slice(0,e)},getAttachments:Ar((e,t)=>ne.main.prepare(Kt).query({itemId:e,libId:t}),(e,t)=>`attachments of item ${t}`+(e?`, count: ${e.length}`:"")),getAnnotations:Ar((e,t)=>ne.main.prepare(zt).query({attachmentId:e,libId:t,groupID:bo(t)}),(e,t)=>`annotations of attachment ${t}`+(e?`, count: ${e.length}`:"")),getAnnotFromKey:Ar((e,t)=>ne.main.prepare(Ut).query({annotKeys:e,libId:t,groupID:bo(t)}),(e,t)=>`annotations with keys: ${t.join(",")}`+(e?`, count: ${e.length}`:"")),getItems:$l,isUpToDate:()=>ne.main.isUpToDate(),checkDbStatus:e=>ne[e].opened,raw(e,t,r){let{instance:n}=ne.main;if(!n)throw new Error("failed to query raw: no main database opened");return n.prepare(t)[e](...r)},setLoglevel:e=>{oe.level=e,zl.default.setItem(uo,e)}};(0,Ul.worker)(Yo(Ov));\n/*! Bundled license information:\n\n@aidenlx/workerpool/dist/workerpool.js:\n  (**\n   * workerpool.js\n   * https://github.com/josdejong/workerpool\n   *\n   * Offload tasks to a pool of workers on node.js and in the browser.\n   *\n   * @version 6.2.1-mod.13\n   * @date    2022-10-04\n   *\n   * @license\n   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>\n   *\n   * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n   * use this file except in compliance with the License. You may obtain a copy\n   * of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n   * License for the specific language governing permissions and limitations under\n   * the License.\n   *)\n\nlocalforage/dist/localforage.js:\n  (*!\n      localForage -- Offline Storage, Improved\n      Version 1.10.0\n      https://localforage.github.io/localForage\n      (c) 2013-2017 Mozilla, Apache License 2.0\n  *)\n\nflatted/cjs/index.js:\n  (*! (c) 2020 Andrea Giammarchi *)\n*/\n';var l1=se(Qe(),1),f1=require("obsidian");function dc(e,t={}){return Ba({...t,register:r=>e.metadataCache.on("initialized",r),unregister:r=>e.metadataCache.offref(r),escape:()=>e.metadataCache.initialized,timeout:t.timeout??null})}function Hd(e,t={}){return Ba({...t,register:r=>e.vault.on("zotero:db-refresh",r),unregister:r=>e.vault.offref(r)})}function jo(e,t={}){return Ba({...t,unregister:r=>e.app.vault.offref(r),escape:()=>e.dbWorker.status===2,register:r=>{let n=e.dbWorker.status;if(n===0)return e.app.vault.on("zotero:db-ready",r);if(n===1)return e.app.vault.on("zotero:db-refresh",r);if(n===2)throw new Error("should not be called when db is ready");(0,l1.assertNever)(n)}})}var p1=e=>new Promise(t=>{e.workspace.onLayoutReady(t)}),Ba=({register:e,unregister:t,escape:r,timeout:n=1e4,waitAfterEvent:o,debounce:i=1e3})=>{let a=null;return[new Promise((u,l)=>{if(r?.()){u();return}a=function(){t(p),l(new qa)};function c(){t(p),u()}async function f(){o!==void 0&&await sleep(o),c()}let p=e(i?(0,f1.debounce)(f,i,!0):f);n!==null&&sleep(n).then(()=>{t(p),r?.()?c():l(new La(n))})}),a]},La=class extends Error{constructor(r){super(`Timeout after ${r}ms`);this.timeout=r}},qa=class extends Error{constructor(){super("Manually cancelled")}};var mc=e=>{let t={},r=n=>t[n]??=(...o)=>e.exec(n,o);return e.exec("methods").then(n=>n.forEach(r)),new Proxy(t,{get(n,o){if(typeof o=="string")return r(o)}})};var o2=require("os"),Wa=require("path"),i2=se(Qe(),1);var h1=require("path/posix");var Gd=require("obsidian");var d1={"103":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"109":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"110":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]}};var m1=Gd.Platform.isDesktopApp?require("@electron/remote").app.getPath("userData"):null,{arch:nX,platform:oX,versions:{modules:rq,electron:iX}}=process,Vd=d1,g1=({modules:e})=>{if(e in Vd)return 0;let r=Object.keys(Vd).map(o=>parseInt(o,10)).sort((o,i)=>o-i);return parseInt(e,10)>r[r.length-1]?1:-1},y1=({platform:e,arch:t})=>!!Vd[rq][e]?.includes(t),b1=()=>Gd.Platform.isDesktopApp?{arch:process.arch,platform:process.platform,modules:process.versions.modules,electron:process.versions.electron}:null,Kd=e=>e.versions?.["better-sqlite3"],zo=e=>{if(!m1)return null;let t=Kd(e);return t?(0,h1.join)(m1,Lb(t)):null};function v1(e){return e===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function w1(e,t){for(var r=e.length,n=t.length,o=new Array(r+n|0),i=0;i<r;++i)o[i]=e[i];for(var a=0;a<n;++a)o[r+a|0]=t[a];return o}function Jd(e,t){for(var r=0,n=e.length;r<n;++r)t(e[r])}function hc(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=t(e[o]);return n}function x1(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=t(o,e[o]);return n}function ja(e,t,r){for(var n=t,o=0,i=e.length;o<i;++o)n=r(n,e[o]);return n}var E1=function(e,t){for(var r in e)t(r)};function za(e,t){if(e===t)return!0;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||r==="undefined"||e===null)return!1;var n=typeof t;if(r==="function"||n==="function")throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if(n==="number"||n==="undefined"||t===null)return!1;var o=0|e.TAG,i=0|t.TAG;if(o===248)return e[1]===t[1];if(o===251)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(o!==i)return!1;var a=0|e.length;if(a===(0|t.length))if(Array.isArray(e))for(var s=0;;){var u=s;if(u===a)return!0;if(!za(e[u],t[u]))return!1;s=u+1|0}else{if(e instanceof Date&&t instanceof Date)return!(e>t||e<t);var l={contents:!0};return E1(e,function(c){if(!Object.prototype.hasOwnProperty.call(t,c)){l.contents=!1;return}}),l.contents&&E1(t,function(c){if(!Object.prototype.hasOwnProperty.call(e,c)||!za(t[c],e[c])){l.contents=!1;return}}),l.contents}else return!1}function gc(e,t){if(t in e)return v1(e[t])}var Zd=function(e,t){delete e[t]};function C1(e){for(var t=Object.keys(e),r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=e[t[o]];return n}function Wo(e){for(var t={},r=e.length,n=0;n<r;++n){var o=e[n];t[o[0]]=o[1]}return t}function S1(e,t){return w1(e,[t])}function Uo(){if(arguments.length===1){let e=arguments;return function(r){return S1(r,e[0])}}return S1(arguments[0],arguments[1])}function k1(e,t){for(var r=0,n=[];r<e.length;){var o=e[r];t(r,o)&&n.push(o),r=r+1|0}return n}function T1(){if(arguments.length===1){let e=arguments;return function(r){return k1(r,e[0])}}return k1(arguments[0],arguments[1])}function A1(e,t,r){return x1(e,function(n,o){return n===t?r(o):o})}function Yd(){if(arguments.length===2){let e=arguments;return function(r){return A1(r,e[0],e[1])}}return A1(arguments[0],arguments[1],arguments[2])}function I1(e,t){return T1(e,function(r,n){return r!==t})}function Qd(){if(arguments.length===1){let e=arguments;return function(r){return I1(r,e[0])}}return I1(arguments[0],arguments[1])}function _1(e,t){return ja(e,{},function(r,n){var o=t(n),i=gc(r,o);return i!==void 0?i.push(n):r[o]=[n],r})}function Bn(){if(arguments.length===1){let e=arguments;return function(r){return _1(r,e[0])}}return _1(arguments[0],arguments[1])}function V1(e){}function G1(e){return{}}function O1(e,t){return e[t]}function K1(){if(arguments.length===1){let e=arguments;return function(r){return O1(r,e[0])}}return O1(arguments[0],arguments[1])}var D1=gc;function J1(){if(arguments.length===1){let e=arguments;return function(r){return D1(r,e[0])}}return D1(arguments[0],arguments[1])}function F1(e,t){return e[t]}function Z1(){if(arguments.length===1){let e=arguments;return function(r){return F1(r,e[0])}}return F1(arguments[0],arguments[1])}function Y1(e){return Object.entries(e)}var jn=C1;function cr(e){return Object.keys(e)}var Q1=Wo;function N1(e,t){return Object.assign({},e,t)}function zn(){if(arguments.length===1){let e=arguments;return function(r){return N1(r,e[0])}}return N1(arguments[0],arguments[1])}function P1(e,t,r){var n=zn({},e);return n[t]=r,n}function yc(){if(arguments.length===2){let e=arguments;return function(r){return P1(r,e[0],e[1])}}return P1(arguments[0],arguments[1],arguments[2])}function R1(e,t,r){return yc(e,t,r(gc(e,t)))}function un(){if(arguments.length===2){let e=arguments;return function(r){return R1(r,e[0],e[1])}}return R1(arguments[0],arguments[1],arguments[2])}function M1(e,t,r){return yc(e,t,r(e[t]))}function X1(){if(arguments.length===2){let e=arguments;return function(r){return M1(r,e[0],e[1])}}return M1(arguments[0],arguments[1],arguments[2])}function $1(e,t){var r=zn({},e);return Zd(r,t),r}function bc(){if(arguments.length===1){let e=arguments;return function(r){return $1(r,e[0])}}return $1(arguments[0],arguments[1])}function L1(e,t){var r=zn({},e);return Jd(t,function(n){Zd(r,n)}),r}function vc(){if(arguments.length===1){let e=arguments;return function(r){return L1(r,e[0])}}return L1(arguments[0],arguments[1])}function q1(e,t){return Wo(hc(Object.keys(e),function(r){return[r,t(e[r])]}))}function wc(){if(arguments.length===1){let e=arguments;return function(r){return q1(r,e[0])}}return q1(arguments[0],arguments[1])}function B1(e,t){return Wo(hc(Object.keys(e),function(r){return[r,t(r,e[r])]}))}function lr(){if(arguments.length===1){let e=arguments;return function(r){return B1(r,e[0])}}return B1(arguments[0],arguments[1])}function j1(e,t){return Wo(ja(Object.keys(e),[],function(r,n){var o=e[n];return t(o)?Uo(r,[n,o]):r}))}function Xd(){if(arguments.length===1){let e=arguments;return function(r){return j1(r,e[0])}}return j1(arguments[0],arguments[1])}function z1(e,t){return Wo(ja(Object.keys(e),[],function(r,n){var o=e[n];return t(n,o)?Uo(r,[n,o]):r}))}function xc(){if(arguments.length===1){let e=arguments;return function(r){return z1(r,e[0])}}return z1(arguments[0],arguments[1])}function W1(e,t){return Xd(e,function(r){return!t(r)})}function e2(){if(arguments.length===1){let e=arguments;return function(r){return W1(r,e[0])}}return W1(arguments[0],arguments[1])}function U1(e,t){return xc(e,function(r,n){return!t(r,n)})}function t2(){if(arguments.length===1){let e=arguments;return function(r){return U1(r,e[0])}}return U1(arguments[0],arguments[1])}function H1(e,t){return xc(e,function(r,n){return function(i,a){return a.includes(i)}(r,t)})}function xt(){if(arguments.length===1){let e=arguments;return function(r){return H1(r,e[0])}}return H1(arguments[0],arguments[1])}function r2(e){return za(e,{})}function n2(e){return!za(e,{})}var em={__proto__:null,placeholder:V1,makeEmpty:G1,getUnsafe:K1,get:J1,prop:Z1,toPairs:Y1,values:jn,keys:cr,fromPairs:Q1,merge:zn,set:yc,update:un,updateUnsafe:X1,deleteKey:bc,deleteKeys:vc,map:wc,mapWithKey:lr,filter:Xd,filterWithKey:xc,reject:e2,rejectWithKey:t2,selectKeys:xt,isEmpty:r2,isNotEmpty:n2};var tm=class{use=Oe.this;get manifest(){return this.use(be).manifest}value;constructor(){let t=this.getDefaults();this.value=t,Object.defineProperties(this,lr(t,r=>({get:()=>this.value[r]})))}setOption(t,r){return this.value[t]===r?{apply:()=>Promise.resolve(!1),changed:!1}:(this.value[t]=r,{apply:()=>this.apply(t).then(()=>!0),changed:!0})}async apply(t){}async applyAll(){await Promise.all(cr(this.value).map(t=>this.apply(t)))}toJSON(){return this.value}fromJSON(t){let r=cr(this.getDefaults());this.value={...this.value,...xt(t,r)}}},Me=tm;var Ut=class extends Me{getDefaults(){return{zoteroDataDir:(0,Wa.join)((0,o2.homedir)(),"Zotero"),citationLibrary:1}}async apply(t){let r=this.use(ft);switch(t){case"zoteroDataDir":return await r.refresh({task:"full"});case"citationLibrary":return await r.refresh({task:"searchIndex",force:!0});default:(0,i2.default)(t)}}#e;get nativeBinding(){if(this.#e)return this.#e;let t=zo(this.manifest);if(t)return this.#e=t,this.#e;throw new Error("Failed to get native binding path")}get zoteroDbPath(){return(0,Wa.join)(this.zoteroDataDir,"zotero.sqlite")}get betterBibTexDbPath(){return(0,Wa.join)(this.zoteroDataDir,"better-bibtex-search.sqlite")}get zoteroCacheDirPath(){return(0,Wa.join)(this.zoteroDataDir,"cache")}get dbConnParams(){return{nativeBinding:this.nativeBinding,mainDbPath:this.zoteroDbPath,bbtDbPath:this.betterBibTexDbPath}}};var ft=class extends ce{logSettings=this.use(Vo);settings=this.use(Ut);async onload(){ne.debug("loading DatabaseWorker");let t=(0,Ho.debounce)(()=>{this.refresh({task:"dbConn"})},500,!0);this.registerEvent(app.vault.on("zotero:db-updated",()=>t()));let r=process.hrtime();await this.initialize(),ne.debug(`ZoteroDB Initialization complete. Took ${(0,s2.default)(process.hrtime(r))}`);let n=this.use(be);n.addCommand({id:"refresh-zotero-data",name:"Refresh Zotero Data",callback:async()=>{await this.refresh({task:"full"})}}),n.addCommand({id:"refresh-zotero-search-index",name:"Refresh Zotero Search Index",callback:async()=>{await this.refresh({task:"searchIndex"})}});let o=this.genAutoRefresh(n);this.registerEvent(n.server.on("bg:notify",async(i,a)=>{a.event==="regular-item/update"&&o(a)}))}genAutoRefresh(t){let r=!1,n=null,o=()=>{n&&(ne.debug("unregistering db refresh watcher"),n(),n=null)},i=(0,Ho.debounce)(async()=>{if(o(),ne.debug("Auto Refreshing Zotero Search Index"),!r){r=!1;try{ne.debug("Db not refreshed, waiting before auto refresh");let[a]=Hd(t.app,{timeout:1e4});await a}catch(a){if(a instanceof La){ne.warn("no db refreshed event received in 10s, skip refresh search index");return}else{console.error("error while waiting for db refresh during execute",a);return}}}await this.refresh({task:"searchIndex",force:!0}),ne.debug("Auto Refreshing Zotero Search Index Success")},5e3,!0);return a=>{if(ne.debug(`Request to auto refresh search index: (refreshed ${r})`,a),i(),o(),r)return;ne.debug("watching db refresh while waiting for search index auto refresh");let[s,u]=Hd(t.app,{timeout:null});n=u,s.then(()=>{ne.debug("db refresh while requesting auto refresh search index"),r=!0,n=null}).catch(l=>{l instanceof qa||console.error("error while waiting for db refresh during request",l)})}}async onunload(){await this.#t.terminate(),URL.revokeObjectURL(this.#e),this.#r=0,this.#i=null}#e=pc(c1);#t=a2.default.pool(this.#e,{minWorkers:1,maxWorkers:1,workerType:"web",name:"Zotero Database Workers"});api=mc(this.#t);#r=0;get status(){return this.#r}#n=null;#o=null;toConnectedDbId(t){return[t.mainDbPath,t.bbtDbPath].join()}async#a(t){let r=this.settings.citationLibrary;return!t&&this.#n===r?(ne.debug(`Skipping search index init, lib ${r} already indexed`),!1):(await this.api.initIndex(r),this.#n=r,ne.debug(`Search index init complete for lib ${r}`),!0)}async#u(t=!1){let r=this.settings.dbConnParams,n=this.toConnectedDbId(r),o;t?n!==this.#o?(delete r.nativeBinding,o=await this.api.openDb(r),this.#o=n):o=await this.api.openDb():(o=await this.api.openDb(r),this.#o=n);let[i,a]=o;if(a||ne.debug("Failed to open Better BibTeX database, skipping..."),!i)throw new Error("Failed to init ZoteroDB")}async initialize(){if(this.#r!==0)throw new Error("Calling init on already initialized db, use refresh instead");await this.#u(),app.vault.trigger("zotero:db-ready"),await this.#a(!0),app.metadataCache.trigger("zotero:search-ready"),new Ho.Notice("ZoteroDB Initialization complete."),this.#r=2}#s=null;#i=null;refresh(t){if(this.#r===0)return Promise.reject(new Error("Calling refresh on uninitialized database"));if(this.#r===2){this.#r=1;let r=(async()=>{t.task==="dbConn"?await this.#c():t.task==="searchIndex"?await this.#l(t.force):t.task==="full"?await this.#f():(0,rm.assertNever)(t),this.#r=2;let n=this.#i;n&&(this.#i=null,await this.refresh(n))})();return this.#s=r}else{if(this.#r===1)return this.#s?(this.#i=this.#p(t),this.#s):Promise.reject(new Error("Other task in pending state"));(0,rm.assertNever)(this.#r)}}async#c(){await this.#u(!0),app.vault.trigger("zotero:db-refresh")}async#l(t=!1){await this.#a(t)&&app.metadataCache.trigger("zotero:search-refresh")}async#f(){await this.#c(),await this.#l(!0),new Ho.Notice("ZoteroDB Refresh complete.")}#p(t){if(!this.#i)return t;let r=this.#i;return r.task==="full"?r:r.task===t.task?r.task==="searchIndex"?{...r,force:r.force||t.force}:r:{task:"full"}}};var c2="INFO",l2="log4js_loglevel",nq=()=>{let e=localStorage.getItem(l2);return typeof e=="string"&&e in Sc.levels?(console.debug(`Read from localstorage: loglevel ${e}`),e):c2},Ec=Mb("main",nq(),Sc.default),ne=Ec,$e=(e,t,...r)=>{if(!t){Ec.error(e,...r);return}Ec.error(e,t instanceof Error?t.message:String(t),...r),console.error(t)},Vo=class extends Me{getDefaults(){return{level:c2}}async applyLevel(){Ec.level=this.level,localStorage.setItem(l2,this.level),await this.use(ft).api.setLoglevel(this.level)}async apply(t){switch(t){case"level":await this.applyLevel();return;default:(0,u2.assertNever)(t)}}};var SS=require("fs"),$r=require("obsidian");T();var xe={},Yo=Symbol(),fE=e=>!!e[Yo],uE=e=>!e[Yo].c,Ja=e=>{var t;let{b:r,c:n}=e[Yo];n&&(n(),(t=Sq.get(r))==null||t())},Nc=(e,t)=>{let r=e[Yo].o,n=t[Yo].o;return r===n||e===n||fE(r)&&Nc(r,t)},cE=(e,t)=>{let r={b:e,o:t,c:null},n=new Promise(o=>{r.c=()=>{r.c=null,o()},t.finally(r.c)});return n[Yo]=r,n},Sq=new WeakMap;var Fc=e=>"init"in e,ym="r",bm="w",Za="c",vm="s",lE="h",kq="n",Aq="l",Iq="a",_q="m",Cq=e=>{let t=new WeakMap,r=new WeakMap,n=new Map,o,i;if((xe.env&&xe.env.MODE)!=="production"&&(o=new Set,i=new Set),e)for(let[C,k]of e){let M={v:k,r:0,y:!0,d:new Map};(xe.env&&xe.env.MODE)!=="production"&&(Object.freeze(M),Fc(C)||console.warn("Found initial value for derived atom which can cause unexpected behavior",C)),t.set(C,M)}let a=new WeakMap,s=(C,k,M)=>{let B=a.get(k);B||(B=new Map,a.set(k,B)),M.then(()=>{B.get(C)===M&&(B.delete(C),B.size||a.delete(k))}),B.set(C,M)},u=C=>{let k=new Set,M=a.get(C);return M&&(a.delete(C),M.forEach((B,z)=>{Ja(B),k.add(z)})),k},l=new WeakMap,c=C=>{let k=l.get(C);return k||(k=new Map,l.set(C,k)),k},f=(C,k)=>{if(C){let M=c(C),B=M.get(k);return B||(B=f(C.p,k),B&&"p"in B&&uE(B.p)&&(B=void 0),B&&M.set(k,B)),B}return t.get(k)},p=(C,k,M)=>{if((xe.env&&xe.env.MODE)!=="production"&&Object.freeze(M),C)c(C).set(k,M);else{let B=t.get(k);t.set(k,M),n.has(k)||n.set(k,B)}},d=(C,k=new Map,M)=>{if(!M)return k;let B=new Map,z=!1;return M.forEach(U=>{var Z;let oe=((Z=f(C,U))==null?void 0:Z.r)||0;B.set(U,oe),k.get(U)!==oe&&(z=!0)}),k.size===B.size&&!z?k:B},h=(C,k,M,B,z)=>{let U=f(C,k);if(U){if(z&&(!("p"in U)||!Nc(U.p,z)))return U;"p"in U&&Ja(U.p)}let Z={v:M,r:U?.r||0,y:!0,d:d(C,U?.d,B)},oe=!U?.y;return!U||!("v"in U)||!Object.is(U.v,M)?(oe=!0,++Z.r,Z.d.has(k)&&(Z.d=new Map(Z.d).set(k,Z.r))):Z.d!==U.d&&(Z.d.size!==U.d.size||!Array.from(Z.d.keys()).every(qe=>U.d.has(qe)))&&(oe=!0,Promise.resolve().then(()=>{j(C)})),U&&!oe?U:(p(C,k,Z),Z)},g=(C,k,M,B,z)=>{let U=f(C,k);if(U){if(z&&(!("p"in U)||!Nc(U.p,z)))return U;"p"in U&&Ja(U.p)}let Z={e:M,r:(U?.r||0)+1,y:!0,d:d(C,U?.d,B)};return p(C,k,Z),Z},y=(C,k,M,B)=>{let z=f(C,k);if(z&&"p"in z){if(Nc(z.p,M))return z.y?z:{...z,y:!0};Ja(z.p)}s(C,k,M);let U={p:M,r:(z?.r||0)+1,y:!0,d:d(C,z?.d,B)};return p(C,k,U),U},w=(C,k,M,B)=>{if(M instanceof Promise){let z=cE(M,M.then(U=>{h(C,k,U,B,z)}).catch(U=>{if(U instanceof Promise)return fE(U)?U.then(()=>{A(C,k,!0)}):U;g(C,k,U,B,z)}));return y(C,k,z,B)}return h(C,k,M,B)},x=(C,k)=>{let M=f(C,k);if(M){let B={...M,y:!1};p(C,k,B)}else(xe.env&&xe.env.MODE)!=="production"&&console.warn("[Bug] could not invalidate non existing atom",k)},A=(C,k,M)=>{if(!M){let z=f(C,k);if(z){if(z.y&&"p"in z&&!uE(z.p))return z;if(z.d.forEach((U,Z)=>{if(Z!==k)if(!r.has(Z))A(C,Z);else{let oe=f(C,Z);oe&&!oe.y&&A(C,Z)}}),Array.from(z.d).every(([U,Z])=>{let oe=f(C,U);return oe&&!("p"in oe)&&oe.r===Z}))return z.y?z:{...z,y:!0}}}let B=new Set;try{let z=k.read(U=>{B.add(U);let Z=U===k?f(C,U):A(C,U);if(Z){if("e"in Z)throw Z.e;if("p"in Z)throw Z.p;return Z.v}if(Fc(U))return U.init;throw new Error("no atom init")});return w(C,k,z,B)}catch(z){if(z instanceof Promise){let U=cE(z,z);return y(C,k,U,B)}return g(C,k,z,B)}},O=(C,k)=>A(k,C),D=(C,k)=>{let M=r.get(k);return M||(M=_(C,k)),M},F=(C,k)=>!k.l.size&&(!k.t.size||k.t.size===1&&k.t.has(C)),R=(C,k)=>{let M=r.get(k);M&&F(k,M)&&I(C,k)},P=(C,k)=>{let M=r.get(k);M?.t.forEach(B=>{B!==k&&(x(C,B),P(C,B))})},E=(C,k,M)=>{let B=!0,z=(oe,qe)=>{let Te=A(C,oe);if("e"in Te)throw Te.e;if("p"in Te){if(qe?.unstable_promise)return Te.p.then(()=>{let me=f(C,oe);return me&&"p"in me&&me.p===Te.p?new Promise(Or=>setTimeout(Or)).then(()=>z(oe,qe)):z(oe,qe)});throw(xe.env&&xe.env.MODE)!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",oe),Te.p}if("v"in Te)return Te.v;throw(xe.env&&xe.env.MODE)!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",oe),new Error("no value found")},U=(oe,qe)=>{let Te;if(oe===k){if(!Fc(oe))throw new Error("atom not writable");u(oe).forEach(Dr=>{Dr!==C&&w(Dr,oe,qe)});let Or=f(C,oe),Nt=w(C,oe,qe);Or!==Nt&&P(C,oe)}else Te=E(C,oe,qe);return B||j(C),Te},Z=k.write(z,U,M);return B=!1,Z},S=(C,k,M)=>{let B=E(M,C,k);return j(M),B},v=C=>!!C.write,_=(C,k,M)=>{let B={t:new Set(M&&[M]),l:new Set};if(r.set(k,B),(xe.env&&xe.env.MODE)!=="production"&&i.add(k),A(void 0,k).d.forEach((U,Z)=>{let oe=r.get(Z);oe?oe.t.add(k):Z!==k&&_(C,Z,k)}),v(k)&&k.onMount){let U=oe=>S(k,oe,C),Z=k.onMount(U);C=void 0,Z&&(B.u=Z)}return B},I=(C,k)=>{var M;let B=(M=r.get(k))==null?void 0:M.u;B&&B(),r.delete(k),(xe.env&&xe.env.MODE)!=="production"&&i.delete(k);let z=f(C,k);z?("p"in z&&Ja(z.p),z.d.forEach((U,Z)=>{if(Z!==k){let oe=r.get(Z);oe&&(oe.t.delete(k),F(Z,oe)&&I(C,Z))}})):(xe.env&&xe.env.MODE)!=="production"&&console.warn("[Bug] could not find atom state to unmount",k)},W=(C,k,M,B)=>{let z=new Set(M.d.keys());B?.forEach((U,Z)=>{if(z.has(Z)){z.delete(Z);return}let oe=r.get(Z);oe&&(oe.t.delete(k),F(Z,oe)&&I(C,Z))}),z.forEach(U=>{let Z=r.get(U);Z?Z.t.add(k):r.has(k)&&_(C,U,k)})},j=C=>{if(C){c(C).forEach((M,B)=>{let z=t.get(B);if(M!==z){let U=r.get(B);U?.l.forEach(Z=>Z(C))}});return}for(;n.size;){let k=Array.from(n);n.clear(),k.forEach(([M,B])=>{let z=f(void 0,M);if(z&&z.d!==B?.d&&W(void 0,M,z,B?.d),B&&!B.y&&z?.y)return;let U=r.get(M);U?.l.forEach(Z=>Z())})}(xe.env&&xe.env.MODE)!=="production"&&o.forEach(k=>k())},H=C=>{c(C).forEach((M,B)=>{let z=t.get(B);(!z||M.r>z.r||M.y!==z.y||M.r===z.r&&M.d!==z.d)&&(t.set(B,M),M.d!==z?.d&&W(C,B,M,z?.d))})},J=(C,k)=>{k&&H(k),j(void 0)},re=(C,k,M)=>{let z=D(M,C).l;return z.add(k),()=>{z.delete(k),R(M,C)}},ie=(C,k)=>{for(let[M,B]of C)Fc(M)&&(w(k,M,B),P(k,M));j(k)};return(xe.env&&xe.env.MODE)!=="production"?{[ym]:O,[bm]:S,[Za]:J,[vm]:re,[lE]:ie,[kq]:C=>(o.add(C),()=>{o.delete(C)}),[Aq]:()=>i.values(),[Iq]:C=>t.get(C),[_q]:C=>r.get(C)}:{[ym]:O,[bm]:S,[Za]:J,[vm]:re,[lE]:ie}};var pE=(e,t)=>({s:t?t(e).SECRET_INTERNAL_store:Cq(e)}),gm=new Map,wm=e=>(gm.has(e)||gm.set(e,we(pE())),gm.get(e)),dE=({children:e,initialValues:t,scope:r,unstable_createStore:n,unstable_enableVersionedWrite:o})=>{let[i,a]=$({});L(()=>{let l=s.current;l.w&&(l.s[Za](null,i),delete i.p,l.v=i)},[i]);let s=N();if(!s.current){let l=pE(t,n);if(o){let c=0;l.w=f=>{a(p=>{let d=c?p:{p};return f(d),d})},l.v=i,l.r=f=>{++c,f(),--c}}s.current=l}let u=wm(r);return Q(u.Provider,{value:s.current},e)},Tq=0;function It(e,t){let r=`atom${++Tq}`,n={toString:()=>r};return typeof e=="function"?n.read=e:(n.init=e,n.read=o=>o(n),n.write=(o,i,a)=>i(n,typeof a=="function"?a(o(n)):a)),t&&(n.write=t),n}function ot(e,t){let r=wm(t),n=V(r),{s:o,v:i}=n,a=p=>{let d=o[ym](e,p);if((xe.env&&xe.env.MODE)!=="production"&&!d.y)throw new Error("should not be invalidated");if("e"in d)throw d.e;if("p"in d)throw d.p;if("v"in d)return d.v;throw new Error("no atom value")},[[s,u,l],c]=pt((p,d)=>{let h=a(d);return Object.is(p[1],h)&&p[2]===e?p:[d,h,e]},i,p=>{let d=a(p);return[p,d,e]}),f=u;return l!==e&&(c(s),f=a(s)),L(()=>{let{v:p}=n;p&&o[Za](e,p);let d=o[vm](e,c,p);return c(p),d},[o,e,n]),L(()=>{o[Za](e,s)}),Un(f),f}function xm(e,t){let r=wm(t),{s:n,w:o}=V(r);return K(a=>{if((xe.env&&xe.env.MODE)!=="production"&&!("write"in e))throw new Error("not writable atom");let s=u=>n[bm](e,a,u);return o?o(s):s()},[n,o,e])}var xS=require("obsidian");T();var mE=()=>{let e=[];return{get:()=>e,set:(n,o)=>{e.push([n,o])}}};var dr=It(null),Em=It(e=>{let{arch:t,platform:r,modules:n}=e(dr).platform;return`${r}-${t}-${n}.node.gz`}),Ya=It(e=>`https://github.com/aidenlx/better-sqlite3/releases/download/${e(dr).binaryVersion}/${e(Em)}`),Cee=It(e=>e(Ya).replace("github.com","download.fastgit.org")),Pc=It(e=>zo(e(dr).manifest)),hE=It(e=>e(dr).mode);var vS=se(Qe(),1);T();var gE=function(e){return function(t,r){var n=N(!1);e(function(){return function(){n.current=!1}},[]),e(function(){if(!n.current)n.current=!0;else return t()},r)}};function mr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function yE(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}T();var Mr=function(e){return typeof e=="function"};var bE=function(e){return typeof e>"u"};var Oq=!1,Qo=Oq;function Dq(e){Qo&&(Mr(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=N(e);t.current=G(function(){return e},[e]);var r=N();return r.current||(r.current=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.current.apply(this,n)}),r.current}var Le=Dq;T();var vE=gE(L);T();T();function Fq(e){var t=N(e);return t.current=e,t}var Rc=Fq;var Nq=function(e){Qo&&(Mr(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=Rc(e);L(function(){return function(){t.current()}},[])},wE=Nq;var E4=!!(typeof window<"u"&&window.document&&window.document.createElement),XE=E4;var eS=se(QE());T();function S4(e,t){var r;Qo&&(Mr(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var n=Rc(e),o=(r=t?.wait)!==null&&r!==void 0?r:1e3,i=G(function(){return(0,eS.default)(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.current.apply(n,yE([],mr(a),!1))},o,t)},[]);return wE(function(){i.cancel()}),{run:i,cancel:i.cancel,flush:i.flush}}var Xa=S4;T();function tS(e){function t(r,n){var o;try{o=e()}catch(p){console.error(p)}var i=function(p){return n?.serializer?n?.serializer(p):JSON.stringify(p)},a=function(p){return n?.deserializer?n?.deserializer(p):JSON.parse(p)};function s(){try{var p=o?.getItem(r);if(p)return a(p)}catch(d){console.error(d)}return Mr(n?.defaultValue)?n?.defaultValue():n?.defaultValue}var u=mr($(function(){return s()}),2),l=u[0],c=u[1];vE(function(){c(s())},[r]);var f=function(p){var d=Mr(p)?p(l):p;if(c(d),bE(d))o?.removeItem(r);else try{o?.setItem(r,i(d))}catch(h){console.error(h)}};return[l,Le(f)]}return t}var k4=tS(function(){return XE?localStorage:void 0}),_m=k4;function rS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=rS(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Cm(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=rS(e))&&(n&&(n+=" "),n+=t);return n}var Xo=Cm;var nS=require("obsidian");T();var Ve=e=>{let t=N(null);return[K(n=>{t.current&&t.current.empty(),n&&(0,nS.setIcon)(n,e),t.current=n},[e])]};Ko();Ko();var A4=0;function m(e,t,r,n,o){var i,a,s={};for(a in t)a=="ref"?i=t[a]:s[a]=t[a];var u={type:e,props:s,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--A4,__source:o,__self:n};if(typeof e=="function"&&(i=e.defaultProps))for(a in i)s[a]===void 0&&(s[a]=i[a]);return ee.vnode&&ee.vnode(u),u}var es=({name:e,desc:t,button:r,onClick:n,icon:o,className:i,...a})=>m("div",{className:Xo("setting-item",i),...a,children:[o&&m("div",{className:"setting-icon",children:o}),m("div",{className:"setting-item-info",children:[m("div",{className:"setting-item-name",children:e}),m("div",{className:"setting-item-description",children:t})]}),m("div",{className:"setting-item-control",children:r&&m("button",{className:"mod-cta",onClick:n,children:r})})]});T();var I4=()=>m("svg",{className:"icon-blank svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32"}),_4=()=>m("svg",{className:"icon-spin svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32",children:[m("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),m("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z",children:m("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})})]}),oS=({color:e="var(--icon-color, black)",delay:t=0,height:r=16,width:n=16,style:o,...i})=>{let[a,s]=$(t>0);return L(()=>{let u=-1;return a&&(u=window.setTimeout(()=>{s(!1)},t)),()=>{window.clearTimeout(u)}},[]),m("div",{style:{...o,fill:e,height:Number(r)||r,width:Number(n)||n},...i,children:a?m(I4,{}):m(_4,{})})};var aS=require("fs"),sS=require("fs/promises"),uS=require("stream"),Dm=require("stream/promises"),cS=require("zlib"),N4=require("@electron/remote");var Mc=class extends Error{},Tm=class extends Mc{},Om=class extends Mc{},C4=(e,t=",")=>e.join(t),T4={accept:"*",multiple:!1,strict:!1},iS=e=>{let{accept:t,multiple:r,strict:n}={...T4,...e},o=F4({multiple:r,accept:Array.isArray(t)?C4(t):t});return new Promise(i=>{o.onchange=()=>{i(O4(o.files,r,n)),o.remove()},o.click()})},O4=(e,t,r)=>new Promise((n,o)=>{if(!e)return o(new Tm);let i=D4(e,t,r);if(!i)return o(new Om);n(i)}),D4=(e,t,r)=>!t&&r?e.length===1?e[0]:null:e.length?e:null,F4=({accept:e,multiple:t})=>{let r=document.createElement("input");return r.type="file",r.multiple=t,r.accept=e,r};var lS=require("obsidian"),$c=async(e,t,r)=>{let n=uS.Readable.from(Buffer.from(e)),o=(0,aS.createWriteStream)(t);try{r?await(0,Dm.pipeline)(n,o):await(0,Dm.pipeline)(n,(0,cS.createGunzip)(),o)}catch(i){throw o.destroy(),await(0,sS.rm)(t,{force:!0}),i}},fS=async()=>{let e=await iS({multiple:!1,accept:[".gz",".node"],strict:!0});return e?{decompressed:!e.name.endsWith(".gz"),arrayBuffer:await e.arrayBuffer()}:null},pS=async e=>(await fetch(e,{method:"HEAD"})).status,dS=async e=>(await(0,lS.requestUrl)({url:e})).arrayBuffer;var mS=(i=>(i[i.Idle=0]="Idle",i[i.Downloading=1]="Downloading",i[i.Importing=2]="Importing",i[i.Success=3]="Success",i[i.Failed=4]="Failed",i))(mS||{}),ei=It(0),P4=It(e=>e(ei)===4),hS=It(null),R4=It(e=>{switch(e(ei)){case 0:return null;case 1:return"Downloading...";case 2:return"Importing...";case 3:return"Module successfully installed";case 4:return`Module install failed: ${e(hS)}`;default:break}}),M4=It(null,(e,t,[r,n])=>{t(ei,4);let o="Failed to install module when "+mS[r];$e(o,n),t(hS,o+": "+(n instanceof Error?n.message:`${n}`))}),$4=()=>{let e=xm(ei),t=xm(M4),r=ot(Ya),n=ot(Pc);return Le(async()=>{if(!n){t([0,new Error("Cannot find binary version")]);return}e(1);let o;try{if(await pS(r)===404)throw new Error(`Requested module not available (${r}), please open an issue on GitHub`);o=await dS(r)}catch(i){t([1,i]);return}e(2);try{await $c(o,n,!1)}catch(i){t([2,i]);return}e(3)})},gS=()=>{let e=ot(ei),t=ot(R4),r=ot(dr),n=$4();return m("div",{className:"zt-auto-install",children:[m(es,{name:"Auto Install",desc:"Recommended",button:e===0?"Install":void 0,onClick:n}),e!==0&&m(es,{className:Xo("zt-auto-install-status",{"mod-warning":e===4,"mod-success":e===3}),icon:m(q4,{}),name:t,button:e===3?"Reload Plugin":void 0,onClick:()=>r.reloadPlugin()})]})},L4=()=>{let e=ot(P4),[t]=Ve(e?"slash":"check");return m("div",{className:"zt-install-done-icon",style:{display:"contents"},ref:t})},q4=()=>{switch(ot(ei)){case 0:return null;case 1:case 2:return m(oS,{className:"zt-install-spin-icon",style:{display:"contents"}});case 3:case 4:return m(L4,{})}};var yS=require("obsidian");T();var B4=async e=>{try{let t=await fS();return t?(await $c(t.arrayBuffer,e,t.decompressed),!0):(ne.info("No file selected, skip import module"),!1)}catch(t){return new yS.Notice(`Failed to import module from ${e}: ${t}`),$e("import module "+e,t),!1}},j4=()=>{let[e,t]=$(!1),r=ot(Pc),n=async()=>{if(!r)return;await B4(r)&&t(!0)},o=ot(Ya),i=ot(Em),a=ot(dr);return m("ol",{children:[m("li",{children:["Download ",m("code",{children:".node.gz"})," file from"," ",m("a",{href:o,children:"GitHub"}),"."]}),m("li",{children:["Select downloaded ",m("code",{children:i})," or uncompressed"," ",m("code",{children:"better-sqlite3.node"}),"to install:",m(z4,{onClick:n,done:e})]}),m("li",{children:["Reload Obsidian Zotero Plugin:",m(W4,{onClick:()=>a.reloadPlugin()})]})]})},bS=()=>{let[e,t]=$(!1);return m("div",{className:"zt-manual-install",children:[m(es,{name:"Manual Install",desc:"Use this option if you have trouble downloading the module with auto install.",button:`${e?"Hide":"Show"} Guide`,onClick:()=>t(r=>!r)}),m("div",{hidden:!e,children:m(j4,{})})]})},z4=({done:e,onClick:t})=>m("button",{className:Xo({"zt-import-done":e}),onClick:t,children:e?"Library file imported":"Select"}),W4=({disabled:e,onClick:t})=>m("button",{disabled:e,onClick:t,children:"Reload Plugin"});var U4=()=>{let e=ot(hE);switch(e){case"install":return m(Y,{children:["Obsidian Zotero Plugin requires latest version of"," ",m("code",{children:"better-sqlite3"})," to be installed. Use one of the method below to install or update it."]});case"reset":return m(Y,{children:[m("code",{children:"better-sqlite3"})," seems to be broken and failed to load. you can try to use one of the method below to reinstall it."]});default:(0,vS.default)(e)}},wS=()=>m(Y,{children:[m("style",{children:`
.modal.mod-zt-install-guide .modal-content {
  display: flex;
  flex-direction: column;
}
.zt-install-methods {
  display: flex;
  flex-direction: column;
  gap: var(--size-4-4);
  flex-grow: 1;
  padding: var(--size-4-4);
  padding-bottom: var(--size-4-2);
}
.zt-install-methods .setting-item {
  padding: 0;
}
.zt-auto-install {
  display: flex;
  flex-direction: column;
  gap: var(--size-4-4);
}
.modal.mod-zt-install-guide button:disabled {
  background-color: var(--background-modifier-cover);
}
.modal.mod-zt-install-guide button:disabled:hover {
  box-shadow: var(--input-shadow);
}
.modal.mod-zt-install-guide button.zt-import-done {
  background-color: var(--background-modifier-success);
}
.zt-auto-install-status {
  border-top: none;
}
.zt-auto-install-status.mod-success .setting-icon ,
.zt-auto-install-status.mod-success .setting-item-name  {
  color: var(--text-success);
}
.zt-auto-install-status.mod-warning .setting-icon ,
.zt-auto-install-status.mod-warning .setting-item-name  {
  color: var(--text-error);
}
.zt-auto-install-status .setting-icon ,
.zt-auto-install-status .setting-item-name  {
  color: var(--text-muted);
}
      `}),m("div",{className:"zt-install-desc",children:m(U4,{})}),m("div",{className:"zt-install-methods",children:[m(gS,{}),m(bS,{})]})]});var ts=class extends xS.Modal{constructor(r,n,o,i){super(app);this.manifest=r;this.platform=n;this.binaryVersion=o;this.mode=i;this.titleEl.setText("Setup Obsidian Zotero Plugin"),this.modalEl.addClass("mod-zt-install-guide")}onOpen(){let r=mE();r.set(dr,this),q.render(m(dE,{initialValues:r.get(),children:m(wS,{})}),this.contentEl)}onClose(){q.unmountComponentAtNode(this.contentEl)}async reloadPlugin(){await app.plugins.disablePlugin(this.manifest.id),this.close(),await app.plugins.enablePlugin(this.manifest.id)}};var ES=(e,t,r)=>{let n=b1();if(!n)throw new Error("Not in desktop app");let o=g1(n);if(o<0)new $r.Notice(`The electron (electron: ${n.electron}, module version: ${n.modules}) in current version of obsidian is not supported by obsidian-zotero-plugin, please reinstall using latest obsidian installer from official website`);else if(o>0)new $r.Notice(`The electron (electron: ${n.electron}, module version: ${n.modules}) in current version of obsidian is newer than the one supported by installed obsidian-zotero-plugin, please update obsidian-zotero-plugin to the latest version`);else if(!y1(n))new $r.Notice(`Your device (${n.arch}-${n.platform}) is not supported by obsidian-zotero-plugin`);else{let i=Kd(t);if(!i)throw new Error(`Cannot find binary version for ${t.name} v${t.version}`);try{(0,SS.statSync)(e).isFile()?r==="reset"&&new ts(t,n,i,r).open():new $r.Notice("Path to database library occupied, please check the location manually: "+e,2e3)}catch(a){let s=a;s.code==="ENOENT"?new ts(t,n,i,r).open():(new $r.Notice(`Unexpected error while checking path of better-sqlite3, please check the location manually: ${e}, error: ${s}`,2e3),$e("checking better-sqlite3 path:"+e,s))}}},H4=e=>{if(!$r.Platform.isDesktopApp)throw new Error("Not in desktop app");let t=zo(e);if(!t)throw new Error(`Cannot find binary version for ${e.name} v${e.version}`);try{return require(t),!0}catch(r){return r?.code==="MODULE_NOT_FOUND"?ES(t,e,"install"):(new $r.Notice(`Failed to load database library: ${r}`),$e("Failed to load database library",r),ES(t,e,"reset")),!1}},kS=H4;var sP=require("path/posix");var Kr=require("obsidian");var Se;(function(e){e[e.highlight=1]="highlight",e[e.note=2]="note",e[e.image=3]="image",e[e.ink=4]="ink"})(Se=Se||(Se={}));var hr;(function(e){e[e.manual=0]="manual",e[e.auto=1]="auto"})(hr=hr||(hr={}));var Fm;(function(e){e[e.importedFile=0]="importedFile",e[e.importedUrl=1]="importedUrl",e[e.linkedFile=2]="linkedFile",e[e.linkedUrl=3]="linkedUrl",e[e.embeddedImage=4]="embeddedImage"})(Fm=Fm||(Fm={}));var ti;(function(e){e[e.fullName=0]="fullName",e[e.nameOnly=1]="nameOnly"})(ti=ti||(ti={}));var Lc=["attachment","note","annotation"];var rs=Lc.map(e=>`'${e}'`).join(",");var _t=(e="itemID")=>`--sql
  ${e} IS NOT NULL
  AND ${e} NOT IN (SELECT itemID FROM deletedItems)
`,ri=e=>typeof e=="boolean"?"":`AND ${e} = $itemId`;var qc=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]-t[r];return 0},ns=e=>!!e.path,AS=e=>`obzt-active-atch-${e.itemID}-${e.libraryID}`,Nm=(e,t)=>{let r=e.getItem(AS(t));if(!r)return null;let n=parseInt(r,10);return n>0?n:null},ni=(e,t,r)=>e.setItem(AS(t),r.toString());var Bc=`--sql
  items.itemID,
  items.key,
  annots.type,
  annots.authorName,
  annots.text,
  annots.comment,
  annots.color,
  annots.pageLabel,
  annots.sortIndex,
  annots.position,
  annots.isExternal
`,jc=`--sql
  itemAnnotations annots
  JOIN items USING (itemID)
`;var Jre=`--sql
SELECT
  ${Bc},
  annots.parentItemID,
  parentItems.key as parentItem
FROM
  ${jc}
  JOIN items as parentItems ON annots.parentItemID = parentItems.itemID
WHERE
  items.key = $annotKey
  AND items.libraryID = $libId
  AND ${_t("items.itemID")}
`;var tne=`--sql
SELECT
  ${Bc}
FROM
  ${jc}
WHERE
  parentItemID = $attachmentId
  AND items.libraryID = $libId
  AND ${_t()}
`;var one=`--sql
SELECT
  atchs.itemID,
  atchs.path,
  items.key,
  COUNT(atchs.itemID) as annotCount
FROM
  itemAttachments atchs
  JOIN items USING (itemID)
  LEFT JOIN itemAnnotations annots ON atchs.itemID = annots.parentItemID
WHERE
  atchs.parentItemID = $itemId
  AND libraryID = $libId
  AND ${_t("atchs.itemID")}
GROUP BY atchs.itemID
`;var zc=e=>`--sql
SELECT
  itemID,
  creators.firstName,
  creators.lastName,
  creators.fieldMode,
  creatorTypes.creatorType,
  orderIndex
FROM
  items
  LEFT JOIN itemCreators USING (itemID)
  JOIN creators USING (creatorID)
  JOIN creatorTypes USING (creatorTypeID)
WHERE
  libraryID = $libId
  ${ri(e||"itemID")}
  AND ${_t()}
ORDER BY
  itemID,
  orderIndex
`;var mne=zc(!0);var bne=zc(!1);var Wc=e=>`--sql
SELECT
  items.itemID,
  fieldsCombined.fieldName,
  itemDataValues.value
FROM
  items
  JOIN itemData USING (itemID)
  JOIN itemDataValues USING (valueID)
  JOIN fieldsCombined USING (fieldID)
  JOIN itemTypesCombined USING (itemTypeID)
WHERE
  libraryID = $libId
  ${ri(e||"items.itemID")}
  AND itemTypesCombined.typeName NOT IN (${rs})
  AND ${_t()}
`;var kne=Wc(!0);var Cne=Wc(!1);var Uc=e=>`--sql
SELECT
  items.itemID,
  items.key,
  itemTypesCombined.typeName as itemType
FROM 
  items
  JOIN itemTypesCombined USING (itemTypeID)
WHERE 
  libraryID = $libId
  ${ri(e||"items.itemID")}
  AND ${_t()}
  AND itemType NOT IN (${rs})
`,Dne=`--sql
SELECT
  items.itemID,
  items.key,
  itemTypesCombined.typeName as itemType
FROM 
  items
  JOIN itemTypesCombined USING (itemTypeID)
WHERE 
  libraryID = $libId
  AND items.key = $key
  AND ${_t()}
  AND itemType NOT IN (${rs})
`;var Rne=Uc(!0);var qne=Uc(!1);var IS=require("path"),Lr=({groupID:e,key:t},r)=>{let n=[r,"cache"];return e?n.push("groups",e.toString()):n.push("library"),(0,IS.join)(...n,t+".png")};var fn=e=>Hc(e)?[e.firstName,e.lastName].join(" "):Vc(e)?e.lastName:null,Hc=e=>{let t=e;return t.fieldMode===ti.fullName&&t.firstName!==null&&t.lastName!==null},Vc=e=>{let t=e;return t.fieldMode===ti.nameOnly&&t.lastName!==null},Rm=new Set($t()("creators","itemID","itemType","key","libraryID")),Mm=e=>!Lc.includes(e.itemType)&&typeof e.key=="string",os=e=>e.itemType==="annotation"&&!!e.parentItem;var _S=e=>typeof e.groupID=="number"?`groups/${e.groupID}`:"library",pn=e=>{let t;if(Mm(e))t=new URL(`zotero://select/${_S(e)}/items/${e.key}`);else if(os(e)){t=new URL(`zotero://open-pdf/${_S(e)}/items/${e.parentItem}`);let r;try{r=To(e.position.pageIndex,!0)}catch(n){console.warn(n),r=null}typeof r=="number"&&t.searchParams.append("page",r.toString()),e.key&&t.searchParams.append("annotation",e.key)}else return"";return t.toString()};var Jc=require("obsidian");var Kc=require("obsidian");async function CS(e){let t=await is(e);if(!t)return null;let{value:r,evt:n}=t;return{value:r.item,evt:n}}function is(e){let t,r=new Promise((o,i)=>{t=o}),n=Rt(e,{selectSuggestion:o=>function(a,s,...u){return t(a!==null?{value:a,evt:s}:null),o.call(this,a,s,...u)},onClose:o=>function(...a){return t(null),o.call(this,...a)}});return r.finally(n),e.open(),r}var Gc=class extends Kc.SuggestModal{initial=!0;async#e(){let t=this.inputEl.value,r=await this.getSuggestions(t);if(r.length!==0){let n=this.limit;n&&n>0&&(r=r.slice(0,n)),this.chooser.setSuggestions(r)}else t?this.onNoSuggestion():this.chooser.setSuggestions(null)}#t=(0,Kc.debounce)(this.#e.bind(this),250,!0);updateSuggestions(){this.initial?(this.#e(),this.initial=!1):this.#t()}};var $m=class extends Jc.FuzzySuggestModal{constructor(r){super(app);this.attachments=r}getItems(){return this.attachments}renderSuggestion(r,n){n.addClass("mod-complex");let o=n.createDiv("suggestion-content").createDiv("suggestion-title").createSpan(),i=n.createDiv("suggestion-aux");super.renderSuggestion(r,o),i.createEl("kbd","suggestion-hotkey").setText((r.item.annotCount??0).toString())}getItemText(r){return r.path?.replace(/^storage:/,"")??r.key}onChooseItem(){}};async function K4(e){return e.length===1?e[0]:e.length?(await CS(new $m(e)))?.value??null:(new Jc.Notice("No attachment found for this item"),null)}function Zc(e,t){ni(window.localStorage,t,e.itemID)}async function Hn(e){let t=e.filter(r=>ns(r)&&r.path?.endsWith(".pdf"));return await K4(t)}var cg=require("obsidian");var zS=require("path/posix");var ls=require("obsidian");var RS=se(Qe(),1);var TS=`[!note] Page <%= it.pageLabel %>

<%= it.imgEmbed %>
<%= it.text %>

<% if (it.comment) { %>
---
<%= it.comment %>
<% } %>`;var OS=`<% for (const annotation of it) { %>
<%~ include("annotation", annotation) %>
\\n
<% } %>`;var DS=`# <%= it.title %>
\\n
[Zotero](<%= it.backlink %>) <%= it.fileLink %>
\\n
<%~ include("annots", it.annotations) %>`;var as="zotero-key",Yc="zt-attachments",FS={title:!0,citekey:!0},NS=["whitelist","blacklist"],PS=new Set(["annotations","attachment","allAttachments","creators","fileLink","itemID","libraryID","backlink"]);var Q4={processAST:e=>{for(let t of e)typeof t!="string"&&t.t==="i"&&t.val.startsWith("it.")&&(t.val+='??""');return e}},MS={autoEscape:!1,plugins:[Q4]},ss={note:DS,annots:OS,annotation:TS,filename:"<%= it.citekey ?? it.DOI ?? it.title ?? it.key ?? it.citekey %>.md",citation:"[@<%= it.citekey %>]",altCitation:"@<%= it.citekey %>"},us={note:"zt-note.eta.md",annotation:"zt-annot.eta.md",annots:"zt-annots.eta.md"},$S=Object.fromEntries(Object.entries(us).map(e=>e.reverse())),Vn=cr(us),Lm=cr(ss),Qc=$t()("filename","citation","altCitation"),Ct=class extends Me{getDefaults(){return{ejected:!1,folder:"ZtTemplates",templates:vc(ss,Vn),fmFieldsMode:"whitelist",fmFieldsMapping:{...FS},fmTagPrefix:"",autoPairEta:!1,updateAnnotBlock:!1,updateOverwrite:!1}}async setTemplate(t,r){return this.templates[t]===r?!1:(this.templates[t]=r,app.vault.trigger("zotero:template-updated",t),!0)}async apply(t){let r=this.use(gr),n=this.use(be);switch(t){case"ejected":return await r.loadTemplates("eject");case"folder":return await r.loadTemplates("full");case"templates":return await r.loadTemplates("noneject");case"fmFieldsMode":case"fmFieldsMapping":case"fmTagPrefix":case"updateAnnotBlock":case"updateOverwrite":return;case"autoPairEta":return n.templateEditor.setEtaBracketPairing(this.autoPairEta);default:(0,RS.assertNever)(t)}}async applyAll(){return await this.use(gr).loadTemplates("full")}toJSON(){return{template:{ejected:this.ejected,folder:this.folder,templates:this.templates},fmFieldsMode:this.fmFieldsMode,fmFieldsMapping:this.fmFieldsMapping,fmTagPrefix:this.fmTagPrefix,autoPairEta:this.autoPairEta,updateAnnotBlock:this.updateAnnotBlock,updateOverwrite:this.updateOverwrite}}fromJSON(t){super.fromJSON({...t.template??{},...xt(t,["autoPairEta","fmFieldsMode","fmFieldsMapping","fmTagPrefix","updateAnnotBlock","updateOverwrite"])})}};var el=require("path");function qm(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Bm(e,t){if(typeof e!="string"||typeof t!="string")throw new TypeError("Expected a string");let r=new RegExp(`(?:${qm(t)}){2,}`,"g");return e.replace(r,t)}function Xc(){return/[<>:"/\\|?*\u0000-\u001F]/g}function LS(){return/^(con|prn|aux|nul|com\d|lpt\d)$/i}function jm(e,t){if(typeof e!="string"||typeof t!="string")throw new TypeError("Expected a string");return e.startsWith(t)&&(e=e.slice(t.length)),e.endsWith(t)&&(e=e.slice(0,-t.length)),e}var X4=100,qS=/[\u0000-\u001F\u0080-\u009F]/g,e6=/^\.+(\\|\/)|^\.+$/,t6=/\.+$/;function cs(e,t={}){if(typeof e!="string")throw new TypeError("Expected a string");let r=t.replacement===void 0?"!":t.replacement;if(Xc().test(r)&&qS.test(r))throw new Error("Replacement string cannot contain reserved filename characters");if(e=e.normalize("NFD"),e=e.replace(e6,r),e=e.replace(Xc(),r),e=e.replace(qS,r),e=e.replace(t6,""),r.length>0){let o=e[0]===".";e=Bm(e,r),e=e.length>1?jm(e,r):e,!o&&e[0]==="."&&(e=r+e),e[e.length-1]==="."&&(e+=r)}e=LS().test(e)?e+r:e;let n=typeof t.maxLength=="number"?t.maxLength:X4;if(e.length>n){let o=e.lastIndexOf(".");if(o===-1)e=e.slice(0,n);else{let i=e.slice(0,o),a=e.slice(o);e=i.slice(0,Math.max(1,n-a.length))+a}}return e}var tl=e=>`file://${e}`,zm=e=>encodeURI(e)===e?e:`<${e}>`,ii=e=>e.name.endsWith(".eta.md"),Wm=(e,t)=>t.path?(0,el.join)(e,"storage",t.key,t.path.replace(/^storage:/,"")):"",rl=(e,t,r=null,n=null)=>{if(!r?.path)return"";let o=n?`#page=${n}`:void 0,i=app.vault.adapter.getBasePath(),a=Wm(e,r),s=(0,el.relative)(i,a);if(s.startsWith(".."))return`[attachment](${zm(tl(a+(o??"")))})`;{let u=app.metadataCache.getFirstLinkpathDest(s,"");return u?app.fileManager.generateMarkdownLink(u,t??"",o).replace(/^!/,""):(ne.warn("fileLink: file not found",s,a),"")}},BS=e=>cs(e,{replacement:"_"}),jS=e=>e.replace(/((?:[^\\]|^)(?:\\{2})*)\\n/g,`$1
`),nl=e=>os(e)&&e.type===Se.image,r6=(e,t,r)=>t?`[${r??""}](${zm(e)})`:`[[${e}${r?"|"+r:""}]]`,Um=(e,t)=>{if(nl(e)){let r=t.imgCacheImporter.import(e);if(r)return r6(r,app.vault.getConfig("useMarkdownLinks"));{let n=t.imgCacheImporter.getCachePath(e);return`[Annotation ${e.key}](${zm(tl(n))})`}}else return""};var gr=class extends ce{settings=this.use(Ct);#e=xt(ss,cr(us));getTemplate(t){return this.settings.templates[t]??this.#e[t]}async onload(){this.registerEvent(app.vault.on("modify",this.onModifyFile,this)),await this.loadTemplates("full"),await this.settings.apply("autoPairEta")}async onModifyFile(t){if(!this.settings.ejected)return;let r=this.getTemplateTypeOf(t);if(!r)return;let n=this.#e[r],o=await app.vault.cachedRead(t);n!==o&&(this.#e[r]=o,app.vault.trigger("zotero:template-updated",r))}get folder(){return this.settings.folder}getTemplateTypeOf(t){if(t instanceof ls.TFile&&t.parent?.path===this.folder&&ii(t))return $S[t.name]}async loadTemplates(t="full"){t!=="noneject"&&this.settings.ejected&&(await this.#t,this.#e=await this.#n());let r=t==="eject"?Vn:t==="noneject"?Qc:Lm;for(let n of r)app.vault.trigger("zotero:template-updated",n)}#t=new Promise(t=>{if(app.metadataCache.initialized)t();else{let r=app.metadataCache.on("finished",()=>{t(),app.metadataCache.offref(r)});this.registerEvent(r)}});getTemplateFile(t){return(0,zS.join)(this.folder,us[t])}async#r(t){let r=this.getTemplateFile(t),n=app.vault.getAbstractFileByPath(r);if(n&&n instanceof ls.TFile)return await app.vault.cachedRead(n);let o=ss[t];if(!n)ne.debug("Template file not found, creating new file...",r),await app.fileManager.createNewMarkdownFile(app.vault.getRoot(),r,o);else{let i=`Template file location occupied by a folder: ${r}, skipping...`;new ls.Notice(i),$e(i,null)}return o}async#n(){return Object.fromEntries(await Promise.all(Vn.map(async t=>[t,await this.#r(t)])))}};var ai=require("fs"),si=se(require("path"),1);function n6(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function yr(e){let t=new Error(e);return n6(t,yr.prototype),t}yr.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});function fs(e,t,r){let n=t.slice(0,r).split(/\n/),o=n.length,i=n[o-1].length+1;throw e+=" at line "+o+" col "+i+`:

  `+t.split(/\n/)[o-1]+`
  `+Array(i).join(" ")+"^",yr(e)}var WS=new Function("return this")().Promise;function o6(){try{return new Function("return (async function(){}).constructor")()}catch(e){throw e instanceof SyntaxError?yr("This environment doesn't support async/await"):e}}function i6(e){return String.prototype.trimLeft?e.trimLeft():e.replace(/^\s+/,"")}function a6(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s+$/,"")}function s6(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ps(e,t){for(let r in t)s6(t,r)&&(e[r]=t[r]);return e}function u6(e,t,r,n){let o,i;return Array.isArray(t.autoTrim)?(o=t.autoTrim[1],i=t.autoTrim[0]):o=i=t.autoTrim,(r||r===!1)&&(o=r),(n||n===!1)&&(i=n),!i&&!o?e:o==="slurp"&&i==="slurp"?e.trim():(o==="_"||o==="slurp"?e=i6(e):(o==="-"||o==="nl")&&(e=e.replace(/^(?:\r\n|\n|\r)/,"")),i==="_"||i==="slurp"?e=a6(e):(i==="-"||i==="nl")&&(e=e.replace(/(?:\r\n|\n|\r)$/,"")),e)}var c6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function l6(e){return c6[e]}function f6(e){let t=String(e);return/[&<>"']/.test(t)?t.replace(/[&<>"']/g,l6):t}var ol=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,il=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,al=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function sl(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function p6(e,t){let r=[],n=!1,o=0,i=t.parse;if(t.plugins)for(let f=0;f<t.plugins.length;f++){let p=t.plugins[f];p.processTemplate&&(e=p.processTemplate(e,t))}t.rmWhitespace&&(e=e.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),ol.lastIndex=0,il.lastIndex=0,al.lastIndex=0;function a(f,p){f&&(f=u6(f,t,n,p),f&&(f=f.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),r.push(f)))}let s=[i.exec,i.interpolate,i.raw].reduce(function(f,p){return f&&p?f+"|"+sl(p):p?sl(p):f},""),u=new RegExp("([^]*?)"+sl(t.tags[0])+"(-|_)?\\s*("+s+")?\\s*","g"),l=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+sl(t.tags[1])+")","g"),c;for(;c=u.exec(e);){o=c[0].length+c.index;let f=c[1],p=c[2],d=c[3]||"";a(f,p),l.lastIndex=o;let h,g=!1;for(;h=l.exec(e);)if(h[1]){let y=e.slice(o,h.index);u.lastIndex=o=l.lastIndex,n=h[2],g={t:d===i.exec?"e":d===i.raw?"r":d===i.interpolate?"i":"",val:y};break}else{let y=h[0];if(y==="/*"){let w=e.indexOf("*/",l.lastIndex);w===-1&&fs("unclosed comment",e,h.index),l.lastIndex=w}else y==="'"?(il.lastIndex=h.index,il.exec(e)?l.lastIndex=il.lastIndex:fs("unclosed string",e,h.index)):y==='"'?(al.lastIndex=h.index,al.exec(e)?l.lastIndex=al.lastIndex:fs("unclosed string",e,h.index)):y==="`"&&(ol.lastIndex=h.index,ol.exec(e)?l.lastIndex=ol.lastIndex:fs("unclosed string",e,h.index))}g?r.push(g):fs("unclosed tag",e,c.index+f.length)}if(a(e.slice(o,e.length),!1),t.plugins)for(let f=0;f<t.plugins.length;f++){let p=t.plugins[f];p.processAST&&(r=p.processAST(r,t))}return r}function US(e,t){let r=p6(e,t),n="var tR='',__l,__lP"+(t.include?",include=E.include.bind(E)":"")+(t.includeFile?",includeFile=E.includeFile.bind(E)":"")+`
function layout(p,d){__l=p;__lP=d}
`+(t.useWith?"with("+t.varName+"||{}){":"")+d6(r,t)+(t.includeFile?"if(__l)tR="+(t.async?"await ":"")+`includeFile(__l,Object.assign(${t.varName},{body:tR},__lP))
`:t.include?"if(__l)tR="+(t.async?"await ":"")+`include(__l,Object.assign(${t.varName},{body:tR},__lP))
`:"")+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(let o=0;o<t.plugins.length;o++){let i=t.plugins[o];i.processFnString&&(n=i.processFnString(n,t))}return n}function d6(e,t){let r=0,n=e.length,o="";for(r;r<n;r++){let i=e[r];if(typeof i=="string")o+="tR+='"+i+`'
`;else{let a=i.t,s=i.val||"";a==="r"?(t.filter&&(s="E.filter("+s+")"),o+="tR+="+s+`
`):a==="i"?(t.filter&&(s="E.filter("+s+")"),t.autoEscape&&(s="E.e("+s+")"),o+="tR+="+s+`
`):a==="e"&&(o+=s+`
`)}}return o}var Vm=class{constructor(t){this.cache=void 0,this.cache=t}define(t,r){this.cache[t]=r}get(t){return this.cache[t]}remove(t){delete this.cache[t]}reset(){this.cache={}}load(t){ps(this.cache,t)}},ds=new Vm({});function m6(e,t){let r=this.templates.get(e);if(!r)throw yr('Could not fetch template "'+e+'"');return r(t,this)}var ui={async:!1,autoEscape:!0,autoTrim:[!1,"nl"],cache:!1,e:f6,include:m6,parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],templates:ds,useWith:!1,varName:"it"};function cl(e,t){let r={};return ps(r,ui),t&&ps(r,t),e&&ps(r,e),r}function VS(e){return ps(ui,e)}function ll(e,t){let r=cl(t||{}),n=r.async?o6():Function;try{return new n(r.varName,"E","cb",US(e,r))}catch(o){throw o instanceof SyntaxError?yr(`Bad template syntax

`+o.message+`
`+Array(o.message.length+1).join("=")+`
`+US(e,r)+`
`):o}}var h6=/^\uFEFF/;function ul(e,t,r){return si.resolve(r?t:si.dirname(t),e)+(si.extname(e)?"":".eta")}function g6(e,t){let r=!1,n=t.views,o=[],i=JSON.stringify({filename:t.filename,path:e,root:t.root,views:t.views});if(t.cache&&t.filepathCache&&t.filepathCache[i])return t.filepathCache[i];function a(l){o.includes(l)||o.push(l)}function s(l,c){let f;return Array.isArray(l)&&l.some(function(p){return f=ul(c,p,!0),a(f),(0,ai.existsSync)(f)})||typeof l=="string"&&(f=ul(c,l,!0),a(f),(0,ai.existsSync)(f))?f:!1}let u=/^[A-Za-z]+:\\|^\//.exec(e);if(u&&u.length){let l=e.replace(/^\/*/,"");if(r=s(n,l),!r){let c=ul(l,t.root||"/",!0);a(c),r=c}}else{if(t.filename){let l=ul(e,t.filename);a(l),(0,ai.existsSync)(l)&&(r=l)}if(r||(r=s(n,e)),!r)throw yr('Could not find the template "'+e+'". Paths tried: '+o)}return t.cache&&t.filepathCache&&(t.filepathCache[i]=r),r}function y6(e){try{return(0,ai.readFileSync)(e).toString().replace(h6,"")}catch{throw yr("Failed to read template at '"+e+"'")}}function HS(e,t,r){let n=cl(t),o=y6(e);try{let i=ll(o,n);return r||n.templates.define(n.filename,i),i}catch(i){throw yr("Loading file: "+e+` failed:

`+i.message)}}function b6(e){let t=e.filename;if(e.cache){let r=e.templates.get(t);return r||HS(t,e)}return HS(t,e,!0)}function v6(e,t){let r=cl({filename:g6(e,t)},t);return[b6(r),r]}function w6(e,t){let r=v6(e,this);return r[0](t,r[1])}function Hm(e,t){if(t.cache&&t.name&&t.templates.get(t.name))return t.templates.get(t.name);let r=typeof e=="function"?e:ll(e,t);return t.cache&&t.name&&t.templates.define(t.name,r),r}function GS(e,t,r,n){let o=cl(r||{});if(o.async)if(n)try{Hm(e,o)(t,o,n)}catch(i){return n(i)}else{if(typeof WS=="function")return new WS(function(i,a){try{i(Hm(e,o)(t,o))}catch(s){a(s)}});throw yr("Please provide a callback function, this env doesn't support Promises")}else return Hm(e,o)(t,o)}ui.includeFile=w6;ui.filepathCache={};var ms=require("obsidian");var O6=se(Qe(),1),D6=se(Zm(),1),Ym=se(Zm(),1);var dk=$t()("open","export","update");var pk=(e,t)=>{let r=new RegExp(`^${t}\\[(\\d+)\\]$`);return Object.entries(e).filter(([n])=>r.test(n)).sort(([n],[o])=>Number(n.match(r)[1])-Number(o.match(r)[1])).map(([,n])=>JSON.parse(n))},fl=e=>{if(e.type==="item")return{version:e.version,type:e.type,items:pk(e,"items")};if(e.type==="annotation")return{version:e.version,type:e.type,annots:pk(e,"annots"),parent:JSON.parse(e.parent)};throw new TypeError("Unrecognized query type: "+e.type)};var Qm=/^<!--merge:(\d+)-->/;function Xm(e){let t=Bn(e,o=>o.comment?.match(Qm)?.[1]??-1),r=t[-1]??[],n=new Map(r.map(o=>[o.itemID,[o]]));delete t[-1];for(let[o,i]of Object.entries(t)){let a=n.get(+o);i.forEach(s=>{s.comment&&=s.comment.replace(Qm,"")??null}),a?a.push(...i.sort((s,u)=>qc(s.sortIndex,u.sortIndex))):i.forEach(s=>{n.set(s.itemID,[s])})}for(let[o,...i]of n.values())if(!(i.length<=0)){for(let a of i)a.comment&&(o.comment=(o.comment??"")+`
`+a.comment),a.text&&(o.text?o.text.endsWith("-")&&!o.text.endsWith("--")?o.text.substring(0,o.text.length-1)+a.text.trimStart():o.text.match(/[a-zA-Z\d]\s*$/)&&a.text.match(/^\s*[a-zA-Z\d]/)?o.text=o.text.trimEnd()+" "+a.text.trimStart():o.text=o.text.trimEnd()+a.text.trimStart():o.text=a.text);o.comment=o.comment?.replace(/\n+/,`
`).replace(/^\s+|\s+$/g,"")??null}return[...n.values()]}function eh(e){return e.map(t=>t[0])}function th(e,t){let r=e.map(([n,...o])=>{if(o.length===0)return[n.itemID,t[n.itemID]];let i=new Map(t[n.itemID].map(a=>[a.tagID,a]));return o.forEach(a=>{t[a.itemID].forEach(s=>{i.set(s.tagID,s)})}),[n.itemID,Array.from(i.values())]});return Object.fromEntries(r)}function mk(e,t){let r=Xm(e);return{annotations:eh(r),tags:th(r,t)}}var hk=require("obsidian");var dn=e=>e.plugin.settings.database.zoteroDataDir;var rh=new Set($t()("attachment","tags")),nh=(e,t,r)=>new Proxy({get page(){return To(e.position.pageIndex,!0)??NaN},get backlink(){return pn(e)},get blockID(){let n=Mt(e),o=To(e.position.pageIndex,!0);return typeof o=="number"&&(n+=`p${o}`),n},get commentMd(){return e.comment?(0,hk.htmlToMarkdown)(e.comment):""},get imgPath(){return nl(this)?Lr(this,dn(r)):""},get imgUrl(){if(nl(this)){let n=Lr(this,dn(r));return tl(n)}else return""},get imgLink(){return Um(this,r.plugin)},get imgEmbed(){let n=Um(this,r.plugin);return n?`!${n}`:""},get fileLink(){return rl(dn(r),r.sourcePath,t.attachment,To(e.position.pageIndex,!0))},get textBlock(){return e.text?`\`\`\`zotero-annot
> ${e.text} [zotero](${pn(e)})
\`\`\``:""},get colorName(){let n=e.color?.toUpperCase();return F6[n]||this.color},docItem:"not-loaded"},{get(n,o,i){if(o==="tags"){if(!t.tags[e.itemID])throw console.error(t,e.itemID),new Error("No tags loaded for item "+e.itemID);return t.tags[e.itemID]}if(o==="docItem"){if(n.docItem==="not-loaded")throw new Error("Doc Item not loaded for item "+e.itemID);return n.docItem}return rh.has(o)?Reflect.get(t,o,i):Reflect.get(e,o,i)??Reflect.get(n,o,i)},ownKeys(n){return[...Reflect.ownKeys(e),...rh,...Reflect.ownKeys(n)]},getOwnPropertyDescriptor(n,o){return Object.prototype.hasOwnProperty.call(e,o)?Reflect.getOwnPropertyDescriptor(e,o):rh.has(o)?Reflect.getOwnPropertyDescriptor(t,o):Reflect.getOwnPropertyDescriptor(n,o)}}),F6={"#FF6666":"red","#FF8C19":"orange","#F19837":"orange","#FFD400":"yellow","#999999":"gray","#AAAAAA":"gray","#5FB236":"green","#009980":"cyan","#2EA8E5":"blue","#576DD9":"navy","#A28AE5":"purple","#A6507B":"brown","#E56EEE":"magenta"};var gk=Symbol("proxied"),yk=e=>!!e[gk],bk=(e,t)=>new Proxy({get filePath(){return Wm(dn(t),e)}},{get(r,n,o){return n===gk?!0:Reflect.get(e,n,o)??Reflect.get(r,n,o)},ownKeys(r){return[...Reflect.ownKeys(e),...Reflect.ownKeys(r)]},getOwnPropertyDescriptor(r,n){return Object.prototype.hasOwnProperty.call(e,n)?Reflect.getOwnPropertyDescriptor(e,n):Reflect.getOwnPropertyDescriptor(r,n)}});var oh=e=>new Proxy({get fullname(){return fn(e)??""}},{get(t,r,n){return Reflect.get(e,r,n)??Reflect.get(t,r,n)},ownKeys(t){return[...Reflect.ownKeys(e),...Reflect.ownKeys(t)]},getOwnPropertyDescriptor(t,r){return Object.prototype.hasOwnProperty.call(e,r)?Reflect.getOwnPropertyDescriptor(e,r):Reflect.getOwnPropertyDescriptor(t,r)}});var ih=new Set($t()("attachment","allAttachments","tags")),ah=({creators:e,...t},r,n)=>new Proxy({get backlink(){return pn(t)},get fileLink(){return rl(dn(n),n.sourcePath,r.attachment)},annotations:"not-loaded",creators:e.map(o=>oh(o)),authors:e.filter(o=>o.creatorType==="author"&&fn(o)).map(fn)},{get(o,i,a){if(i==="tags"){if(!r.tags[t.itemID])throw new Error("No tags loaded for item "+t.itemID);return r.tags[t.itemID]}return ih.has(i)?r[i]:i==="annotations"?o.annotations:Reflect.get(t,i,a)??Reflect.get(o,i,a)},ownKeys(o){return[...Reflect.ownKeys(t),...ih,...Reflect.ownKeys(o)]},getOwnPropertyDescriptor(o,i){return Object.prototype.hasOwnProperty.call(t,i)?Reflect.getOwnPropertyDescriptor(t,i):ih.has(i)?Reflect.getOwnPropertyDescriptor(r,i):Reflect.getOwnPropertyDescriptor(o,i)}});function Qt(e,t,r){function n(u){return!u||yk(u)?u:bk(u,t)}let o={...e,attachement:n(e.attachment),allAttachments:e.allAttachments.map(n)},i=ah(e.docItem,o,t),a=e.annotations.map(u=>{let l=nh(u,o,t);return l.docItem=i,l}),s=r?a[e.annotations.findIndex(u=>u===r)]:void 0;return i.annotations=a,{annotation:s,annotations:a,docItem:i}}var hs=class{use=Oe.this;mergeAnnotTags(t){if(t.annotations.length===0)return t;let r=mk(t.annotations,t.tags);return t.annotations=r.annotations,t.tags={...t.tags,...r.tags},t}render(t,r){try{return ds.get(t)(r,ui)}catch(n){throw console.error("Error while rendering",t,n),n}}renderAnnot(t,r,n){n.merge!==!1&&(r=this.mergeAnnotTags(r));let o=Qt(r,n,t);return this.render("annotation",o.annotation)}renderNote(t,r,n){r.merge!==!1&&(t=this.mergeAnnotTags(t));let o=Qt(t,r),i=this.renderFrontmatter(o.docItem,n),a=this.render("note",o.docItem);return["",i,a].join(`---
`)}renderAnnots(t,r){r.merge!==!1&&(t=this.mergeAnnotTags(t));let n=Qt(t,r);return this.render("annots",n.annotations)}renderCitation(t,r=!1){return this.render(r?"altCitation":"citation",t)}renderFilename(t){return this.render("filename",t)}toFrontmatterRecord(t){let{fmFieldsMode:r,fmFieldsMapping:n,fmTagPrefix:o}=this.use(Ct),i={};i[as]=Mt(t,!0),t.attachment?.itemID&&(i[Yc]=[t.attachment.itemID]);for(let[a,s]of Object.entries(t)){if(r==="blacklist"&&PS.has(a))continue;a==="tags"&&(s=s.filter(l=>l.type===hr.manual).map(l=>(o??"")+l.name));let u=n[a];if(typeof u=="string")i[u]=s;else{if(r==="whitelist"&&u===void 0||r==="blacklist"&&u===!0)continue;i[a]=s}}return i}renderFrontmatter(t,r){try{let n=this.toFrontmatterRecord(t);return(0,ms.stringifyYaml)(r!==void 0?zn(n,r):n)}catch(n){$e("Failed to renderYaml",n,t,this.use(Ct).fmFieldsMode,this.use(Ct).fmFieldsMapping),new ms.Notice("Failed to renderYaml")}}async setFrontmatterTo(t,r){try{let n=this.toFrontmatterRecord(r);await app.fileManager.processFrontMatter(t,o=>Object.assign(o,n))}catch(n){$e("Failed to set frontmatter to file "+t.path,n,r,this.use(Ct).fmFieldsMode,this.use(Ct).fmFieldsMapping),new ms.Notice("Failed to set frontmatter to file "+t.path)}}};var PC=se(FC(),1);var _s=require("obsidian");var nz="\\ufeff?",oz=typeof process<"u"?process.platform:"",iz="^("+nz+"(= yaml =|---)$([\\s\\S]*?)^(?:\\2|\\.\\.\\.)\\s*$"+(oz==="win32"?"\\r?":"")+"(?:\\n)?)",az=new RegExp(iz,"m");function NC(e){e=e||"";let t=e.split(/(\r?\n)/);return t[0]&&/= yaml =|---/.test(t[0])?uz(e):{yaml:null,body:e,bodyBegin:1}}function sz(e,t){let r=1,n=t.indexOf(`
`),o=e.index+e[0].length;for(;n!==-1;){if(n>=o)return r;r++,n=t.indexOf(`
`,n+1)}return r}function uz(e){let t=az.exec(e);if(!t)return{yaml:null,body:e,bodyBegin:1};let r=t[t.length-1].replace(/^\s+|\s+$/g,""),n=e.replace(t[0],""),o=sz(t,e);return{yaml:r,body:n,bodyBegin:o}}var cz=/^\s*\[!\w+\]/,Cs=class extends ce{loader=this.use(gr);async onload(){this.registerEvent(app.vault.on("zotero:template-updated",this.onTemplateUpdated,this)),VS(MS)}onTemplateUpdated(t){this.complie(t)}complie(t){let r=this.loader.getTemplate(t),n=jS(r);try{let o=ll(n,{name:t}),i=o;switch(t){case"filename":i=(s,u)=>BS(o(s,u));break;case"annotation":i=(s,u)=>{let l=o(s,u),c=!0,{yaml:f,body:p}=NC(l);if(f)try{(0,_s.parseYaml)(f).callout===!1&&(c=!1)}catch(h){new _s.Notice(`Error parsing frontmatter, ${h}`)}if(!c)return p;let d=p.trim().split(`
`);return console.log(d[0],cz.test(d[0])),d.push(`^${s.blockID}`),d.map(h=>`> ${h}`).join(`
`)};break;default:break}let a=Array.prototype.group?i:(s,u)=>{(0,PC.default)();try{return i(s,u)}finally{delete Array.prototype.group}};ds.define(t,a),ne.trace(`Template "${t}" complie success`,n)}catch(o){$e("compling template: "+t,o),new _s.Notice(`Error compling template "${t}", ${o}`)}}};var Rl=require("@codemirror/state"),RC=require("obsidian");var MC=Rl.Prec.highest(Rl.EditorState.languageData.of(e=>{let t=[],r=app.vault.getConfig("autoPairBrackets"),n=app.vault.getConfig("autoPairMarkdown");r&&t.push("(","[","{","'",'"'),n&&t.push("*","_","`","```");let o=e.field(RC.editorInfoField);return o?.file&&ii(o?.file)&&t.push("<","%"),[{closeBrackets:{brackets:t}}]}));var LC=require("obsidian");var $C=[{prefix:"=",name:"interpolate tag",description:"An interpolation outputs data into the template"},{prefix:" ",name:"evaluation tag",description:"An evaluate tag inserts its contents into the template function."}],Ml=class extends LC.EditorSuggest{onTrigger(t,r,n){if(!n||!ii(n))return null;let o=r.getLine(t.line),a=o.substring(0,t.ch).match(/<%([ =]?)$/);if(!a)return null;let[s,u]=a,l=o.substring(t.ch).match(/^([\w ]*)%>/),c;if(!l)c={...t};else{let[,f]=l;if(u===" "&&f.length===1)return null;c={...t,ch:t.ch+f.length}}return{end:c,start:{ch:a.index+s.length-u.length,line:t.line},query:a[1]}}getSuggestions(t){return t.query?$C.filter(r=>r.prefix===t.query):$C}renderSuggestion({prefix:t,name:r,description:n},o){t===" "?o.createSpan({text:"No Prefix"}):o.createEl("code",{text:t}),o.createDiv({text:r}),o.createDiv({text:n})}selectSuggestion({prefix:t},r){if(!this.context)return;let{editor:n,end:o,start:i}=this.context,a=t===" "?"  ":"= it. ";n.transaction({changes:[{from:i,to:o,text:a}],selection:{from:{...i,ch:i.ch+a.length-1}}})}};var Ts=class extends ce{#e=null;plugin=this.use(be);#t(){this.plugin.registerEditorSuggest(new Ml(this.plugin.app))}setEtaBracketPairing(t){let r=this.#e!==null;this.#e===null?(this.#e=[],this.plugin.registerEditorExtension(this.#e)):this.#e.length=0,t&&this.#e.push(MC),r&&app.workspace.updateOptions()}onload(){this.#t()}};var xi=require("obsidian"),qC=()=>`Press ${xi.Platform.isMacOS?"\u2318 Cmd":"Ctrl"} + ${xi.Platform.isMacOS?"\u2325 Option":"Shift"} + I, then go to the "Console" tab to see the log.`;var yn=e=>e instanceof xi.TFile&&e.extension==="md",BC=e=>typeof e=="string"?e:e.path;var lg=e=>{let t=e?.frontmatter?.[as];return t&&typeof t=="string"&&Nb.test(t)?t:null},Zn=e=>{if(!e)return null;let t=typeof e=="string"?app.metadataCache.getCache(e):e instanceof cg.TFile?app.metadataCache.getFileCache(e):null;return lg(t)},Os=e=>{if(!e)return null;let r=(typeof e=="string"?app.metadataCache.getCache(e):e instanceof cg.TFile?app.metadataCache.getFileCache(e):null)?.frontmatter?.[Yc];if(r&&Array.isArray(r)&&r.length>0){let n=[];for(let o of r)if(typeof o=="string"){let i=Number(o);if(!(i>0&&Number.isInteger(i)))return null;n.push(i)}else if(typeof o=="number"){if(!(o>0&&Number.isInteger(o)))return null;n.push(o)}return n}return null},Ds=({id:e})=>!!e&&Rb.test(e),Fs=e=>e.split("n").map(t=>{let[,r,,n]=t.split("p")[0].match(Pb);return Mt({key:r,groupID:n?+n:void 0},!0)});function Ei(e){let t=BC(e);return!!Zn(t)}T();var Ar=we({});T();var Be=we({});T();var jC=function(e){return typeof e=="function"};var lz=!1,zC=lz;function fz(e){zC&&(jC(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=N(e);t.current=G(function(){return e},[e]);var r=N();return r.current||(r.current=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.current.apply(this,n)}),r.current}var Xt=fz;T();T();function pz(e,t){e===void 0&&(e=!1);var r=mr($(e),2),n=r[0],o=r[1],i=G(function(){var a=t===void 0?!e:t,s=function(){return o(function(f){return f===e?a:e})},u=function(f){return o(f)},l=function(){return o(e)},c=function(){return o(a)};return{toggle:s,set:u,setLeft:l,setRight:c}},[]);return[n,i]}var WC=pz;function $l(e){e===void 0&&(e=!1);var t=mr(WC(!!e),2),r=t[0],n=t[1],o=n.toggle,i=n.set,a=G(function(){var s=function(){return i(!0)},u=function(){return i(!1)};return{toggle:o,set:function(l){return i(!!l)},setTrue:s,setFalse:u}},[]);return[r,a]}T();function dz(e){var t=function(){return new Set(e)},r=mr($(t),2),n=r[0],o=r[1],i=function(u){n.has(u)||o(function(l){var c=new Set(l);return c.add(u),c})},a=function(u){n.has(u)&&o(function(l){var c=new Set(l);return c.delete(u),c})},s=function(){return o(t())};return[n,{add:Xt(i),remove:Xt(a),reset:Xt(s)}]}var fg=dz;T();var HC={},UC=e=>{let t,r=new Set,n=(u,l)=>{let c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){let f=t;t=l??typeof c!="object"?c:Object.assign({},t,c),r.forEach(p=>p(t,f))}},o=()=>t,s={setState:n,getState:o,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(HC.env&&HC.env.MODE)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,s),s},Ns=e=>e?UC(e):UC;T();var eT=se(XC(),1);var{useSyncExternalStoreWithSelector:Dz}=eT.default;function mt(e,t=e.getState,r){let n=Dz(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return Un(n),n}function ki(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}T();function tT(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=rT(t))&&(n&&(n+=" "),n+=r);return n}function rT(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=rT(e[n]))&&(r&&(r+=" "),r+=t);return r}var mg="-";function iT(e){var t=Nz(e);function r(o){var i=o.split(mg);return i[0]===""&&i.length!==1&&i.shift(),aT(i,t)||Fz(o)}function n(o){return e.conflictingClassGroups[o]||[]}return{getClassGroupId:r,getConflictingClassGroupIds:n}}function aT(e,t){if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),o=n?aT(e.slice(1),n):void 0;if(o)return o;if(t.validators.length!==0){var i=e.join(mg);return t.validators.find(function(a){var s=a.validator;return s(i)})?.classGroupId}}var nT=/^\[(.+)\]$/;function Fz(e){if(nT.test(e)){var t=nT.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function Nz(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},o=Rz(Object.entries(e.classGroups),r);return o.forEach(function(i){var a=i[0],s=i[1];dg(s,n,a,t)}),n}function dg(e,t,r,n){e.forEach(function(o){if(typeof o=="string"){var i=o===""?t:oT(t,o);i.classGroupId=r;return}if(typeof o=="function"){if(Pz(o)){dg(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(function(a){var s=a[0],u=a[1];dg(u,oT(t,s),r,n)})})}function oT(e,t){var r=e;return t.split(mg).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Pz(e){return e.isThemeGetter}function Rz(e,t){return t?e.map(function(r){var n=r[0],o=r[1],i=o.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(s){var u=s[0],l=s[1];return[t+u,l]})):a});return[n,i]}):e}function sT(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function o(i,a){r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var s=r.get(a);if(s!==void 0)return s;if((s=n.get(a))!==void 0)return o(a,s),s},set:function(a,s){r.has(a)?r.set(a,s):o(a,s)}}}var hg="!";function uT(e){var t=e.separator||":";return function(n){for(var o=0,i=[],a=0,s=0;s<n.length;s++){var u=n[s];o===0&&u===t[0]&&(t.length===1||n.slice(s,s+t.length)===t)&&(i.push(n.slice(a,s)),a=s+t.length),u==="["?o++:u==="]"&&o--}var l=i.length===0?n:n.substring(a),c=l.startsWith(hg),f=c?l.substring(1):l;return{modifiers:i,hasImportantModifier:c,baseClassName:f}}}function cT(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var o=n[0]==="[";o?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function lT(e){return{cache:sT(e.cacheSize),splitModifiers:uT(e),...iT(e)}}var Mz=/\s+/;function fT(e,t){var r=t.splitModifiers,n=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(Mz).map(function(a){var s=r(a),u=s.modifiers,l=s.hasImportantModifier,c=s.baseClassName,f=n(c);if(!f)return{isTailwindClass:!1,originalClassName:a};var p=cT(u).join(":"),d=l?p+hg:p;return{isTailwindClass:!0,modifierId:d,classGroupId:f,originalClassName:a}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var s=a.modifierId,u=a.classGroupId,l=s+u;return i.has(l)?!1:(i.add(l),o(u).forEach(function(c){return i.add(s+c)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function pT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,a=s;function s(l){var c=t[0],f=t.slice(1),p=f.reduce(function(d,h){return h(d)},c());return n=lT(p),o=n.cache.get,i=n.cache.set,a=u,u(l)}function u(l){var c=o(l);if(c)return c;var f=fT(l,n);return i(l,f),f}return function(){return a(tT.apply(null,arguments))}}function ke(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var mT=/^\[(?:([a-z-]+):)?(.+)\]$/i,$z=/^\d+\/\d+$/,Lz=new Set(["px","full","screen"]),qz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh)/,jz=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Vt(e){return Ai(e)||Lz.has(e)||$z.test(e)||bn(e)}function bn(e){return Yn(e,"length",zz)}function hT(e){return Yn(e,"size",vT)}function gT(e){return Yn(e,"position",vT)}function yT(e){return Yn(e,"url",Wz)}function ql(e){return Yn(e,"number",Ai)}function Ai(e){return!Number.isNaN(Number(e))}function Ii(e){return dT(e)||Yn(e,"number",dT)}function Fe(e){return mT.test(e)}function _i(){return!0}function zr(e){return qz.test(e)}function bT(e){return Yn(e,"",Uz)}function Yn(e,t,r){var n=mT.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function zz(e){return Bz.test(e)}function vT(){return!1}function Wz(e){return e.startsWith("url(")}function dT(e){return Number.isInteger(Number(e))}function Uz(e){return jz.test(e)}function wT(){var e=ke("colors"),t=ke("spacing"),r=ke("blur"),n=ke("brightness"),o=ke("borderColor"),i=ke("borderRadius"),a=ke("borderSpacing"),s=ke("borderWidth"),u=ke("contrast"),l=ke("grayscale"),c=ke("hueRotate"),f=ke("invert"),p=ke("gap"),d=ke("gradientColorStops"),h=ke("inset"),g=ke("margin"),y=ke("opacity"),w=ke("padding"),x=ke("saturate"),A=ke("scale"),O=ke("sepia"),D=ke("skew"),F=ke("space"),R=ke("translate"),P=function(){return["auto","contain","none"]},E=function(){return["auto","hidden","clip","visible","scroll"]},S=function(){return["auto",t]},v=function(){return["",Vt]},_=function(){return["auto",Ai,Fe]},I=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},W=function(){return["solid","dashed","dotted","double","none"]},j=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},H=function(){return["start","end","center","between","around","evenly"]},J=function(){return["","0",Fe]},re=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ie=function(){return[Ai,ql]},C=function(){return[Ai,Fe]};return{cacheSize:500,theme:{colors:[_i],spacing:[Vt],blur:["none","",zr,bn],brightness:ie(),borderColor:[e],borderRadius:["none","","full",zr,bn],borderSpacing:[t],borderWidth:v(),contrast:ie(),grayscale:J(),hueRotate:C(),invert:J(),gap:[t],gradientColorStops:[e],inset:S(),margin:S(),opacity:ie(),padding:[t],saturate:ie(),scale:ie(),sepia:J(),skew:C(),space:[t],translate:[t]},classGroups:{aspect:[{aspect:["auto","square","video",Fe]}],container:["container"],columns:[{columns:[zr]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(I(),[Fe])}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ii]}],basis:[{basis:[t]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fe]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",Ii]}],"grid-cols":[{"grid-cols":[_i]}],"col-start-end":[{col:["auto",{span:[Ii]},Fe]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[_i]}],"row-start-end":[{row:["auto",{span:[Ii]},Fe]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:H()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:[].concat(H(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(H(),["baseline","stretch"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",t]}],"min-w":[{"min-w":["min","max","fit",Vt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[zr]},zr,bn]}],h:[{h:[t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Vt]}],"max-h":[{"max-h":[t,"min","max","fit"]}],"font-size":[{text:["base",zr,bn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ql]}],"font-family":[{font:[_i]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",bn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vt]}],"list-style-type":[{list:["none","disc","decimal",Fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(W(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Vt]}],"underline-offset":[{"underline-offset":["auto",Vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[t]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all","keep"]}],content:[{content:["none",Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(I(),[gT])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yT]}],"bg-color":[{bg:[e]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(W(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:W()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(W())}],"outline-offset":[{"outline-offset":[Vt]}],"outline-w":[{outline:[Vt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:v()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Vt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zr,bT]}],"shadow-color":[{shadow:[_i]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":j()}],"bg-blend":[{"bg-blend":j()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",zr,Fe]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fe]}],duration:[{duration:C()}],ease:[{ease:["linear","in","out","in-out",Fe]}],delay:[{delay:C()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Ii,Fe]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fe]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[t]}],"scroll-mx":[{"scroll-mx":[t]}],"scroll-my":[{"scroll-my":[t]}],"scroll-mt":[{"scroll-mt":[t]}],"scroll-mr":[{"scroll-mr":[t]}],"scroll-mb":[{"scroll-mb":[t]}],"scroll-ml":[{"scroll-ml":[t]}],"scroll-p":[{"scroll-p":[t]}],"scroll-px":[{"scroll-px":[t]}],"scroll-py":[{"scroll-py":[t]}],"scroll-pt":[{"scroll-pt":[t]}],"scroll-pr":[{"scroll-pr":[t]}],"scroll-pb":[{"scroll-pb":[t]}],"scroll-pl":[{"scroll-pl":[t]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Vt,ql]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var gg=pT(wT);function ae(...e){return gg(Cm(e))}T();T();function Bl(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var jl=(e,t)=>{let{setIcon:r}=V(Ar),n=N(null);return K(i=>{n.current&&Hz.call(n.current),i&&(r(i,e),t&&i.firstElementChild instanceof SVGSVGElement&&i.firstElementChild.style.setProperty("--icon-size",typeof t=="number"||!Number.isNaN(Number(t))?`${t}px`:t)),n.current=i},[e,t,r])};function Hz(){for(;this.lastChild;)this.removeChild(this.lastChild)}var Wr=Ue(te(function({icon:t,size:r,className:n,...o},i){let a=jl(t,r),s=Bl(a,i);return m("div",{ref:s,className:ae("zt-icon",n),...o})}));T();var Ur=te(function({onClick:t,onKeyDown:r,className:n,...o},i){return m(Wr,{onClick:t,onKeyDown:r??t,className:ae("clickable-icon",n),...o,ref:i,role:"button",tabIndex:0})});T();T();var xT=Ue(te(function({icon:t,...r},n){let o=jl(t);return m("button",{ref:Bl(o,n),...r})}));var Qn=te(function({className:t,active:r=!1,...n},o){return m(xT,{...n,ref:o,className:ae("clickable-icon",{"is-active":r},t)})});function Ps(e){return m(Ur,{size:16,icon:"info","aria-label":"Show details",...e})}function vn(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++)e=arguments[t](e);return e}T();T();var ET=Ue(function({content:t,className:r,...n}){let{sanitize:o,renderMarkdown:i}=V(Ar),a=G(()=>o(t).replace(/<\/?b>/g,"**").replace(/<\/?i>/g,"*"),[t,o]);return m("div",{className:ae("annot-comment select-text overflow-x-auto break-words px-2 py-1",r),...n,children:i(a)})});T();var ST=te(function({className:t,...r},n){return m("div",{ref:n,className:ae("annot-excerpt",t),...r})});var kT=se(Qe(),1);T();function yg({text:e,pageLabel:t,className:r,collapsed:n=!1,...o}){let i=e??`Area Excerpt for Page ${t??"?"}`;return m("img",{className:ae("w-full",n?"max-h-20 object-cover object-left-top":"object-scale-down",r),alt:i,...o})}var AT=Ue(function({type:t,text:r,pageLabel:n,imgSrc:o,collapsed:i}){switch(t){case Se.highlight:return m("p",{className:"select-text",children:r});case Se.image:if(!o)throw new Error("imgSrc is required for image annotation");return m(yg,{collapsed:i,src:o,pageLabel:n,text:r});case Se.note:case Se.ink:return m(Y,{children:["Unsupported Type: ",Se[t]]});default:(0,kT.assertNever)(t)}});function bg({checkbox:e,drag:t,buttons:r,onMoreOptions:n,className:o,children:i,onContextMenu:a,...s}){return m("div",{className:ae("annot-header flex cursor-context-menu items-center gap-1",o),onContextMenu:a??n,...s,children:[e,m("div",{className:"annot-header-drag-container flex flex-row items-center gap-1",children:t}),m("div",{className:"annot-header-buttons-container flex flex-row items-center gap-1 opacity-0 transition-opacity hover:opacity-100",children:r}),m("div",{className:"annot-header-space flex-1"}),i]})}var Vz=typeof global=="object"&&global&&global.Object===Object&&global,IT=Vz;var Gz=typeof self=="object"&&self&&self.Object===Object&&self,Kz=IT||Gz||Function("return this")(),_T=Kz;var Jz=_T.Symbol,Hr=Jz;var CT=Object.prototype,Zz=CT.hasOwnProperty,Yz=CT.toString,Rs=Hr?Hr.toStringTag:void 0;function Qz(e){var t=Zz.call(e,Rs),r=e[Rs];try{e[Rs]=void 0;var n=!0}catch{}var o=Yz.call(e);return n&&(t?e[Rs]=r:delete e[Rs]),o}var TT=Qz;var Xz=Object.prototype,e7=Xz.toString;function t7(e){return e7.call(e)}var OT=t7;var r7="[object Null]",n7="[object Undefined]",DT=Hr?Hr.toStringTag:void 0;function o7(e){return e==null?e===void 0?n7:r7:DT&&DT in Object(e)?TT(e):OT(e)}var FT=o7;function i7(e){return e!=null&&typeof e=="object"}var NT=i7;var a7="[object Symbol]";function s7(e){return typeof e=="symbol"||NT(e)&&FT(e)==a7}var PT=s7;function u7(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var RT=u7;var c7=Array.isArray,MT=c7;var l7=1/0,$T=Hr?Hr.prototype:void 0,LT=$T?$T.toString:void 0;function qT(e){if(typeof e=="string")return e;if(MT(e))return RT(e,qT)+"";if(PT(e))return LT?LT.call(e):"";var t=e+"";return t=="0"&&1/e==-l7?"-0":t}var BT=qT;function f7(e){return e==null?"":BT(e)}var Ci=f7;function p7(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}var jT=p7;function d7(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:jT(e,t,r)}var zT=d7;var m7="\\ud800-\\udfff",h7="\\u0300-\\u036f",g7="\\ufe20-\\ufe2f",y7="\\u20d0-\\u20ff",b7=h7+g7+y7,v7="\\ufe0e\\ufe0f",w7="\\u200d",x7=RegExp("["+w7+m7+b7+v7+"]");function E7(e){return x7.test(e)}var zl=E7;function S7(e){return e.split("")}var WT=S7;var UT="\\ud800-\\udfff",k7="\\u0300-\\u036f",A7="\\ufe20-\\ufe2f",I7="\\u20d0-\\u20ff",_7=k7+A7+I7,C7="\\ufe0e\\ufe0f",T7="["+UT+"]",vg="["+_7+"]",wg="\\ud83c[\\udffb-\\udfff]",O7="(?:"+vg+"|"+wg+")",HT="[^"+UT+"]",VT="(?:\\ud83c[\\udde6-\\uddff]){2}",GT="[\\ud800-\\udbff][\\udc00-\\udfff]",D7="\\u200d",KT=O7+"?",JT="["+C7+"]?",F7="(?:"+D7+"(?:"+[HT,VT,GT].join("|")+")"+JT+KT+")*",N7=JT+KT+F7,P7="(?:"+[HT+vg+"?",vg,VT,GT,T7].join("|")+")",R7=RegExp(wg+"(?="+wg+")|"+P7+N7,"g");function M7(e){return e.match(R7)||[]}var ZT=M7;function $7(e){return zl(e)?ZT(e):WT(e)}var YT=$7;function L7(e){return function(t){t=Ci(t);var r=zl(t)?YT(t):void 0,n=r?r[0]:t.charAt(0),o=r?zT(r,1).join(""):t.slice(1);return n[e]()+o}}var QT=L7;var q7=QT("toUpperCase"),XT=q7;function B7(e,t,r,n){var o=-1,i=e==null?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}var eO=B7;function j7(e){return function(t){return e?.[t]}}var tO=j7;var z7={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},W7=tO(z7),rO=W7;var U7=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,H7="\\u0300-\\u036f",V7="\\ufe20-\\ufe2f",G7="\\u20d0-\\u20ff",K7=H7+V7+G7,J7="["+K7+"]",Z7=RegExp(J7,"g");function Y7(e){return e=Ci(e),e&&e.replace(U7,rO).replace(Z7,"")}var nO=Y7;var Q7=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function X7(e){return e.match(Q7)||[]}var oO=X7;var eW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function tW(e){return eW.test(e)}var iO=tW;var lO="\\ud800-\\udfff",rW="\\u0300-\\u036f",nW="\\ufe20-\\ufe2f",oW="\\u20d0-\\u20ff",iW=rW+nW+oW,fO="\\u2700-\\u27bf",pO="a-z\\xdf-\\xf6\\xf8-\\xff",aW="\\xac\\xb1\\xd7\\xf7",sW="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",uW="\\u2000-\\u206f",cW=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dO="A-Z\\xc0-\\xd6\\xd8-\\xde",lW="\\ufe0e\\ufe0f",mO=aW+sW+uW+cW,hO="['\u2019]",aO="["+mO+"]",fW="["+iW+"]",gO="\\d+",pW="["+fO+"]",yO="["+pO+"]",bO="[^"+lO+mO+gO+fO+pO+dO+"]",dW="\\ud83c[\\udffb-\\udfff]",mW="(?:"+fW+"|"+dW+")",hW="[^"+lO+"]",vO="(?:\\ud83c[\\udde6-\\uddff]){2}",wO="[\\ud800-\\udbff][\\udc00-\\udfff]",Ti="["+dO+"]",gW="\\u200d",sO="(?:"+yO+"|"+bO+")",yW="(?:"+Ti+"|"+bO+")",uO="(?:"+hO+"(?:d|ll|m|re|s|t|ve))?",cO="(?:"+hO+"(?:D|LL|M|RE|S|T|VE))?",xO=mW+"?",EO="["+lW+"]?",bW="(?:"+gW+"(?:"+[hW,vO,wO].join("|")+")"+EO+xO+")*",vW="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wW="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xW=EO+xO+bW,EW="(?:"+[pW,vO,wO].join("|")+")"+xW,SW=RegExp([Ti+"?"+yO+"+"+uO+"(?="+[aO,Ti,"$"].join("|")+")",yW+"+"+cO+"(?="+[aO,Ti+sO,"$"].join("|")+")",Ti+"?"+sO+"+"+uO,Ti+"+"+cO,wW,vW,gO,EW].join("|"),"g");function kW(e){return e.match(SW)||[]}var SO=kW;function AW(e,t,r){return e=Ci(e),t=r?void 0:t,t===void 0?iO(e)?SO(e):oO(e):e.match(t)||[]}var kO=AW;var IW="['\u2019]",_W=RegExp(IW,"g");function CW(e){return function(t){return eO(kO(nO(t).replace(_W,"")),e,"")}}var AO=CW;var TW=AO(function(e,t,r){return e+(r?" ":"")+XT(t)}),xg=TW;T();var IO=Ue(function({icon:t,color:r,type:n,className:o,...i}){let a=xg(Se[n]);return m(Wr,{icon:t,style:{color:r??void 0},className:ae(o,"annot-type-icon","flex h-auto cursor-grab items-center justify-center opacity-[var(--icon-opacity)]"),"aria-label":a,"aria-label-delay":"500",...i})});var _O=se(Qe(),1),CO=e=>{switch(e){case Se.highlight:return"align-left";case Se.image:return"frame";case Se.note:case Se.ink:return"file-question";default:(0,_O.assertNever)(e)}};T();var TO=e=>{let{annotRenderer:t,store:r}=V(Be),n=mt(r,t.storeSelector,ki);return t.get(e,n)};T();var OO=e=>{let{getImgSrc:t}=V(Be);return G(()=>t(e),[e,t])};function Eg({className:e,...t}){return m(Ur,{icon:"more-vertical",className:ae("annot-header-more-options",e),"aria-label":"More Options",size:"0.9rem","aria-label-delay":"50",...t})}T();var DO=Ue(function({pageLabel:t,backlink:r,className:n,...o}){let i=t?`Page ${t}`:"";return r?m("a",{className:ae("annot-page","external-link","bg-[length:12px] bg-[center_right_3px] pr-[18px] text-xs",n),href:r,"aria-label":`Open Annotation In Zotero at Page ${t}`,"aria-label-delay":"500",...o,children:i}):m("span",{className:ae("annot-page",n),children:i})});T();function Sg({tags:e}){return e.length===0?null:m("div",{className:"annot-tags-container",children:e.map(t=>m(OW,{...t},t.tagID))})}var OW=Ue(function({name:t}){return m("a",{className:ae("tag","annot-tag"),children:t})});function kg({collapsed:e=!1,annotation:t,checkbox:r,tags:n,className:o,...i}){let a=N(null),{onMoreOptions:s,onDragStart:u,onShowDetails:l}=V(Be),c=em.selectKeys(t,["type","text","pageLabel"]),f=TO(t),p=Xt(h=>s(h,t)),d=Xt(()=>l("annot",t.itemID));return m("div",{className:ae("annot-preview","bg-primary shadow-border col-span-1 flex flex-col divide-y overflow-auto rounded-sm transition-colors",o),"data-id":t.itemID,...i,children:[m(bg,{className:"bg-primary-alt py-1 pl-2 pr-1",checkbox:r,drag:m(IO,{type:t.type,color:t.color,icon:CO(t.type),draggable:f!==null,onDragStart:Xt(h=>f&&u(h,f,a.current)),size:16}),buttons:m(Y,{children:[m(Ps,{className:"p-0.5",size:14,onClick:d}),m(Eg,{className:"p-0",onClick:p})]}),onMoreOptions:p,children:m(DO,{pageLabel:t.pageLabel,backlink:pn(t)})}),m(ST,{ref:a,className:"px-2 py-1",children:m("blockquote",{className:ae("border-l-blockquote pl-2 leading-tight",{"line-clamp-3":e}),style:{borderColor:t.color??"var(--interactive-accent)"},children:m(AT,{...c,collapsed:e,imgSrc:OO(t)})})}),t.comment&&m(ET,{content:t.comment}),n&&m(Sg,{tags:n})]})}function Ag({selectable:e=!1,collapsed:t,annotations:r,getTags:n}){let[o,{add:i,remove:a}]=fg();return m("div",{role:"list",className:"@md:grid-cols-2 @md:gap-3 @3xl:grid-cols-4 grid grid-cols-1 gap-2",children:r.map(s=>m(kg,{checkbox:e&&m(DW,{checked:o.has(s.itemID),onChange:u=>u?i(s.itemID):a(s.itemID)}),collapsed:t,role:"listitem",annotation:s,tags:n(s.itemID)},s.itemID))})}function DW({checked:e,onChange:t}){return m("div",{className:"flex h-5 items-center",children:m("input",{type:"checkbox",className:"m-0 h-4 w-4",checked:e,onChange:r=>t(r.target.checked)})})}T();var FW=()=>mt(V(Be).store,e=>({attachments:e.allAttachments,onChange:e.setActiveAtch,value:e.attachmentID}),ki);function Ig(){let{attachments:e,onChange:t,value:r}=FW();return e?e.length===1?null:e.length<=0?m("span",{className:"atch-select-empty",children:"No attachments available"}):m("select",{className:"atch-select",onChange:n=>t(parseInt(n.target.value,10)),value:r??void 0,children:e.map(({itemID:n,path:o,annotCount:i})=>m("option",{value:n,children:["(",i,") ",o?.replace(/^storage:/,"")]},n))}):m(Y,{children:"Loading"})}function _g({isCollapsed:e,...t}){return m(Qn,{...t,icon:e?"chevrons-up-down":"chevrons-down-up","aria-label":e?"Expand":"Collapse"})}T();function Wl(e){let{store:t,onSetFollow:r}=V(Be),n=mt(t,a=>a.follow),o=n===null?"Not Following":n==="ob-note"?"Active Literature Note":"Active Literature in Zotero Reader";return m(Y,{children:[m(Qn,{...e,onClick:r,icon:n===null?"unlink":"link","aria-label":"Choose Follow Mode"+(n===null?" (Currently linked with literature)":""),"aria-label-delay":"50"}),n!==null&&m("span",{className:"ml-1","aria-label":`Following ${o}`,children:n==="ob-note"?"ob":"zt"})]})}function Ul({children:e,buttons:t}){return m("div",{className:"nav-header",children:[m("div",{className:"nav-buttons-container",children:t}),e]})}function Cg(e){return m(Qn,{...e,icon:"refresh-ccw","aria-label":"Refresh Annotation List","aria-label-delay":"50"})}var NW=()=>{let{registerDbUpdate:e,store:t}=V(Be),r=mt(t,n=>n.refresh);L(()=>e(r),[e,r])};function Ms(){NW();let{store:e}=V(Be),t=mt(e,r=>r.doc);return t?m(PW,{docItem:t.docItem}):m(Y,{children:[m(Ul,{buttons:m(Wl,{})}),m("div",{className:"pane-empty p-2",children:"Active file not literature note"})]})}function PW({docItem:e}){let{refreshConn:t,onShowDetails:r}=V(Be),[n,{toggle:o}]=$l(!1),i=RW();return m(Y,{children:[m(Ul,{buttons:m(Y,{children:[m(Ps,{className:"nav-action-button",onClick:Xt(()=>r("doc-item",e.itemID))}),m(_g,{className:"nav-action-button",isCollapsed:n,onClick:o}),m(Cg,{className:"nav-action-button",onClick:t}),m(Wl,{})]}),children:m(Ig,{})}),m("div",{className:ae("annots-container @container","overflow-auto px-3 pt-1 pb-8 text-xs"),children:i?m(Ag,{collapsed:n,...i}):m(Y,{children:"Loading"})})]})}var RW=()=>mt(V(Be).store,e=>!e.doc||!e.annotations||!e.attachment?null:{annotations:e.annotations,getTags:t=>e.tags[t]??[]},ki);T();function FO({name:e,onAdd:t}){return m("div",{className:"bg-secondary text-txt-muted sticky top-0 z-10 flex flex-row items-center border-y py-1 pl-4 pr-2 text-base font-semibold",children:[m("h3",{className:"flex-1",children:e}),m(Ur,{icon:"plus",onClick:t})]})}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function Tg(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Hl(e,t=166){let r;function n(...o){let i=()=>{e.apply(this,o)};clearTimeout(r),r=setTimeout(i,t)}return n.clear=()=>{clearTimeout(r)},n}function Og(e){return e&&e.ownerDocument||document}function $s(e){return Og(e).defaultView||window}function Dg(e,t){typeof e=="function"?e(t):e&&(e.current=t)}T();var MW=typeof window<"u"?et:L,Fg=MW;T();function Vl(...e){return G(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{Dg(r,t)})},e)}T();T();var $W=["onChange","maxRows","minRows","style","value"];function Gl(e){return parseInt(e,10)||0}var LW={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function NO(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}var qW=te(function(t,r){let{onChange:n,maxRows:o,minRows:i=1,style:a,value:s}=t,u=Tg(t,$W),{current:l}=N(s!=null),c=N(null),f=Vl(r,c),p=N(null),d=N(0),[h,g]=$({outerHeightStyle:0}),y=K(()=>{let D=c.current,R=$s(D).getComputedStyle(D);if(R.width==="0px")return{outerHeightStyle:0};let P=p.current;P.style.width=R.width,P.value=D.value||t.placeholder||"x",P.value.slice(-1)===`
`&&(P.value+=" ");let E=R.boxSizing,S=Gl(R.paddingBottom)+Gl(R.paddingTop),v=Gl(R.borderBottomWidth)+Gl(R.borderTopWidth),_=P.scrollHeight;P.value="x";let I=P.scrollHeight,W=_;i&&(W=Math.max(Number(i)*I,W)),o&&(W=Math.min(Number(o)*I,W)),W=Math.max(W,I);let j=W+(E==="border-box"?S+v:0),H=Math.abs(W-_)<=1;return{outerHeightStyle:j,overflow:H}},[o,i,t.placeholder]),w=(D,F)=>{let{outerHeightStyle:R,overflow:P}=F;return d.current<20&&(R>0&&Math.abs((D.outerHeightStyle||0)-R)>1||D.overflow!==P)?(d.current+=1,{overflow:P,outerHeightStyle:R}):D},x=K(()=>{let D=y();NO(D)||g(F=>w(F,D))},[y]),A=()=>{let D=y();NO(D)||pr(()=>{g(F=>w(F,D))})};return L(()=>{let D=Hl(()=>{d.current=0,c.current&&A()}),F,R=c.current,P=$s(R);return P.addEventListener("resize",D),typeof ResizeObserver<"u"&&(F=new ResizeObserver(D),F.observe(R)),()=>{D.clear(),P.removeEventListener("resize",D),F&&F.disconnect()}}),Fg(()=>{x()}),L(()=>{d.current=0},[s]),m(Y,{children:[m("textarea",le({value:s,onChange:D=>{d.current=0,l||x(),n&&n(D)},ref:f,rows:i,style:le({height:h.outerHeightStyle,overflow:h.overflow?"hidden":void 0},a)},u)),m("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:le({},LW.shadow,a,{padding:0})})]})}),Xn=qW;T();function PO({value:e,onChange:t,onDelete:r,editing:n,onBlur:o,onFocus:i}){let a=N(null);return L(()=>{if(!(n&&a.current))return;let s=a.current;s.scrollIntoViewIfNeeded?s.scrollIntoViewIfNeeded():(s.getBoundingClientRect().bottom>window.innerHeight&&s.scrollIntoView(!1),s.getBoundingClientRect().top<0&&s.scrollIntoView()),s.select()},[n]),m("li",{className:"bg-primary",children:m("div",{className:"hover:bg-mod-hover focus-within:ring-mod-border-focus relative flex items-stretch space-x-1 py-0.5 pl-4 pr-2 focus-within:ring-2 focus-within:ring-inset",children:[n?m("div",{className:"flex min-w-0 flex-1 items-center",children:m(Xn,{ref:a,className:ae("text-txt-normal w-full bg-transparent text-sm font-medium","min-w-0 border-none p-0 ring-0 focus:border-none focus:ring-0 "),value:e,onChange:s=>t(s.target.value),onBlur:()=>{o(),n&&!e&&r()},onKeyUp:s=>{n&&s.key==="Escape"&&(s.target.blur(),o())}})}):m("div",{role:"textbox",tabIndex:0,onClick:i,onKeyUp:s=>s.key==="Enter"&&i(),className:"flex min-w-0 flex-1 items-center",children:m("p",{className:"text-txt-normal min-w-0 break-words bg-transparent text-sm font-medium",children:e})}),m("div",{className:"flex shrink-0 flex-col items-start opacity-0 transition-opacity hover:opacity-100",children:m(Ur,{icon:"trash",onClick:r})})]})})}function Ng({data:e,onAdd:t,onDelete:r,onChange:n,onSave:o}){let[i,a]=$(null),s=N(null);return m(Y,{children:m("nav",{className:"flex-1 overflow-y-auto",children:Object.entries(e).map(([u,l])=>m("div",{className:"relative",children:[m(FO,{name:u,onAdd:()=>{t(u),s.current=e,a({field:u,index:l.length})}}),m("ul",{className:" relative z-0 m-0 list-none divide-y p-0",children:l.map((c,f)=>{let p=!!i&&i.field===u&&i.index===f;return m(PO,{value:c,editing:p,onFocus:()=>{p||(s.current=e,a({field:u,index:f}))},onBlur:()=>{p&&(a(null),o&&s.current!==e&&o(u,f),s.current=null)},onChange:d=>{n(d,u,f)},onDelete:()=>{r(u,f)}},f)})})]},u))})})}function Pg({onClick:e}){return m("div",{className:"m-8 justify-self-center text-center",children:[m(Wr,{icon:"file-warning",size:"3rem"}),m("h3",{className:"text-txt-normal mt-2 text-base font-medium",children:"Convert Existing Fields"}),m("p",{className:"text-txt-muted mt-1 text-sm",children:"Normalize your existing fields to work with note fields viewer."}),m("div",{className:"mt-6",children:m("button",{className:"mod-cta",onClick:e,children:"Convert"})})]})}T();T();T();function BW(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Rg(...e){return t=>e.forEach(r=>BW(r,t))}function Kl(...e){return K(Rg(...e),e)}T();function RO(e,t=[]){let r=[];function n(i,a){let s=we(a),u=r.length;r=[...r,a];function l(f){let{scope:p,children:d,...h}=f,g=p?.[e][u]||s,y=G(()=>h,Object.values(h));return Q(g.Provider,{value:y},d)}function c(f,p){let d=p?.[e][u]||s,h=V(d);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>we(a));return function(s){let u=s?.[e]||i;return G(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return o.scopeName=e,[n,jW(o,...t)]}function jW(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let f=u(i)[`__scope${l}`];return{...s,...f}},{});return G(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function rt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}T();T();function Mg(e){let t=N(e);return L(()=>{t.current=e}),G(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function MO({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,o]=zW({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,s=Mg(r),u=K(l=>{if(i){let f=typeof l=="function"?l(e):l;f!==e&&s(f)}else o(l)},[i,e,o,s]);return[a,u]}function zW({defaultProp:e,onChange:t}){let r=$(e),[n]=r,o=N(n),i=Mg(t);return L(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}T();function $O(e){let t=N({value:e,previous:e});return G(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}T();T();var Ls=globalThis?.document?et:()=>{};function LO(e){let[t,r]=$(void 0);return Ls(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;let i=o[0],a,s;if("borderBoxSize"in i){let u=i.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}T();T();function WW(e,t){return pt((r,n)=>{let o=t[r][n];return o??r},e)}var $g=e=>{let{present:t,children:r}=e,n=UW(t),o=typeof r=="function"?r({present:n.isPresent}):He.only(r),i=Kl(n.ref,o.ref);return typeof r=="function"||n.isPresent?kt(o,{ref:i}):null};$g.displayName="Presence";function UW(e){let[t,r]=$(),n=N({}),o=N(e),i=N("none"),a=e?"mounted":"unmounted",[s,u]=WW(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L(()=>{let l=Jl(n.current);i.current=s==="mounted"?l:"none"},[s]),Ls(()=>{let l=n.current,c=o.current;if(c!==e){let p=i.current,d=Jl(l);e?u("MOUNT"):d==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&p!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Ls(()=>{if(t){let l=f=>{let d=Jl(n.current).includes(f.animationName);f.target===t&&d&&pr(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(i.current=Jl(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:K(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function Jl(e){return e?.animationName||"none"}T();T();T();var qg=te((e,t)=>{let{children:r,...n}=e,o=He.toArray(r),i=o.find(VW);if(i){let a=i.props.children,s=o.map(u=>u===i?He.count(a)>1?He.only(null):St(a)?a.props.children:null:u);return Q(Lg,le({},n,{ref:t}),St(a)?kt(a,void 0,s):null)}return Q(Lg,le({},n,{ref:t}),r)});qg.displayName="Slot";var Lg=te((e,t)=>{let{children:r,...n}=e;return St(r)?kt(r,{...GW(n,r.props),ref:Rg(t,r.ref)}):He.count(r)>1?He.only(null):null});Lg.displayName="SlotClone";var HW=({children:e})=>Q(Y,null,e);function VW(e){return St(e)&&e.type===HW}function GW(e,t){let r={...t};for(let n in t){let o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}var KW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Bg=KW.reduce((e,t)=>{let r=te((n,o)=>{let{asChild:i,...a}=n,s=i?qg:t;return L(()=>{window[Symbol.for("radix-ui")]=!0},[]),Q(s,le({},a,{ref:o}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});var qO="Checkbox",[JW,Aye]=RO(qO),[ZW,YW]=JW(qO),QW=te((e,t)=>{let{__scopeCheckbox:r,name:n,checked:o,defaultChecked:i,required:a,disabled:s,value:u="on",onCheckedChange:l,...c}=e,[f,p]=$(null),d=Kl(t,A=>p(A)),h=N(!1),g=f?!!f.closest("form"):!0,[y=!1,w]=MO({prop:o,defaultProp:i,onChange:l}),x=N(y);return L(()=>{let A=f?.form;if(A){let O=()=>w(x.current);return A.addEventListener("reset",O),()=>A.removeEventListener("reset",O)}},[f,w]),Q(ZW,{scope:r,state:y,disabled:s},Q(Bg.button,le({type:"button",role:"checkbox","aria-checked":eo(y)?"mixed":y,"aria-required":a,"data-state":BO(y),"data-disabled":s?"":void 0,disabled:s,value:u},c,{ref:d,onKeyDown:rt(e.onKeyDown,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:rt(e.onClick,A=>{w(O=>eo(O)?!0:!O),g&&(h.current=A.isPropagationStopped(),h.current||A.stopPropagation())})})),g&&Q(tU,{control:f,bubbles:!h.current,name:n,value:u,checked:y,required:a,disabled:s,style:{transform:"translateX(-100%)"}}))}),XW="CheckboxIndicator",eU=te((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...o}=e,i=YW(XW,r);return Q($g,{present:n||eo(i.state)||i.state===!0},Q(Bg.span,le({"data-state":BO(i.state),"data-disabled":i.disabled?"":void 0},o,{ref:t,style:{pointerEvents:"none",...e.style}})))}),tU=e=>{let{control:t,checked:r,bubbles:n=!0,...o}=e,i=N(null),a=$O(r),s=LO(t);return L(()=>{let u=i.current,l=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(l,"checked").set;if(a!==r&&f){let p=new Event("click",{bubbles:n});u.indeterminate=eo(r),f.call(u,eo(r)?!1:r),u.dispatchEvent(p)}},[a,r,n]),Q("input",le({type:"checkbox","aria-hidden":!0,defaultChecked:eo(r)?!1:r},o,{tabIndex:-1,ref:i,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function eo(e){return e==="indeterminate"}function BO(e){return eo(e)?"indeterminate":e?"checked":"unchecked"}var jg=QW,jO=eU;T();var zg=te(({className:e,checked:t,...r},n)=>m(jg,{ref:n,className:ae("data-[state=checked]:text-mod-error peer h-3 w-3 shrink-0 rounded-sm border disabled:cursor-not-allowed disabled:opacity-50 bg-primary obzt-btn-reset",e),checked:t,...r,children:m(jO,{className:ae("flex items-center justify-center"),children:m(Wr,{icon:"chevrons-down",size:"0.75rem",className:"contents"})})}));zg.displayName=jg.displayName;var zO=te(({id:e,checked:t,onCheckChange:r,title:n,disabled:o,className:i,...a},s)=>m("div",{className:ae("flex items-center gap-x-1","rounded-sm focus-within:outline-none focus-within:ring-2 focus-within:ring-mod-border-focus focus-within:ring-offset-2",t&&"animate-pulse",i),ref:s,...a,children:[m(zg,{className:ae("h-3 w-3",o&&"hidden"),id:e,checked:t,disabled:o,onCheckedChange:r}),m("label",{htmlFor:e,className:"peer-[[data-state=checked]]:text-mod-error text-status-bar text-txt-status-bar leading-none peer-disabled:cursor-not-allowed",children:n})]}));zO.displayName="ImportingStatus";var ZN=require("obsidian");T();var Oi=require("obsidian");T();var Zl={sanitize:DOMPurify.sanitize.bind(DOMPurify),setIcon:Oi.setIcon,renderMarkdown(e){return m(nU,{content:e})}};function nU({content:e}){let t=N(null);return m("div",{className:"contents",ref:n=>{n?(n.empty(),t.current&&t.current.unload(),t.current=new Oi.Component,Oi.MarkdownRenderer.renderMarkdown(e,n,"",t.current)):t.current&&(t.current.unload(),t.current=null)}})}var to=require("obsidian"),Di=class extends to.FileView{constructor(t){super(t),this.navigation=!1,this.allowNoFile=!0,this.requestUpdate=(0,to.debounce)(()=>this.update(),0)}load(){super.load(),this.registerEvent(this.app.workspace.on("file-open",this.onFileOpen,this))}onLoadFile(t){return this.requestUpdate()}onUnloadFile(t){return this.requestUpdate()}onFileOpen(t){this.leaf.group||this.leaf.pinned||(t instanceof to.TFile?this.loadFile(t):this.loadFile(null),this.requestUpdate())}onGroupChange(){if(super.onGroupChange(),this.leaf.group)for(let t=0,r=this.leaf.workspace.getGroupLeaves(this.leaf.group);t<r.length;t++){let n=r[t];if(n!==this.leaf&&n.view instanceof to.FileView){let o=n.view.getSyncViewState();this.leaf.openFile(n.view.file,o)}}else{let t=this.leaf.workspace.getActiveFile();this.loadFile(t)}}};var WO=require("obsidian");var Yl=require("obsidian"),Ql="zt-citations",Xl=async(e,t)=>typeof e=="string"&&e.trim().length>0?await t.database.search(e):await t.database.getItemsOf(50);function ef({item:e,fields:t},r){r.addClass("mod-complex");let n=r.createDiv("suggestion-content").createDiv("suggestion-title").createSpan(),o=r.createDiv("suggestion-aux");for(let s of t){let u=o.createEl("kbd","suggestion-hotkey");switch(u.setAttribute("aria-label",s),s){case"title":(0,Yl.setIcon)(u,"type");break;case"creators":(0,Yl.setIcon)(u,"user");break;case"date":(0,Yl.setIcon)(u,"calendar");break;default:u.setText(s);break}}let[i]=e.title??[],a=n.createDiv({cls:"title"});typeof i=="string"&&i?a.setText(i):a.setText("Title missing"),this.plugin.settings.suggester.showCitekeyInSuggester&&e.citekey&&n.createDiv({cls:"citekey",text:e.citekey}),oU(e)&&n.append(iU(e))}var oU=e=>e.itemType==="journalArticle",iU=e=>{let{creators:t,date:r,publicationTitle:n,volume:o,issue:i,pages:a}=e,s={creators:aU(t),date:r,publication:n,volume:o,issue:i,pages:a},u=(l,c,f)=>s[c]&&l.createSpan({cls:f??c,text:s[c]??void 0});return createDiv({cls:"meta"},l=>{(s.creators||s.date)&&l.createSpan({cls:"author-year"},c=>{u(c,"creators"),u(c,"date")}),u(l,"publication"),(s.volume||s.issue)&&l.createSpan({cls:"vol-issue"},c=>{u(c,"volume"),u(c,"issue")}),u(l,"pages")})},aU=e=>{if(!e||!e[0])return"";let t=e[0],r=Hc(t)||Vc(t)?t.lastName:"";return e.length>1&&(r=r.trim()+" et al."),r};var qs=class extends WO.EditorSuggest{constructor(r){super(r.app);this.plugin=r;this.suggestEl.addClass(Ql)}getSuggestions(r){return Xl(r.query,this.plugin)}renderSuggestion=ef.bind(this)};var ro=class extends Gc{constructor(r){super(r.app);this.plugin=r;this.modalEl.addClass(Ql)}getSuggestions(r){return Xl(r,this.plugin)}renderSuggestion=ef.bind(this);onChooseSuggestion(){}};var UO=require("obsidian"),tf=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to insert Markdown citation"},{command:"shift \u21B5",purpose:"to insert secondary Markdown citation"},{command:"esc",purpose:"to dismiss"}],rf=({alt:e,item:t},r,n,o)=>{if(!r){let a=n.getCursor();r={start:a,end:a}}let i=o.renderCitation(t,e);n.replaceRange(i,r.start,r.end),n.setCursor(n.offsetToPos(n.posToOffset(r.start)+i.length))},nf=e=>UO.Keymap.isModifier(e,"Shift");var Bs=class extends qs{constructor(r){super(r);this.plugin=r;this.setInstructions(tf)}onTrigger(r,n){if(!this.plugin.settings.suggester.citationEditorSuggester)return null;let o=n.getLine(r.line),a=o.substring(0,r.ch).match(/\[@([\w\- ]*)$/);if(!a)return null;let s={...r};return o[r.ch]==="]"&&(s.ch+=1),{end:s,start:{ch:a.index,line:r.line},query:a[1]}}selectSuggestion(r,n){this.context&&rf({item:r.item,alt:nf(n)},this.context,this.context.editor,this.plugin.templateRenderer)}};var Wg=class extends ro{constructor(r){super(r);this.plugin=r;this.setInstructions(tf)}};async function Ug(e,t){let r=await of(t);return r?(rf({item:r.value.item,alt:nf(r.evt)},void 0,e,t.templateRenderer),!0):!1}async function of(e){return await is(new Wg(e))}var HO=se(Qe(),1);var js=class extends Me{getDefaults(){return{citationEditorSuggester:!0,showCitekeyInSuggester:!1}}async apply(t){switch(t){case"citationEditorSuggester":case"showCitekeyInSuggester":return;default:(0,HO.default)(t)}}};var so=require("obsidian");T();T();T();T();var xn=se(wn());T();function Vg(e){let t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&typeof e[Symbol.iterator]=="function"?"Iterable":t==="Custom"&&e.constructor!==Object&&e instanceof Object?"Object":t}var JO=se(wn());T();var Ws=se(wn());T();var VO=se(wn());T();function zs(e){let{styling:t,arrowStyle:r="single",expanded:n,nodeType:o,onClick:i}=e;return q.createElement("div",(0,VO.default)({},t("arrowContainer",r),{onClick:i}),q.createElement("div",t(["arrow","arrowSign"],o,n,r),"\u25B6",r==="double"&&q.createElement("div",t(["arrowSign","arrowSignInner"]),"\u25B6")))}function sU(e,t){return e==="Object"?Object.keys(t).length:e==="Array"?t.length:1/0}function uU(e){return typeof e.set=="function"}function cU(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1/0,i;if(e==="Object"){let a=Object.getOwnPropertyNames(t);r&&a.sort(r===!0?void 0:r),a=a.slice(n,o+1),i={entries:a.map(s=>({key:s,value:t[s]}))}}else if(e==="Array")i={entries:t.slice(n,o+1).map((a,s)=>({key:s+n,value:a}))};else{let a=0,s=[],u=!0,l=uU(t);for(let c of t){if(a>o){u=!1;break}n<=a&&(l&&Array.isArray(c)?typeof c[0]=="string"||typeof c[0]=="number"?s.push({key:c[0],value:c[1]}):s.push({key:`[entry ${a}]`,value:{"[key]":c[0],"[value]":c[1]}}):s.push({key:a,value:c})),a++}i={hasMore:!u,entries:s}}return i}function Gg(e,t,r){let n=[];for(;t-e>r*r;)r=r*r;for(let o=e;o<=t;o+=r)n.push({from:o,to:Math.min(t,o+r-1)});return n}function Kg(e,t,r,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=cU.bind(null,e,t,r);if(!n)return a().entries;let s=i<1/0,u=Math.min(i-o,sU(e,t));if(e!=="Iterable"){if(u<=n||n<7)return a(o,i).entries}else if(u<=n&&!s)return a(o,i).entries;let l;if(e==="Iterable"){let{hasMore:c,entries:f}=a(o,o+n-1);l=c?[...f,...Gg(o+n,o+2*n-1,n)]:f}else l=s?Gg(o,i,n):[...a(0,n-5).entries,...Gg(n-4,u-5,n),...a(u-4,u-1).entries];return l}var GO=se(wn());T();function Jg(e){let{styling:t,from:r,to:n,renderChildNodes:o,nodeType:i}=e,[a,s]=$(!1),u=K(()=>{s(!a)},[a]);return a?q.createElement("div",t("itemRange",a),o(e,r,n)):q.createElement("div",(0,GO.default)({},t("itemRange",a),{onClick:u}),q.createElement(zs,{nodeType:i,styling:t,expanded:!1,onClick:u,arrowStyle:"double"}),`${r} ... ${n}`)}function lU(e){return e.to!==void 0}function KO(e,t,r){let{nodeType:n,data:o,collectionLimit:i,circularCache:a,keyPath:s,postprocessValue:u,sortObjectKeys:l}=e,c=[];return Kg(n,o,l,i,t,r).forEach(f=>{if(lU(f))c.push(q.createElement(Jg,(0,Ws.default)({},e,{key:`ItemRange--${f.from}-${f.to}`,from:f.from,to:f.to,renderChildNodes:KO})));else{let{key:p,value:d}=f,h=a.indexOf(d)!==-1;c.push(q.createElement(Us,(0,Ws.default)({},e,{postprocessValue:u,collectionLimit:i,key:`Node--${p}`,keyPath:[p,...s],value:u(d),circularCache:[...a,d],isCircular:h,hideRoot:!1})))}}),c}function no(e){let{circularCache:t=[],collectionLimit:r,createItemString:n,data:o,expandable:i,getItemString:a,hideRoot:s,isCircular:u,keyPath:l,labelRenderer:c,level:f=0,nodeType:p,nodeTypeIndicator:d,shouldExpandNodeInitially:h,styling:g}=e,[y,w]=$(u?!1:h(l,o,f)),x=K(()=>{i&&w(!y)},[i,y]),A=y||s&&f===0?KO({...e,circularCache:t,level:f+1}):null,O=q.createElement("span",g("nestedNodeItemType",y),d),D=a(p,o,O,n(o,r),l),F=[l,p,y,i];return s?q.createElement("li",g("rootNode",...F),q.createElement("ul",g("rootNodeChildren",...F),A)):q.createElement("li",g("nestedNode",...F),i&&q.createElement(zs,{styling:g,nodeType:p,expanded:y,onClick:x}),q.createElement("label",(0,Ws.default)({},g(["label","nestedNodeLabel"],...F),{onClick:x}),c(...F)),q.createElement("span",(0,Ws.default)({},g("nestedNodeItemString",...F),{onClick:x}),D),q.createElement("ul",g("nestedNodeChildren",...F),A))}function fU(e){let t=Object.getOwnPropertyNames(e).length;return`${t} ${t!==1?"keys":"key"}`}function Zg(e){let{data:t,...r}=e;return q.createElement(no,(0,JO.default)({},r,{data:t,nodeType:"Object",nodeTypeIndicator:r.nodeType==="Error"?"Error()":"{}",createItemString:fU,expandable:Object.getOwnPropertyNames(t).length>0}))}var ZO=se(wn());T();function pU(e){return`${e.length} ${e.length!==1?"items":"item"}`}function Yg(e){let{data:t,...r}=e;return q.createElement(no,(0,ZO.default)({},r,{data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:pU,expandable:t.length>0}))}var YO=se(wn());T();function dU(e,t){let r=0,n=!1;if(Number.isSafeInteger(e.size))r=e.size;else for(let o of e){if(t&&r+1>t){n=!0;break}r+=1}return`${n?">":""}${r} ${r!==1?"entries":"entry"}`}function Qg(e){return q.createElement(no,(0,YO.default)({},e,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:dU,expandable:!0}))}T();function er(e){let{nodeType:t,styling:r,labelRenderer:n,keyPath:o,valueRenderer:i,value:a,valueGetter:s=u=>u}=e;return q.createElement("li",r("value",t,o),q.createElement("label",r(["label","valueLabel"],t,o),n(o,t,!1,!1)),q.createElement("span",r("valueText",t,o),i(s(a),a,...o)))}function Us(e){let{getItemString:t,keyPath:r,labelRenderer:n,styling:o,value:i,valueRenderer:a,isCustomNode:s,...u}=e,l=s(i)?"Custom":Vg(i),c={getItemString:t,key:r[0],keyPath:r,labelRenderer:n,nodeType:l,styling:o,value:i,valueRenderer:a},f={...u,...c,data:i,isCustomNode:s};switch(l){case"Object":case"Error":case"WeakMap":case"WeakSet":return q.createElement(Zg,f);case"Array":return q.createElement(Yg,f);case"Iterable":case"Map":case"Set":return q.createElement(Qg,f);case"String":return q.createElement(er,(0,xn.default)({},c,{valueGetter:p=>`"${p}"`}));case"Number":return q.createElement(er,c);case"Boolean":return q.createElement(er,(0,xn.default)({},c,{valueGetter:p=>p?"true":"false"}));case"Date":return q.createElement(er,(0,xn.default)({},c,{valueGetter:p=>p.toISOString()}));case"Null":return q.createElement(er,(0,xn.default)({},c,{valueGetter:()=>"null"}));case"Undefined":return q.createElement(er,(0,xn.default)({},c,{valueGetter:()=>"undefined"}));case"Function":case"Symbol":return q.createElement(er,(0,xn.default)({},c,{valueGetter:p=>p.toString()}));case"Custom":return q.createElement(er,c);default:return q.createElement(er,(0,xn.default)({},c,{valueGetter:()=>`<${l}>`}))}}var Yf=se(af()),SN=se(tD()),fy=se(uD()),py=se(TF()),uy=se(XF()),cy=se(bN());function vN(e){var t=e[0],r=e[1],n=e[2],o,i,a;return o=t*1+r*0+n*1.13983,i=t*1+r*-.39465+n*-.5806,a=t*1+r*2.02311+n*0,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[o*255,i*255,a*255]}function wN(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=t*.299+r*.587+n*.114,i=t*-.14713+r*-.28886+n*.436,a=t*.615+r*-.51499+n*-.10001;return[o,i,a]}function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){(0,SN.default)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var kN=py.default,EN=Object.keys(kN),FV=function(t){return t<.25?1:t<.5?.9-t:1.1-t},NV=function(t){var r=(0,uy.default)(t),n=wN(r.array()),o=(0,fy.default)(n,3),i=o[0],a=o[1],s=o[2],u=[FV(i),a,s],l=vN(u);return uy.default.rgb(l).hex()},Ri=function(t){return function(r){return{className:[r.className,t.className].filter(Boolean).join(" "),style:ht(ht({},r.style||{}),t.style||{})}}},PV=function(t,r){if(t===void 0)return r;if(r===void 0)return t;var n=(0,Yf.default)(t),o=(0,Yf.default)(r);switch(n){case"string":switch(o){case"string":return[r,t].filter(Boolean).join(" ");case"object":return Ri({className:t,style:r});case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return Ri({className:t})(r.apply(void 0,[i].concat(s)))}}break;case"object":switch(o){case"string":return Ri({className:r,style:t});case"object":return ht(ht({},r),t);case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return Ri({style:t})(r.apply(void 0,[i].concat(s)))}}break;case"function":switch(o){case"string":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[Ri(i)({className:r})].concat(s))};case"object":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[Ri(i)({style:r})].concat(s))};case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[r.apply(void 0,[i].concat(s))].concat(s))}}}},RV=function(t,r){var n=Object.keys(r);for(var o in t)n.indexOf(o)===-1&&n.push(o);return n.reduce(function(i,a){return i[a]=PV(t[a],r[a]),i},{})},MV=function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(r===null)return t;Array.isArray(r)||(r=[r]);var a=r.map(function(u){return t[u]}).filter(Boolean),s=a.reduce(function(u,l){return typeof l=="string"?u.className=[u.className,l].filter(Boolean).join(" "):(0,Yf.default)(l)==="object"?u.style=ht(ht({},u.style),l):typeof l=="function"&&(u=ht(ht({},u),l.apply(void 0,[u].concat(o)))),u},{className:"",style:{}});return s.className||delete s.className,Object.keys(s.style).length===0&&delete s.style,s},ly=function(t){return Object.keys(t).reduce(function(r,n){return r[n]=/^base/.test(n)?NV(t[n]):n==="scheme"?t[n]+":inverted":t[n],r},{})},AN=(0,cy.default)(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.defaultBase16,o=n===void 0?kN:n,i=t.base16Themes,a=i===void 0?null:i,s=$V(r,a);s&&(r=ht(ht({},s),r));for(var u=EN.reduce(function(g,y){return g[y]=r[y]||o[y],g},{}),l=Object.keys(r).reduce(function(g,y){return EN.indexOf(y)===-1&&(g[y]=r[y]),g},{}),c=e(u),f=RV(l,c),p=arguments.length,d=new Array(p>3?p-3:0),h=3;h<p;h++)d[h-3]=arguments[h];return(0,cy.default)(MV,2).apply(void 0,[f].concat(d))},3),IN=function(t){return!!t.extend},$V=function(t,r){if(t&&IN(t)&&t.extend&&(t=t.extend),typeof t=="string"){var n=t.split(":"),o=(0,fy.default)(n,2),i=o[0],a=o[1];r?t=r[i]:t=py[i],a==="inverted"&&(t=ly(t))}return t&&Object.prototype.hasOwnProperty.call(t,"base00")?t:void 0},_N=function(t){return typeof t=="string"?"".concat(t,":inverted"):t&&IN(t)&&t.extend?typeof t.extend=="string"?ht(ht({},t),{},{extend:"".concat(t.extend,":inverted")}):ht(ht({},t),{},{extend:ly(t.extend)}):t&&ly(t)};var CN={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};var LV=e=>({BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}),qV=e=>({String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}),BV=e=>{let t=LV(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:(r,n,o)=>{let{style:i}=r;return{style:{...i,paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:o.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"}}},label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:(r,n)=>{let{style:o}=r;return{style:{...o,color:qV(t)[n]}}},itemRange:(r,n)=>({style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}),arrow:(r,n,o)=>{let{style:i}=r;return{style:{...i,marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:o?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:o?"rotateZ(90deg)":"rotateZ(0deg)",transform:o?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"}}},arrowContainer:(r,n)=>{let{style:o}=r;return{style:{...o,display:"inline-block",paddingRight:"0.5em",paddingLeft:n==="double"?"1em":0,cursor:"pointer"}}},arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:(r,n,o,i,a)=>{let{style:s}=r;return{style:{...s,position:"relative",paddingTop:"0.25em",marginLeft:n.length>1?"0.875em":0,paddingLeft:a?0:"1.125em"}}},rootNode:{padding:0,margin:0},nestedNodeLabel:(r,n,o,i,a)=>{let{style:s}=r;return{style:{...s,margin:0,padding:0,WebkitUserSelect:a?"inherit":"text",MozUserSelect:a?"inherit":"text",cursor:a?"pointer":"default"}}},nestedNodeItemString:(r,n,o,i)=>{let{style:a}=r;return{style:{...a,paddingLeft:"0.5em",cursor:"default",color:i?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR}}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:(r,n,o)=>{let{style:i}=r;return{style:{...i,padding:0,margin:0,listStyle:"none",display:o?"block":"none"}}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},jV=AN(BV,{defaultBase16:CN}),TN=jV;var ON=e=>e,zV=(e,t,r)=>r===0,WV=(e,t,r,n)=>q.createElement("span",null,r," ",n),UV=e=>{let[t]=e;return q.createElement("span",null,t,":")},HV=()=>!1;function DN(e){let{data:t,theme:r,invertTheme:n,keyPath:o=["root"],labelRenderer:i=UV,valueRenderer:a=ON,shouldExpandNodeInitially:s=zV,hideRoot:u=!1,getItemString:l=WV,postprocessValue:c=ON,isCustomNode:f=HV,collectionLimit:p=50,sortObjectKeys:d=!1}=e,h=G(()=>TN(n?_N(r):r),[r,n]);return q.createElement("ul",h("tree"),q.createElement(Us,{keyPath:u?[]:o,value:c(t),isCustomNode:f,styling:h,labelRenderer:i,valueRenderer:a,shouldExpandNodeInitially:s,hideRoot:u,getItemString:l,postprocessValue:c,collectionLimit:p,sortObjectKeys:d}))}var FN=require("obsidian");var VV=()=>{let[e]=Ve("clipboard-copy");return m("span",{ref:e})},NN=(e,t,r,n,o)=>{if(o.length===1){let i=async a=>{a.preventDefault(),a.stopPropagation(),await navigator.clipboard.writeText("```json\n"+JSON.stringify(t,null,2)+"\n```"),new FN.Notice("Copied JSON code block to clipboard")};return m("span",{role:"button",tabIndex:0,onClick:i,onKeyDown:i,"aria-label":"Copy Item Details in JSON",children:[n," ",m(VV,{})]})}if(o[1]==="creators"&&o.length===3){let i=fn(t);if(i)return m("span",{children:i})}if(o[1]==="tags"&&o.length===3){let i=t;return m("span",{children:['"',i.name,'"" (',hr[i.type],")"]})}if(o[0]==="sortIndex"&&o.length===2)return m("span",{children:["[",t.join(", "),"]"]});if(o.length===2&&Array.isArray(t)&&t.length===1){let i=JSON.stringify(t[0]);return m("span",{children:[r," ",i.length>100?i.slice(0,100)+"...":i]})}return m("span",{children:[r," ",n]})};var RN=require("obsidian");var MN=(e,t,r,n)=>{let o=e.length===1,i=e.slice(0,-1),a=PN(i);return m("span",{...o?void 0:{onContextMenu:l=>{let c=new RN.Menu().addItem(f=>f.setTitle("Copy Template").onClick(()=>{navigator.clipboard.writeText(`<%= ${a} %>`)}));n&&t!=="Array"&&c.addItem(f=>f.setTitle("Copy Template (using with)").onClick(()=>{let[p,...d]=i,h=typeof p=="string"&&$N.test(p)?p:`'${p}'`,g=PN(d);navigator.clipboard.writeText(`<% { const { ${h}: $it } = ${g}; %>
  <%= $it %>
<% } %>`)})),t==="Array"&&c.addItem(f=>f.setTitle("Copy Template (using for-of loop)").onClick(()=>{navigator.clipboard.writeText(`<% for (const $it of ${a}) { %>
  <%= $it %>
<% } %>`)})).addItem(f=>f.setTitle("Copy Template (using forEach)").onClick(()=>{navigator.clipboard.writeText(`<% ${a}.forEach(($it, i) => { %>
  <%= $it %>
<% }) %>`)})).addItem(f=>f.setTitle("Copy Template (pick first element)").onClick(()=>{navigator.clipboard.writeText(`<%= ${a}.first() %>`)})).addItem(f=>f.setTitle("Copy Template (pick last element)").onClick(()=>{navigator.clipboard.writeText(`<%= ${a}.last() %>`)})),Rm.has(i[0])||c.addItem(f=>f.setTitle("Copy Template (render when present)").onClick(()=>{navigator.clipboard.writeText(`<% if (${a}) { %>
  <%= ${a} %>
<% } %>`)})),l.preventDefault(),c.showAtMouseEvent(l.nativeEvent)},style:{cursor:"context-menu"}},children:[e[0],": "]})},PN=e=>"it"+e.map(GV).reverse().join(""),$N=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u,GV=e=>typeof e=="number"?`[${e}]`:$N.test(e)?`.${e}`:`[${JSON.stringify(e)}]`;var KV=new Set(["sortIndex"]),JV=new Set(["creators","tags"]),ZV=new Set(["position"]),LN=(e,t,r)=>{let n=e[0];return KV.has(n)||JV.has(n)&&Array.isArray(t)&&t.length>6?!1:!!(ZV.has(n)||r<1||r<2&&Array.isArray(t)&&t.length>1)};var YV=/^#(?:[\dA-F]{3}){1,2}$|^#(?:[\dA-F]{4}){1,2}$/i,QV=e=>{let t=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return r*.299+n*.587+o*.114>186},qN=(e,t,...r)=>{if(typeof t=="string"&&YV.test(t))return m("span",{style:{backgroundColor:t,padding:"0 0.5em",color:QV(t)?"black":"white"},children:t});if(r[0]==="type"&&typeof t=="number"){let n="";if(r.length===2&&Se[t]?n=Se[t]:r.length===4&&typeof r[1]=="number"&&r[2]==="tags"&&hr[t]&&(n=hr[t]),n)return m(Y,{children:[e," ",m("span",{children:["(",n,")"]})]})}return e};var BN=()=>document.body.classList.contains("theme-dark"),XV={scheme:"Solarized Light",author:"Ethan Schoonover (modified by aramisgithub)",base00:"transparent",base01:"#eee8d5",base02:"#93a1a1",base03:"#839496",base04:"#657b83",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},eG={scheme:"Solarized Dark",author:"Ethan Schoonover (modified by aramisgithub)",base00:"transparent",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};function dy({item:e,registerCssChange:t}){let[r,n]=$(()=>BN());return L(()=>t?.(()=>n(BN())),[t]),e?m(DN,{data:e,theme:r?eG:XV,invertTheme:!1,keyPath:["Zotero Item Data"],shouldExpandNodeInitially:LN,valueRenderer:qN,labelRenderer:MN,getItemString:NN}):m("div",{children:"No Details Available"})}var jN=require("obsidian");var Qf=e=>({plugin:e,sourcePath:""});function tG(){return Ns((e,t)=>({preview:null,templateType:null,setTemplateType(r){e(n=>({...n,templateType:r||void 0}))},setPreview(r){e(({...n})=>({...n,preview:r??null}))},async setPreviewFromState(r,n){let o=t().preview;if(o?.docItem.itemID===r?.docItem&&o?.attachment?.itemID===r?.attachment&&o?.annot?.itemID===r?.annot)return!1;let i=n.database.settings.citationLibrary;if(!r.docItem)return console.error("TemplatePreview: no docItem provided"),!1;let[a]=await n.databaseAPI.getItems([[r.docItem,i]]);if(!a)return console.error("TemplatePreview: no docItem found for id "+r.docItem),!1;let s=await n.databaseAPI.getAttachments(r.docItem,i),u=s.find(p=>p.itemID===r.attachment)??null;r.attachment&&!u&&console.error("TemplatePreview: no attachment found for id "+r.attachment);let l=u?await n.databaseAPI.getAnnotations(u.itemID,i):[],c=l.find(p=>p.itemID===r.annot);r.annot&&!c&&console.error("TemplatePreview: no annotation found for id "+r.annot);let f=await n.databaseAPI.getTags([[r.docItem,i],...l.map(p=>[p.itemID,i])]);return e(()=>({preview:{docItem:a,allAttachments:s,annotations:l,attachment:u,tags:f,annot:l.find(p=>p.itemID===r.annot)}})),!0}}))}function zN(e,t){let r=null,n=null,o=null;return function(...i){if(r&&window.clearTimeout(r),n){o=i;return}r=window.setTimeout(()=>{r=null,n=e(...i).then(()=>{o?n=e(...o):n=null}).catch(a=>{console.error(a),n=null})},t)}}var Mi=class extends jN.FileView{constructor(r,n){super(r);this.plugin=n;this.store=tG()}store;canAcceptExtension(r){return r==="md"}get enabled(){return this.plugin.templateLoader.settings.ejected}getTemplateType(r){return this.plugin.templateLoader.getTemplateTypeOf(r)}setTemplateType(r){this.store.getState().setTemplateType(r)}async onLoadFile(r){await super.onLoadFile(r),this.setTemplateType(this.enabled&&this.getTemplateType(r))}getState(){let r=super.getState(),{preview:n}=this.store.getState(),o;if(!n)o={preview:null};else{let{docItem:i,attachment:a,annot:s}=n;o={preview:{docItem:i.itemID,attachment:a?.itemID,annot:s?.itemID}}}return{...r,...o}}async setState(r,n){if(await super.setState(r,n),r.preview===void 0)return;let o=this.store.getState();r.preview===null?o.setPreview(null):await o.setPreviewFromState(r.preview,this.plugin)}setPreview(r){this.store.getState().setPreview(r)}async onOpen(){await super.onOpen();let[r,n]=jo(this.plugin);n&&this.register(n),await r}};var $i="zotero-item-details",WN=({templateType:e})=>e==="annotation"?e:"note",Xf=class extends Mi{getViewType(){return $i}getDisplayText(){let t=this.store.getState();return t.templateType?"Zotero Item Details: "+WN(t):"Zotero Item Details"}async onOpen(){await super.onOpen();let[t,r]=jo(this.plugin);r&&this.register(r),await t,q.render(m(rG,{store:this.store,plugin:this.plugin}),this.contentEl)}async onClose(){q.unmountComponentAtNode(this.contentEl),await super.onClose()}};function rG({store:e,plugin:t}){let r=mt(e,WN),n=mt(e,i=>i.preview),o=G(()=>{let i=Qf(t);if(!n)return null;switch(r){case"note":{let a=Qt(n,i);return a.docItem.annotations=void 0,a.docItem}case"annotation":{let a=Qt(n,i),s=n.annot?a.annotations.find(u=>u.itemID===n.annot?.itemID):a.annotations[0];return s?(s.docItem=void 0,s):null}default:throw new Error("Unsupported template type")}},[t,n,r]);return o?m(dy,{item:o,registerCssChange:i=>(t.app.workspace.on("css-change",i),()=>t.app.workspace.off("css-change",i))}):m("div",{})}var tr=require("obsidian");var Li="zotero-template-preview",ep=class extends Mi{getViewType(){return Li}getDisplayText(){let t=this.store.getState().templateType;return t?"Zotero Template Preview: "+t:"Zotero Template Preview"}async switchToTemplate(t){if(!this.leaf.group)return!1;let r=UN(this.leaf.group,this.plugin);if(!r)return!1;let n=hy(t,this.plugin);if(!n||!(n instanceof tr.TFile)){new tr.Notice("Template file not found: "+t);return}return await r.openFile(n),!0}onload(){let t={annots:this.addAction("list-ordered","Open Template for Annotations",async()=>await this.switchToTemplate("annots")||new tr.Notice("Cannot switch to template")),note:this.addAction("file-input","Open Note Template",async()=>await this.switchToTemplate("note")||new tr.Notice("Cannot switch to template")),annotation:this.addAction("highlighter","Open Template for Single Annotation",async()=>await this.switchToTemplate("annotation")||new tr.Notice("Cannot switch to template"))};Object.values(t).forEach(r=>r.hide()),this.register(this.store.subscribe((r,n)=>{if(r.templateType!==n.templateType)for(let[o,i]of Object.entries(t))i.toggle(o!==r.templateType)})),this.registerEvent(this.app.vault.on("zotero:template-updated",r=>{let n=this.getTemplateType(this.file);n&&r===n&&(this.setTemplateType(this.enabled&&n),this.requestRender())}))}content=null;async render(){let{preview:t,templateType:r}=this.store.getState();if(!r){this.contentEl.empty(),this.contentEl.setText("No template preview available");return}if(!t){this.contentEl.empty(),this.contentEl.setText("No preview data available");return}let n="",o=Qf(this.plugin);switch(r){case"annotation":{let s=t.annot??t.annotations[0];if(!s){this.contentEl.setText("No annotation data available");return}n=this.plugin.templateRenderer.renderAnnot(s,t,o);break}case"annots":n=this.plugin.templateRenderer.renderAnnots(t,o);break;case"note":n=this.plugin.templateRenderer.renderNote(t,o);break;default:this.contentEl.setText("Unexpected template type");return}if(n===this.content?.markdown)return;this.content?.unload(),this.contentEl.empty();let i=await(0,tr.loadPrism)(),a=i.highlight(n,i.languages.markdown,"markdown");this.content=new my(n),this.contentEl.createEl("pre").createEl("code",{cls:"language-markdown"}).innerHTML=a}requestRender=zN(()=>this.render(),200);async onOpen(){await super.onOpen(),this.register(this.store.subscribe((t,r)=>{t.templateType!==r.templateType?this.requestRender():t.preview!==r.preview&&this.requestRender()}))}},my=class extends tr.Component{constructor(r){super();this.markdown=r}};async function uo(e,t,r){let{workspace:n}=r.app,o=hy(e,r);if(!o||!(o instanceof so.TFile)){new so.Notice("Template file not found: "+e);return}let{templateLoader:i}=r,a=n.getLeavesOfType("markdown").filter(c=>i.getTemplateTypeOf(c.view?.file)&&c.getRoot().type==="floating");if(a.length>0){let c=a[0];if(await c.openFile(o),!c.group)return;let f=n.getGroupLeaves(c.group);for(let p of f){let d=p.view.getViewType();if(d===Li||d===$i){let h=p.view.getState();await p.view.setState({...h,preview:t},{})}}return}let s=n.openPopoutLeaf(),u=n.createLeafBySplit(s,"vertical"),l=n.createLeafBySplit(u,"vertical");await Promise.all([s.openFile(o,{active:!0}),u.setViewState({type:Li,state:{file:o.path,preview:t},group:s}),l.setViewState({type:$i,state:{file:o.path,preview:t},group:s})])}function hy(e,t){let r=t.templateLoader.getTemplateFile(e),n=t.app.vault.getAbstractFileByPath(r);return!n||!(n instanceof so.TFile)?null:n}function UN(e,t){return t.app.workspace.getGroupLeaves(e).find(n=>n.view instanceof so.MarkdownView&&t.templateLoader.getTemplateTypeOf(n.view.file))}var HN=e=>(t,r,n)=>{let{imgCacheImporter:o}=e,i=String(t.timeStamp),a="drag-source";t.dataTransfer.setData("text/plain",r()),t.dataTransfer.setData(a,i),t.dataTransfer.dropEffect="copy";let s=t.target.win,u=f=>{f.dataTransfer?.getData(a)===i&&o.flush(),app.workspace.off("editor-drop",u),s.removeEventListener("dragend",l)},l=()=>{o.cancel(),app.workspace.off("editor-drop",u)},c=app.workspace.on("editor-drop",f=>{f.dataTransfer?.getData("drag-source")===i&&o.flush(),app.workspace.offref(c)});s.addEventListener("dragend",l,{once:!0}),n&&t.dataTransfer.setDragImage(n,0,0)},VN=e=>({storeSelector:t=>xt(t,["doc","attachment","allAttachments","tags","annotations"]),get:(t,{allAttachments:r,attachment:n,doc:o,tags:i,annotations:a})=>!r||!n||!o||!i[t.itemID]||!a?null:()=>{let s=e.app.workspace.getActiveFile(),u=s&&yn(s)?s.path:null;return e.templateRenderer.renderAnnot(t,{tags:i,attachment:n,allAttachments:r,annotations:a,docItem:o.docItem},{plugin:e,sourcePath:u,merge:!1})}});var qi=require("obsidian");var GN=e=>(t,r)=>{let n=new qi.Menu;if(n.addItem(o=>o.setTitle("Jump to Note").setIcon("links-going-out").onClick(nG(r,e))),app.workspace.trigger("zotero:open-annot-menu",r,n),t.nativeEvent instanceof MouseEvent)n.showAtMouseEvent(t.nativeEvent);else{let o=t.currentTarget.getBoundingClientRect();n.showAtPosition({x:o.left,y:o.bottom})}},nG=(e,t)=>async()=>{let r=t.app.workspace.getActiveFile(),n=r&&yn(r)?r.path:void 0,o=t.plugin.noteIndex.getBlocksFor({item:e,file:n}).shift();if(!o){new qi.Notice("No embed for this annotation in current note");return}let i=o.blocks.sort((p,d)=>{let h=p.start.offset-d.start.offset;return h!==0?h:p.end.offset-d.end.offset})[0];await sleep(10);let{leaf:a}=t,{workspace:s,vault:u}=app,l;if(a.group)l=app.workspace.getGroupLeaves(a.group);else{l=[];let p=s.getActiveFileView();p&&l.push(p.leaf)}let c=!1,f=i.end.line+1;for(let p of l)p&&p.view instanceof qi.MarkdownView&&p.view.file.path===o.file&&(p.view.setEphemeralState({line:f}),c=!0);if(!c){let p=u.getAbstractFileByPath(o.file);if(!p||!yn(p))throw new Error("File from block info not found: "+o.file);s.getLeaf().openFile(p,{eState:{line:f}})}};var KN=(e,t)=>t.length===0?null:e?t.find(r=>r.itemID===e)??t[0]:t[0],tp=()=>({doc:null,allAttachments:null,attachmentID:null,annotations:null,attachment:null,tags:{}}),oG=()=>({follow:"zt-reader",doc:null,allAttachments:null,attachmentID:null,annotations:null,attachment:null,tags:{}}),su=e=>e.databaseAPI,JN=e=>Ns((t,r)=>{let n=async(a,s)=>{let u=(await su(e).getAttachments(a,s)).filter(l=>ns(l)&&l.path?.endsWith(".pdf"));t(l=>({...l,allAttachments:u,attachment:KN(l.attachmentID,u)}))},o=async(a,s)=>{let u=await su(e).getTags([[a,s]]);return t(l=>({...l,tags:u})),u},i=async a=>{let{attachment:s}=r();if(!s)return;let u=await su(e).getAnnotations(s.itemID,a),l=Xm(u);t(p=>({...p,annotations:eh(l),attachment:s}));let c=await su(e).getTags(u.map(p=>[p.itemID,a])),f=th(l,c);t(p=>({...p,tags:{...p.tags,...f}}))};return{...oG(),loadDocItem:async(a,s,u,l=!1)=>{if(a<0)return t(tp());if(r().doc?.docItem.itemID===a&&!l)return;let c=(await su(e).getItems([[a,u]]))[0];if(!c)return t(tp());let f={docItem:c,lib:u};if(s<0){let p=Nm(window.localStorage,c);t({...tp(),doc:f,attachmentID:p})}else ni(window.localStorage,c,s),t({...tp(),doc:f,attachmentID:s});await n(c.itemID,u),await o(c.itemID,u),await i(u)},refresh:async()=>{let{doc:a,attachment:s}=r();if(!a)return;let{docItem:u,lib:l}=a;await n(u.itemID,l),await o(u.itemID,l),s&&await i(l)},setActiveAtch:a=>{let{doc:s,allAttachments:u}=r();if(s)if(ni(window.localStorage,s.docItem,a),!u)t(l=>({...l,attachment:null,attachmentID:a}));else{let l=KN(a,u);t(c=>({...c,attachment:l,attachmentID:a}))}},setFollow:a=>t({follow:a})}});var np="zotero-annotation-view",rp=class extends Di{constructor(r,n){super(r);this.plugin=n;this.store=JN(n)}update(){if(this.follow!=="ob-note")return;let r=this.plugin.settings.database.citationLibrary;(async()=>{if(this.file?.extension!=="md")return!1;let n=Zn(this.file),o=Os(this.file);if(!n)return!1;let[i]=await this.plugin.databaseAPI.getItems([[n,r]]);return i?(this.setStatePrev(a=>({...a,follow:"ob-note",itemId:i.itemID,attachmentId:o?.[0]??void 0})),!0):!1})().then(n=>{n||this.setStatePrev(o=>({...o,follow:"ob-note",itemId:-1}))})}getViewType(){return np}#e=null;onload(){super.onload(),this.contentEl.addClass("obzt");let r=null,n=!1,o=i=>{if(n)r=i;else{n=!0;let{itemId:a,attachmentId:s}=i;this.setStatePrev(u=>({...u,itemId:a,attachmentId:s})).then(()=>{if(n=!1,r===null)return;let u=r;r=null,o(u)})}};this.registerEvent(this.plugin.server.on("bg:notify",(i,a)=>{a.event==="reader/active"&&(this.#e=a.itemId,!(this.follow!=="zt-reader"||a.itemId<0||a.attachmentId<0)&&o(a))}))}getDisplayText(){return this.follow!=="ob-note"||!this.file?.basename?"Zotero Annotations":`Zotero Annotations for ${this.file.basename}`}getIcon(){return"highlighter"}get lib(){return this.plugin.settings.database.citationLibrary}store;get follow(){return this.store.getState().follow}getState(){let r=super.getState(),n=this.store.getState(),o={itemId:n.doc?.docItem.itemID??-1,attachmentId:n.attachment?.itemID??-1,follow:n.follow};return{...r&&typeof r=="object"?r:{},...o}}async setState(r,n){await super.setState(r,n??{});let{itemId:o=-1,attachmentId:i=-1,follow:a="zt-reader"}=r;this.store.getState().setFollow(a),await this.store.getState().loadDocItem(o,i,this.lib)}async setStatePrev(r){await this.setState(r(this.getState()))}onSetFollowZt=async()=>{this.setStatePrev(r=>({...r,follow:"zt-reader"})),await this.setStatePrev(({attachmentId:r,...n})=>({...n,follow:"zt-reader",...this.#e===null?{attachmentId:r}:{itemId:this.#e}}))};onSetFollowOb=()=>{this.store.getState().setFollow("ob-note"),this.update()};onSetFollowNull=async()=>{let{plugin:r}=this,n=await of(r);if(!n)return;let{itemID:o}=n.value.item,i=r.settings.database.citationLibrary,a=await r.databaseAPI.getAttachments(o,i),s=await Hn(a);s&&await this.setStatePrev(({attachmentId:u,...l})=>({...l,follow:null,itemId:o,attachmentId:s.itemID}))};getContext(){let r=this,{plugin:n,store:o,app:i}=r;return{store:o,registerDbUpdate(a){return i.vault.on("zotero:db-refresh",a),()=>i.vault.off("zotero:db-refresh",a)},refreshConn:async()=>{await n.dbWorker.refresh({task:"dbConn"})},getImgSrc:a=>`app://local${Lr(a,n.settings.database.zoteroDataDir)}`,onShowDetails:async(a,s)=>{let u=o.getState(),l=u.attachmentID??void 0;if(a==="doc-item")await uo("note",{docItem:s,attachment:l},n);else{let c=u.doc?.docItem.itemID;if(!c)throw new Error("Missing doc item when showing annotation details");await uo("annotation",{docItem:c,attachment:l,annot:s},n)}},onDragStart:HN(n),onMoreOptions:GN(r),annotRenderer:VN(n),onSetFollow(a){let s=new ZN.Menu,u=o.getState().follow;if(u!=="zt-reader"&&s.addItem(l=>l.setIcon("book").setTitle("Follow Active Literature in Zotero Reader").onClick(r.onSetFollowZt)),u!=="ob-note"&&s.addItem(l=>l.setIcon("file-edit").setTitle("Follow Active Literature Note").onClick(r.onSetFollowOb)),s.addItem(l=>l.setIcon("file-lock-2").setTitle("Link with Selected Literature").onClick(async()=>{a.target.blur(),await r.onSetFollowNull()})),a.nativeEvent instanceof MouseEvent)s.showAtMouseEvent(a.nativeEvent);else{let c=a.target.getBoundingClientRect();s.showAtPosition({x:c.x,y:c.y})}}}}async onOpen(){await super.onOpen();let[r,n]=jo(this.plugin);n&&this.register(n),this.contentEl.empty(),this.contentEl.createDiv({cls:"pane-empty p-2",text:"Loading..."}),r.then(()=>{this.contentEl.empty(),q.render(m(Ar.Provider,{value:Zl,children:m(Be.Provider,{value:this.getContext(),children:m(Ms,{})})}),this.contentEl)}).catch(o=>{this.contentEl.empty(),console.error("Failed to load annot view: ",o),this.contentEl.createDiv({cls:"pane-empty p-2",text:"Failed to load, Check console for details"})}),this.registerEvent(this.plugin.server.on("bg:notify",(o,i)=>{if(i.event!=="reader/annot-select")return;let a=i.updates.filter(([,u])=>u).pop();if(!a)return;let[s]=a;this.highlightAnnot(s)}))}async onClose(){q.unmountComponentAtNode(this.contentEl),await super.onClose()}async highlightAnnot(r){let n=this.contentEl.querySelector(`.annot-preview[data-id="${r}"]`);n instanceof HTMLElement&&(n.addClass("select-flashing"),n.scrollIntoView({behavior:"smooth",block:"center"}),await sleep(1500),n.removeClass("select-flashing"))}};var op=require("obsidian");var YN=se(Qe(),1);var Bi=class extends Me{get fieldNames(){return this.noteFields.map(([t])=>t)}getField(t){return this.noteFields.find(([r])=>r===t)?.[1]}getDefaultField(){return{keyword:"",template:""}}getTemplate(t){return this.getField(t)?.template||`> <%= it[${JSON.stringify(t)}] %>::`}getDefaults(){return{noteFieldsSuggester:!1,noteFields:Object.entries({highlights:this.getDefaultField(),questions:this.getDefaultField()})}}async apply(t){switch(t){case"noteFields":return;default:(0,YN.default)(t)}}fromJSON(t){let{noteFields:r,...n}=t;super.fromJSON({...r?{noteFields:Object.entries(r)}:{},...n})}toJSON(){return{noteFields:Object.fromEntries(this.noteFields),noteFieldsSuggester:this.noteFieldsSuggester}}};var QN=/^\s*>\s*:(\w*)$/,ji=class extends op.EditorSuggest{use=Oe.this;settings=this.use(Bi);onTrigger(t,r,n){if(!this.settings.noteFieldsSuggester||this.settings.noteFields.length===0||!n||!Ei(n))return null;let o={line:t.line,ch:0},i=r.getRange(o,t);if(!QN.test(i))return null;let[,a]=i.match(QN);return{start:o,end:t,query:a}}getSuggestions(t){let{query:r}=t;if(!r)return this.settings.fieldNames.map(i=>({field:i,matches:[],score:0,query:i}));let n=(0,op.prepareFuzzySearch)(r);return this.settings.noteFields.flatMap(([i,a])=>{let s=a.keyword?a.keyword:i,u=n(s);return u?[{field:i,query:s,...u}]:[]}).sort((i,a)=>a.score-i.score)}selectSuggestion({field:t},r){if(!this.context){ne.error("No context available in NoteFieldsSuggest when selecting suggestion");return}let{start:n,end:o,editor:i}=this.context,a=this.settings.getTemplate(t);if(!a){ne.error("No template found for field",t);return}let s=GS(a,{field:t});i.replaceRange(s,n,o)}renderSuggestion({query:t,matches:r},n){let o=0;for(let[i,a]of r)o<i&&n.appendText(t.slice(o,i)),n.createSpan({text:t.slice(i,a),cls:"suggestion-highlight"}),o=a;o<t.length&&n.appendText(t.slice(o))}};Oe.def(ji,()=>new ji(Oe(be).app));var ip=class extends ce{plugin=this.use(be);onload(){this.plugin.registerEditorSuggest(this.use(ji))}};var co=require("obsidian");T();var nP=se(gy(),1);var eP=require("obsidian");T();var tP=se(gy(),1);function rP({view:e}){let[t,r]=$(()=>e.getFields()),n=(0,tP.useErrorHandler)();L(()=>{let i=(0,eP.debounce)(()=>{try{r(e.getFields())}catch(s){n(s)}},500,!0),a=e.app.metadataCache.on("changed",s=>{s.path===e.file.path&&i()});return()=>e.app.metadataCache.offref(a)},[e,n]),L(()=>e.registerUpdateHanlder(()=>{try{r(e.getFields())}catch(i){n(i)}}),[e,n]);let{run:o}=Xa((...i)=>{try{e.setField(...i)}catch(a){n(a)}},{wait:200});return t?m(Ng,{data:t,onSave:(i,a)=>{t?.[i]&&o(t[i][a]??null,i,a)},onAdd:i=>r(un(t,i,a=>Uo(a??[],""))),onChange:(i,a,s)=>{r(un(t,a,u=>u?Yd(u,s,()=>i):[i]))},onDelete:(i,a)=>{r(un(t,i,s=>s&&Qd(s,a))),o(null,i,a)}}):null}var up="zotero-note-fields",sp=class extends Di{constructor(r,n){super(r);this.plugin=n;this.contentEl.addClass("obzt")}getViewType(){return up}onload(){super.onload()}getDisplayText(){let r=this.plugin.app.workspace.getActiveFile(),n="";return r?.extension==="md"&&(n=` for ${r.basename}`),"Fields of Literature note"+n}getIcon(){return"layout-list"}update(){for(let r of this.#e)r()}registerUpdateHanlder(r){this.#e.push(r);let n=()=>{this.#e=this.#e.filter(o=>o!==r)};return this.register(n),n}#e=[];canAcceptExtension(r){return!0}ErrorFallback=aG.bind(this);async onOpen(){await super.onOpen();let[r,n]=dc(this.app,{});n&&this.register(n),await r;let o=this.ErrorFallback;q.render(m(Ar.Provider,{value:Zl,children:m(nP.ErrorBoundary,{FallbackComponent:o,children:m(rP,{view:this})})}),this.contentEl)}async onClose(){q.unmountComponentAtNode(this.contentEl),await super.onClose()}getFields(){try{if(!this.file)return null;let r=this.app.metadataCache.getFileCache(this.file);if(!r)return null;let n=r.frontmatter;if(n==null)return this.fieldsToExtract.reduce((i,a)=>(i[a]=[],i),{});if(!iG(n))throw new uu(`Frontmatter is not an record: ${n}`,"_",n);return this.fieldsToExtract.reduce((i,a)=>{if(!(a in n))return i[a]=[],i;let s=n[a];if(typeof s=="string"||typeof s=="number")throw new Wi(`Field ${a}`,a,n);if(!yy(s))throw new uu(`Field ${a} is not a string array`,a,n);return i[a]=s.map(u=>{if(!u)throw new Wi(`Field ${a}`,a,n);return u}),i},{})}catch(r){if(r instanceof uu)new co.Notice(r.message);else{if(r instanceof Wi)throw r;new co.Notice(`Failed to load note fields from file ${this.file.path}, check console for details`)}return console.error(r,this.file),null}}async setField(r,n,o){try{await this.app.fileManager.processFrontMatter(this.file,i=>{r!==null&&(r=r.trim(),r||(r=null));let a=i[n];if(a==null){if(!r)return;i[n]=[r];return}if(typeof a=="string"){r!==null?i[n]=[a,r]:i[n]=[a];return}if(typeof a=="number"&&r){i[n]=[String(a),r];return}if(!yy(a))throw new zi(`Cannot write to field ${n} due to existing values: ${a}`,n,a);let s=(c,f)=>{f?i[n][c]=f:(i[n].splice(c,1),i[n].length===0&&delete i[n])},u=c=>i[n].push(c),l=r;if(a[o]){s(o,l);return}l&&u(l)})}catch(i){i instanceof zi?new co.Notice(i.message):new co.Notice(`Failed to write note fields to file ${this.file}: ${i instanceof Error?i.message:"Check console for details"}`),console.error(i,this.file)}}get fieldsToExtract(){return this.plugin.settings.noteFields.fieldNames}async prepareFields(){try{await this.app.fileManager.processFrontMatter(this.file,r=>{for(let n of this.fieldsToExtract){let o=r[n];if(o!=null){if(typeof o=="string"){r[n]=[o];continue}if(typeof o=="number"){r[n]=[String(o)];continue}if(!yy(o))throw new zi(`Cannot write to field ${n} due to existing values: ${o}`,n,o);r[n]=o}}})}catch(r){r instanceof zi?new co.Notice(r.message):new co.Notice(`Failed to convert existing fields in file ${this.file}: ${r instanceof Error?r.message:"Check console for details"}`),console.error(r,this.file)}}},uu=class extends Error{constructor(r,n,o){super(r);this.fieldName=n;this.frontmatter=o}},Wi=class extends Error{constructor(r,n,o){super(r);this.fieldName=n;this.frontmatter=o}},zi=class extends Error{constructor(r,n,o){super(r);this.fieldName=n;this.frontmatter=o}},yy=e=>Array.isArray(e)&&e.every(t=>typeof t=="string"),iG=e=>typeof e=="object"&&e!==null;function aG({error:e,resetErrorBoundary:t}){return e instanceof Wi?m(Pg,{onClick:async()=>{await this.prepareFields();let r=this.app.metadataCache.on("changed",()=>{this.app.metadataCache.offref(r),t()});this.registerEvent(r)}}):m("div",{role:"alert",children:[m("p",{children:"Something went wrong:"}),m("pre",{children:e.message}),m("button",{onClick:t,children:"Try again"})]})}var Ir=require("obsidian");var cp=class extends ce{plugin=this.use(be);onload(){this.registerEvent(this.plugin.server.on("zotero/open",t=>this.onZtOpen(fl(t)))),this.registerEvent(this.plugin.server.on("zotero/export",t=>this.onZtExport(fl(t)))),this.registerEvent(this.plugin.server.on("zotero/update",t=>this.onZtExport(fl(t))))}async onZtOpen(t){if(t.type==="annotation"){new Ir.Notice("Not implemented yet");return}if(t.items.length<1){new Ir.Notice("No items to open");return}await this.plugin.noteFeatures.openNote(t.items[0])}async onZtUpdate(t){if(t.type==="annotation"){new Ir.Notice("Single annotation update not yet supported");return}if(t.items.length<1){new Ir.Notice("No items to open");return}if(t.items.length>1){new Ir.Notice("Multiple literature note update not yet supported");return}await this.plugin.noteFeatures.updateNoteFromId(t.items[0])}async onZtExport(t){if(t.type==="annotation"){new Ir.Notice("Not implemented yet");return}t.items.length<1?new Ir.Notice("No items to open"):t.items.length>1&&new Ir.Notice("Multiple items not yet supported");let{libraryID:r,id:n}=t.items[0],[o]=await this.plugin.databaseAPI.getItems([[n,r]]);if(!o){new Ir.Notice("Item not found: "+n);return}let i=await this.plugin.noteFeatures.createNoteForDocItemFull(o);await this.plugin.app.workspace.openLinkText(i,"",!1,{active:!0})}};var oP=require("obsidian");var sG=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to open/create literature note"},{command:"esc",purpose:"to dismiss"}],by=class extends ro{constructor(r){super(r);this.plugin=r;this.setInstructions(sG)}};async function vy(e){let t=await is(new by(e));if(!t)return!1;let{value:{item:r},evt:n}=t;if(await e.noteFeatures.openNote(r,!0))return!0;let o=await e.noteFeatures.createNoteForDocItemFull(r);return await e.app.workspace.openLinkText(o,"",oP.Keymap.isModEvent(n),{active:!0}),!0}var iP=require("@codemirror/state");async function aP(e,t){let{app:r,noteIndex:n,templateRenderer:o}=t,i=n.getNotesFor(e);if(i.length===0)return null;let a=t.database.settings.citationLibrary,s=await t.databaseAPI.getAttachments(e.itemID,a),u=new Set(i.flatMap(Os)),l=s.filter(h=>u.has(h.itemID)),c;l.length===0&&(c=await Hn(s),c&&(Zc(c,e),l.push(c)));let f=await wy(e,{all:s,selected:l},t),p=Object.values(f)[0],d={notes:i.length,addedAnnots:0,updatedAnnots:0};for(let h of i){let g=r.metadataCache.getCache(h);if(!g)continue;let y=Os(h);y||(c===void 0&&(c=await Hn(l)),c?y=[c.itemID]:y=[]);let w=r.vault.getAbstractFileByPath(h),x={plugin:t,sourcePath:h};if(t.settings.template.updateOverwrite){let S=o.renderNote(f[y[0]],x);await r.vault.modify(w,S);continue}let A=vn((g.sections?.filter(Ds)??[]).flatMap(S=>Fs(S.id).map(v=>[v,S.position])),Bn(([S])=>S),lr((S,v)=>({key:S,blocks:v.map(([_,I])=>I)}))),O=new Set(Object.values(g.blocks??{})?.filter(Ds).flatMap(S=>Fs(S.id).map(v=>v))),D=new Map(y.map(S=>[f[S],[]])),F=[];if(y.forEach(S=>{let v=f[S];v.annotations.forEach(_=>{let I=Mt(_,!0),W=A[I];if(W){if(!t.settings.template.updateAnnotBlock)return;let j=o.renderAnnot(_,v,x);F.push(...W.blocks.map(H=>({from:H.start.offset,to:H.end.offset,insert:j})))}else O.has(I)||D.get(v).push(_)})}),F.length>0){let S=iP.EditorState.create({doc:await r.vault.read(w)}).update({changes:F}).state.doc.toString();await r.vault.modify(w,S)}await o.setFrontmatterTo(w,Qt(p,x).docItem);let R=[...D].reduce((S,[v,_])=>{if(_.length===0)return S;let I=o.renderAnnots({...v,annotations:_},x);return(S&&S+`
`)+I},"");R&&await r.vault.append(w,R);let P=F.length,E=[...D.values()].reduce((S,v)=>S+v.length,0);d.updatedAnnots+=P,d.addedAnnots+=E}return d}async function wy(e,{all:t,selected:r},n){let o=n.database.settings.citationLibrary,i=await n.databaseAPI.getTags([[e.itemID,o]]);if(r.length===0)return{[-1]:{docItem:e,attachment:null,tags:i,allAttachments:t,annotations:[]}};let a={};for(let s of r){let u=s?await n.databaseAPI.getAnnotations(s.itemID,o):[];a[s.itemID]={docItem:e,attachment:s,tags:{...i,...await n.databaseAPI.getTags(u.map(l=>[l.itemID,o]))},allAttachments:t,annotations:u}}return a}var xy=class extends ce{plugin=this.use(be);noteFields=this.use(ip);protocol=this.use(cp);onload(){let{plugin:t}=this;t.addCommand({id:"note-quick-switcher",name:"Open quick switcher for literature notes",callback:()=>vy(t)}),t.registerView(np,n=>new rp(n,t)),t.registerView(Li,n=>new ep(n,t)),t.registerView($i,n=>new Xf(n,t)),t.registerEvent(t.app.workspace.on("file-menu",(n,o)=>{let i=t.templateLoader.getTemplateTypeOf(o);i&&n.addItem(a=>a.setIcon("edit").setTitle("Open Template Preview").onClick(()=>{uo(i,null,t)}))})),t.registerView(up,n=>new sp(n,t)),t.addCommand({id:"zotero-annot-view",name:"Open Zotero Annotation View in Side Panel",callback:()=>{app.workspace.ensureSideLeaf(np,"right",{active:!0,state:{file:app.workspace.getActiveFile()?.path}})}}),t.addCommand({id:"zotero-note-fields",name:"Open Literature Note Fields in Side Panel",callback:()=>{app.workspace.ensureSideLeaf(up,"right",{active:!0,state:{file:app.workspace.getActiveFile()?.path}})}}),t.addCommand({id:"insert-markdown-citation",name:"Insert Markdown citation",editorCallback:n=>Ug(n,t)}),t.registerEditorSuggest(new Bs(t));let r=async n=>{let o=t.settings.database.citationLibrary,i=Zn(n);if(!i)return new Kr.Notice("Cannot get zotero item key from file name"),!1;let[a]=await t.databaseAPI.getItems([[i,o]]);if(!a)return new Kr.Notice("Cannot find zotero item with key "+i),!1;await this.updateNote(a)};t.addCommand({id:"update-literature-note",name:"Update Literature Note",editorCheckCallback(n,o,i){let a=i.file&&Ei(i.file);if(n)return!!a;a&&r(i.file)}}),t.registerEvent(t.app.workspace.on("file-menu",(n,o)=>{Ei(o)&&n.addItem(i=>i.setTitle("Update Literature Note").setIcon("sync").onClick(()=>r(o)))}))}async openNote(t,r=!1){let{workspace:n}=this.plugin.app,{noteIndex:o}=this.plugin,i=o.getNotesFor(t);if(!i.length)return!r&&new Kr.Notice(`No literature note found for zotero item with key ${t.key}`),!1;let a=i.sort().shift();return await n.openLinkText(a,"",!1,{active:!0}),!0}async createNoteForDocItem(t,r){let{noteIndex:n}=this.plugin,o=n.getNotesFor(t);if(o.length)throw new lp(o,t.key);let{vault:i,fileManager:a}=this.plugin.app,{literatureNoteFolder:s}=this.plugin.settings.noteIndex,u=this.plugin.templateRenderer,l=(0,sP.join)(s,u.renderFilename(t)),c=i.getAbstractFileByPath(l);if(c&&Zn(c))throw new lp([l],t.key);return await a.createNewMarkdownFile(i.getRoot(),l,r(u,{plugin:this.plugin,sourcePath:l}))}async createNoteForDocItemFull(t){let r=this.plugin.database.settings.citationLibrary,n=await this.plugin.databaseAPI.getAttachments(t.itemID,r),o=await Hn(n);o&&Zc(o,t);let i=await wy(t,{all:n,selected:o?[o]:[]},this.plugin),a=Object.values(i)[0];return(await this.createNoteForDocItem(t,(u,l)=>u.renderNote(a,l))).path}async updateNoteFromId(t){let{noteIndex:r,databaseAPI:n}=this.plugin;if(!r.getNotesFor(t).length){new Kr.Notice(`No literature note found for zotero item with key ${t.key}`);return}let[i]=await n.getItems([[t.key,t.libraryID]]);if(!i){new Kr.Notice(`Cannot find zotero item with key ${t.key}`);return}await this.updateNote(i)}async updateNote(t){let r=await aP(t,this.plugin);r?r.addedAnnots>0||r.updatedAnnots>0?new Kr.Notice(`Affected ${r.notes} notes, annotations: ${r.addedAnnots} added, ${r.updatedAnnots} updated`):new Kr.Notice(`Affected ${r.notes} notes, no annotation updated`):new Kr.Notice("No note found for this literature")}},uP=xy,lp=class extends Error{constructor(r,n){super(`Note linked to ${n} already exists: ${r.join(",")}`);this.targets=r;this.key=n;this.name="NoteExistsError"}};var lP=se(Ud(),1);var pp=require("obsidian");var cP='"use strict";var Jn=Object.create;var Ge=Object.defineProperty,Yn=Object.defineProperties,Xn=Object.getOwnPropertyDescriptor,ei=Object.getOwnPropertyDescriptors,ri=Object.getOwnPropertyNames,ct=Object.getOwnPropertySymbols,ti=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable;var pt=(e,r,t)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ee=(e,r)=>{for(var t in r||(r={}))ft.call(r,t)&&pt(e,t,r[t]);if(ct)for(var t of ct(r))ni.call(r,t)&&pt(e,t,r[t]);return e},Se=(e,r)=>Yn(e,ei(r));var fe=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ht=(e,r)=>{for(var t in r)Ge(e,t,{get:r[t],enumerable:!0})},ii=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of ri(r))!ft.call(e,i)&&i!==t&&Ge(e,i,{get:()=>r[i],enumerable:!(n=Xn(r,i))||n.enumerable});return e};var he=(e,r,t)=>(t=e!=null?Jn(ti(e)):{},ii(r||!e||!e.__esModule?Ge(t,"default",{value:e,enumerable:!0}):t,e));var mt=fe((exports,module)=>{(function(r,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define("workerpool",[],t):typeof exports=="object"?exports.workerpool=t():r.workerpool=t()})(typeof self!="undefined"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,r,t){"use strict";t.r(r),t.d(r,{IFrameWorker:function(){return i}});function n(){let o=document.createElement("iframe");return o.width=o.height=o.frameBorder="0",o.classList.add("iframe-worker"),o.style.display="contents",o}class i{constructor(a,u){if(this.scriptText=a,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=f=>{f.source===this.worker&&(f.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:f.data})),this.onmessage&&this.onmessage(f))},this.handleError=(f,l,E,g,h)=>{if(l===this.scriptText.toString()){let m=new ErrorEvent("error",{message:f,filename:l,lineno:E,colno:g,error:h});this.dispatchEvent(m),this.onerror&&this.onerror(m)}},typeof u!="undefined")throw new TypeError("Options are not supported for iframe workers");let s=new EventTarget;this.addEventListener=s.addEventListener.bind(s),this.removeEventListener=s.removeEventListener.bind(s),this.dispatchEvent=s.dispatchEvent.bind(s),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=\n(message, origin) => {\n  parent.postMessage(message, origin || "*")\n};window.importScripts=\n(...urls) => urls.reduce((promise, url) => (\n  promise.then(() => new Promise(resolve => {\n    const script = document.createElement("script")\n    script.src = url\n    script.addEventListener("load", () => resolve())\n    document.body.appendChild(script)\n  }))\n), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${a.substring(0,50)}",error:ev.error}))})</script><script type="module">${a}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((f,l)=>{this.worker.onload=f,this.worker.onerror=l})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(a){(async()=>{try{await this.ready}catch(u){}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:a}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,r,t){var n=t(446),i=t(518),o=t(722),a=t(393),u=new a;function s(h,m){typeof h=="string"?this.script=h||null:(this.script=null,m=h),this.workers=[],this.tasks=[],m=m||{},this.name=m.name,this.forkArgs=Object.freeze(m.forkArgs||[]),this.forkOpts=Object.freeze(m.forkOpts||{}),this.debugPortStart=m.debugPortStart||43210,this.nodeWorker=m.nodeWorker,this.workerType=m.workerType||m.nodeWorker||"auto",this.maxQueueSize=m.maxQueueSize||1/0,this.onCreateWorker=m.onCreateWorker||function(){return null},this.onTerminateWorker=m.onTerminateWorker||function(){return null},m&&"maxWorkers"in m?(f(m.maxWorkers),this.maxWorkers=m.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),m&&"minWorkers"in m&&(m.minWorkers==="max"?this.minWorkers=this.maxWorkers:(l(m.minWorkers),this.minWorkers=m.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}s.prototype.exec=function(h,m,d){if(m&&!Array.isArray(m))throw new TypeError(\'Array expected as argument "params"\');if(typeof h=="string"){var b=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var x=this.tasks,q={method:h,params:m,resolver:b,timeout:null,options:d};x.push(q);var C=b.promise.timeout;return b.promise.timeout=function(I){return x.indexOf(q)!==-1?(q.timeout=I,b.promise):C.call(b.promise,I)},this._next(),b.promise}else{if(typeof h=="function")return this.exec("run",[String(h),m]);throw new TypeError(\'Function or string expected as argument "method"\')}},s.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var h=this;return this.exec("methods").then(function(m){var d={};return m.forEach(function(b){d[b]=function(){return h.exec(b,Array.prototype.slice.call(arguments))}}),d})},s.prototype._next=function(){if(this.tasks.length>0){var h=this._getWorker();if(h){var m=this,d=this.tasks.shift();if(d.resolver.promise.pending){var b=h.exec(d.method,d.params,d.resolver,d.options).then(m._boundNext).catch(function(){if(h.terminated)return m._removeWorker(h)}).then(function(){m._next()});typeof d.timeout=="number"&&b.timeout(d.timeout)}else m._next()}}},s.prototype._getWorker=function(){for(var h=this.workers,m=0;m<h.length;m++){var d=h[m];if(d.busy()===!1)return d}return h.length<this.maxWorkers?(d=this._createWorkerHandler(),h.push(d),d):null},s.prototype._removeWorker=function(h){var m=this;return u.releasePort(h.debugPort),this._removeWorkerFromList(h),this._ensureMinWorkers(),new n(function(d,b){h.terminate(!1,function(x){m.onTerminateWorker({forkArgs:h.forkArgs,forkOpts:h.forkOpts,script:h.script}),x?b(x):d(h)})})},s.prototype._removeWorkerFromList=function(h){var m=this.workers.indexOf(h);m!==-1&&this.workers.splice(m,1)},s.prototype.terminate=function(h,m){var d=this;this.tasks.forEach(function(L){L.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var b=function(I){this._removeWorkerFromList(I)},x=b.bind(this),q=[],C=this.workers.slice();return C.forEach(function(L){var I=L.terminateAndNotify(h,m).then(x).always(function(){d.onTerminateWorker({forkArgs:L.forkArgs,forkOpts:L.forkOpts,script:L.script})});q.push(I)}),n.all(q)},s.prototype.stats=function(){var h=this.workers.length,m=this.workers.filter(function(d){return d.busy()}).length;return{totalWorkers:h,busyWorkers:m,idleWorkers:h-m,pendingTasks:this.tasks.length,activeTasks:m}},s.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var h=this.workers.length;h<this.minWorkers;h++)this.workers.push(this._createWorkerHandler())},s.prototype._createWorkerHandler=function(){var h=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new i(h.script||this.script,{forkArgs:h.forkArgs||this.forkArgs,forkOpts:h.forkOpts||this.forkOpts,debugPort:u.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function f(h){if(!E(h)||!g(h)||h<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function l(h){if(!E(h)||!g(h)||h<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function E(h){return typeof h=="number"}function g(h){return Math.round(h)==h}e.exports=s},446:function(e){"use strict";function r(o,a){var u=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var s=[],f=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var l=function(m,d){s.push(m),f.push(d)};this.then=function(h,m){return new r(function(d,b){var x=h?t(h,d,b):d,q=m?t(m,d,b):b;l(x,q)},u)};var E=function(m){return u.resolved=!0,u.rejected=!1,u.pending=!1,s.forEach(function(d){d(m)}),l=function(b,x){b(m)},E=g=function(){},u},g=function(m){return u.resolved=!1,u.rejected=!0,u.pending=!1,f.forEach(function(d){d(m)}),l=function(b,x){x(m)},E=g=function(){},u};this.cancel=function(){return a?a.cancel():g(new n),u},this.timeout=function(h){if(a)a.timeout(h);else{var m=setTimeout(function(){g(new i("Promise timed out after "+h+" ms"))},h);u.always(function(){clearTimeout(m)})}return u},o(function(h){E(h)},function(h){g(h)})}function t(o,a,u){return function(s){try{var f=o(s);f&&typeof f.then=="function"&&typeof f.catch=="function"?f.then(a,u):a(f)}catch(l){u(l)}}}r.prototype.catch=function(o){return this.then(null,o)},r.prototype.always=function(o){return this.then(o,o)},r.all=function(o){return new r(function(a,u){var s=o.length,f=[];s?o.forEach(function(l,E){l.then(function(g){f[E]=g,s--,s==0&&a(f)},function(g){s=0,u(g)})}):a(f)})},r.defer=function(){var o={};return o.promise=new r(function(a,u){o.resolve=a,o.reject=u}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",r.CancellationError=n;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",r.TimeoutError=i,e.exports=r},518:function(e,r,t){"use strict";function n(S,T){var k=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!k){if(Array.isArray(S)||(k=i(S))||T&&S&&typeof S.length=="number"){k&&(S=k);var _=0,v=function(){};return{s:v,n:function(){return _>=S.length?{done:!0}:{done:!1,value:S[_++]}},e:function(N){throw N},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O=!0,M=!1,z;return{s:function(){k=k.call(S)},n:function(){var N=k.next();return O=N.done,N},e:function(N){M=!0,z=N},f:function(){try{!O&&k.return!=null&&k.return()}finally{if(M)throw z}}}}function i(S,T){if(S){if(typeof S=="string")return o(S,T);var k=Object.prototype.toString.call(S).slice(8,-1);if(k==="Object"&&S.constructor&&(k=S.constructor.name),k==="Map"||k==="Set")return Array.from(S);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return o(S,T)}}function o(S,T){(T==null||T>S.length)&&(T=S.length);for(var k=0,_=new Array(T);k<T;k++)_[k]=S[k];return _}function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(S)}var u=t(446),s=t(722),f=t(781),l=t(162),E=l.IFrameWorker,g="__workerpool-terminate__",h=1e3;function m(){var S=b();if(!S)throw new Error("WorkerPool: workerType = \'thread\' is not supported, Node >= 11.7.0 required");return S}function d(){if(typeof Worker!="function"&&((typeof Worker=="undefined"?"undefined":a(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function b(){try{return f("worker_threads")}catch(S){if(a(S)==="object"&&S!==null&&S.code==="MODULE_NOT_FOUND")return null;throw S}}function x(){if(s.platform==="browser"){if(typeof Blob=="undefined")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var S=new Blob([t(710)],{type:"text/javascript"});return window.URL.createObjectURL(S)}else return __dirname+"/worker.js"}function q(S,T){if(T.workerType==="iframe")return C(S,E,T);if(T.workerType==="web")return d(),C(S,Worker,T);if(T.workerType==="thread")return k=m(),L(S,k);if(T.workerType==="process"||!T.workerType)return I(S,y(T),f("child_process"));if(s.platform==="browser")return d(),C(S,Worker);var k=b();return k?L(S,k):I(S,y(T),f("child_process"))}function C(S,T,k){var _=new T(S,k!=null&&k.name?{name:"".concat(k.name,"-").concat(Date.now())}:void 0);return _.isBrowserWorker=!0,_.on=function(v,O){this.addEventListener(v,function(M){O(M.data)})},_.send=function(v){this.postMessage(v)},_}function L(S,T){var k=new T.Worker(S,{stdout:!1,stderr:!1});return k.isWorkerThread=!0,k.send=function(_){this.postMessage(_)},k.kill=function(){return this.terminate(),!0},k.disconnect=function(){this.terminate()},k}function I(S,T,k){var _=k.fork(S,T.forkArgs,T.forkOpts);return _.isChildProcess=!0,_}function y(S){S=S||{};var T=process.execArgv.join(" "),k=T.indexOf("--inspect")!==-1,_=T.indexOf("--debug-brk")!==-1,v=[];return k&&(v.push("--inspect="+S.debugPort),_&&v.push("--debug-brk")),process.execArgv.forEach(function(O){O.indexOf("--max-old-space-size")>-1&&v.push(O)}),Object.assign({},S,{forkArgs:S.forkArgs,forkOpts:Object.assign({},S.forkOpts,{execArgv:(S.forkOpts&&S.forkOpts.execArgv||[]).concat(v)})})}function D(S){for(var T=new Error(""),k=Object.keys(S),_=0;_<k.length;_++)T[k[_]]=S[k[_]];return T}function B(S,T){var k=this,_=T||{};this.script=S||x(),this.worker=q(this.script,_),this.debugPort=_.debugPort,this.forkOpts=_.forkOpts,this.forkArgs=_.forkArgs,S||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(z){if(!k.terminated)if(typeof z=="string"&&z==="ready")k.worker.ready=!0,O();else{var W=z.id,N=k.processing[W];N!==void 0&&(z.isEvent?N.options&&typeof N.options.on=="function"&&N.options.on(z.payload):(delete k.processing[W],k.terminating===!0&&k.terminate(),z.error?N.resolver.reject(D(z.error)):N.resolver.resolve(z.result)))}});function v(z){k.terminated=!0;for(var W in k.processing)k.processing[W]!==void 0&&k.processing[W].resolver.reject(z);k.processing=Object.create(null)}function O(){var z=n(k.requestQueue.splice(0)),W;try{for(z.s();!(W=z.n()).done;){var N=W.value;k.worker.send(N)}}catch($){z.e($)}finally{z.f()}}var M=this.worker;this.worker.on("error",v),this.worker.on("exit",function(z,W){var N=`Workerpool Worker terminated Unexpectedly\n`;N+="    exitCode: `"+z+"`\\n",N+="    signalCode: `"+W+"`\\n",N+="    workerpool.script: `"+k.script+"`\\n",N+="    spawnArgs: `"+M.spawnargs+"`\\n",N+="    spawnfile: `"+M.spawnfile+"`\\n",N+="    stdout: `"+M.stdout+"`\\n",N+="    stderr: `"+M.stderr+"`\\n",v(new Error(N))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}B.prototype.methods=function(){return this.exec("methods")},B.prototype.exec=function(S,T,k,_){k||(k=u.defer());var v=++this.lastId;this.processing[v]={id:v,resolver:k,options:_};var O={id:v,method:S,params:T};this.terminated?k.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(O):this.requestQueue.push(O);var M=this;return k.promise.catch(function(z){if(z instanceof u.CancellationError||z instanceof u.TimeoutError)return delete M.processing[v],M.terminateAndNotify(!0).then(function(){throw z},function(W){throw W});throw z})},B.prototype.busy=function(){return Object.keys(this.processing).length>0},B.prototype.terminate=function(S,T){var k=this;if(S){for(var _ in this.processing)this.processing[_]!==void 0&&this.processing[_].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var v=function(z){if(k.terminated=!0,k.worker!=null&&k.worker.removeAllListeners&&k.worker.removeAllListeners("message"),k.worker=null,k.terminating=!1,k.terminationHandler)k.terminationHandler(z,k);else if(z)throw z};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){v(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var O=setTimeout(function(){k.worker&&k.worker.kill()},h);this.worker.once("exit",function(){clearTimeout(O),k.worker&&(k.worker.killed=!0),v()}),this.worker.ready?this.worker.send(g):this.requestQueue.push(g)}else this.worker.kill(),this.worker.killed=!0,v();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");v()}},B.prototype.terminateAndNotify=function(S,T){var k=u.defer();return T&&(k.promise.timeout=T),this.terminate(S,function(_,v){_?k.reject(_):k.resolve(v)}),k.promise},e.exports=B,e.exports._tryRequireWorkerThreads=b,e.exports._setupProcessWorker=I,e.exports._setupBrowserWorker=C,e.exports._setupWorkerThreadWorker=L,e.exports.ensureWorkerThreads=m},393:function(e){"use strict";var r=65535;e.exports=t;function t(){this.ports=Object.create(null),this.length=0}t.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=r)throw new Error("WorkerPool debug port limit reached: "+n+">= "+r);return this.ports[n]=!0,this.length++,n},t.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,r,t){var n=t(781),i=function(s){return typeof s!="undefined"&&s.versions!=null&&s.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process!="undefined"&&i(process)?"node":"browser";var o=a("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window!="undefined",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function a(u){try{return n(u)}catch(s){return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\\\" + module + \\\\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self!="undefined"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,r){addEventListener(e,function(t){r(t.data)})},worker.send=function(e){postMessage(e)};else if(typeof process!="undefined"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(r,t){return Object.defineProperty(r,t,{value:e[t],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(r,t){var n=new Function("return ("+r+").apply(null, arguments);");return n.apply(n,t)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(r){currentRequestId=e.id;var t=r.apply(r,e.params);isPromise(t)?t.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:t,error:null}),currentRequestId=null)}else throw new Error(\'Unknown method "\'+e.method+\'"\')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}(function(){__webpack_require__.d=function(e,r){for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}})(),function(){__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){__webpack_require__.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,r=__webpack_require__(722);e.pool=function(n,i){var o=__webpack_require__(799);return new o(n,i)},e.worker=function(n){var i=__webpack_require__(52);i.add(n)},e.workerEmit=function(n){var i=__webpack_require__(52);i.emit(n)},e.Promise=__webpack_require__(446),e.platform=r.platform,e.isMainThread=r.isMainThread,e.cpus=r.cpus}(),__webpack_exports__}()})});var Nr=fe((hc,Yt)=>{Yt.exports=function(r){return r!=null&&r.constructor!=null&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}});var sn=fe((mc,an)=>{"use strict";var ir=Object.prototype.hasOwnProperty,un=Object.prototype.toString,Xt=Object.defineProperty,en=Object.getOwnPropertyDescriptor,rn=function(r){return typeof Array.isArray=="function"?Array.isArray(r):un.call(r)==="[object Array]"},tn=function(r){if(!r||un.call(r)!=="[object Object]")return!1;var t=ir.call(r,"constructor"),n=r.constructor&&r.constructor.prototype&&ir.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!t&&!n)return!1;var i;for(i in r);return typeof i=="undefined"||ir.call(r,i)},nn=function(r,t){Xt&&t.name==="__proto__"?Xt(r,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):r[t.name]=t.newValue},on=function(r,t){if(t==="__proto__")if(ir.call(r,t)){if(en)return en(r,t).value}else return;return r[t]};an.exports=function e(){var r,t,n,i,o,a,u=arguments[0],s=1,f=arguments.length,l=!1;for(typeof u=="boolean"&&(l=u,u=arguments[1]||{},s=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});s<f;++s)if(r=arguments[s],r!=null)for(t in r)n=on(u,t),i=on(r,t),u!==i&&(l&&i&&(tn(i)||(o=rn(i)))?(o?(o=!1,a=n&&rn(n)?n:[]):a=n&&tn(n)?n:{},nn(u,{name:t,newValue:e(l,a,i)})):typeof i!="undefined"&&nn(u,{name:t,newValue:i}));return u}});var An=fe((Vc,vn)=>{vn.exports={trueFunc:function(){return!0},falseFunc:function(){return!1}}});var et=fe(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});function fu(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="-"||e==="_"}te.isIdentStart=fu;function hu(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="-"||e==="_"}te.isIdent=hu;function mu(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}te.isHex=mu;function du(e){for(var r=e.length,t="",n=0;n<r;){var i=e.charAt(n);if(te.identSpecialChars[i])t+="\\\\"+i;else if(i==="_"||i==="-"||i>="A"&&i<="Z"||i>="a"&&i<="z"||n!==0&&i>="0"&&i<="9")t+=i;else{var o=i.charCodeAt(0);if((o&63488)===55296){var a=e.charCodeAt(n++);if((o&64512)!==55296||(a&64512)!==56320)throw Error("UCS-2(decode): illegal sequence");o=((o&1023)<<10)+(a&1023)+65536}t+="\\\\"+o.toString(16)+" "}n++}return t}te.escapeIdentifier=du;function gu(e){for(var r=e.length,t="",n=0,i;n<r;){var o=e.charAt(n);o===\'"\'?o=\'\\\\"\':o==="\\\\"?o="\\\\\\\\":(i=te.strReplacementsRev[o])!==void 0&&(o=i),t+=o,n++}return\'"\'+t+\'"\'}te.escapeStr=gu;te.identSpecialChars={"!":!0,\'"\':!0,"#":!0,$:!0,"%":!0,"&":!0,"\'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0};te.strReplacementsRev={"\\n":"\\\\n","\\r":"\\\\r","	":"\\\\t","\\f":"\\\\f","\\v":"\\\\v"};te.singleQuoteEscapeChars={n:`\n`,r:"\\r",t:"	",f:"\\f","\\\\":"\\\\","\'":"\'"};te.doubleQuotesEscapeChars={n:`\n`,r:"\\r",t:"	",f:"\\f","\\\\":"\\\\",\'"\':\'"\'}});var In=fe(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});var ue=et();function xu(e,r,t,n,i,o){var a=e.length,u="";function s(d,b){var x="";for(r++,u=e.charAt(r);r<a;){if(u===d)return r++,x;if(u==="\\\\"){r++,u=e.charAt(r);var q=void 0;if(u===d)x+=d;else if((q=b[u])!==void 0)x+=q;else if(ue.isHex(u)){var C=u;for(r++,u=e.charAt(r);ue.isHex(u);)C+=u,r++,u=e.charAt(r);u===" "&&(r++,u=e.charAt(r)),x+=String.fromCharCode(parseInt(C,16));continue}else x+=u}else x+=u;r++,u=e.charAt(r)}return x}function f(){var d="";for(u=e.charAt(r);r<a;){if(ue.isIdent(u))d+=u;else if(u==="\\\\"){if(r++,r>=a)throw Error("Expected symbol but end of file reached.");if(u=e.charAt(r),ue.identSpecialChars[u])d+=u;else if(ue.isHex(u)){var b=u;for(r++,u=e.charAt(r);ue.isHex(u);)b+=u,r++,u=e.charAt(r);u===" "&&(r++,u=e.charAt(r)),d+=String.fromCharCode(parseInt(b,16));continue}else d+=u}else return d;r++,u=e.charAt(r)}return d}function l(){u=e.charAt(r);for(var d=!1;u===" "||u==="	"||u===`\n`||u==="\\r"||u==="\\f";)d=!0,r++,u=e.charAt(r);return d}function E(){var d=g();if(r<a)throw Error(\'Rule expected but "\'+e.charAt(r)+\'" found.\');return d}function g(){var d=h();if(!d)return null;var b=d;for(u=e.charAt(r);u===",";){if(r++,l(),b.type!=="selectors"&&(b={type:"selectors",selectors:[d]}),d=h(),!d)throw Error(\'Rule expected after ",".\');b.selectors.push(d)}return b}function h(){l();var d={type:"ruleSet"},b=m();if(!b)return null;for(var x=d;b&&(b.type="rule",x.rule=b,x=b,l(),u=e.charAt(r),!(r>=a||u===","||u===")"));)if(i[u]){var q=u;if(r++,l(),b=m(),!b)throw Error(\'Rule expected after "\'+q+\'".\');b.nestingOperator=q}else b=m(),b&&(b.nestingOperator=null);return d}function m(){for(var d=null;r<a;)if(u=e.charAt(r),u==="*")r++,(d=d||{}).tagName="*";else if(ue.isIdentStart(u)||u==="\\\\")(d=d||{}).tagName=f();else if(u===".")r++,d=d||{},(d.classNames=d.classNames||[]).push(f());else if(u==="#")r++,(d=d||{}).id=f();else if(u==="["){r++,l();var b={name:f()};if(l(),u==="]")r++;else{var x="";if(n[u]&&(x=u,r++,u=e.charAt(r)),r>=a)throw Error(\'Expected "=" but end of file reached.\');if(u!=="=")throw Error(\'Expected "=" but "\'+u+\'" found.\');b.operator=x+"=",r++,l();var q="";if(b.valueType="string",u===\'"\')q=s(\'"\',ue.doubleQuotesEscapeChars);else if(u==="\'")q=s("\'",ue.singleQuoteEscapeChars);else if(o&&u==="$")r++,q=f(),b.valueType="substitute";else{for(;r<a&&u!=="]";)q+=u,r++,u=e.charAt(r);q=q.trim()}if(l(),r>=a)throw Error(\'Expected "]" but end of file reached.\');if(u!=="]")throw Error(\'Expected "]" but "\'+u+\'" found.\');r++,b.value=q}d=d||{},(d.attrs=d.attrs||[]).push(b)}else if(u===":"){r++;var C=f(),L={name:C};if(u==="("){r++;var I="";if(l(),t[C]==="selector")L.valueType="selector",I=g();else{if(L.valueType=t[C]||"string",u===\'"\')I=s(\'"\',ue.doubleQuotesEscapeChars);else if(u==="\'")I=s("\'",ue.singleQuoteEscapeChars);else if(o&&u==="$")r++,I=f(),L.valueType="substitute";else{for(;r<a&&u!==")";)I+=u,r++,u=e.charAt(r);I=I.trim()}l()}if(r>=a)throw Error(\'Expected ")" but end of file reached.\');if(u!==")")throw Error(\'Expected ")" but "\'+u+\'" found.\');r++,L.value=I}d=d||{},(d.pseudos=d.pseudos||[]).push(L)}else break;return d}return E()}rt.parseCssSelector=xu});var Ln=fe(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});var ne=et();function cr(e){var r="";switch(e.type){case"ruleSet":for(var t=e.rule,n=[];t;)t.nestingOperator&&n.push(t.nestingOperator),n.push(cr(t)),t=t.rule;r=n.join(" ");break;case"selectors":r=e.selectors.map(cr).join(", ");break;case"rule":e.tagName&&(e.tagName==="*"?r="*":r=ne.escapeIdentifier(e.tagName)),e.id&&(r+="#"+ne.escapeIdentifier(e.id)),e.classNames&&(r+=e.classNames.map(function(i){return"."+ne.escapeIdentifier(i)}).join("")),e.attrs&&(r+=e.attrs.map(function(i){return"operator"in i?i.valueType==="substitute"?"["+ne.escapeIdentifier(i.name)+i.operator+"$"+i.value+"]":"["+ne.escapeIdentifier(i.name)+i.operator+ne.escapeStr(i.value)+"]":"["+ne.escapeIdentifier(i.name)+"]"}).join("")),e.pseudos&&(r+=e.pseudos.map(function(i){return i.valueType?i.valueType==="selector"?":"+ne.escapeIdentifier(i.name)+"("+cr(i.value)+")":i.valueType==="substitute"?":"+ne.escapeIdentifier(i.name)+"($"+i.value+")":i.valueType==="numeric"?":"+ne.escapeIdentifier(i.name)+"("+i.value+")":":"+ne.escapeIdentifier(i.name)+"("+ne.escapeIdentifier(i.value)+")":":"+ne.escapeIdentifier(i.name)}).join(""));break;default:throw Error(\'Unknown entity type: "\'+e.type+\'".\')}return r}tt.renderEntity=cr});var On=fe(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var ku=In(),wu=Ln(),yu=function(){function e(){this.pseudos={},this.attrEqualityMods={},this.ruleNestingOperators={},this.substitutesEnabled=!1}return e.prototype.registerSelectorPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.pseudos[o]="selector"}return this},e.prototype.unregisterSelectorPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.pseudos[o]}return this},e.prototype.registerNumericPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.pseudos[o]="numeric"}return this},e.prototype.unregisterNumericPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.pseudos[o]}return this},e.prototype.registerNestingOperators=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.ruleNestingOperators[o]=!0}return this},e.prototype.unregisterNestingOperators=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.ruleNestingOperators[o]}return this},e.prototype.registerAttrEqualityMods=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.attrEqualityMods[o]=!0}return this},e.prototype.unregisterAttrEqualityMods=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.attrEqualityMods[o]}return this},e.prototype.enableSubstitutes=function(){return this.substitutesEnabled=!0,this},e.prototype.disableSubstitutes=function(){return this.substitutesEnabled=!1,this},e.prototype.parse=function(r){return ku.parseCssSelector(r,0,this.pseudos,this.attrEqualityMods,this.ruleNestingOperators,this.substitutesEnabled)},e.prototype.render=function(r){return wu.renderEntity(r).trim()},e}();nt.CssSelectorParser=yu});var Nn=fe(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});function Bn(e,r){if(r)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}fr.assertNever=Bn;fr.default=Bn});var jn=he(mt(),1);var dr={};ht(dr,{loggerCategory:()=>dt});var dt=e=>`obsidian-zotero:${e}`;var gt=(e,r,t=!0)=>(n,...i)=>{let o="";for(let a=0;a<n.length;a++)a>0&&(o+=e(i[a-1])),o+=(t?n.raw:n)[a];return r(o)},kr=(e=!0,r)=>gt(t=>t,t=>new RegExp(e?"^"+t+"$":t,r),!0),gr=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,xr=String.raw`\\d+`,xt=e=>{let r={annotKey:gr,parentKey:gr,groupID:xr,page:xr};if(e)for(let t in r)r[t]=`(${r[t]})`;return gt(t=>r[t],t=>t)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Fu=kr()`${gr}(?:g${xr})?`,_u=kr()`${xt(!0)}`,Iu=kr()`(?:${xt(!1)}n?)+`;function kt(e,r){let t=Object.keys(r).map(n=>oi(e,n,r[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function oi(e,r,t){let n=e[r],i=e.hasOwnProperty(r),o=t(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(a,o),e[r]=a,u;function a(...s){return o===n&&e[r]===a&&u(),o.apply(this,s)}function u(){e[r]===a&&(i?e[r]=n:delete e[r]),o!==n&&(o=n,Object.setPrototypeOf(a,n||Function))}}var wt=e=>{let r=t=>async(...n)=>{try{return await t(...n)}catch(i){throw console.error(i),i}};return kt(e,Object.fromEntries(Object.keys(e).map(t=>[t,r]))),e};function wr(e,r){let t=(r||{}).includeImageAlt;return bt(e,typeof t=="boolean"?t:!0)}function bt(e,r){return ui(e)&&("value"in e&&e.value||r&&"alt"in e&&e.alt||"children"in e&&yt(e.children,r))||Array.isArray(e)&&yt(e,r)||""}function yt(e,r){let t=[],n=-1;for(;++n<e.length;)t[n]=bt(e[n],r);return t.join("")}function ui(e){return!!(e&&typeof e=="object")}function Z(e,r,t,n){let i=e.length,o=0,a;if(r<0?r=-r>i?0:i+r:r=r>i?i:r,t=t>0?t:0,n.length<1e4)a=Array.from(n),a.unshift(r,t),[].splice.apply(e,a);else for(t&&[].splice.apply(e,[r,t]);o<n.length;)a=n.slice(o,o+1e4),a.unshift(r,0),[].splice.apply(e,a),o+=1e4,r+=1e4}function X(e,r){return e.length>0?(Z(e,e.length,0,r),e):r}var Et={}.hasOwnProperty;function St(e){let r={},t=-1;for(;++t<e.length;)ai(r,e[t]);return r}function ai(e,r){let t;for(t in r){let i=(Et.call(e,t)?e[t]:void 0)||(e[t]={}),o=r[t],a;for(a in o){Et.call(i,a)||(i[a]=[]);let u=o[a];si(i[a],Array.isArray(u)?u:u?[u]:[])}}}function si(e,r){let t=-1,n=[];for(;++t<r.length;)(r[t].add==="after"?e:n).push(r[t]);Z(e,0,0,n)}var vt=/[!-/:-@[-`{-~\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;var re=ge(/[A-Za-z]/),Re=ge(/\\d/),At=ge(/[\\dA-Fa-f]/),ee=ge(/[\\dA-Za-z]/),Ct=ge(/[!-/:-@[-`{-~]/),yr=ge(/[#-\'*+\\--9=?A-Z^-~]/);function Be(e){return e!==null&&(e<32||e===127)}function G(e){return e!==null&&(e<0||e===32)}function F(e){return e!==null&&e<-2}function j(e){return e===-2||e===-1||e===32}var Tt=ge(/\\s/),qt=ge(vt);function ge(e){return r;function r(t){return t!==null&&e.test(String.fromCharCode(t))}}function R(e,r,t,n){let i=n?n-1:Number.POSITIVE_INFINITY,o=0;return a;function a(s){return j(s)?(e.enter(t),u(s)):r(s)}function u(s){return j(s)&&o++<i?(e.consume(s),u):(e.exit(t),r(s))}}var Ft={tokenize:li};function li(e){let r=e.attempt(this.parser.constructs.contentInitial,n,i),t;return r;function n(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),R(e,r,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){let s=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=s),t=s,a(u)}function a(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return F(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),a)}}var It={tokenize:ci},_t={tokenize:pi};function ci(e){let r=this,t=[],n=0,i,o,a;return u;function u(C){if(n<t.length){let L=t[n];return r.containerState=L[1],e.attempt(L[0].continuation,s,f)(C)}return f(C)}function s(C){if(n++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&q();let L=r.events.length,I=L,y;for(;I--;)if(r.events[I][0]==="exit"&&r.events[I][1].type==="chunkFlow"){y=r.events[I][1].end;break}x(n);let D=L;for(;D<r.events.length;)r.events[D][1].end=Object.assign({},y),D++;return Z(r.events,I+1,0,r.events.slice(L)),r.events.length=D,f(C)}return u(C)}function f(C){if(n===t.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return m(C);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},e.check(_t,l,E)(C)}function l(C){return i&&q(),x(n),g(C)}function E(C){return r.parser.lazy[r.now().line]=n!==t.length,a=r.now().offset,m(C)}function g(C){return r.containerState={},e.attempt(_t,h,m)(C)}function h(C){return n++,t.push([r.currentConstruct,r.containerState]),g(C)}function m(C){if(C===null){i&&q(),x(0),e.consume(C);return}return i=i||r.parser.flow(r.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),d(C)}function d(C){if(C===null){b(e.exit("chunkFlow"),!0),x(0),e.consume(C);return}return F(C)?(e.consume(C),b(e.exit("chunkFlow")),n=0,r.interrupt=void 0,u):(e.consume(C),d)}function b(C,L){let I=r.sliceStream(C);if(L&&I.push(null),C.previous=o,o&&(o.next=C),o=C,i.defineSkip(C.start),i.write(I),r.parser.lazy[C.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<a&&(!i.events[y][1].end||i.events[y][1].end.offset>a))return;let D=r.events.length,B=D,S,T;for(;B--;)if(r.events[B][0]==="exit"&&r.events[B][1].type==="chunkFlow"){if(S){T=r.events[B][1].end;break}S=!0}for(x(n),y=D;y<r.events.length;)r.events[y][1].end=Object.assign({},T),y++;Z(r.events,B+1,0,r.events.slice(D)),r.events.length=y}}function x(C){let L=t.length;for(;L-- >C;){let I=t[L];r.containerState=I[1],I[0].exit.call(r,e)}t.length=C}function q(){i.write([null]),o=void 0,i=void 0,r.containerState._closeFlow=void 0}}function pi(e,r,t){return R(e,e.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function br(e){if(e===null||G(e)||Tt(e))return 1;if(qt(e))return 2}function _e(e,r,t){let n=[],i=-1;for(;++i<e.length;){let o=e[i].resolveAll;o&&!n.includes(o)&&(r=o(r,t),n.push(o))}return r}var Ne={name:"attention",tokenize:hi,resolveAll:fi};function fi(e,r){let t=-1,n,i,o,a,u,s,f,l;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(n=t;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&r.sliceSerialize(e[n][1]).charCodeAt(0)===r.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[n][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;let E=Object.assign({},e[n][1].end),g=Object.assign({},e[t][1].start);Lt(E,-s),Lt(g,s),a={type:s>1?"strongSequence":"emphasisSequence",start:E,end:Object.assign({},e[n][1].end)},u={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[t][1].start),end:g},o={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[t][1].start)},i={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},u.end)},e[n][1].end=Object.assign({},a.start),e[t][1].start=Object.assign({},u.end),f=[],e[n][1].end.offset-e[n][1].start.offset&&(f=X(f,[["enter",e[n][1],r],["exit",e[n][1],r]])),f=X(f,[["enter",i,r],["enter",a,r],["exit",a,r],["enter",o,r]]),f=X(f,_e(r.parser.constructs.insideSpan.null,e.slice(n+1,t),r)),f=X(f,[["exit",o,r],["enter",u,r],["exit",u,r],["exit",i,r]]),e[t][1].end.offset-e[t][1].start.offset?(l=2,f=X(f,[["enter",e[t][1],r],["exit",e[t][1],r]])):l=0,Z(e,n-1,t-n+3,f),t=n+f.length-l-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function hi(e,r){let t=this.parser.constructs.attentionMarkers.null,n=this.previous,i=br(n),o;return a;function a(s){return e.enter("attentionSequence"),o=s,u(s)}function u(s){if(s===o)return e.consume(s),u;let f=e.exit("attentionSequence"),l=br(s),E=!l||l===2&&i||t.includes(s),g=!i||i===2&&l||t.includes(n);return f._open=!!(o===42?E:E&&(i||!g)),f._close=!!(o===42?g:g&&(l||!E)),r(s)}}function Lt(e,r){e.column+=r,e.offset+=r,e._bufferIndex+=r}var Er={name:"autolink",tokenize:mi};function mi(e,r,t){let n=1;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(m){return re(m)?(e.consume(m),a):yr(m)?f(m):t(m)}function a(m){return m===43||m===45||m===46||ee(m)?u(m):f(m)}function u(m){return m===58?(e.consume(m),s):(m===43||m===45||m===46||ee(m))&&n++<32?(e.consume(m),u):f(m)}function s(m){return m===62?(e.exit("autolinkProtocol"),h(m)):m===null||m===32||m===60||Be(m)?t(m):(e.consume(m),s)}function f(m){return m===64?(e.consume(m),n=0,l):yr(m)?(e.consume(m),f):t(m)}function l(m){return ee(m)?E(m):t(m)}function E(m){return m===46?(e.consume(m),n=0,l):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(m)):g(m)}function g(m){return(m===45||ee(m))&&n++<63?(e.consume(m),m===45?g:E):t(m)}function h(m){return e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),r}}var xe={tokenize:di,partial:!0};function di(e,r,t){return R(e,n,"linePrefix");function n(i){return i===null||F(i)?r(i):t(i)}}var $e={name:"blockQuote",tokenize:gi,continuation:{tokenize:xi},exit:ki};function gi(e,r,t){let n=this;return i;function i(a){if(a===62){let u=n.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return t(a)}function o(a){return j(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),r):(e.exit("blockQuotePrefix"),r(a))}}function xi(e,r,t){return R(e,e.attempt($e,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ki(e){e.exit("blockQuote")}var Ke={name:"characterEscape",tokenize:wi};function wi(e,r,t){return n;function n(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return Ct(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),r):t(o)}}var Sr={AElig:"\\xC6",AMP:"&",Aacute:"\\xC1",Abreve:"\\u0102",Acirc:"\\xC2",Acy:"\\u0410",Afr:"\\u{1D504}",Agrave:"\\xC0",Alpha:"\\u0391",Amacr:"\\u0100",And:"\\u2A53",Aogon:"\\u0104",Aopf:"\\u{1D538}",ApplyFunction:"\\u2061",Aring:"\\xC5",Ascr:"\\u{1D49C}",Assign:"\\u2254",Atilde:"\\xC3",Auml:"\\xC4",Backslash:"\\u2216",Barv:"\\u2AE7",Barwed:"\\u2306",Bcy:"\\u0411",Because:"\\u2235",Bernoullis:"\\u212C",Beta:"\\u0392",Bfr:"\\u{1D505}",Bopf:"\\u{1D539}",Breve:"\\u02D8",Bscr:"\\u212C",Bumpeq:"\\u224E",CHcy:"\\u0427",COPY:"\\xA9",Cacute:"\\u0106",Cap:"\\u22D2",CapitalDifferentialD:"\\u2145",Cayleys:"\\u212D",Ccaron:"\\u010C",Ccedil:"\\xC7",Ccirc:"\\u0108",Cconint:"\\u2230",Cdot:"\\u010A",Cedilla:"\\xB8",CenterDot:"\\xB7",Cfr:"\\u212D",Chi:"\\u03A7",CircleDot:"\\u2299",CircleMinus:"\\u2296",CirclePlus:"\\u2295",CircleTimes:"\\u2297",ClockwiseContourIntegral:"\\u2232",CloseCurlyDoubleQuote:"\\u201D",CloseCurlyQuote:"\\u2019",Colon:"\\u2237",Colone:"\\u2A74",Congruent:"\\u2261",Conint:"\\u222F",ContourIntegral:"\\u222E",Copf:"\\u2102",Coproduct:"\\u2210",CounterClockwiseContourIntegral:"\\u2233",Cross:"\\u2A2F",Cscr:"\\u{1D49E}",Cup:"\\u22D3",CupCap:"\\u224D",DD:"\\u2145",DDotrahd:"\\u2911",DJcy:"\\u0402",DScy:"\\u0405",DZcy:"\\u040F",Dagger:"\\u2021",Darr:"\\u21A1",Dashv:"\\u2AE4",Dcaron:"\\u010E",Dcy:"\\u0414",Del:"\\u2207",Delta:"\\u0394",Dfr:"\\u{1D507}",DiacriticalAcute:"\\xB4",DiacriticalDot:"\\u02D9",DiacriticalDoubleAcute:"\\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\\u02DC",Diamond:"\\u22C4",DifferentialD:"\\u2146",Dopf:"\\u{1D53B}",Dot:"\\xA8",DotDot:"\\u20DC",DotEqual:"\\u2250",DoubleContourIntegral:"\\u222F",DoubleDot:"\\xA8",DoubleDownArrow:"\\u21D3",DoubleLeftArrow:"\\u21D0",DoubleLeftRightArrow:"\\u21D4",DoubleLeftTee:"\\u2AE4",DoubleLongLeftArrow:"\\u27F8",DoubleLongLeftRightArrow:"\\u27FA",DoubleLongRightArrow:"\\u27F9",DoubleRightArrow:"\\u21D2",DoubleRightTee:"\\u22A8",DoubleUpArrow:"\\u21D1",DoubleUpDownArrow:"\\u21D5",DoubleVerticalBar:"\\u2225",DownArrow:"\\u2193",DownArrowBar:"\\u2913",DownArrowUpArrow:"\\u21F5",DownBreve:"\\u0311",DownLeftRightVector:"\\u2950",DownLeftTeeVector:"\\u295E",DownLeftVector:"\\u21BD",DownLeftVectorBar:"\\u2956",DownRightTeeVector:"\\u295F",DownRightVector:"\\u21C1",DownRightVectorBar:"\\u2957",DownTee:"\\u22A4",DownTeeArrow:"\\u21A7",Downarrow:"\\u21D3",Dscr:"\\u{1D49F}",Dstrok:"\\u0110",ENG:"\\u014A",ETH:"\\xD0",Eacute:"\\xC9",Ecaron:"\\u011A",Ecirc:"\\xCA",Ecy:"\\u042D",Edot:"\\u0116",Efr:"\\u{1D508}",Egrave:"\\xC8",Element:"\\u2208",Emacr:"\\u0112",EmptySmallSquare:"\\u25FB",EmptyVerySmallSquare:"\\u25AB",Eogon:"\\u0118",Eopf:"\\u{1D53C}",Epsilon:"\\u0395",Equal:"\\u2A75",EqualTilde:"\\u2242",Equilibrium:"\\u21CC",Escr:"\\u2130",Esim:"\\u2A73",Eta:"\\u0397",Euml:"\\xCB",Exists:"\\u2203",ExponentialE:"\\u2147",Fcy:"\\u0424",Ffr:"\\u{1D509}",FilledSmallSquare:"\\u25FC",FilledVerySmallSquare:"\\u25AA",Fopf:"\\u{1D53D}",ForAll:"\\u2200",Fouriertrf:"\\u2131",Fscr:"\\u2131",GJcy:"\\u0403",GT:">",Gamma:"\\u0393",Gammad:"\\u03DC",Gbreve:"\\u011E",Gcedil:"\\u0122",Gcirc:"\\u011C",Gcy:"\\u0413",Gdot:"\\u0120",Gfr:"\\u{1D50A}",Gg:"\\u22D9",Gopf:"\\u{1D53E}",GreaterEqual:"\\u2265",GreaterEqualLess:"\\u22DB",GreaterFullEqual:"\\u2267",GreaterGreater:"\\u2AA2",GreaterLess:"\\u2277",GreaterSlantEqual:"\\u2A7E",GreaterTilde:"\\u2273",Gscr:"\\u{1D4A2}",Gt:"\\u226B",HARDcy:"\\u042A",Hacek:"\\u02C7",Hat:"^",Hcirc:"\\u0124",Hfr:"\\u210C",HilbertSpace:"\\u210B",Hopf:"\\u210D",HorizontalLine:"\\u2500",Hscr:"\\u210B",Hstrok:"\\u0126",HumpDownHump:"\\u224E",HumpEqual:"\\u224F",IEcy:"\\u0415",IJlig:"\\u0132",IOcy:"\\u0401",Iacute:"\\xCD",Icirc:"\\xCE",Icy:"\\u0418",Idot:"\\u0130",Ifr:"\\u2111",Igrave:"\\xCC",Im:"\\u2111",Imacr:"\\u012A",ImaginaryI:"\\u2148",Implies:"\\u21D2",Int:"\\u222C",Integral:"\\u222B",Intersection:"\\u22C2",InvisibleComma:"\\u2063",InvisibleTimes:"\\u2062",Iogon:"\\u012E",Iopf:"\\u{1D540}",Iota:"\\u0399",Iscr:"\\u2110",Itilde:"\\u0128",Iukcy:"\\u0406",Iuml:"\\xCF",Jcirc:"\\u0134",Jcy:"\\u0419",Jfr:"\\u{1D50D}",Jopf:"\\u{1D541}",Jscr:"\\u{1D4A5}",Jsercy:"\\u0408",Jukcy:"\\u0404",KHcy:"\\u0425",KJcy:"\\u040C",Kappa:"\\u039A",Kcedil:"\\u0136",Kcy:"\\u041A",Kfr:"\\u{1D50E}",Kopf:"\\u{1D542}",Kscr:"\\u{1D4A6}",LJcy:"\\u0409",LT:"<",Lacute:"\\u0139",Lambda:"\\u039B",Lang:"\\u27EA",Laplacetrf:"\\u2112",Larr:"\\u219E",Lcaron:"\\u013D",Lcedil:"\\u013B",Lcy:"\\u041B",LeftAngleBracket:"\\u27E8",LeftArrow:"\\u2190",LeftArrowBar:"\\u21E4",LeftArrowRightArrow:"\\u21C6",LeftCeiling:"\\u2308",LeftDoubleBracket:"\\u27E6",LeftDownTeeVector:"\\u2961",LeftDownVector:"\\u21C3",LeftDownVectorBar:"\\u2959",LeftFloor:"\\u230A",LeftRightArrow:"\\u2194",LeftRightVector:"\\u294E",LeftTee:"\\u22A3",LeftTeeArrow:"\\u21A4",LeftTeeVector:"\\u295A",LeftTriangle:"\\u22B2",LeftTriangleBar:"\\u29CF",LeftTriangleEqual:"\\u22B4",LeftUpDownVector:"\\u2951",LeftUpTeeVector:"\\u2960",LeftUpVector:"\\u21BF",LeftUpVectorBar:"\\u2958",LeftVector:"\\u21BC",LeftVectorBar:"\\u2952",Leftarrow:"\\u21D0",Leftrightarrow:"\\u21D4",LessEqualGreater:"\\u22DA",LessFullEqual:"\\u2266",LessGreater:"\\u2276",LessLess:"\\u2AA1",LessSlantEqual:"\\u2A7D",LessTilde:"\\u2272",Lfr:"\\u{1D50F}",Ll:"\\u22D8",Lleftarrow:"\\u21DA",Lmidot:"\\u013F",LongLeftArrow:"\\u27F5",LongLeftRightArrow:"\\u27F7",LongRightArrow:"\\u27F6",Longleftarrow:"\\u27F8",Longleftrightarrow:"\\u27FA",Longrightarrow:"\\u27F9",Lopf:"\\u{1D543}",LowerLeftArrow:"\\u2199",LowerRightArrow:"\\u2198",Lscr:"\\u2112",Lsh:"\\u21B0",Lstrok:"\\u0141",Lt:"\\u226A",Map:"\\u2905",Mcy:"\\u041C",MediumSpace:"\\u205F",Mellintrf:"\\u2133",Mfr:"\\u{1D510}",MinusPlus:"\\u2213",Mopf:"\\u{1D544}",Mscr:"\\u2133",Mu:"\\u039C",NJcy:"\\u040A",Nacute:"\\u0143",Ncaron:"\\u0147",Ncedil:"\\u0145",Ncy:"\\u041D",NegativeMediumSpace:"\\u200B",NegativeThickSpace:"\\u200B",NegativeThinSpace:"\\u200B",NegativeVeryThinSpace:"\\u200B",NestedGreaterGreater:"\\u226B",NestedLessLess:"\\u226A",NewLine:`\n`,Nfr:"\\u{1D511}",NoBreak:"\\u2060",NonBreakingSpace:"\\xA0",Nopf:"\\u2115",Not:"\\u2AEC",NotCongruent:"\\u2262",NotCupCap:"\\u226D",NotDoubleVerticalBar:"\\u2226",NotElement:"\\u2209",NotEqual:"\\u2260",NotEqualTilde:"\\u2242\\u0338",NotExists:"\\u2204",NotGreater:"\\u226F",NotGreaterEqual:"\\u2271",NotGreaterFullEqual:"\\u2267\\u0338",NotGreaterGreater:"\\u226B\\u0338",NotGreaterLess:"\\u2279",NotGreaterSlantEqual:"\\u2A7E\\u0338",NotGreaterTilde:"\\u2275",NotHumpDownHump:"\\u224E\\u0338",NotHumpEqual:"\\u224F\\u0338",NotLeftTriangle:"\\u22EA",NotLeftTriangleBar:"\\u29CF\\u0338",NotLeftTriangleEqual:"\\u22EC",NotLess:"\\u226E",NotLessEqual:"\\u2270",NotLessGreater:"\\u2278",NotLessLess:"\\u226A\\u0338",NotLessSlantEqual:"\\u2A7D\\u0338",NotLessTilde:"\\u2274",NotNestedGreaterGreater:"\\u2AA2\\u0338",NotNestedLessLess:"\\u2AA1\\u0338",NotPrecedes:"\\u2280",NotPrecedesEqual:"\\u2AAF\\u0338",NotPrecedesSlantEqual:"\\u22E0",NotReverseElement:"\\u220C",NotRightTriangle:"\\u22EB",NotRightTriangleBar:"\\u29D0\\u0338",NotRightTriangleEqual:"\\u22ED",NotSquareSubset:"\\u228F\\u0338",NotSquareSubsetEqual:"\\u22E2",NotSquareSuperset:"\\u2290\\u0338",NotSquareSupersetEqual:"\\u22E3",NotSubset:"\\u2282\\u20D2",NotSubsetEqual:"\\u2288",NotSucceeds:"\\u2281",NotSucceedsEqual:"\\u2AB0\\u0338",NotSucceedsSlantEqual:"\\u22E1",NotSucceedsTilde:"\\u227F\\u0338",NotSuperset:"\\u2283\\u20D2",NotSupersetEqual:"\\u2289",NotTilde:"\\u2241",NotTildeEqual:"\\u2244",NotTildeFullEqual:"\\u2247",NotTildeTilde:"\\u2249",NotVerticalBar:"\\u2224",Nscr:"\\u{1D4A9}",Ntilde:"\\xD1",Nu:"\\u039D",OElig:"\\u0152",Oacute:"\\xD3",Ocirc:"\\xD4",Ocy:"\\u041E",Odblac:"\\u0150",Ofr:"\\u{1D512}",Ograve:"\\xD2",Omacr:"\\u014C",Omega:"\\u03A9",Omicron:"\\u039F",Oopf:"\\u{1D546}",OpenCurlyDoubleQuote:"\\u201C",OpenCurlyQuote:"\\u2018",Or:"\\u2A54",Oscr:"\\u{1D4AA}",Oslash:"\\xD8",Otilde:"\\xD5",Otimes:"\\u2A37",Ouml:"\\xD6",OverBar:"\\u203E",OverBrace:"\\u23DE",OverBracket:"\\u23B4",OverParenthesis:"\\u23DC",PartialD:"\\u2202",Pcy:"\\u041F",Pfr:"\\u{1D513}",Phi:"\\u03A6",Pi:"\\u03A0",PlusMinus:"\\xB1",Poincareplane:"\\u210C",Popf:"\\u2119",Pr:"\\u2ABB",Precedes:"\\u227A",PrecedesEqual:"\\u2AAF",PrecedesSlantEqual:"\\u227C",PrecedesTilde:"\\u227E",Prime:"\\u2033",Product:"\\u220F",Proportion:"\\u2237",Proportional:"\\u221D",Pscr:"\\u{1D4AB}",Psi:"\\u03A8",QUOT:\'"\',Qfr:"\\u{1D514}",Qopf:"\\u211A",Qscr:"\\u{1D4AC}",RBarr:"\\u2910",REG:"\\xAE",Racute:"\\u0154",Rang:"\\u27EB",Rarr:"\\u21A0",Rarrtl:"\\u2916",Rcaron:"\\u0158",Rcedil:"\\u0156",Rcy:"\\u0420",Re:"\\u211C",ReverseElement:"\\u220B",ReverseEquilibrium:"\\u21CB",ReverseUpEquilibrium:"\\u296F",Rfr:"\\u211C",Rho:"\\u03A1",RightAngleBracket:"\\u27E9",RightArrow:"\\u2192",RightArrowBar:"\\u21E5",RightArrowLeftArrow:"\\u21C4",RightCeiling:"\\u2309",RightDoubleBracket:"\\u27E7",RightDownTeeVector:"\\u295D",RightDownVector:"\\u21C2",RightDownVectorBar:"\\u2955",RightFloor:"\\u230B",RightTee:"\\u22A2",RightTeeArrow:"\\u21A6",RightTeeVector:"\\u295B",RightTriangle:"\\u22B3",RightTriangleBar:"\\u29D0",RightTriangleEqual:"\\u22B5",RightUpDownVector:"\\u294F",RightUpTeeVector:"\\u295C",RightUpVector:"\\u21BE",RightUpVectorBar:"\\u2954",RightVector:"\\u21C0",RightVectorBar:"\\u2953",Rightarrow:"\\u21D2",Ropf:"\\u211D",RoundImplies:"\\u2970",Rrightarrow:"\\u21DB",Rscr:"\\u211B",Rsh:"\\u21B1",RuleDelayed:"\\u29F4",SHCHcy:"\\u0429",SHcy:"\\u0428",SOFTcy:"\\u042C",Sacute:"\\u015A",Sc:"\\u2ABC",Scaron:"\\u0160",Scedil:"\\u015E",Scirc:"\\u015C",Scy:"\\u0421",Sfr:"\\u{1D516}",ShortDownArrow:"\\u2193",ShortLeftArrow:"\\u2190",ShortRightArrow:"\\u2192",ShortUpArrow:"\\u2191",Sigma:"\\u03A3",SmallCircle:"\\u2218",Sopf:"\\u{1D54A}",Sqrt:"\\u221A",Square:"\\u25A1",SquareIntersection:"\\u2293",SquareSubset:"\\u228F",SquareSubsetEqual:"\\u2291",SquareSuperset:"\\u2290",SquareSupersetEqual:"\\u2292",SquareUnion:"\\u2294",Sscr:"\\u{1D4AE}",Star:"\\u22C6",Sub:"\\u22D0",Subset:"\\u22D0",SubsetEqual:"\\u2286",Succeeds:"\\u227B",SucceedsEqual:"\\u2AB0",SucceedsSlantEqual:"\\u227D",SucceedsTilde:"\\u227F",SuchThat:"\\u220B",Sum:"\\u2211",Sup:"\\u22D1",Superset:"\\u2283",SupersetEqual:"\\u2287",Supset:"\\u22D1",THORN:"\\xDE",TRADE:"\\u2122",TSHcy:"\\u040B",TScy:"\\u0426",Tab:"	",Tau:"\\u03A4",Tcaron:"\\u0164",Tcedil:"\\u0162",Tcy:"\\u0422",Tfr:"\\u{1D517}",Therefore:"\\u2234",Theta:"\\u0398",ThickSpace:"\\u205F\\u200A",ThinSpace:"\\u2009",Tilde:"\\u223C",TildeEqual:"\\u2243",TildeFullEqual:"\\u2245",TildeTilde:"\\u2248",Topf:"\\u{1D54B}",TripleDot:"\\u20DB",Tscr:"\\u{1D4AF}",Tstrok:"\\u0166",Uacute:"\\xDA",Uarr:"\\u219F",Uarrocir:"\\u2949",Ubrcy:"\\u040E",Ubreve:"\\u016C",Ucirc:"\\xDB",Ucy:"\\u0423",Udblac:"\\u0170",Ufr:"\\u{1D518}",Ugrave:"\\xD9",Umacr:"\\u016A",UnderBar:"_",UnderBrace:"\\u23DF",UnderBracket:"\\u23B5",UnderParenthesis:"\\u23DD",Union:"\\u22C3",UnionPlus:"\\u228E",Uogon:"\\u0172",Uopf:"\\u{1D54C}",UpArrow:"\\u2191",UpArrowBar:"\\u2912",UpArrowDownArrow:"\\u21C5",UpDownArrow:"\\u2195",UpEquilibrium:"\\u296E",UpTee:"\\u22A5",UpTeeArrow:"\\u21A5",Uparrow:"\\u21D1",Updownarrow:"\\u21D5",UpperLeftArrow:"\\u2196",UpperRightArrow:"\\u2197",Upsi:"\\u03D2",Upsilon:"\\u03A5",Uring:"\\u016E",Uscr:"\\u{1D4B0}",Utilde:"\\u0168",Uuml:"\\xDC",VDash:"\\u22AB",Vbar:"\\u2AEB",Vcy:"\\u0412",Vdash:"\\u22A9",Vdashl:"\\u2AE6",Vee:"\\u22C1",Verbar:"\\u2016",Vert:"\\u2016",VerticalBar:"\\u2223",VerticalLine:"|",VerticalSeparator:"\\u2758",VerticalTilde:"\\u2240",VeryThinSpace:"\\u200A",Vfr:"\\u{1D519}",Vopf:"\\u{1D54D}",Vscr:"\\u{1D4B1}",Vvdash:"\\u22AA",Wcirc:"\\u0174",Wedge:"\\u22C0",Wfr:"\\u{1D51A}",Wopf:"\\u{1D54E}",Wscr:"\\u{1D4B2}",Xfr:"\\u{1D51B}",Xi:"\\u039E",Xopf:"\\u{1D54F}",Xscr:"\\u{1D4B3}",YAcy:"\\u042F",YIcy:"\\u0407",YUcy:"\\u042E",Yacute:"\\xDD",Ycirc:"\\u0176",Ycy:"\\u042B",Yfr:"\\u{1D51C}",Yopf:"\\u{1D550}",Yscr:"\\u{1D4B4}",Yuml:"\\u0178",ZHcy:"\\u0416",Zacute:"\\u0179",Zcaron:"\\u017D",Zcy:"\\u0417",Zdot:"\\u017B",ZeroWidthSpace:"\\u200B",Zeta:"\\u0396",Zfr:"\\u2128",Zopf:"\\u2124",Zscr:"\\u{1D4B5}",aacute:"\\xE1",abreve:"\\u0103",ac:"\\u223E",acE:"\\u223E\\u0333",acd:"\\u223F",acirc:"\\xE2",acute:"\\xB4",acy:"\\u0430",aelig:"\\xE6",af:"\\u2061",afr:"\\u{1D51E}",agrave:"\\xE0",alefsym:"\\u2135",aleph:"\\u2135",alpha:"\\u03B1",amacr:"\\u0101",amalg:"\\u2A3F",amp:"&",and:"\\u2227",andand:"\\u2A55",andd:"\\u2A5C",andslope:"\\u2A58",andv:"\\u2A5A",ang:"\\u2220",ange:"\\u29A4",angle:"\\u2220",angmsd:"\\u2221",angmsdaa:"\\u29A8",angmsdab:"\\u29A9",angmsdac:"\\u29AA",angmsdad:"\\u29AB",angmsdae:"\\u29AC",angmsdaf:"\\u29AD",angmsdag:"\\u29AE",angmsdah:"\\u29AF",angrt:"\\u221F",angrtvb:"\\u22BE",angrtvbd:"\\u299D",angsph:"\\u2222",angst:"\\xC5",angzarr:"\\u237C",aogon:"\\u0105",aopf:"\\u{1D552}",ap:"\\u2248",apE:"\\u2A70",apacir:"\\u2A6F",ape:"\\u224A",apid:"\\u224B",apos:"\'",approx:"\\u2248",approxeq:"\\u224A",aring:"\\xE5",ascr:"\\u{1D4B6}",ast:"*",asymp:"\\u2248",asympeq:"\\u224D",atilde:"\\xE3",auml:"\\xE4",awconint:"\\u2233",awint:"\\u2A11",bNot:"\\u2AED",backcong:"\\u224C",backepsilon:"\\u03F6",backprime:"\\u2035",backsim:"\\u223D",backsimeq:"\\u22CD",barvee:"\\u22BD",barwed:"\\u2305",barwedge:"\\u2305",bbrk:"\\u23B5",bbrktbrk:"\\u23B6",bcong:"\\u224C",bcy:"\\u0431",bdquo:"\\u201E",becaus:"\\u2235",because:"\\u2235",bemptyv:"\\u29B0",bepsi:"\\u03F6",bernou:"\\u212C",beta:"\\u03B2",beth:"\\u2136",between:"\\u226C",bfr:"\\u{1D51F}",bigcap:"\\u22C2",bigcirc:"\\u25EF",bigcup:"\\u22C3",bigodot:"\\u2A00",bigoplus:"\\u2A01",bigotimes:"\\u2A02",bigsqcup:"\\u2A06",bigstar:"\\u2605",bigtriangledown:"\\u25BD",bigtriangleup:"\\u25B3",biguplus:"\\u2A04",bigvee:"\\u22C1",bigwedge:"\\u22C0",bkarow:"\\u290D",blacklozenge:"\\u29EB",blacksquare:"\\u25AA",blacktriangle:"\\u25B4",blacktriangledown:"\\u25BE",blacktriangleleft:"\\u25C2",blacktriangleright:"\\u25B8",blank:"\\u2423",blk12:"\\u2592",blk14:"\\u2591",blk34:"\\u2593",block:"\\u2588",bne:"=\\u20E5",bnequiv:"\\u2261\\u20E5",bnot:"\\u2310",bopf:"\\u{1D553}",bot:"\\u22A5",bottom:"\\u22A5",bowtie:"\\u22C8",boxDL:"\\u2557",boxDR:"\\u2554",boxDl:"\\u2556",boxDr:"\\u2553",boxH:"\\u2550",boxHD:"\\u2566",boxHU:"\\u2569",boxHd:"\\u2564",boxHu:"\\u2567",boxUL:"\\u255D",boxUR:"\\u255A",boxUl:"\\u255C",boxUr:"\\u2559",boxV:"\\u2551",boxVH:"\\u256C",boxVL:"\\u2563",boxVR:"\\u2560",boxVh:"\\u256B",boxVl:"\\u2562",boxVr:"\\u255F",boxbox:"\\u29C9",boxdL:"\\u2555",boxdR:"\\u2552",boxdl:"\\u2510",boxdr:"\\u250C",boxh:"\\u2500",boxhD:"\\u2565",boxhU:"\\u2568",boxhd:"\\u252C",boxhu:"\\u2534",boxminus:"\\u229F",boxplus:"\\u229E",boxtimes:"\\u22A0",boxuL:"\\u255B",boxuR:"\\u2558",boxul:"\\u2518",boxur:"\\u2514",boxv:"\\u2502",boxvH:"\\u256A",boxvL:"\\u2561",boxvR:"\\u255E",boxvh:"\\u253C",boxvl:"\\u2524",boxvr:"\\u251C",bprime:"\\u2035",breve:"\\u02D8",brvbar:"\\xA6",bscr:"\\u{1D4B7}",bsemi:"\\u204F",bsim:"\\u223D",bsime:"\\u22CD",bsol:"\\\\",bsolb:"\\u29C5",bsolhsub:"\\u27C8",bull:"\\u2022",bullet:"\\u2022",bump:"\\u224E",bumpE:"\\u2AAE",bumpe:"\\u224F",bumpeq:"\\u224F",cacute:"\\u0107",cap:"\\u2229",capand:"\\u2A44",capbrcup:"\\u2A49",capcap:"\\u2A4B",capcup:"\\u2A47",capdot:"\\u2A40",caps:"\\u2229\\uFE00",caret:"\\u2041",caron:"\\u02C7",ccaps:"\\u2A4D",ccaron:"\\u010D",ccedil:"\\xE7",ccirc:"\\u0109",ccups:"\\u2A4C",ccupssm:"\\u2A50",cdot:"\\u010B",cedil:"\\xB8",cemptyv:"\\u29B2",cent:"\\xA2",centerdot:"\\xB7",cfr:"\\u{1D520}",chcy:"\\u0447",check:"\\u2713",checkmark:"\\u2713",chi:"\\u03C7",cir:"\\u25CB",cirE:"\\u29C3",circ:"\\u02C6",circeq:"\\u2257",circlearrowleft:"\\u21BA",circlearrowright:"\\u21BB",circledR:"\\xAE",circledS:"\\u24C8",circledast:"\\u229B",circledcirc:"\\u229A",circleddash:"\\u229D",cire:"\\u2257",cirfnint:"\\u2A10",cirmid:"\\u2AEF",cirscir:"\\u29C2",clubs:"\\u2663",clubsuit:"\\u2663",colon:":",colone:"\\u2254",coloneq:"\\u2254",comma:",",commat:"@",comp:"\\u2201",compfn:"\\u2218",complement:"\\u2201",complexes:"\\u2102",cong:"\\u2245",congdot:"\\u2A6D",conint:"\\u222E",copf:"\\u{1D554}",coprod:"\\u2210",copy:"\\xA9",copysr:"\\u2117",crarr:"\\u21B5",cross:"\\u2717",cscr:"\\u{1D4B8}",csub:"\\u2ACF",csube:"\\u2AD1",csup:"\\u2AD0",csupe:"\\u2AD2",ctdot:"\\u22EF",cudarrl:"\\u2938",cudarrr:"\\u2935",cuepr:"\\u22DE",cuesc:"\\u22DF",cularr:"\\u21B6",cularrp:"\\u293D",cup:"\\u222A",cupbrcap:"\\u2A48",cupcap:"\\u2A46",cupcup:"\\u2A4A",cupdot:"\\u228D",cupor:"\\u2A45",cups:"\\u222A\\uFE00",curarr:"\\u21B7",curarrm:"\\u293C",curlyeqprec:"\\u22DE",curlyeqsucc:"\\u22DF",curlyvee:"\\u22CE",curlywedge:"\\u22CF",curren:"\\xA4",curvearrowleft:"\\u21B6",curvearrowright:"\\u21B7",cuvee:"\\u22CE",cuwed:"\\u22CF",cwconint:"\\u2232",cwint:"\\u2231",cylcty:"\\u232D",dArr:"\\u21D3",dHar:"\\u2965",dagger:"\\u2020",daleth:"\\u2138",darr:"\\u2193",dash:"\\u2010",dashv:"\\u22A3",dbkarow:"\\u290F",dblac:"\\u02DD",dcaron:"\\u010F",dcy:"\\u0434",dd:"\\u2146",ddagger:"\\u2021",ddarr:"\\u21CA",ddotseq:"\\u2A77",deg:"\\xB0",delta:"\\u03B4",demptyv:"\\u29B1",dfisht:"\\u297F",dfr:"\\u{1D521}",dharl:"\\u21C3",dharr:"\\u21C2",diam:"\\u22C4",diamond:"\\u22C4",diamondsuit:"\\u2666",diams:"\\u2666",die:"\\xA8",digamma:"\\u03DD",disin:"\\u22F2",div:"\\xF7",divide:"\\xF7",divideontimes:"\\u22C7",divonx:"\\u22C7",djcy:"\\u0452",dlcorn:"\\u231E",dlcrop:"\\u230D",dollar:"$",dopf:"\\u{1D555}",dot:"\\u02D9",doteq:"\\u2250",doteqdot:"\\u2251",dotminus:"\\u2238",dotplus:"\\u2214",dotsquare:"\\u22A1",doublebarwedge:"\\u2306",downarrow:"\\u2193",downdownarrows:"\\u21CA",downharpoonleft:"\\u21C3",downharpoonright:"\\u21C2",drbkarow:"\\u2910",drcorn:"\\u231F",drcrop:"\\u230C",dscr:"\\u{1D4B9}",dscy:"\\u0455",dsol:"\\u29F6",dstrok:"\\u0111",dtdot:"\\u22F1",dtri:"\\u25BF",dtrif:"\\u25BE",duarr:"\\u21F5",duhar:"\\u296F",dwangle:"\\u29A6",dzcy:"\\u045F",dzigrarr:"\\u27FF",eDDot:"\\u2A77",eDot:"\\u2251",eacute:"\\xE9",easter:"\\u2A6E",ecaron:"\\u011B",ecir:"\\u2256",ecirc:"\\xEA",ecolon:"\\u2255",ecy:"\\u044D",edot:"\\u0117",ee:"\\u2147",efDot:"\\u2252",efr:"\\u{1D522}",eg:"\\u2A9A",egrave:"\\xE8",egs:"\\u2A96",egsdot:"\\u2A98",el:"\\u2A99",elinters:"\\u23E7",ell:"\\u2113",els:"\\u2A95",elsdot:"\\u2A97",emacr:"\\u0113",empty:"\\u2205",emptyset:"\\u2205",emptyv:"\\u2205",emsp13:"\\u2004",emsp14:"\\u2005",emsp:"\\u2003",eng:"\\u014B",ensp:"\\u2002",eogon:"\\u0119",eopf:"\\u{1D556}",epar:"\\u22D5",eparsl:"\\u29E3",eplus:"\\u2A71",epsi:"\\u03B5",epsilon:"\\u03B5",epsiv:"\\u03F5",eqcirc:"\\u2256",eqcolon:"\\u2255",eqsim:"\\u2242",eqslantgtr:"\\u2A96",eqslantless:"\\u2A95",equals:"=",equest:"\\u225F",equiv:"\\u2261",equivDD:"\\u2A78",eqvparsl:"\\u29E5",erDot:"\\u2253",erarr:"\\u2971",escr:"\\u212F",esdot:"\\u2250",esim:"\\u2242",eta:"\\u03B7",eth:"\\xF0",euml:"\\xEB",euro:"\\u20AC",excl:"!",exist:"\\u2203",expectation:"\\u2130",exponentiale:"\\u2147",fallingdotseq:"\\u2252",fcy:"\\u0444",female:"\\u2640",ffilig:"\\uFB03",fflig:"\\uFB00",ffllig:"\\uFB04",ffr:"\\u{1D523}",filig:"\\uFB01",fjlig:"fj",flat:"\\u266D",fllig:"\\uFB02",fltns:"\\u25B1",fnof:"\\u0192",fopf:"\\u{1D557}",forall:"\\u2200",fork:"\\u22D4",forkv:"\\u2AD9",fpartint:"\\u2A0D",frac12:"\\xBD",frac13:"\\u2153",frac14:"\\xBC",frac15:"\\u2155",frac16:"\\u2159",frac18:"\\u215B",frac23:"\\u2154",frac25:"\\u2156",frac34:"\\xBE",frac35:"\\u2157",frac38:"\\u215C",frac45:"\\u2158",frac56:"\\u215A",frac58:"\\u215D",frac78:"\\u215E",frasl:"\\u2044",frown:"\\u2322",fscr:"\\u{1D4BB}",gE:"\\u2267",gEl:"\\u2A8C",gacute:"\\u01F5",gamma:"\\u03B3",gammad:"\\u03DD",gap:"\\u2A86",gbreve:"\\u011F",gcirc:"\\u011D",gcy:"\\u0433",gdot:"\\u0121",ge:"\\u2265",gel:"\\u22DB",geq:"\\u2265",geqq:"\\u2267",geqslant:"\\u2A7E",ges:"\\u2A7E",gescc:"\\u2AA9",gesdot:"\\u2A80",gesdoto:"\\u2A82",gesdotol:"\\u2A84",gesl:"\\u22DB\\uFE00",gesles:"\\u2A94",gfr:"\\u{1D524}",gg:"\\u226B",ggg:"\\u22D9",gimel:"\\u2137",gjcy:"\\u0453",gl:"\\u2277",glE:"\\u2A92",gla:"\\u2AA5",glj:"\\u2AA4",gnE:"\\u2269",gnap:"\\u2A8A",gnapprox:"\\u2A8A",gne:"\\u2A88",gneq:"\\u2A88",gneqq:"\\u2269",gnsim:"\\u22E7",gopf:"\\u{1D558}",grave:"`",gscr:"\\u210A",gsim:"\\u2273",gsime:"\\u2A8E",gsiml:"\\u2A90",gt:">",gtcc:"\\u2AA7",gtcir:"\\u2A7A",gtdot:"\\u22D7",gtlPar:"\\u2995",gtquest:"\\u2A7C",gtrapprox:"\\u2A86",gtrarr:"\\u2978",gtrdot:"\\u22D7",gtreqless:"\\u22DB",gtreqqless:"\\u2A8C",gtrless:"\\u2277",gtrsim:"\\u2273",gvertneqq:"\\u2269\\uFE00",gvnE:"\\u2269\\uFE00",hArr:"\\u21D4",hairsp:"\\u200A",half:"\\xBD",hamilt:"\\u210B",hardcy:"\\u044A",harr:"\\u2194",harrcir:"\\u2948",harrw:"\\u21AD",hbar:"\\u210F",hcirc:"\\u0125",hearts:"\\u2665",heartsuit:"\\u2665",hellip:"\\u2026",hercon:"\\u22B9",hfr:"\\u{1D525}",hksearow:"\\u2925",hkswarow:"\\u2926",hoarr:"\\u21FF",homtht:"\\u223B",hookleftarrow:"\\u21A9",hookrightarrow:"\\u21AA",hopf:"\\u{1D559}",horbar:"\\u2015",hscr:"\\u{1D4BD}",hslash:"\\u210F",hstrok:"\\u0127",hybull:"\\u2043",hyphen:"\\u2010",iacute:"\\xED",ic:"\\u2063",icirc:"\\xEE",icy:"\\u0438",iecy:"\\u0435",iexcl:"\\xA1",iff:"\\u21D4",ifr:"\\u{1D526}",igrave:"\\xEC",ii:"\\u2148",iiiint:"\\u2A0C",iiint:"\\u222D",iinfin:"\\u29DC",iiota:"\\u2129",ijlig:"\\u0133",imacr:"\\u012B",image:"\\u2111",imagline:"\\u2110",imagpart:"\\u2111",imath:"\\u0131",imof:"\\u22B7",imped:"\\u01B5",in:"\\u2208",incare:"\\u2105",infin:"\\u221E",infintie:"\\u29DD",inodot:"\\u0131",int:"\\u222B",intcal:"\\u22BA",integers:"\\u2124",intercal:"\\u22BA",intlarhk:"\\u2A17",intprod:"\\u2A3C",iocy:"\\u0451",iogon:"\\u012F",iopf:"\\u{1D55A}",iota:"\\u03B9",iprod:"\\u2A3C",iquest:"\\xBF",iscr:"\\u{1D4BE}",isin:"\\u2208",isinE:"\\u22F9",isindot:"\\u22F5",isins:"\\u22F4",isinsv:"\\u22F3",isinv:"\\u2208",it:"\\u2062",itilde:"\\u0129",iukcy:"\\u0456",iuml:"\\xEF",jcirc:"\\u0135",jcy:"\\u0439",jfr:"\\u{1D527}",jmath:"\\u0237",jopf:"\\u{1D55B}",jscr:"\\u{1D4BF}",jsercy:"\\u0458",jukcy:"\\u0454",kappa:"\\u03BA",kappav:"\\u03F0",kcedil:"\\u0137",kcy:"\\u043A",kfr:"\\u{1D528}",kgreen:"\\u0138",khcy:"\\u0445",kjcy:"\\u045C",kopf:"\\u{1D55C}",kscr:"\\u{1D4C0}",lAarr:"\\u21DA",lArr:"\\u21D0",lAtail:"\\u291B",lBarr:"\\u290E",lE:"\\u2266",lEg:"\\u2A8B",lHar:"\\u2962",lacute:"\\u013A",laemptyv:"\\u29B4",lagran:"\\u2112",lambda:"\\u03BB",lang:"\\u27E8",langd:"\\u2991",langle:"\\u27E8",lap:"\\u2A85",laquo:"\\xAB",larr:"\\u2190",larrb:"\\u21E4",larrbfs:"\\u291F",larrfs:"\\u291D",larrhk:"\\u21A9",larrlp:"\\u21AB",larrpl:"\\u2939",larrsim:"\\u2973",larrtl:"\\u21A2",lat:"\\u2AAB",latail:"\\u2919",late:"\\u2AAD",lates:"\\u2AAD\\uFE00",lbarr:"\\u290C",lbbrk:"\\u2772",lbrace:"{",lbrack:"[",lbrke:"\\u298B",lbrksld:"\\u298F",lbrkslu:"\\u298D",lcaron:"\\u013E",lcedil:"\\u013C",lceil:"\\u2308",lcub:"{",lcy:"\\u043B",ldca:"\\u2936",ldquo:"\\u201C",ldquor:"\\u201E",ldrdhar:"\\u2967",ldrushar:"\\u294B",ldsh:"\\u21B2",le:"\\u2264",leftarrow:"\\u2190",leftarrowtail:"\\u21A2",leftharpoondown:"\\u21BD",leftharpoonup:"\\u21BC",leftleftarrows:"\\u21C7",leftrightarrow:"\\u2194",leftrightarrows:"\\u21C6",leftrightharpoons:"\\u21CB",leftrightsquigarrow:"\\u21AD",leftthreetimes:"\\u22CB",leg:"\\u22DA",leq:"\\u2264",leqq:"\\u2266",leqslant:"\\u2A7D",les:"\\u2A7D",lescc:"\\u2AA8",lesdot:"\\u2A7F",lesdoto:"\\u2A81",lesdotor:"\\u2A83",lesg:"\\u22DA\\uFE00",lesges:"\\u2A93",lessapprox:"\\u2A85",lessdot:"\\u22D6",lesseqgtr:"\\u22DA",lesseqqgtr:"\\u2A8B",lessgtr:"\\u2276",lesssim:"\\u2272",lfisht:"\\u297C",lfloor:"\\u230A",lfr:"\\u{1D529}",lg:"\\u2276",lgE:"\\u2A91",lhard:"\\u21BD",lharu:"\\u21BC",lharul:"\\u296A",lhblk:"\\u2584",ljcy:"\\u0459",ll:"\\u226A",llarr:"\\u21C7",llcorner:"\\u231E",llhard:"\\u296B",lltri:"\\u25FA",lmidot:"\\u0140",lmoust:"\\u23B0",lmoustache:"\\u23B0",lnE:"\\u2268",lnap:"\\u2A89",lnapprox:"\\u2A89",lne:"\\u2A87",lneq:"\\u2A87",lneqq:"\\u2268",lnsim:"\\u22E6",loang:"\\u27EC",loarr:"\\u21FD",lobrk:"\\u27E6",longleftarrow:"\\u27F5",longleftrightarrow:"\\u27F7",longmapsto:"\\u27FC",longrightarrow:"\\u27F6",looparrowleft:"\\u21AB",looparrowright:"\\u21AC",lopar:"\\u2985",lopf:"\\u{1D55D}",loplus:"\\u2A2D",lotimes:"\\u2A34",lowast:"\\u2217",lowbar:"_",loz:"\\u25CA",lozenge:"\\u25CA",lozf:"\\u29EB",lpar:"(",lparlt:"\\u2993",lrarr:"\\u21C6",lrcorner:"\\u231F",lrhar:"\\u21CB",lrhard:"\\u296D",lrm:"\\u200E",lrtri:"\\u22BF",lsaquo:"\\u2039",lscr:"\\u{1D4C1}",lsh:"\\u21B0",lsim:"\\u2272",lsime:"\\u2A8D",lsimg:"\\u2A8F",lsqb:"[",lsquo:"\\u2018",lsquor:"\\u201A",lstrok:"\\u0142",lt:"<",ltcc:"\\u2AA6",ltcir:"\\u2A79",ltdot:"\\u22D6",lthree:"\\u22CB",ltimes:"\\u22C9",ltlarr:"\\u2976",ltquest:"\\u2A7B",ltrPar:"\\u2996",ltri:"\\u25C3",ltrie:"\\u22B4",ltrif:"\\u25C2",lurdshar:"\\u294A",luruhar:"\\u2966",lvertneqq:"\\u2268\\uFE00",lvnE:"\\u2268\\uFE00",mDDot:"\\u223A",macr:"\\xAF",male:"\\u2642",malt:"\\u2720",maltese:"\\u2720",map:"\\u21A6",mapsto:"\\u21A6",mapstodown:"\\u21A7",mapstoleft:"\\u21A4",mapstoup:"\\u21A5",marker:"\\u25AE",mcomma:"\\u2A29",mcy:"\\u043C",mdash:"\\u2014",measuredangle:"\\u2221",mfr:"\\u{1D52A}",mho:"\\u2127",micro:"\\xB5",mid:"\\u2223",midast:"*",midcir:"\\u2AF0",middot:"\\xB7",minus:"\\u2212",minusb:"\\u229F",minusd:"\\u2238",minusdu:"\\u2A2A",mlcp:"\\u2ADB",mldr:"\\u2026",mnplus:"\\u2213",models:"\\u22A7",mopf:"\\u{1D55E}",mp:"\\u2213",mscr:"\\u{1D4C2}",mstpos:"\\u223E",mu:"\\u03BC",multimap:"\\u22B8",mumap:"\\u22B8",nGg:"\\u22D9\\u0338",nGt:"\\u226B\\u20D2",nGtv:"\\u226B\\u0338",nLeftarrow:"\\u21CD",nLeftrightarrow:"\\u21CE",nLl:"\\u22D8\\u0338",nLt:"\\u226A\\u20D2",nLtv:"\\u226A\\u0338",nRightarrow:"\\u21CF",nVDash:"\\u22AF",nVdash:"\\u22AE",nabla:"\\u2207",nacute:"\\u0144",nang:"\\u2220\\u20D2",nap:"\\u2249",napE:"\\u2A70\\u0338",napid:"\\u224B\\u0338",napos:"\\u0149",napprox:"\\u2249",natur:"\\u266E",natural:"\\u266E",naturals:"\\u2115",nbsp:"\\xA0",nbump:"\\u224E\\u0338",nbumpe:"\\u224F\\u0338",ncap:"\\u2A43",ncaron:"\\u0148",ncedil:"\\u0146",ncong:"\\u2247",ncongdot:"\\u2A6D\\u0338",ncup:"\\u2A42",ncy:"\\u043D",ndash:"\\u2013",ne:"\\u2260",neArr:"\\u21D7",nearhk:"\\u2924",nearr:"\\u2197",nearrow:"\\u2197",nedot:"\\u2250\\u0338",nequiv:"\\u2262",nesear:"\\u2928",nesim:"\\u2242\\u0338",nexist:"\\u2204",nexists:"\\u2204",nfr:"\\u{1D52B}",ngE:"\\u2267\\u0338",nge:"\\u2271",ngeq:"\\u2271",ngeqq:"\\u2267\\u0338",ngeqslant:"\\u2A7E\\u0338",nges:"\\u2A7E\\u0338",ngsim:"\\u2275",ngt:"\\u226F",ngtr:"\\u226F",nhArr:"\\u21CE",nharr:"\\u21AE",nhpar:"\\u2AF2",ni:"\\u220B",nis:"\\u22FC",nisd:"\\u22FA",niv:"\\u220B",njcy:"\\u045A",nlArr:"\\u21CD",nlE:"\\u2266\\u0338",nlarr:"\\u219A",nldr:"\\u2025",nle:"\\u2270",nleftarrow:"\\u219A",nleftrightarrow:"\\u21AE",nleq:"\\u2270",nleqq:"\\u2266\\u0338",nleqslant:"\\u2A7D\\u0338",nles:"\\u2A7D\\u0338",nless:"\\u226E",nlsim:"\\u2274",nlt:"\\u226E",nltri:"\\u22EA",nltrie:"\\u22EC",nmid:"\\u2224",nopf:"\\u{1D55F}",not:"\\xAC",notin:"\\u2209",notinE:"\\u22F9\\u0338",notindot:"\\u22F5\\u0338",notinva:"\\u2209",notinvb:"\\u22F7",notinvc:"\\u22F6",notni:"\\u220C",notniva:"\\u220C",notnivb:"\\u22FE",notnivc:"\\u22FD",npar:"\\u2226",nparallel:"\\u2226",nparsl:"\\u2AFD\\u20E5",npart:"\\u2202\\u0338",npolint:"\\u2A14",npr:"\\u2280",nprcue:"\\u22E0",npre:"\\u2AAF\\u0338",nprec:"\\u2280",npreceq:"\\u2AAF\\u0338",nrArr:"\\u21CF",nrarr:"\\u219B",nrarrc:"\\u2933\\u0338",nrarrw:"\\u219D\\u0338",nrightarrow:"\\u219B",nrtri:"\\u22EB",nrtrie:"\\u22ED",nsc:"\\u2281",nsccue:"\\u22E1",nsce:"\\u2AB0\\u0338",nscr:"\\u{1D4C3}",nshortmid:"\\u2224",nshortparallel:"\\u2226",nsim:"\\u2241",nsime:"\\u2244",nsimeq:"\\u2244",nsmid:"\\u2224",nspar:"\\u2226",nsqsube:"\\u22E2",nsqsupe:"\\u22E3",nsub:"\\u2284",nsubE:"\\u2AC5\\u0338",nsube:"\\u2288",nsubset:"\\u2282\\u20D2",nsubseteq:"\\u2288",nsubseteqq:"\\u2AC5\\u0338",nsucc:"\\u2281",nsucceq:"\\u2AB0\\u0338",nsup:"\\u2285",nsupE:"\\u2AC6\\u0338",nsupe:"\\u2289",nsupset:"\\u2283\\u20D2",nsupseteq:"\\u2289",nsupseteqq:"\\u2AC6\\u0338",ntgl:"\\u2279",ntilde:"\\xF1",ntlg:"\\u2278",ntriangleleft:"\\u22EA",ntrianglelefteq:"\\u22EC",ntriangleright:"\\u22EB",ntrianglerighteq:"\\u22ED",nu:"\\u03BD",num:"#",numero:"\\u2116",numsp:"\\u2007",nvDash:"\\u22AD",nvHarr:"\\u2904",nvap:"\\u224D\\u20D2",nvdash:"\\u22AC",nvge:"\\u2265\\u20D2",nvgt:">\\u20D2",nvinfin:"\\u29DE",nvlArr:"\\u2902",nvle:"\\u2264\\u20D2",nvlt:"<\\u20D2",nvltrie:"\\u22B4\\u20D2",nvrArr:"\\u2903",nvrtrie:"\\u22B5\\u20D2",nvsim:"\\u223C\\u20D2",nwArr:"\\u21D6",nwarhk:"\\u2923",nwarr:"\\u2196",nwarrow:"\\u2196",nwnear:"\\u2927",oS:"\\u24C8",oacute:"\\xF3",oast:"\\u229B",ocir:"\\u229A",ocirc:"\\xF4",ocy:"\\u043E",odash:"\\u229D",odblac:"\\u0151",odiv:"\\u2A38",odot:"\\u2299",odsold:"\\u29BC",oelig:"\\u0153",ofcir:"\\u29BF",ofr:"\\u{1D52C}",ogon:"\\u02DB",ograve:"\\xF2",ogt:"\\u29C1",ohbar:"\\u29B5",ohm:"\\u03A9",oint:"\\u222E",olarr:"\\u21BA",olcir:"\\u29BE",olcross:"\\u29BB",oline:"\\u203E",olt:"\\u29C0",omacr:"\\u014D",omega:"\\u03C9",omicron:"\\u03BF",omid:"\\u29B6",ominus:"\\u2296",oopf:"\\u{1D560}",opar:"\\u29B7",operp:"\\u29B9",oplus:"\\u2295",or:"\\u2228",orarr:"\\u21BB",ord:"\\u2A5D",order:"\\u2134",orderof:"\\u2134",ordf:"\\xAA",ordm:"\\xBA",origof:"\\u22B6",oror:"\\u2A56",orslope:"\\u2A57",orv:"\\u2A5B",oscr:"\\u2134",oslash:"\\xF8",osol:"\\u2298",otilde:"\\xF5",otimes:"\\u2297",otimesas:"\\u2A36",ouml:"\\xF6",ovbar:"\\u233D",par:"\\u2225",para:"\\xB6",parallel:"\\u2225",parsim:"\\u2AF3",parsl:"\\u2AFD",part:"\\u2202",pcy:"\\u043F",percnt:"%",period:".",permil:"\\u2030",perp:"\\u22A5",pertenk:"\\u2031",pfr:"\\u{1D52D}",phi:"\\u03C6",phiv:"\\u03D5",phmmat:"\\u2133",phone:"\\u260E",pi:"\\u03C0",pitchfork:"\\u22D4",piv:"\\u03D6",planck:"\\u210F",planckh:"\\u210E",plankv:"\\u210F",plus:"+",plusacir:"\\u2A23",plusb:"\\u229E",pluscir:"\\u2A22",plusdo:"\\u2214",plusdu:"\\u2A25",pluse:"\\u2A72",plusmn:"\\xB1",plussim:"\\u2A26",plustwo:"\\u2A27",pm:"\\xB1",pointint:"\\u2A15",popf:"\\u{1D561}",pound:"\\xA3",pr:"\\u227A",prE:"\\u2AB3",prap:"\\u2AB7",prcue:"\\u227C",pre:"\\u2AAF",prec:"\\u227A",precapprox:"\\u2AB7",preccurlyeq:"\\u227C",preceq:"\\u2AAF",precnapprox:"\\u2AB9",precneqq:"\\u2AB5",precnsim:"\\u22E8",precsim:"\\u227E",prime:"\\u2032",primes:"\\u2119",prnE:"\\u2AB5",prnap:"\\u2AB9",prnsim:"\\u22E8",prod:"\\u220F",profalar:"\\u232E",profline:"\\u2312",profsurf:"\\u2313",prop:"\\u221D",propto:"\\u221D",prsim:"\\u227E",prurel:"\\u22B0",pscr:"\\u{1D4C5}",psi:"\\u03C8",puncsp:"\\u2008",qfr:"\\u{1D52E}",qint:"\\u2A0C",qopf:"\\u{1D562}",qprime:"\\u2057",qscr:"\\u{1D4C6}",quaternions:"\\u210D",quatint:"\\u2A16",quest:"?",questeq:"\\u225F",quot:\'"\',rAarr:"\\u21DB",rArr:"\\u21D2",rAtail:"\\u291C",rBarr:"\\u290F",rHar:"\\u2964",race:"\\u223D\\u0331",racute:"\\u0155",radic:"\\u221A",raemptyv:"\\u29B3",rang:"\\u27E9",rangd:"\\u2992",range:"\\u29A5",rangle:"\\u27E9",raquo:"\\xBB",rarr:"\\u2192",rarrap:"\\u2975",rarrb:"\\u21E5",rarrbfs:"\\u2920",rarrc:"\\u2933",rarrfs:"\\u291E",rarrhk:"\\u21AA",rarrlp:"\\u21AC",rarrpl:"\\u2945",rarrsim:"\\u2974",rarrtl:"\\u21A3",rarrw:"\\u219D",ratail:"\\u291A",ratio:"\\u2236",rationals:"\\u211A",rbarr:"\\u290D",rbbrk:"\\u2773",rbrace:"}",rbrack:"]",rbrke:"\\u298C",rbrksld:"\\u298E",rbrkslu:"\\u2990",rcaron:"\\u0159",rcedil:"\\u0157",rceil:"\\u2309",rcub:"}",rcy:"\\u0440",rdca:"\\u2937",rdldhar:"\\u2969",rdquo:"\\u201D",rdquor:"\\u201D",rdsh:"\\u21B3",real:"\\u211C",realine:"\\u211B",realpart:"\\u211C",reals:"\\u211D",rect:"\\u25AD",reg:"\\xAE",rfisht:"\\u297D",rfloor:"\\u230B",rfr:"\\u{1D52F}",rhard:"\\u21C1",rharu:"\\u21C0",rharul:"\\u296C",rho:"\\u03C1",rhov:"\\u03F1",rightarrow:"\\u2192",rightarrowtail:"\\u21A3",rightharpoondown:"\\u21C1",rightharpoonup:"\\u21C0",rightleftarrows:"\\u21C4",rightleftharpoons:"\\u21CC",rightrightarrows:"\\u21C9",rightsquigarrow:"\\u219D",rightthreetimes:"\\u22CC",ring:"\\u02DA",risingdotseq:"\\u2253",rlarr:"\\u21C4",rlhar:"\\u21CC",rlm:"\\u200F",rmoust:"\\u23B1",rmoustache:"\\u23B1",rnmid:"\\u2AEE",roang:"\\u27ED",roarr:"\\u21FE",robrk:"\\u27E7",ropar:"\\u2986",ropf:"\\u{1D563}",roplus:"\\u2A2E",rotimes:"\\u2A35",rpar:")",rpargt:"\\u2994",rppolint:"\\u2A12",rrarr:"\\u21C9",rsaquo:"\\u203A",rscr:"\\u{1D4C7}",rsh:"\\u21B1",rsqb:"]",rsquo:"\\u2019",rsquor:"\\u2019",rthree:"\\u22CC",rtimes:"\\u22CA",rtri:"\\u25B9",rtrie:"\\u22B5",rtrif:"\\u25B8",rtriltri:"\\u29CE",ruluhar:"\\u2968",rx:"\\u211E",sacute:"\\u015B",sbquo:"\\u201A",sc:"\\u227B",scE:"\\u2AB4",scap:"\\u2AB8",scaron:"\\u0161",sccue:"\\u227D",sce:"\\u2AB0",scedil:"\\u015F",scirc:"\\u015D",scnE:"\\u2AB6",scnap:"\\u2ABA",scnsim:"\\u22E9",scpolint:"\\u2A13",scsim:"\\u227F",scy:"\\u0441",sdot:"\\u22C5",sdotb:"\\u22A1",sdote:"\\u2A66",seArr:"\\u21D8",searhk:"\\u2925",searr:"\\u2198",searrow:"\\u2198",sect:"\\xA7",semi:";",seswar:"\\u2929",setminus:"\\u2216",setmn:"\\u2216",sext:"\\u2736",sfr:"\\u{1D530}",sfrown:"\\u2322",sharp:"\\u266F",shchcy:"\\u0449",shcy:"\\u0448",shortmid:"\\u2223",shortparallel:"\\u2225",shy:"\\xAD",sigma:"\\u03C3",sigmaf:"\\u03C2",sigmav:"\\u03C2",sim:"\\u223C",simdot:"\\u2A6A",sime:"\\u2243",simeq:"\\u2243",simg:"\\u2A9E",simgE:"\\u2AA0",siml:"\\u2A9D",simlE:"\\u2A9F",simne:"\\u2246",simplus:"\\u2A24",simrarr:"\\u2972",slarr:"\\u2190",smallsetminus:"\\u2216",smashp:"\\u2A33",smeparsl:"\\u29E4",smid:"\\u2223",smile:"\\u2323",smt:"\\u2AAA",smte:"\\u2AAC",smtes:"\\u2AAC\\uFE00",softcy:"\\u044C",sol:"/",solb:"\\u29C4",solbar:"\\u233F",sopf:"\\u{1D564}",spades:"\\u2660",spadesuit:"\\u2660",spar:"\\u2225",sqcap:"\\u2293",sqcaps:"\\u2293\\uFE00",sqcup:"\\u2294",sqcups:"\\u2294\\uFE00",sqsub:"\\u228F",sqsube:"\\u2291",sqsubset:"\\u228F",sqsubseteq:"\\u2291",sqsup:"\\u2290",sqsupe:"\\u2292",sqsupset:"\\u2290",sqsupseteq:"\\u2292",squ:"\\u25A1",square:"\\u25A1",squarf:"\\u25AA",squf:"\\u25AA",srarr:"\\u2192",sscr:"\\u{1D4C8}",ssetmn:"\\u2216",ssmile:"\\u2323",sstarf:"\\u22C6",star:"\\u2606",starf:"\\u2605",straightepsilon:"\\u03F5",straightphi:"\\u03D5",strns:"\\xAF",sub:"\\u2282",subE:"\\u2AC5",subdot:"\\u2ABD",sube:"\\u2286",subedot:"\\u2AC3",submult:"\\u2AC1",subnE:"\\u2ACB",subne:"\\u228A",subplus:"\\u2ABF",subrarr:"\\u2979",subset:"\\u2282",subseteq:"\\u2286",subseteqq:"\\u2AC5",subsetneq:"\\u228A",subsetneqq:"\\u2ACB",subsim:"\\u2AC7",subsub:"\\u2AD5",subsup:"\\u2AD3",succ:"\\u227B",succapprox:"\\u2AB8",succcurlyeq:"\\u227D",succeq:"\\u2AB0",succnapprox:"\\u2ABA",succneqq:"\\u2AB6",succnsim:"\\u22E9",succsim:"\\u227F",sum:"\\u2211",sung:"\\u266A",sup1:"\\xB9",sup2:"\\xB2",sup3:"\\xB3",sup:"\\u2283",supE:"\\u2AC6",supdot:"\\u2ABE",supdsub:"\\u2AD8",supe:"\\u2287",supedot:"\\u2AC4",suphsol:"\\u27C9",suphsub:"\\u2AD7",suplarr:"\\u297B",supmult:"\\u2AC2",supnE:"\\u2ACC",supne:"\\u228B",supplus:"\\u2AC0",supset:"\\u2283",supseteq:"\\u2287",supseteqq:"\\u2AC6",supsetneq:"\\u228B",supsetneqq:"\\u2ACC",supsim:"\\u2AC8",supsub:"\\u2AD4",supsup:"\\u2AD6",swArr:"\\u21D9",swarhk:"\\u2926",swarr:"\\u2199",swarrow:"\\u2199",swnwar:"\\u292A",szlig:"\\xDF",target:"\\u2316",tau:"\\u03C4",tbrk:"\\u23B4",tcaron:"\\u0165",tcedil:"\\u0163",tcy:"\\u0442",tdot:"\\u20DB",telrec:"\\u2315",tfr:"\\u{1D531}",there4:"\\u2234",therefore:"\\u2234",theta:"\\u03B8",thetasym:"\\u03D1",thetav:"\\u03D1",thickapprox:"\\u2248",thicksim:"\\u223C",thinsp:"\\u2009",thkap:"\\u2248",thksim:"\\u223C",thorn:"\\xFE",tilde:"\\u02DC",times:"\\xD7",timesb:"\\u22A0",timesbar:"\\u2A31",timesd:"\\u2A30",tint:"\\u222D",toea:"\\u2928",top:"\\u22A4",topbot:"\\u2336",topcir:"\\u2AF1",topf:"\\u{1D565}",topfork:"\\u2ADA",tosa:"\\u2929",tprime:"\\u2034",trade:"\\u2122",triangle:"\\u25B5",triangledown:"\\u25BF",triangleleft:"\\u25C3",trianglelefteq:"\\u22B4",triangleq:"\\u225C",triangleright:"\\u25B9",trianglerighteq:"\\u22B5",tridot:"\\u25EC",trie:"\\u225C",triminus:"\\u2A3A",triplus:"\\u2A39",trisb:"\\u29CD",tritime:"\\u2A3B",trpezium:"\\u23E2",tscr:"\\u{1D4C9}",tscy:"\\u0446",tshcy:"\\u045B",tstrok:"\\u0167",twixt:"\\u226C",twoheadleftarrow:"\\u219E",twoheadrightarrow:"\\u21A0",uArr:"\\u21D1",uHar:"\\u2963",uacute:"\\xFA",uarr:"\\u2191",ubrcy:"\\u045E",ubreve:"\\u016D",ucirc:"\\xFB",ucy:"\\u0443",udarr:"\\u21C5",udblac:"\\u0171",udhar:"\\u296E",ufisht:"\\u297E",ufr:"\\u{1D532}",ugrave:"\\xF9",uharl:"\\u21BF",uharr:"\\u21BE",uhblk:"\\u2580",ulcorn:"\\u231C",ulcorner:"\\u231C",ulcrop:"\\u230F",ultri:"\\u25F8",umacr:"\\u016B",uml:"\\xA8",uogon:"\\u0173",uopf:"\\u{1D566}",uparrow:"\\u2191",updownarrow:"\\u2195",upharpoonleft:"\\u21BF",upharpoonright:"\\u21BE",uplus:"\\u228E",upsi:"\\u03C5",upsih:"\\u03D2",upsilon:"\\u03C5",upuparrows:"\\u21C8",urcorn:"\\u231D",urcorner:"\\u231D",urcrop:"\\u230E",uring:"\\u016F",urtri:"\\u25F9",uscr:"\\u{1D4CA}",utdot:"\\u22F0",utilde:"\\u0169",utri:"\\u25B5",utrif:"\\u25B4",uuarr:"\\u21C8",uuml:"\\xFC",uwangle:"\\u29A7",vArr:"\\u21D5",vBar:"\\u2AE8",vBarv:"\\u2AE9",vDash:"\\u22A8",vangrt:"\\u299C",varepsilon:"\\u03F5",varkappa:"\\u03F0",varnothing:"\\u2205",varphi:"\\u03D5",varpi:"\\u03D6",varpropto:"\\u221D",varr:"\\u2195",varrho:"\\u03F1",varsigma:"\\u03C2",varsubsetneq:"\\u228A\\uFE00",varsubsetneqq:"\\u2ACB\\uFE00",varsupsetneq:"\\u228B\\uFE00",varsupsetneqq:"\\u2ACC\\uFE00",vartheta:"\\u03D1",vartriangleleft:"\\u22B2",vartriangleright:"\\u22B3",vcy:"\\u0432",vdash:"\\u22A2",vee:"\\u2228",veebar:"\\u22BB",veeeq:"\\u225A",vellip:"\\u22EE",verbar:"|",vert:"|",vfr:"\\u{1D533}",vltri:"\\u22B2",vnsub:"\\u2282\\u20D2",vnsup:"\\u2283\\u20D2",vopf:"\\u{1D567}",vprop:"\\u221D",vrtri:"\\u22B3",vscr:"\\u{1D4CB}",vsubnE:"\\u2ACB\\uFE00",vsubne:"\\u228A\\uFE00",vsupnE:"\\u2ACC\\uFE00",vsupne:"\\u228B\\uFE00",vzigzag:"\\u299A",wcirc:"\\u0175",wedbar:"\\u2A5F",wedge:"\\u2227",wedgeq:"\\u2259",weierp:"\\u2118",wfr:"\\u{1D534}",wopf:"\\u{1D568}",wp:"\\u2118",wr:"\\u2240",wreath:"\\u2240",wscr:"\\u{1D4CC}",xcap:"\\u22C2",xcirc:"\\u25EF",xcup:"\\u22C3",xdtri:"\\u25BD",xfr:"\\u{1D535}",xhArr:"\\u27FA",xharr:"\\u27F7",xi:"\\u03BE",xlArr:"\\u27F8",xlarr:"\\u27F5",xmap:"\\u27FC",xnis:"\\u22FB",xodot:"\\u2A00",xopf:"\\u{1D569}",xoplus:"\\u2A01",xotime:"\\u2A02",xrArr:"\\u27F9",xrarr:"\\u27F6",xscr:"\\u{1D4CD}",xsqcup:"\\u2A06",xuplus:"\\u2A04",xutri:"\\u25B3",xvee:"\\u22C1",xwedge:"\\u22C0",yacute:"\\xFD",yacy:"\\u044F",ycirc:"\\u0177",ycy:"\\u044B",yen:"\\xA5",yfr:"\\u{1D536}",yicy:"\\u0457",yopf:"\\u{1D56A}",yscr:"\\u{1D4CE}",yucy:"\\u044E",yuml:"\\xFF",zacute:"\\u017A",zcaron:"\\u017E",zcy:"\\u0437",zdot:"\\u017C",zeetrf:"\\u2128",zeta:"\\u03B6",zfr:"\\u{1D537}",zhcy:"\\u0436",zigrarr:"\\u21DD",zopf:"\\u{1D56B}",zscr:"\\u{1D4CF}",zwj:"\\u200D",zwnj:"\\u200C"};var yi={}.hasOwnProperty;function Ie(e){return yi.call(Sr,e)?Sr[e]:!1}var Ze={name:"characterReference",tokenize:bi};function bi(e,r,t){let n=this,i=0,o,a;return u;function u(E){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),s}function s(E){return E===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(E),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,a=ee,l(E))}function f(E){return E===88||E===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(E),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=At,l):(e.enter("characterReferenceValue"),o=7,a=Re,l(E))}function l(E){let g;return E===59&&i?(g=e.exit("characterReferenceValue"),a===ee&&!Ie(n.sliceSerialize(g))?t(E):(e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),e.exit("characterReference"),r)):a(E)&&i++<o?(e.consume(E),l):t(E)}}var Je={name:"codeFenced",tokenize:Ei,concrete:!0};function Ei(e,r,t){let n=this,i={tokenize:I,partial:!0},o={tokenize:L,partial:!0},a=this.events[this.events.length-1],u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0,f;return l;function l(y){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f=y,E(y)}function E(y){return y===f?(e.consume(y),s++,E):(e.exit("codeFencedFenceSequence"),s<3?t(y):R(e,g,"whitespace")(y))}function g(y){return y===null||F(y)?b(y):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===null||G(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),R(e,m,"whitespace")(y)):y===96&&y===f?t(y):(e.consume(y),h)}function m(y){return y===null||F(y)?b(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||F(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),b(y)):y===96&&y===f?t(y):(e.consume(y),d)}function b(y){return e.exit("codeFencedFence"),n.interrupt?r(y):x(y)}function x(y){return y===null?C(y):F(y)?e.attempt(o,e.attempt(i,C,u?R(e,x,"linePrefix",u+1):x),C)(y):(e.enter("codeFlowValue"),q(y))}function q(y){return y===null||F(y)?(e.exit("codeFlowValue"),x(y)):(e.consume(y),q)}function C(y){return e.exit("codeFenced"),r(y)}function L(y,D,B){let S=this;return T;function T(_){return y.enter("lineEnding"),y.consume(_),y.exit("lineEnding"),k}function k(_){return S.parser.lazy[S.now().line]?B(_):D(_)}}function I(y,D,B){let S=0;return R(y,T,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function T(v){return y.enter("codeFencedFence"),y.enter("codeFencedFenceSequence"),k(v)}function k(v){return v===f?(y.consume(v),S++,k):S<s?B(v):(y.exit("codeFencedFenceSequence"),R(y,_,"whitespace")(v))}function _(v){return v===null||F(v)?(y.exit("codeFencedFence"),D(v)):B(v)}}}var Me={name:"codeIndented",tokenize:vi},Si={tokenize:Ai,partial:!0};function vi(e,r,t){let n=this;return i;function i(f){return e.enter("codeIndented"),R(e,o,"linePrefix",4+1)(f)}function o(f){let l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?a(f):t(f)}function a(f){return f===null?s(f):F(f)?e.attempt(Si,a,s)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||F(f)?(e.exit("codeFlowValue"),a(f)):(e.consume(f),u)}function s(f){return e.exit("codeIndented"),r(f)}}function Ai(e,r,t){let n=this;return i;function i(a){return n.parser.lazy[n.now().line]?t(a):F(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):R(e,o,"linePrefix",4+1)(a)}function o(a){let u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?r(a):F(a)?i(a):t(a)}}var vr={name:"codeText",tokenize:qi,resolve:Ci,previous:Ti};function Ci(e){let r=e.length-4,t=3,n,i;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[r][1].type==="lineEnding"||e[r][1].type==="space")){for(n=t;++n<r;)if(e[n][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(n=t-1,r++;++n<=r;)i===void 0?n!==r&&e[n][1].type!=="lineEnding"&&(i=n):(n===r||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),r-=n-i-2,n=i+2),i=void 0);return e}function Ti(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qi(e,r,t){let n=this,i=0,o,a;return u;function u(g){return e.enter("codeText"),e.enter("codeTextSequence"),s(g)}function s(g){return g===96?(e.consume(g),i++,s):(e.exit("codeTextSequence"),f(g))}function f(g){return g===null?t(g):g===96?(a=e.enter("codeTextSequence"),o=0,E(g)):g===32?(e.enter("space"),e.consume(g),e.exit("space"),f):F(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),f):(e.enter("codeTextData"),l(g))}function l(g){return g===null||g===32||g===96||F(g)?(e.exit("codeTextData"),f(g)):(e.consume(g),l)}function E(g){return g===96?(e.consume(g),o++,E):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),r(g)):(a.type="codeTextData",l(g))}}function Ye(e){let r={},t=-1,n,i,o,a,u,s,f;for(;++t<e.length;){for(;t in r;)t=r[t];if(n=e[t],t&&n[1].type==="chunkFlow"&&e[t-1][1].type==="listItemPrefix"&&(s=n[1]._tokenizer.events,o=0,o<s.length&&s[o][1].type==="lineEndingBlank"&&(o+=2),o<s.length&&s[o][1].type==="content"))for(;++o<s.length&&s[o][1].type!=="content";)s[o][1].type==="chunkText"&&(s[o][1]._isInFirstContentOfListItem=!0,o++);if(n[0]==="enter")n[1].contentType&&(Object.assign(r,Fi(e,t)),t=r[t],f=!0);else if(n[1]._container){for(o=t,i=void 0;o--&&(a=e[o],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);i&&(n[1].end=Object.assign({},e[i][1].start),u=e.slice(i,t),u.unshift(n),Z(e,i,t-i+1,u))}}return!f}function Fi(e,r){let t=e[r][1],n=e[r][2],i=r-1,o=[],a=t._tokenizer||n.parser[t.contentType](t.start),u=a.events,s=[],f={},l,E,g=-1,h=t,m=0,d=0,b=[d];for(;h;){for(;e[++i][1]!==h;);o.push(i),h._tokenizer||(l=n.sliceStream(h),h.next||l.push(null),E&&a.defineSkip(h.start),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(l),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),E=h,h=h.next}for(h=t;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(d=g+1,b.push(d),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(a.events=[],h?(h._tokenizer=void 0,h.previous=void 0):b.pop(),g=b.length;g--;){let x=u.slice(b[g],b[g+1]),q=o.pop();s.unshift([q,q+x.length-1]),Z(e,q,2,x)}for(g=-1;++g<s.length;)f[m+s[g][0]]=m+s[g][1],m+=s[g][1]-s[g][0]-1;return f}var Ar={tokenize:Li,resolve:Ii},_i={tokenize:Oi,partial:!0};function Ii(e){return Ye(e),e}function Li(e,r){let t;return n;function n(u){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):F(u)?e.check(_i,a,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),r(u)}function a(u){return e.consume(u),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function Oi(e,r,t){let n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),R(e,o,"linePrefix")}function o(a){if(a===null||F(a))return t(a);let u=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?r(a):e.interrupt(n.parser.constructs.flow,t,r)(a)}}function Xe(e,r,t,n,i,o,a,u,s){let f=s||Number.POSITIVE_INFINITY,l=0;return E;function E(x){return x===60?(e.enter(n),e.enter(i),e.enter(o),e.consume(x),e.exit(o),g):x===null||x===41||Be(x)?t(x):(e.enter(n),e.enter(a),e.enter(u),e.enter("chunkString",{contentType:"string"}),d(x))}function g(x){return x===62?(e.enter(o),e.consume(x),e.exit(o),e.exit(i),e.exit(n),r):(e.enter(u),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(u),g(x)):x===null||x===60||F(x)?t(x):(e.consume(x),x===92?m:h)}function m(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function d(x){return x===40?++l>f?t(x):(e.consume(x),d):x===41?l--?(e.consume(x),d):(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(n),r(x)):x===null||G(x)?l?t(x):(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(n),r(x)):Be(x)?t(x):(e.consume(x),x===92?b:d)}function b(x){return x===40||x===41||x===92?(e.consume(x),d):d(x)}}function er(e,r,t,n,i,o){let a=this,u=0,s;return f;function f(h){return e.enter(n),e.enter(i),e.consume(h),e.exit(i),e.enter(o),l}function l(h){return h===null||h===91||h===93&&!s||h===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs||u>999?t(h):h===93?(e.exit(o),e.enter(i),e.consume(h),e.exit(i),e.exit(n),r):F(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),E(h))}function E(h){return h===null||h===91||h===93||F(h)||u++>999?(e.exit("chunkString"),l(h)):(e.consume(h),s=s||!j(h),h===92?g:E)}function g(h){return h===91||h===92||h===93?(e.consume(h),u++,E):E(h)}}function rr(e,r,t,n,i,o){let a;return u;function u(g){return e.enter(n),e.enter(i),e.consume(g),e.exit(i),a=g===40?41:g,s}function s(g){return g===a?(e.enter(i),e.consume(g),e.exit(i),e.exit(n),r):(e.enter(o),f(g))}function f(g){return g===a?(e.exit(o),s(a)):g===null?t(g):F(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),R(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(g))}function l(g){return g===a||g===null||F(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?E:l)}function E(g){return g===a||g===92?(e.consume(g),l):l(g)}}function ve(e,r){let t;return n;function n(i){return F(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t=!0,n):j(i)?R(e,n,t?"linePrefix":"lineSuffix")(i):r(i)}}function me(e){return e.replace(/[\\t\\n\\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var Cr={name:"definition",tokenize:Di},Pi={tokenize:zi,partial:!0};function Di(e,r,t){let n=this,i;return o;function o(s){return e.enter("definition"),er.call(n,e,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(s)}function a(s){return i=me(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),s===58?(e.enter("definitionMarker"),e.consume(s),e.exit("definitionMarker"),ve(e,Xe(e,e.attempt(Pi,R(e,u,"whitespace"),R(e,u,"whitespace")),t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):t(s)}function u(s){return s===null||F(s)?(e.exit("definition"),n.parser.defined.includes(i)||n.parser.defined.push(i),r(s)):t(s)}}function zi(e,r,t){return n;function n(a){return G(a)?ve(e,i)(a):t(a)}function i(a){return a===34||a===39||a===40?rr(e,R(e,o,"whitespace"),t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a):t(a)}function o(a){return a===null||F(a)?r(a):t(a)}}var Tr={name:"hardBreakEscape",tokenize:Ri};function Ri(e,r,t){return n;function n(o){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(o),i}function i(o){return F(o)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),r(o)):t(o)}}var qr={name:"headingAtx",tokenize:Ni,resolve:Bi};function Bi(e,r){let t=e.length-2,n=3,i,o;return e[n][1].type==="whitespace"&&(n+=2),t-2>n&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&e[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[t][1].end},o={type:"chunkText",start:e[n][1].start,end:e[t][1].end,contentType:"text"},Z(e,n,t-n+1,[["enter",i,r],["enter",o,r],["exit",o,r],["exit",i,r]])),e}function Ni(e,r,t){let n=this,i=0;return o;function o(l){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(l)}function a(l){return l===35&&i++<6?(e.consume(l),a):l===null||G(l)?(e.exit("atxHeadingSequence"),n.interrupt?r(l):u(l)):t(l)}function u(l){return l===35?(e.enter("atxHeadingSequence"),s(l)):l===null||F(l)?(e.exit("atxHeading"),r(l)):j(l)?R(e,u,"whitespace")(l):(e.enter("atxHeadingText"),f(l))}function s(l){return l===35?(e.consume(l),s):(e.exit("atxHeadingSequence"),u(l))}function f(l){return l===null||l===35||G(l)?(e.exit("atxHeadingText"),u(l)):(e.consume(l),f)}}var Ot=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Fr=["pre","script","style","textarea"];var _r={name:"htmlFlow",tokenize:ji,resolveTo:Wi,concrete:!0},Mi={tokenize:Ui,partial:!0};function Wi(e){let r=e.length;for(;r--&&!(e[r][0]==="enter"&&e[r][1].type==="htmlFlow"););return r>1&&e[r-2][1].type==="linePrefix"&&(e[r][1].start=e[r-2][1].start,e[r+1][1].start=e[r-2][1].start,e.splice(r-2,2)),e}function ji(e,r,t){let n=this,i,o,a,u,s;return f;function f(c){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(c),l}function l(c){return c===33?(e.consume(c),E):c===47?(e.consume(c),m):c===63?(e.consume(c),i=3,n.interrupt?r:$):re(c)?(e.consume(c),a=String.fromCharCode(c),o=!0,d):t(c)}function E(c){return c===45?(e.consume(c),i=2,g):c===91?(e.consume(c),i=5,a="CDATA[",u=0,h):re(c)?(e.consume(c),i=4,n.interrupt?r:$):t(c)}function g(c){return c===45?(e.consume(c),n.interrupt?r:$):t(c)}function h(c){return c===a.charCodeAt(u++)?(e.consume(c),u===a.length?n.interrupt?r:k:h):t(c)}function m(c){return re(c)?(e.consume(c),a=String.fromCharCode(c),d):t(c)}function d(c){return c===null||c===47||c===62||G(c)?c!==47&&o&&Fr.includes(a.toLowerCase())?(i=1,n.interrupt?r(c):k(c)):Ot.includes(a.toLowerCase())?(i=6,c===47?(e.consume(c),b):n.interrupt?r(c):k(c)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(c):o?q(c):x(c)):c===45||ee(c)?(e.consume(c),a+=String.fromCharCode(c),d):t(c)}function b(c){return c===62?(e.consume(c),n.interrupt?r:k):t(c)}function x(c){return j(c)?(e.consume(c),x):S(c)}function q(c){return c===47?(e.consume(c),S):c===58||c===95||re(c)?(e.consume(c),C):j(c)?(e.consume(c),q):S(c)}function C(c){return c===45||c===46||c===58||c===95||ee(c)?(e.consume(c),C):L(c)}function L(c){return c===61?(e.consume(c),I):j(c)?(e.consume(c),L):q(c)}function I(c){return c===null||c===60||c===61||c===62||c===96?t(c):c===34||c===39?(e.consume(c),s=c,y):j(c)?(e.consume(c),I):(s=null,D(c))}function y(c){return c===null||F(c)?t(c):c===s?(e.consume(c),B):(e.consume(c),y)}function D(c){return c===null||c===34||c===39||c===60||c===61||c===62||c===96||G(c)?L(c):(e.consume(c),D)}function B(c){return c===47||c===62||j(c)?q(c):t(c)}function S(c){return c===62?(e.consume(c),T):t(c)}function T(c){return j(c)?(e.consume(c),T):c===null||F(c)?k(c):t(c)}function k(c){return c===45&&i===2?(e.consume(c),M):c===60&&i===1?(e.consume(c),z):c===62&&i===4?(e.consume(c),Q):c===63&&i===3?(e.consume(c),$):c===93&&i===5?(e.consume(c),N):F(c)&&(i===6||i===7)?e.check(Mi,Q,_)(c):c===null||F(c)?_(c):(e.consume(c),k)}function _(c){return e.exit("htmlFlowData"),v(c)}function v(c){return c===null?p(c):F(c)?e.attempt({tokenize:O,partial:!0},v,p)(c):(e.enter("htmlFlowData"),k(c))}function O(c,Le,ye){return qe;function qe(ae){return c.enter("lineEnding"),c.consume(ae),c.exit("lineEnding"),Oe}function Oe(ae){return n.parser.lazy[n.now().line]?ye(ae):Le(ae)}}function M(c){return c===45?(e.consume(c),$):k(c)}function z(c){return c===47?(e.consume(c),a="",W):k(c)}function W(c){return c===62&&Fr.includes(a.toLowerCase())?(e.consume(c),Q):re(c)&&a.length<8?(e.consume(c),a+=String.fromCharCode(c),W):k(c)}function N(c){return c===93?(e.consume(c),$):k(c)}function $(c){return c===62?(e.consume(c),Q):c===45&&i===2?(e.consume(c),$):k(c)}function Q(c){return c===null||F(c)?(e.exit("htmlFlowData"),p(c)):(e.consume(c),Q)}function p(c){return e.exit("htmlFlow"),r(c)}}function Ui(e,r,t){return n;function n(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(xe,r,t)}}var Ir={name:"htmlText",tokenize:Hi};function Hi(e,r,t){let n=this,i,o,a,u;return s;function s(p){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(p),f}function f(p){return p===33?(e.consume(p),l):p===47?(e.consume(p),D):p===63?(e.consume(p),I):re(p)?(e.consume(p),T):t(p)}function l(p){return p===45?(e.consume(p),E):p===91?(e.consume(p),o="CDATA[",a=0,b):re(p)?(e.consume(p),L):t(p)}function E(p){return p===45?(e.consume(p),g):t(p)}function g(p){return p===null||p===62?t(p):p===45?(e.consume(p),h):m(p)}function h(p){return p===null||p===62?t(p):m(p)}function m(p){return p===null?t(p):p===45?(e.consume(p),d):F(p)?(u=m,N(p)):(e.consume(p),m)}function d(p){return p===45?(e.consume(p),Q):m(p)}function b(p){return p===o.charCodeAt(a++)?(e.consume(p),a===o.length?x:b):t(p)}function x(p){return p===null?t(p):p===93?(e.consume(p),q):F(p)?(u=x,N(p)):(e.consume(p),x)}function q(p){return p===93?(e.consume(p),C):x(p)}function C(p){return p===62?Q(p):p===93?(e.consume(p),C):x(p)}function L(p){return p===null||p===62?Q(p):F(p)?(u=L,N(p)):(e.consume(p),L)}function I(p){return p===null?t(p):p===63?(e.consume(p),y):F(p)?(u=I,N(p)):(e.consume(p),I)}function y(p){return p===62?Q(p):I(p)}function D(p){return re(p)?(e.consume(p),B):t(p)}function B(p){return p===45||ee(p)?(e.consume(p),B):S(p)}function S(p){return F(p)?(u=S,N(p)):j(p)?(e.consume(p),S):Q(p)}function T(p){return p===45||ee(p)?(e.consume(p),T):p===47||p===62||G(p)?k(p):t(p)}function k(p){return p===47?(e.consume(p),Q):p===58||p===95||re(p)?(e.consume(p),_):F(p)?(u=k,N(p)):j(p)?(e.consume(p),k):Q(p)}function _(p){return p===45||p===46||p===58||p===95||ee(p)?(e.consume(p),_):v(p)}function v(p){return p===61?(e.consume(p),O):F(p)?(u=v,N(p)):j(p)?(e.consume(p),v):k(p)}function O(p){return p===null||p===60||p===61||p===62||p===96?t(p):p===34||p===39?(e.consume(p),i=p,M):F(p)?(u=O,N(p)):j(p)?(e.consume(p),O):(e.consume(p),i=void 0,W)}function M(p){return p===i?(e.consume(p),z):p===null?t(p):F(p)?(u=M,N(p)):(e.consume(p),M)}function z(p){return p===62||p===47||G(p)?k(p):t(p)}function W(p){return p===null||p===34||p===39||p===60||p===61||p===96?t(p):p===62||G(p)?k(p):(e.consume(p),W)}function N(p){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),R(e,$,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $(p){return e.enter("htmlTextData"),u(p)}function Q(p){return p===62?(e.consume(p),e.exit("htmlTextData"),e.exit("htmlText"),r):t(p)}}var Ae={name:"labelEnd",tokenize:Zi,resolveTo:Ki,resolveAll:$i},Vi={tokenize:Ji},Qi={tokenize:Yi},Gi={tokenize:Xi};function $i(e){let r=-1,t;for(;++r<e.length;)t=e[r][1],(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(e.splice(r+1,t.type==="labelImage"?4:2),t.type="data",r++);return e}function Ki(e,r){let t=e.length,n=0,i,o,a,u;for(;t--;)if(i=e[t][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=t,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=t);let s={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},f={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[a][1].end)},l={type:"labelText",start:Object.assign({},e[o+n+2][1].end),end:Object.assign({},e[a-2][1].start)};return u=[["enter",s,r],["enter",f,r]],u=X(u,e.slice(o+1,o+n+3)),u=X(u,[["enter",l,r]]),u=X(u,_e(r.parser.constructs.insideSpan.null,e.slice(o+n+4,a-3),r)),u=X(u,[["exit",l,r],e[a-2],e[a-1],["exit",f,r]]),u=X(u,e.slice(a+1)),u=X(u,[["exit",s,r]]),Z(e,o,e.length,u),e}function Zi(e,r,t){let n=this,i=n.events.length,o,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){o=n.events[i][1];break}return u;function u(l){return o?o._inactive?f(l):(a=n.parser.defined.includes(me(n.sliceSerialize({start:o.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelEnd"),s):t(l)}function s(l){return l===40?e.attempt(Vi,r,a?r:f)(l):l===91?e.attempt(Qi,r,a?e.attempt(Gi,r,f):f)(l):a?r(l):f(l)}function f(l){return o._balanced=!0,t(l)}}function Ji(e,r,t){return n;function n(s){return e.enter("resource"),e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),ve(e,i)}function i(s){return s===41?u(s):Xe(e,o,t,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(s)}function o(s){return G(s)?ve(e,a)(s):u(s)}function a(s){return s===34||s===39||s===40?rr(e,ve(e,u),t,"resourceTitle","resourceTitleMarker","resourceTitleString")(s):u(s)}function u(s){return s===41?(e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),e.exit("resource"),r):t(s)}}function Yi(e,r,t){let n=this;return i;function i(a){return er.call(n,e,o,t,"reference","referenceMarker","referenceString")(a)}function o(a){return n.parser.defined.includes(me(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?r(a):t(a)}}function Xi(e,r,t){return n;function n(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),r):t(o)}}var Lr={name:"labelStartImage",tokenize:eo,resolveAll:Ae.resolveAll};function eo(e,r,t){let n=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),a):t(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(u):r(u)}}var Or={name:"labelStartLink",tokenize:ro,resolveAll:Ae.resolveAll};function ro(e,r,t){let n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(a):r(a)}}var We={name:"lineEnding",tokenize:to};function to(e,r){return t;function t(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),R(e,r,"linePrefix")}}var Ce={name:"thematicBreak",tokenize:no};function no(e,r,t){let n=0,i;return o;function o(s){return e.enter("thematicBreak"),i=s,a(s)}function a(s){return s===i?(e.enter("thematicBreakSequence"),u(s)):j(s)?R(e,a,"whitespace")(s):n<3||s!==null&&!F(s)?t(s):(e.exit("thematicBreak"),r(s))}function u(s){return s===i?(e.consume(s),n++,u):(e.exit("thematicBreakSequence"),a(s))}}var J={name:"list",tokenize:uo,continuation:{tokenize:ao},exit:lo},io={tokenize:co,partial:!0},oo={tokenize:so,partial:!0};function uo(e,r,t){let n=this,i=n.events[n.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return u;function u(h){let m=n.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||h===n.containerState.marker:Re(h)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Ce,t,f)(h):f(h);if(!n.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(h)}return t(h)}function s(h){return Re(h)&&++a<10?(e.consume(h),s):(!n.interrupt||a<2)&&(n.containerState.marker?h===n.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),f(h)):t(h)}function f(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||h,e.check(xe,n.interrupt?t:l,e.attempt(io,g,E))}function l(h){return n.containerState.initialBlankLine=!0,o++,g(h)}function E(h){return j(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),g):t(h)}function g(h){return n.containerState.size=o+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,r(h)}}function ao(e,r,t){let n=this;return n.containerState._closeFlow=void 0,e.check(xe,i,o);function i(u){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,R(e,r,"listItemIndent",n.containerState.size+1)(u)}function o(u){return n.containerState.furtherBlankLines||!j(u)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(u)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(oo,r,a)(u))}function a(u){return n.containerState._closeFlow=!0,n.interrupt=void 0,R(e,e.attempt(J,r,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function so(e,r,t){let n=this;return R(e,i,"listItemIndent",n.containerState.size+1);function i(o){let a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?r(o):t(o)}}function lo(e){e.exit(this.containerState.type)}function co(e,r,t){let n=this;return R(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(o){let a=n.events[n.events.length-1];return!j(o)&&a&&a[1].type==="listItemPrefixWhitespace"?r(o):t(o)}}var tr={name:"setextUnderline",tokenize:fo,resolveTo:po};function po(e,r){let t=e.length,n,i,o;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){n=t;break}e[t][1].type==="paragraph"&&(i=t)}else e[t][1].type==="content"&&e.splice(t,1),!o&&e[t][1].type==="definition"&&(o=t);let a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,r]),e.splice(o+1,0,["exit",e[n][1],r]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=a,e.push(["exit",a,r]),e}function fo(e,r,t){let n=this,i=n.events.length,o,a;for(;i--;)if(n.events[i][1].type!=="lineEnding"&&n.events[i][1].type!=="linePrefix"&&n.events[i][1].type!=="content"){a=n.events[i][1].type==="paragraph";break}return u;function u(l){return!n.parser.lazy[n.now().line]&&(n.interrupt||a)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),o=l,s(l)):t(l)}function s(l){return l===o?(e.consume(l),s):(e.exit("setextHeadingLineSequence"),R(e,f,"lineSuffix")(l))}function f(l){return l===null||F(l)?(e.exit("setextHeadingLine"),r(l)):t(l)}}var Pt={tokenize:ho};function ho(e){let r=this,t=e.attempt(xe,n,e.attempt(this.parser.constructs.flowInitial,i,R(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ar,i)),"linePrefix")));return t;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),r.currentConstruct=void 0,t}}var Dt={resolveAll:Nt()},zt=Bt("string"),Rt=Bt("text");function Bt(e){return{tokenize:r,resolveAll:Nt(e==="text"?mo:void 0)};function r(t){let n=this,i=this.parser.constructs[e],o=t.attempt(i,a,u);return a;function a(l){return f(l)?o(l):u(l)}function u(l){if(l===null){t.consume(l);return}return t.enter("data"),t.consume(l),s}function s(l){return f(l)?(t.exit("data"),o(l)):(t.consume(l),s)}function f(l){if(l===null)return!0;let E=i[l],g=-1;if(E)for(;++g<E.length;){let h=E[g];if(!h.previous||h.previous.call(n,n.previous))return!0}return!1}}}function Nt(e){return r;function r(t,n){let i=-1,o;for(;++i<=t.length;)o===void 0?t[i]&&t[i][1].type==="data"&&(o=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(t,n):t}}function mo(e,r){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){let n=e[t-1][1],i=r.sliceStream(n),o=i.length,a=-1,u=0,s;for(;o--;){let f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(f===-2)s=!0,u++;else if(f!==-1){o++;break}}if(u){let f={type:t===e.length||s||u<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-u,offset:n.end.offset-u,_index:n.start._index+o,_bufferIndex:o?a:n.start._bufferIndex+a},end:Object.assign({},n.end)};n.end=Object.assign({},f.start),n.start.offset===n.end.offset?Object.assign(n,f):(e.splice(t,0,["enter",f,r],["exit",f,r]),t+=2)}t++}return e}function Mt(e,r,t){let n=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],a=[],u=[],s=!0,f={consume:L,enter:I,exit:y,attempt:S(D),check:S(B),interrupt:S(B,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:m,now:b,defineSkip:x,write:h},E=r.tokenize.call(l,f),g;return r.resolveAll&&o.push(r),l;function h(v){return a=X(a,v),q(),a[a.length-1]!==null?[]:(T(r,0),l.events=_e(o,l.events,l),l.events)}function m(v,O){return xo(d(v),O)}function d(v){return go(a,v)}function b(){return Object.assign({},n)}function x(v){i[v.line]=v.column,_()}function q(){let v;for(;n._index<a.length;){let O=a[n._index];if(typeof O=="string")for(v=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===v&&n._bufferIndex<O.length;)C(O.charCodeAt(n._bufferIndex));else C(O)}}function C(v){s=void 0,g=v,E=E(v)}function L(v){F(v)?(n.line++,n.column=1,n.offset+=v===-3?2:1,_()):v!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),l.previous=v,s=!0}function I(v,O){let M=O||{};return M.type=v,M.start=b(),l.events.push(["enter",M,l]),u.push(M),M}function y(v){let O=u.pop();return O.end=b(),l.events.push(["exit",O,l]),O}function D(v,O){T(v,O.from)}function B(v,O){O.restore()}function S(v,O){return M;function M(z,W,N){let $,Q,p,c;return Array.isArray(z)?ye(z):"tokenize"in z?ye([z]):Le(z);function Le(K){return Pe;function Pe(le){let Fe=le!==null&&K[le],be=le!==null&&K.null,hr=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray(be)?be:be?[be]:[]];return ye(hr)(le)}}function ye(K){return $=K,Q=0,K.length===0?N:qe(K[Q])}function qe(K){return Pe;function Pe(le){return c=k(),p=K,K.partial||(l.currentConstruct=K),K.name&&l.parser.constructs.disable.null.includes(K.name)?ae(le):K.tokenize.call(O?Object.assign(Object.create(l),O):l,f,Oe,ae)(le)}}function Oe(K){return s=!0,v(p,c),W}function ae(K){return s=!0,c.restore(),++Q<$.length?qe($[Q]):N}}}function T(v,O){v.resolveAll&&!o.includes(v)&&o.push(v),v.resolve&&Z(l.events,O,l.events.length-O,v.resolve(l.events.slice(O),l)),v.resolveTo&&(l.events=v.resolveTo(l.events,l))}function k(){let v=b(),O=l.previous,M=l.currentConstruct,z=l.events.length,W=Array.from(u);return{restore:N,from:z};function N(){n=v,l.previous=O,l.currentConstruct=M,l.events.length=z,u=W,_()}}function _(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function go(e,r){let t=r.start._index,n=r.start._bufferIndex,i=r.end._index,o=r.end._bufferIndex,a;return t===i?a=[e[t].slice(n,o)]:(a=e.slice(t,i),n>-1&&(a[0]=a[0].slice(n)),o>0&&a.push(e[i].slice(0,o))),a}function xo(e,r){let t=-1,n=[],i;for(;++t<e.length;){let o=e[t],a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\\r";break}case-4:{a=`\n`;break}case-3:{a=`\\r\n`;break}case-2:{a=r?" ":"	";break}case-1:{if(!r&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,n.push(a)}return n.join("")}var Pr={};ht(Pr,{attentionMarkers:()=>Ao,contentInitial:()=>wo,disable:()=>Co,document:()=>ko,flow:()=>bo,flowInitial:()=>yo,insideSpan:()=>vo,string:()=>Eo,text:()=>So});var ko={[42]:J,[43]:J,[45]:J,[48]:J,[49]:J,[50]:J,[51]:J,[52]:J,[53]:J,[54]:J,[55]:J,[56]:J,[57]:J,[62]:$e},wo={[91]:Cr},yo={[-2]:Me,[-1]:Me,[32]:Me},bo={[35]:qr,[42]:Ce,[45]:[tr,Ce],[60]:_r,[61]:tr,[95]:Ce,[96]:Je,[126]:Je},Eo={[38]:Ze,[92]:Ke},So={[-5]:We,[-4]:We,[-3]:We,[33]:Lr,[38]:Ze,[42]:Ne,[60]:[Er,Ir],[91]:Or,[92]:[Tr,Ke],[93]:Ae,[95]:Ne,[96]:vr},vo={null:[Ne,Dt]},Ao={null:[42,95]},Co={null:[]};function Wt(e={}){let r=St([Pr].concat(e.extensions||[])),t={defined:[],lazy:{},constructs:r,content:n(Ft),document:n(It),flow:n(Pt),string:n(zt),text:n(Rt)};return t;function n(i){return o;function o(a){return Mt(t,i,a)}}}var jt=/[\\0\\t\\n\\r]/g;function Ut(){let e=1,r="",t=!0,n;return i;function i(o,a,u){let s=[],f,l,E,g,h;for(o=r+o.toString(a),E=0,r="",t&&(o.charCodeAt(0)===65279&&E++,t=void 0);E<o.length;){if(jt.lastIndex=E,f=jt.exec(o),g=f&&f.index!==void 0?f.index:o.length,h=o.charCodeAt(g),!f){r=o.slice(E);break}if(h===10&&E===g&&n)s.push(-3),n=void 0;else switch(n&&(s.push(-5),n=void 0),E<g&&(s.push(o.slice(E,g)),e+=g-E),h){case 0:{s.push(65533),e++;break}case 9:{for(l=Math.ceil(e/4)*4,s.push(-2);e++<l;)s.push(-1);break}case 10:{s.push(-4),e=1;break}default:n=!0,e=1}E=g+1}return u&&(n&&s.push(-5),r&&s.push(r),s.push(null)),s}}function Ht(e){for(;!Ye(e););return e}function nr(e,r){let t=Number.parseInt(e,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"\\uFFFD":String.fromCharCode(t)}var To=/\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi;function Vt(e){return e.replace(To,qo)}function qo(e,r,t){if(r)return r;if(t.charCodeAt(0)===35){let i=t.charCodeAt(1),o=i===120||i===88;return nr(t.slice(o?2:1),o?16:10)}return Ie(t)||e}function ke(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Qt(e.position):"start"in e||"end"in e?Qt(e):"line"in e||"column"in e?Dr(e):""}function Dr(e){return Gt(e&&e.line)+":"+Gt(e&&e.column)}function Qt(e){return Dr(e&&e.start)+"-"+Dr(e&&e.end)}function Gt(e){return e&&typeof e=="number"?e:1}var Kt={}.hasOwnProperty,zr=function(e,r,t){return typeof r!="string"&&(t=r,r=void 0),Fo(t)(Ht(Wt(t).document().write(Ut()(e,r,!0))))};function Fo(e){let r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(st),autolinkProtocol:k,autolinkEmail:k,atxHeading:u(ot),blockQuote:u(Fe),characterEscape:k,characterReference:k,codeFenced:u(be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:u(be,s),codeText:u(hr,s),codeTextData:k,data:k,codeFlowValue:k,definition:u(Un),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:u(Hn),hardBreakEscape:u(ut),hardBreakTrailing:u(ut),htmlFlow:u(at,s),htmlFlowData:k,htmlText:u(at,s),htmlTextData:k,image:u(Vn),label:s,link:u(st),listItem:u(Qn),listItemValue:m,listOrdered:u(lt,h),listUnordered:u(lt),paragraph:u(Gn),reference:qe,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:u(ot),strong:u($n),thematicBreak:u(Zn)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:le,autolinkProtocol:Pe,blockQuote:l(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:K,codeFenced:l(q),codeFencedFence:x,codeFencedFenceInfo:d,codeFencedFenceMeta:b,codeFlowValue:_,codeIndented:l(C),codeText:l(W),codeTextData:_,data:_,definition:l(),definitionDestinationString:y,definitionLabelString:L,definitionTitleString:I,emphasis:l(),hardBreakEscape:l(O),hardBreakTrailing:l(O),htmlFlow:l(M),htmlFlowData:_,htmlText:l(z),htmlTextData:_,image:l($),label:p,labelText:Q,lineEnding:v,link:l(N),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Oe,resourceDestinationString:c,resourceTitleString:Le,resource:ye,setextHeading:l(T),setextHeadingLineSequence:S,setextHeadingText:B,strong:l(),thematicBreak:l()}};Zt(r,(e||{}).mdastExtensions||[]);let t={};return n;function n(w){let A={type:"root",children:[]},P={stack:[A],tokenStack:[],config:r,enter:f,exit:E,buffer:s,resume:g,setData:o,getData:a},U=[],H=-1;for(;++H<w.length;)if(w[H][1].type==="listOrdered"||w[H][1].type==="listUnordered")if(w[H][0]==="enter")U.push(H);else{let oe=U.pop();H=i(w,oe,H)}for(H=-1;++H<w.length;){let oe=r[w[H][0]];Kt.call(oe,w[H][1].type)&&oe[w[H][1].type].call(Object.assign({sliceSerialize:w[H][2].sliceSerialize},P),w[H][1])}if(P.tokenStack.length>0){let oe=P.tokenStack[P.tokenStack.length-1];(oe[1]||$t).call(P,void 0,oe[0])}for(A.position={start:we(w.length>0?w[0][1].start:{line:1,column:1,offset:0}),end:we(w.length>0?w[w.length-2][1].end:{line:1,column:1,offset:0})},H=-1;++H<r.transforms.length;)A=r.transforms[H](A)||A;return A}function i(w,A,P){let U=A-1,H=-1,oe=!1,de,ce,De,ze;for(;++U<=P;){let V=w[U];if(V[1].type==="listUnordered"||V[1].type==="listOrdered"||V[1].type==="blockQuote"?(V[0]==="enter"?H++:H--,ze=void 0):V[1].type==="lineEndingBlank"?V[0]==="enter"&&(de&&!ze&&!H&&!De&&(De=U),ze=void 0):V[1].type==="linePrefix"||V[1].type==="listItemValue"||V[1].type==="listItemMarker"||V[1].type==="listItemPrefix"||V[1].type==="listItemPrefixWhitespace"||(ze=void 0),!H&&V[0]==="enter"&&V[1].type==="listItemPrefix"||H===-1&&V[0]==="exit"&&(V[1].type==="listUnordered"||V[1].type==="listOrdered")){if(de){let mr=U;for(ce=void 0;mr--;){let pe=w[mr];if(pe[1].type==="lineEnding"||pe[1].type==="lineEndingBlank"){if(pe[0]==="exit")continue;ce&&(w[ce][1].type="lineEndingBlank",oe=!0),pe[1].type="lineEnding",ce=mr}else if(!(pe[1].type==="linePrefix"||pe[1].type==="blockQuotePrefix"||pe[1].type==="blockQuotePrefixWhitespace"||pe[1].type==="blockQuoteMarker"||pe[1].type==="listItemIndent"))break}De&&(!ce||De<ce)&&(de._spread=!0),de.end=Object.assign({},ce?w[ce][1].start:V[1].end),w.splice(ce||U,0,["exit",de,V[2]]),U++,P++}V[1].type==="listItemPrefix"&&(de={type:"listItem",_spread:!1,start:Object.assign({},V[1].start)},w.splice(U,0,["enter",de,V[2]]),U++,P++,De=void 0,ze=!0)}}return w[A][1]._spread=oe,P}function o(w,A){t[w]=A}function a(w){return t[w]}function u(w,A){return P;function P(U){f.call(this,w(U),U),A&&A.call(this,U)}}function s(){this.stack.push({type:"fragment",children:[]})}function f(w,A,P){return this.stack[this.stack.length-1].children.push(w),this.stack.push(w),this.tokenStack.push([A,P]),w.position={start:we(A.start)},w}function l(w){return A;function A(P){w&&w.call(this,P),E.call(this,P)}}function E(w,A){let P=this.stack.pop(),U=this.tokenStack.pop();if(U)U[0].type!==w.type&&(A?A.call(this,w,U[0]):(U[1]||$t).call(this,w,U[0]));else throw new Error("Cannot close `"+w.type+"` ("+ke({start:w.start,end:w.end})+"): it\\u2019s not open");return P.position.end=we(w.end),P}function g(){return wr(this.stack.pop())}function h(){o("expectingFirstListItemValue",!0)}function m(w){if(a("expectingFirstListItemValue")){let A=this.stack[this.stack.length-2];A.start=Number.parseInt(this.sliceSerialize(w),10),o("expectingFirstListItemValue")}}function d(){let w=this.resume(),A=this.stack[this.stack.length-1];A.lang=w}function b(){let w=this.resume(),A=this.stack[this.stack.length-1];A.meta=w}function x(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function q(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g,""),o("flowCodeInside")}function C(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w.replace(/(\\r?\\n|\\r)$/g,"")}function L(w){let A=this.resume(),P=this.stack[this.stack.length-1];P.label=A,P.identifier=me(this.sliceSerialize(w)).toLowerCase()}function I(){let w=this.resume(),A=this.stack[this.stack.length-1];A.title=w}function y(){let w=this.resume(),A=this.stack[this.stack.length-1];A.url=w}function D(w){let A=this.stack[this.stack.length-1];if(!A.depth){let P=this.sliceSerialize(w).length;A.depth=P}}function B(){o("setextHeadingSlurpLineEnding",!0)}function S(w){let A=this.stack[this.stack.length-1];A.depth=this.sliceSerialize(w).charCodeAt(0)===61?1:2}function T(){o("setextHeadingSlurpLineEnding")}function k(w){let A=this.stack[this.stack.length-1],P=A.children[A.children.length-1];(!P||P.type!=="text")&&(P=Kn(),P.position={start:we(w.start)},A.children.push(P)),this.stack.push(P)}function _(w){let A=this.stack.pop();A.value+=this.sliceSerialize(w),A.position.end=we(w.end)}function v(w){let A=this.stack[this.stack.length-1];if(a("atHardBreak")){let P=A.children[A.children.length-1];P.position.end=we(w.end),o("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&r.canContainEols.includes(A.type)&&(k.call(this,w),_.call(this,w))}function O(){o("atHardBreak",!0)}function M(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function z(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function W(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function N(){let w=this.stack[this.stack.length-1];if(a("inReference")){let A=a("referenceType")||"shortcut";w.type+="Reference",w.referenceType=A,delete w.url,delete w.title}else delete w.identifier,delete w.label;o("referenceType")}function $(){let w=this.stack[this.stack.length-1];if(a("inReference")){let A=a("referenceType")||"shortcut";w.type+="Reference",w.referenceType=A,delete w.url,delete w.title}else delete w.identifier,delete w.label;o("referenceType")}function Q(w){let A=this.sliceSerialize(w),P=this.stack[this.stack.length-2];P.label=Vt(A),P.identifier=me(A).toLowerCase()}function p(){let w=this.stack[this.stack.length-1],A=this.resume(),P=this.stack[this.stack.length-1];if(o("inReference",!0),P.type==="link"){let U=w.children;P.children=U}else P.alt=A}function c(){let w=this.resume(),A=this.stack[this.stack.length-1];A.url=w}function Le(){let w=this.resume(),A=this.stack[this.stack.length-1];A.title=w}function ye(){o("inReference")}function qe(){o("referenceType","collapsed")}function Oe(w){let A=this.resume(),P=this.stack[this.stack.length-1];P.label=A,P.identifier=me(this.sliceSerialize(w)).toLowerCase(),o("referenceType","full")}function ae(w){o("characterReferenceType",w.type)}function K(w){let A=this.sliceSerialize(w),P=a("characterReferenceType"),U;P?(U=nr(A,P==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):U=Ie(A);let H=this.stack.pop();H.value+=U,H.position.end=we(w.end)}function Pe(w){_.call(this,w);let A=this.stack[this.stack.length-1];A.url=this.sliceSerialize(w)}function le(w){_.call(this,w);let A=this.stack[this.stack.length-1];A.url="mailto:"+this.sliceSerialize(w)}function Fe(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function hr(){return{type:"inlineCode",value:""}}function Un(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Hn(){return{type:"emphasis",children:[]}}function ot(){return{type:"heading",depth:void 0,children:[]}}function ut(){return{type:"break"}}function at(){return{type:"html",value:""}}function Vn(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function lt(w){return{type:"list",ordered:w.type==="listOrdered",start:null,spread:w._spread,children:[]}}function Qn(w){return{type:"listItem",spread:w._spread,checked:null,children:[]}}function Gn(){return{type:"paragraph",children:[]}}function $n(){return{type:"strong",children:[]}}function Kn(){return{type:"text",value:""}}function Zn(){return{type:"thematicBreak"}}}function we(e){return{line:e.line,column:e.column,offset:e.offset}}function Zt(e,r){let t=-1;for(;++t<r.length;){let n=r[t];Array.isArray(n)?Zt(e,n):_o(e,n)}}function _o(e,r){let t;for(t in r)if(Kt.call(r,t)){if(t==="canContainEols"){let n=r[t];n&&e[t].push(...n)}else if(t==="transforms"){let n=r[t];n&&e[t].push(...n)}else if(t==="enter"||t==="exit"){let n=r[t];n&&Object.assign(e[t],n)}}}function $t(e,r){throw e?new Error("Cannot close `"+e.type+"` ("+ke({start:e.start,end:e.end})+"): a different token (`"+r.type+"`, "+ke({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+ke({start:r.start,end:r.end})+") is still open")}function Rr(e){Object.assign(this,{Parser:t=>{let n=this.data("settings");return zr(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var Jt=Rr;function Br(e){if(e)throw e}var dn=he(Nr(),1),$r=he(sn(),1);function je(e){if(typeof e!="object"||e===null)return!1;let r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ln(){let e=[],r={run:t,use:n};return r;function t(...i){let o=-1,a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...i);function u(s,...f){let l=e[++o],E=-1;if(s){a(s);return}for(;++E<i.length;)(f[E]===null||f[E]===void 0)&&(f[E]=i[E]);i=f,l?Io(l,u)(...f):a(null,...f)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),r}}function Io(e,r){let t;return n;function n(...a){let u=e.length>a.length,s;u&&a.push(i);try{s=e.apply(this,a)}catch(f){let l=f;if(u&&t)throw l;return i(l)}u||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(a,...u){t||(t=!0,r(a,...u))}function o(a){i(null,a)}}var pn=he(Nr(),1);var Y=class extends Error{constructor(r,t,n){let i=[null,null],o={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(n=t,t=void 0),typeof n=="string"){let a=n.indexOf(":");a===-1?i[1]=n:(i[0]=n.slice(0,a),i[1]=n.slice(a+1))}t&&("type"in t||"position"in t?t.position&&(o=t.position):"start"in t||"end"in t?o=t:("line"in t||"column"in t)&&(o.start=t)),this.name=ke(t)||"1:1",this.message=typeof r=="object"?r.message:r,this.stack="",typeof r=="object"&&r.stack&&(this.stack=r.stack),this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.position=o,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Y.prototype.file="";Y.prototype.name="";Y.prototype.reason="";Y.prototype.message="";Y.prototype.stack="";Y.prototype.fatal=null;Y.prototype.column=null;Y.prototype.line=null;Y.prototype.source=null;Y.prototype.ruleId=null;Y.prototype.position=null;var ie=he(require("path"),1);var Mr=he(require("process"),1);var Wr=require("url");function or(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}var jr=["history","path","basename","stem","extname","dirname"],Ue=class{constructor(r){let t;r?typeof r=="string"||Lo(r)?t={value:r}:or(r)?t={path:r}:t=r:t={},this.data={},this.messages=[],this.history=[],this.cwd=Mr.default.cwd(),this.value,this.stored,this.result,this.map;let n=-1;for(;++n<jr.length;){let o=jr[n];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let i;for(i in t)jr.includes(i)||(this[i]=t[i])}get path(){return this.history[this.history.length-1]}set path(r){or(r)&&(r=(0,Wr.fileURLToPath)(r)),Hr(r,"path"),this.path!==r&&this.history.push(r)}get dirname(){return typeof this.path=="string"?ie.default.dirname(this.path):void 0}set dirname(r){cn(this.basename,"dirname"),this.path=ie.default.join(r||"",this.basename)}get basename(){return typeof this.path=="string"?ie.default.basename(this.path):void 0}set basename(r){Hr(r,"basename"),Ur(r,"basename"),this.path=ie.default.join(this.dirname||"",r)}get extname(){return typeof this.path=="string"?ie.default.extname(this.path):void 0}set extname(r){if(Ur(r,"extname"),cn(this.dirname,"extname"),r){if(r.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ie.default.join(this.dirname,this.stem+(r||""))}get stem(){return typeof this.path=="string"?ie.default.basename(this.path,this.extname):void 0}set stem(r){Hr(r,"stem"),Ur(r,"stem"),this.path=ie.default.join(this.dirname||"",r+(this.extname||""))}toString(r){return(this.value||"").toString(r||void 0)}message(r,t,n){let i=new Y(r,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(r,t,n){let i=this.message(r,t,n);return i.fatal=null,i}fail(r,t,n){let i=this.message(r,t,n);throw i.fatal=!0,i}};function Ur(e,r){if(e&&e.includes(ie.default.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+ie.default.sep+"`")}function Hr(e,r){if(!e)throw new Error("`"+r+"` cannot be empty")}function cn(e,r){if(!e)throw new Error("Setting `"+r+"` requires `path` to be set too")}function Lo(e){return(0,pn.default)(e)}var Kr=xn().freeze(),gn={}.hasOwnProperty;function xn(){let e=ln(),r=[],t={},n,i=-1;return o.data=a,o.Parser=void 0,o.Compiler=void 0,o.freeze=u,o.attachers=r,o.use=s,o.parse=f,o.stringify=l,o.run=E,o.runSync=g,o.process=h,o.processSync=m,o;function o(){let d=xn(),b=-1;for(;++b<r.length;)d.use(...r[b]);return d.data((0,$r.default)(!0,{},t)),d}function a(d,b){return typeof d=="string"?arguments.length===2?(Gr("data",n),t[d]=b,o):gn.call(t,d)&&t[d]||null:d?(Gr("data",n),t=d,o):t}function u(){if(n)return o;for(;++i<r.length;){let[d,...b]=r[i];if(b[0]===!1)continue;b[0]===!0&&(b[0]=void 0);let x=d.call(o,...b);typeof x=="function"&&e.use(x)}return n=!0,i=Number.POSITIVE_INFINITY,o}function s(d,...b){let x;if(Gr("use",n),d!=null)if(typeof d=="function")I(d,...b);else if(typeof d=="object")Array.isArray(d)?L(d):C(d);else throw new TypeError("Expected usable value, not `"+d+"`");return x&&(t.settings=Object.assign(t.settings||{},x)),o;function q(y){if(typeof y=="function")I(y);else if(typeof y=="object")if(Array.isArray(y)){let[D,...B]=y;I(D,...B)}else C(y);else throw new TypeError("Expected usable value, not `"+y+"`")}function C(y){L(y.plugins),y.settings&&(x=Object.assign(x||{},y.settings))}function L(y){let D=-1;if(y!=null)if(Array.isArray(y))for(;++D<y.length;){let B=y[D];q(B)}else throw new TypeError("Expected a list of plugins, not `"+y+"`")}function I(y,D){let B=-1,S;for(;++B<r.length;)if(r[B][0]===y){S=r[B];break}S?(je(S[1])&&je(D)&&(D=(0,$r.default)(!0,S[1],D)),S[1]=D):r.push([...arguments])}}function f(d){o.freeze();let b=He(d),x=o.Parser;return Vr("parse",x),fn(x,"parse")?new x(String(b),b).parse():x(String(b),b)}function l(d,b){o.freeze();let x=He(b),q=o.Compiler;return Qr("stringify",q),hn(d),fn(q,"compile")?new q(d,x).compile():q(d,x)}function E(d,b,x){if(hn(d),o.freeze(),!x&&typeof b=="function"&&(x=b,b=void 0),!x)return new Promise(q);q(null,x);function q(C,L){e.run(d,He(b),I);function I(y,D,B){D=D||d,y?L(y):C?C(D):x(null,D,B)}}}function g(d,b){let x,q;return o.run(d,b,C),mn("runSync","run",q),x;function C(L,I){Br(L),x=I,q=!0}}function h(d,b){if(o.freeze(),Vr("process",o.Parser),Qr("process",o.Compiler),!b)return new Promise(x);x(null,b);function x(q,C){let L=He(d);o.run(o.parse(L),L,(y,D,B)=>{if(y||!D||!B)I(y);else{let S=o.stringify(D,B);S==null||(Do(S)?B.value=S:B.result=S),I(y,B)}});function I(y,D){y||!D?C(y):q?q(D):b(null,D)}}}function m(d){let b;o.freeze(),Vr("processSync",o.Parser),Qr("processSync",o.Compiler);let x=He(d);return o.process(x,q),mn("processSync","process",b),x;function q(C){b=!0,Br(C)}}}function fn(e,r){return typeof e=="function"&&e.prototype&&(Oo(e.prototype)||r in e.prototype)}function Oo(e){let r;for(r in e)if(gn.call(e,r))return!0;return!1}function Vr(e,r){if(typeof r!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Qr(e,r){if(typeof r!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Gr(e,r){if(r)throw new Error("Cannot call `"+e+"` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function hn(e){if(!je(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mn(e,r,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+r+"` instead")}function He(e){return Po(e)?e:new Ue(e)}function Po(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Do(e){return typeof e=="string"||(0,dn.default)(e)}var kn={}.hasOwnProperty;function ur(e,r){let t=r||{};function n(i,...o){let a=n.invalid,u=n.handlers;if(i&&kn.call(i,e)){let s=String(i[e]);a=kn.call(u,s)?u[s]:n.unknown}if(a)return a.call(this,i,...o)}return n.handlers=t.handlers||{},n.invalid=t.invalid,n.unknown=t.unknown,n}var zo=ur("operator",{unknown:jo,invalid:yn,handlers:{"=":Ro,"^=":No,"$=":Mo,"*=":Wo,"~=":Bo}});function wn(e,r){let t=-1;for(;++t<e.attrs.length;)if(!zo(e.attrs[t],r))return!1;return!0}function yn(e,r){return r[e.name]!==null&&r[e.name]!==void 0}function Ro(e,r){return yn(e,r)&&String(r[e.name])===e.value}function Bo(e,r){let t=r[e.name];return t==null?!1:Array.isArray(t)&&t.includes(e.value)?!0:String(t)===e.value}function No(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.slice(0,e.value.length)===e.value)}function Mo(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.slice(-e.value.length)===e.value)}function Wo(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.includes(e.value))}function jo(e){throw new Error("Unknown operator `"+e.operator+"`")}function bn(e,r){return e.tagName==="*"||e.tagName===r.type}var Uo=new Set([9,10,12,13,32]),En="0".charCodeAt(0),Ho="9".charCodeAt(0);function Sn(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let r=0,t=0,n=o(),i=a();if(r<e.length&&e.charAt(r)==="n"&&(r++,t=n*(i!=null?i:1),u(),r<e.length?(n=o(),u(),i=a()):n=i=0),i===null||r<e.length)throw new Error(`n-th rule couldn\'t be parsed (\'${e}\')`);return[t,n*i];function o(){return e.charAt(r)==="-"?(r++,-1):(e.charAt(r)==="+"&&r++,1)}function a(){let s=r,f=0;for(;r<e.length&&e.charCodeAt(r)>=En&&e.charCodeAt(r)<=Ho;)f=f*10+(e.charCodeAt(r)-En),r++;return r===s?null:f}function u(){for(;r<e.length&&Uo.has(e.charCodeAt(r));)r++}}var Zr=he(An(),1);function Cn(e){let r=e[0],t=e[1]-1;if(t<0&&r<=0)return Zr.default.falseFunc;if(r===-1)return o=>o<=t;if(r===0)return o=>o===t;if(r===1)return t<0?Zr.default.trueFunc:o=>o>=t;let n=Math.abs(r),i=(t%n+n)%n;return r>1?o=>o>=t&&o%n===i:o=>o<=t&&o%n===i}function ar(e){return Cn(Sn(e))}function Te(e){return Array.isArray(e.children)}var Vo=ar.default||ar,Qo=ur("name",{unknown:su,invalid:au,handlers:{any:Jr,blank:Tn,empty:Tn,"first-child":Go,"first-of-type":$o,has:Ko,"last-child":Zo,"last-of-type":Jo,matches:Jr,not:Yo,"nth-child":Xo,"nth-last-child":eu,"nth-of-type":tu,"nth-last-of-type":ru,"only-child":nu,"only-of-type":iu,root:ou,scope:uu}});Yr.needsIndex=["any","first-child","first-of-type","last-child","last-of-type","matches","not","nth-child","nth-last-child","nth-of-type","nth-last-of-type","only-child","only-of-type"];function Yr(e,r,t,n,i){let o=e.pseudos,a=-1;for(;++a<o.length;)if(!Qo(o[a],r,t,n,i))return!1;return!0}function Tn(e,r){return Te(r)?r.children.length===0:!("value"in r)}function Go(e,r,t,n,i){return se(i,e),i.nodeIndex===0}function $o(e,r,t,n,i){return se(i,e),i.typeIndex===0}function Ko(e,r,t,n,i){let o={type:"root",children:Te(r)?r.children:[]},a=Se(Ee({},i),{found:!1,shallow:!1,one:!0,scopeNodes:[r],results:[],rootQuery:Ve(e.value)});return Qe(a,o),a.results.length>0}function Zo(e,r,t,n,i){return se(i,e),typeof i.nodeCount=="number"&&i.nodeIndex===i.nodeCount-1}function Jo(e,r,t,n,i){return se(i,e),typeof i.typeCount=="number"&&i.typeIndex===i.typeCount-1}function Jr(e,r,t,n,i){let o=Se(Ee({},i),{found:!1,shallow:!1,one:!0,scopeNodes:[r],results:[],rootQuery:Ve(e.value)});return Qe(o,r),o.results[0]===r}function Yo(e,r,t,n,i){return!Jr(e,r,t,n,i)}function Xo(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.nodeIndex=="number"&&o(i.nodeIndex)}function eu(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.nodeCount=="number"&&typeof i.nodeIndex=="number"&&o(i.nodeCount-i.nodeIndex-1)}function ru(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.typeIndex=="number"&&typeof i.typeCount=="number"&&o(i.typeCount-1-i.typeIndex)}function tu(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.typeIndex=="number"&&o(i.typeIndex)}function nu(e,r,t,n,i){return se(i,e),i.nodeCount===1}function iu(e,r,t,n,i){return se(i,e),i.typeCount===1}function ou(e,r,t,n){return r&&!n}function uu(e,r,t,n,i){return r&&i.scopeNodes.includes(r)}function au(){throw new Error("Invalid pseudo-selector")}function su(e){throw e.name?new Error("Unknown pseudo-selector `"+e.name+"`"):new Error("Unexpected pseudo-element or empty pseudo-class")}function se(e,r){if(e.shallow)throw new Error("Cannot use `:"+r.name+"` without parent")}function sr(e){let r=e._cachedFn;return r||(r=Vo(e.value),e._cachedFn=r),r}function qn(e,r,t,n,i){if(e.id)throw new Error("Invalid selector: id");if(e.classNames)throw new Error("Invalid selector: class");return!!(r&&(!e.tagName||bn(e,r))&&(!e.attrs||wn(e,r))&&(!e.pseudos||Yr(e,r,t,n,i)))}var lu=[];function Ve(e){return e===null?{type:"selectors",selectors:[]}:e.type==="ruleSet"?{type:"selectors",selectors:[e]}:e}function Qe(e,r){r&&_n(e,[],r,void 0,void 0)}function _n(e,r,t,n,i){let o={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0};return o=pu(e,lr(r,e.rootQuery.selectors),t,n,i),Te(t)&&!e.shallow&&!(e.one&&e.found)&&cu(e,o,t),o}function cu(e,r,t){let n=lr(r.descendant,r.directChild),i,o=-1,a={count:0,types:new Map},u={count:0,types:new Map};for(;++o<t.children.length;)Fn(a,t.children[o]);for(o=-1;++o<t.children.length;){let f=t.children[o].type.toUpperCase();e.nodeIndex=u.count,e.typeIndex=u.types.get(f)||0,e.nodeCount=a.count,e.typeCount=a.types.get(f);let l=lr(n,i),E=_n(e,l,t.children[o],o,t);if(i=lr(E.generalSibling,E.adjacentSibling),e.one&&e.found)break;Fn(u,t.children[o])}}function pu(e,r,t,n,i){let o={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0},a=-1;for(;++a<r.length;){let u=r[a];if(e.one&&e.found)break;if(e.shallow&&u.rule.rule)throw new Error("Expected selector without nesting");if(qn(u.rule,t,n,i,e)){let s=u.rule.rule;if(s){let f={type:"ruleSet",rule:s},l=s.nestingOperator==="+"?"adjacentSibling":s.nestingOperator==="~"?"generalSibling":s.nestingOperator===">"?"directChild":"descendant";Xr(o,l,f)}else e.found=!0,e.results.includes(t)||e.results.push(t)}u.rule.nestingOperator===null?Xr(o,"descendant",u):u.rule.nestingOperator==="~"&&Xr(o,"generalSibling",u)}return o}function lr(e,r){return e&&r&&e.length>0&&r.length>0?[...e,...r]:e&&e.length>0?e:r&&r.length>0?r:lu}function Xr(e,r,t){let n=e[r];n?n.push(t):e[r]=[t]}function Fn(e,r){let t=r.type.toUpperCase(),n=(e.types.get(t)||0)+1;e.count++,e.types.set(t,n)}var Pn=he(On(),1),pr=new Pn.CssSelectorParser;pr.registerAttrEqualityMods("~","^","$","*");pr.registerSelectorPseudos("any","matches","not","has");pr.registerNestingOperators(">","+","~");function Dn(e){if(typeof e!="string")throw new TypeError("Expected `string` as selector, not `"+e+"`");return pr.parse(e)}function it(e,r){let t=bu(e,r);return Qe(t,r||void 0),t.results}function bu(e,r){return{rootQuery:Ve(Dn(e)),results:[],scopeNodes:r?Te(r)&&(r.type==="RootNode"||r.type==="root")?r.children:[r]:[],one:!1,shallow:!1,found:!1,typeIndex:void 0,nodeIndex:void 0,typeCount:void 0,nodeCount:void 0}}var Eu=Kr().use(Jt).freeze(),Su=e=>{let r=Eu.parse(e),t=it("blockquote > paragraph link",r).filter(({url:u})=>{try{let s=new URL(u);return s.protocol==="zotero:"&&s.searchParams.has("annotation")}catch(s){return!1}}),n=it("blockquote > paragraph",r),i=new Map;for(let{children:u}of n){let s="";for(let f of u)if(f.type==="text")s+=f.value;else if(f.type==="link")i.set(f,s.replace(/\\n+/g," ").trim()),s="";else{let{start:l,end:E}=f.position;s+=e.slice(l.offset,E.offset)}}let o=vu(e,t.map(({position:{start:u,end:s}})=>[u.offset,s.offset]));return{annots:t.map(u=>{var h;let{url:s,children:f}=u,l=f[0],E=f[f.length-1],g={annotKey:new URL(s).searchParams.get("annotation"),url:s,fallback:(h=i.get(u))!=null?h:""};return f.length===1&&l.type==="inlineCode"&&l.value?Se(Ee({},g),{alt:l.value,altType:"code"}):f.length>0&&l.type==="text"&&l.value.startsWith("%%")&&E.type==="text"&&E.value.endsWith("%%")?Se(Ee({},g),{alt:zn(e,f).slice(2,-2),altType:"text"}):Se(Ee({},g),{alt:zn(e,f),altType:"none"})}),withoutLinks:o}},Rn=Su,vu=(e,r)=>{let t=0;for(let[n,i]of r)e=e.slice(0,n+t)+e.slice(i+t),t+=n-i;return e},zn=(e,r)=>{if(r.length===0)return"";let t=r[0].position.start.offset,n=r[r.length-1].position.end.offset;return e.slice(t,n)};var Mn=he(Nn(),1),Au=e=>{let r=e.map(({text:n,alt:i,altType:o})=>{if(o==="code")try{return`${new Function("raw",`return raw.${i}`)(n)}`}catch(a){let u=`Failed to alter annotation "${n}", error: ${a}`;return console.error(u,a),`<span style="color:var(--text-error)">${n}</span>`}else{if(o==="text")return i;if(o==="none")return n;(0,Mn.assertNever)(o)}}),t=e.map(({url:n,altType:i,alt:o},a)=>`[${i==="none"&&o&&!Cu.has(o.toLowerCase())?o:a>0?a:"annot"}](${n})`);return[r.join(" ")+" "+t.join(" ")].map(n=>"> "+n).join(`\n`)},Cu=new Set(["zotero","annot"]),Wn=Au;var Tu={parse:Rn,stringify:Wn};(0,jn.worker)(wt(Tu));\n/*! Bundled license information:\n\n@aidenlx/workerpool/dist/workerpool.js:\n  (**\n   * workerpool.js\n   * https://github.com/josdejong/workerpool\n   *\n   * Offload tasks to a pool of workers on node.js and in the browser.\n   *\n   * @version 6.2.1-mod.13\n   * @date    2022-10-04\n   *\n   * @license\n   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>\n   *\n   * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n   * use this file except in compliance with the License. You may obtain a copy\n   * of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n   * License for the specific language governing permissions and limitations under\n   * the License.\n   *)\n\nis-buffer/index.js:\n  (*!\n   * Determine if an object is a Buffer\n   *\n   * @author   Feross Aboukhadijeh <https://feross.org>\n   * @license  MIT\n   *)\n*/\n';var fp=class extends ce{plugin=this.use(be);#e=pc(cP);#t=lP.default.pool(this.#e,{workerType:"web",name:"Zotero Annot Block Worker"});api=mc(this.#t);onload(){this.plugin.registerMarkdownCodeBlockProcessor("zotero-annot",(t,r,n)=>{let o=new Ey(r,this.plugin.database,this);n.addChild(o),o.load(),o.render([t,n.sourcePath])})}async onunload(){await this.#t.terminate(),URL.revokeObjectURL(this.#e)}async parse(t){return await this.api.parse(t)}async stringify(t){return await this.api.stringify(t)}},Ey=class extends pp.MarkdownRenderChild{constructor(r,n,o){super(r);this.db=n;this.worker=o}cache=null;async render(r){this.containerEl.empty();let n,o,i;if(r)[i,o]=r,this.cache=null,n=(await this.worker.parse(i)).annots,this.cache=[n,o,i];else if(this.cache)[n,o,i]=this.cache;else{ne.debug("Cannot render without spec or cache");return}let a;try{let s=await this.db.api.getAnnotFromKey(n.map(({annotKey:l})=>l),this.db.settings.citationLibrary),u=n.map(({annotKey:l,...c})=>({...c,annotKey:l,text:s[l]?.type===Se.highlight?s[l].text??"":""}));a=await this.worker.stringify(u)}catch(s){$e("stringify annots",s),a=i}await pp.MarkdownRenderer.renderMarkdown(a,this.containerEl,o,this)}onload(){this.registerEvent(app.vault.on("zotero:db-refresh",this.render.bind(this)))}};var mp=require("@codemirror/language");var Sy=require("obsidian");var dp=class extends ce{plugin=this.use(be);onload(){this.patchEditorClick()}async patchEditorClick(){let{workspace:t}=this.plugin.app,{noteIndex:r,database:n,settings:o,noteFeatures:i}=this.plugin;await p1(this.plugin.app);let a=()=>t.getLeavesOfType("markdown").length>0,[s,u]=Ba({register:c=>t.on("layout-change",()=>{a()&&c()}),unregister:c=>t.offref(c),escape:a,timeout:null});u&&this.register(u),await s;let l=t.getLeavesOfType("markdown")[0].view;this.register(Rt(l.editor.constructor.prototype,{getClickableTokenAt:c=>function(f,...p){let d=c.call(this,f,...p);return d||cG.call(this,f,r)}})),this.register(Rt(l.editMode.constructor.prototype,{triggerClickableToken:c=>function(f,p){if(f.type==="internal-link"&&f.citekey==="zotero")(async()=>{let d=f.text,{[d]:h}=await n.api.getItemIDsFromCitekey([f.text]);if(h<0){new Sy.Notice(`Citekey ${d} not found in Zotero`);return}let[g]=await n.api.getItems([[h,o.database.citationLibrary]]);if(!g){new Sy.Notice(`Item not found for citekey ${d}`);return}let y=await i.createNoteForDocItemFull(g);await t.openLinkText(y,"",!0,{active:!0})})();else return c.call(this,f,p)}}))}};function cG(e,t){let r=this.cm,n=r.state.doc,o=[],i=n.line(e.line+1),a=(0,mp.syntaxTree)(r.state),s=i.from;a.iterate({from:i.from,to:i.to,enter:g=>{let y=g.type,w=g.from,x=g.to,A=y.prop(mp.tokenClassNodeProp);A&&(s<w&&o.push({type:"",from:s,to:w}),o.push({type:A,from:w,to:x}),s=x)}}),s<i.to&&o.push({type:"",from:s,to:i.to});let u=this.posToOffset(e),l=-1;for(let g=0;g<o.length;g++){let y=o[g];if(y.from<=u&&y.to>=u){l=g;break}}if(l<0)return null;let c=o[l];if(!c.type.split(" ").includes("hmd-barelink"))return null;let p=n.sliceString(c.from,c.to);if(!p.startsWith("@"))return null;let d=p.slice(1),h={start:this.offsetToPos(c.from),end:this.offsetToPos(c.to)};if(t.citekeyCache.has(d)){let[g]=t.citekeyCache.get(d);return{type:"internal-link",text:g,...h}}else return{type:"internal-link",text:d,citekey:"zotero",...h}}var pP=require("obsidian");var fP=se(Qe(),1);var Ui=class extends Me{getDefaults(){return{literatureNoteFolder:"LiteratureNotes"}}async apply(t){t==="literatureNoteFolder"?this.use(lo).reload():(0,fP.default)(t)}get joinPath(){return lG(this.literatureNoteFolder)}},lG=e=>e==="/"?"":e+"/";var lo=class extends ce{plugin=this.use(be);settings=this.use(Ui);get meta(){return this.plugin.app.metadataCache}get vault(){return this.plugin.app.vault}get template(){return this.plugin.settings.template}noteCache=new Map;blockCache={byFile:new Map,byKey:new Map};citekeyCache=new Map;#e(t,r){let n=lg(r);if(n){if(!this.noteCache.has(n))return this.noteCache.set(n,new Set([t])),!0;let i=this.noteCache.get(n),a=i.size;return i.add(t).size!==a}let o=!1;for(let[i,a]of this.noteCache.entries()){let s=a.delete(t);o||=s,s&&a.size===0&&this.noteCache.delete(i)}return o}#t(t,r){let n=u=>{let l=this.blockCache.byFile.get(u);if(!l)return!1;this.blockCache.byFile.delete(u);for(let c of l){let f=this.blockCache.byKey.get(c.key);f.delete(c),f.size===0&&this.blockCache.byKey.delete(c.key)}return!0};if(!r)return n(t);let{blocks:o,sections:i}=r;if(!i||!o)return n(t);let a=i.filter(Ds);if(a.length===0)return n(t);n(t);let s=vn(a.flatMap(u=>Fs(u.id).map(l=>[l,u.position])),Bn(([u])=>u),lr((u,l)=>({file:t,key:u,blocks:l.map(([c,f])=>f)})),jn);this.blockCache.byFile.set(t,s);for(let u of s){let l=this.blockCache.byKey.get(u.key);l?l.add(u):this.blockCache.byKey.set(u.key,new Set([u]))}return!0}#r(t,r){let n=r?.frontmatter?.citekey;if(n){if(!this.citekeyCache.has(n))return this.citekeyCache.set(n,new Set([t])),!0;let i=this.citekeyCache.get(n),a=i.size;return i.add(t).size!==a}let o=!1;for(let[i,a]of this.citekeyCache.entries()){let s=a.delete(t);o||=s,s&&a.size===0&&this.citekeyCache.delete(i)}return o}getNotesFor(t){let r=this.noteCache.get(Mt(t,!0));return r?[...r]:[]}getBlocksFor({file:t,item:r}){if(!t&&!r)throw new Error("no file or item provided");let n=r?this.blockCache.byKey.get(Mt(r,!0)):null,o=t?this.blockCache.byFile.get(t):null;return t&&r?!o||!n?[]:o.filter(i=>n.has(i)):t?o?[...o]:[]:r?n?[...n]:[]:[]}getBlocksIn(t){let r=this.blockCache.byFile.get(t);return r?[...r]:null}#n(t,r){r===void 0&&(r=this.meta.getCache(t)),[this.#e(t,r),this.#t(t,r),this.#r(t,r)].some(o=>o)&&this.meta.trigger("zotero:index-update",t)}#o(t){this.#n(t,null)}#a(){this.noteCache.clear(),this.blockCache.byFile.clear(),this.blockCache.byKey.clear(),this.meta.trigger("zotero:index-clear")}onload(){[this.meta.on("changed",this.onMetaChanged,this),this.vault.on("rename",this.onFileRenamed,this),this.vault.on("delete",this.onFileRemoved,this)].forEach(this.registerEvent.bind(this));let[t,r]=dc(this.plugin.app,{});r&&this.register(r),t.then(()=>{this.onMetaBuilt(),this.plugin.addCommand({id:"refresh-note-index",name:"Refresh Literature Notes Index",callback:()=>{this.reload(),new pP.Notice("Literature notes re-indexed")}})})}onMetaBuilt(){for(let t of this.vault.getMarkdownFiles())this.#n(t.path)}onMetaChanged(t,r,n){this.#n(t.path,n)}onFileRemoved(t){yn(t)&&this.#o(t.path)}onFileRenamed(t,r){this.#o(r),yn(t)&&this.#n(t.path)}reload(){this.#a(),this.onMetaBuilt(),ne.info("Note Index: Reloaded")}};var yp=require("fs/promises");var fG=(e,t)=>t.some(r=>e instanceof r),dP,mP;function pG(){return dP||(dP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dG(){return mP||(mP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var hP=new WeakMap,Ay=new WeakMap,gP=new WeakMap,ky=new WeakMap,_y=new WeakMap;function mG(e){let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{r(_r(e.result)),o()},a=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(r=>{r instanceof IDBCursor&&hP.set(r,e)}).catch(()=>{}),_y.set(t,e),t}function hG(e){if(Ay.has(e))return;let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{r(),o()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Ay.set(e,t)}var Iy={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Ay.get(e);if(t==="objectStoreNames")return e.objectStoreNames||gP.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _r(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function yP(e){Iy=e(Iy)}function gG(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){let n=e.call(hp(this),t,...r);return gP.set(n,t.sort?t.sort():[t]),_r(n)}:dG().includes(e)?function(...t){return e.apply(hp(this),t),_r(hP.get(this))}:function(...t){return _r(e.apply(hp(this),t))}}function yG(e){return typeof e=="function"?gG(e):(e instanceof IDBTransaction&&hG(e),fG(e,pG())?new Proxy(e,Iy):e)}function _r(e){if(e instanceof IDBRequest)return mG(e);if(ky.has(e))return ky.get(e);let t=yG(e);return t!==e&&(ky.set(e,t),_y.set(t,e)),t}var hp=e=>_y.get(e);function vP(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){let a=indexedDB.open(e,t),s=_r(a);return n&&a.addEventListener("upgradeneeded",u=>{n(_r(a.result),u.oldVersion,u.newVersion,_r(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),s.then(u=>{i&&u.addEventListener("close",()=>i()),o&&u.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}var bG=["get","getKey","getAll","getAllKeys","count"],vG=["put","add","delete","clear"],Cy=new Map;function bP(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Cy.get(t))return Cy.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,o=vG.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||bG.includes(r)))return;let i=async function(a,...s){let u=this.transaction(a,o?"readwrite":"readonly"),l=u.store;return n&&(l=l.index(s.shift())),(await Promise.all([l[r](...s),o&&u.done]))[0]};return Cy.set(t,i),i}yP(e=>({...e,get:(t,r,n)=>bP(t,r)||e.get(t,r,n),has:(t,r)=>!!bP(t,r)||e.has(t,r)}));var bp=require("obsidian");var wG="obsidian-zotero-plugin",gp="pdf-outline",cu=class extends ce{constructor(r){super();this.plugin=r}db=vP(wG,1,{upgrade(r){r.createObjectStore(gp,{keyPath:"path"})}});async getCachedOutlineKeys(){return await(await this.db).getAllKeys(gp)}async getPDFOutline(r,n=!1){let o=await this.db,i=await o.get(gp,r),a;try{a=await(0,yp.stat)(r)}catch(u){if(u.code==="ENOENT")return new bp.Notice("PDF file not found"),null;throw u}if(i&&a.mtimeMs===i.mtime&&!n)return ne.debug("PDF outline cache hit",r),i.outline;let s=await this.#e(r);return s?(await o.put(gp,{path:r,mtime:a.mtimeMs,outline:s,created:Date.now()}),ne.debug("PDF outline cache miss and updated",r),s):null}pdfjs;async#e(r){this.pdfjs??=await(0,bp.loadPdfJs)();let n=this.pdfjs.getDocument(await(0,yp.readFile)(r)),o=await n.promise,i=wP(await o.getOutline(),0),a=await Promise.all(i.map(async({dest:s,...u})=>{if(!Array.isArray(s))return{...u,page:null};let[l]=s,c=await o.getPageIndex(l);return{...u,page:c}}));return await o.cleanup(),await n.destroy(),a}},wP=(e,t)=>e.flatMap(({title:r,dest:n,items:o})=>[{title:r,dest:n,level:t},...wP(o,t+1)]);var EP=require("http");var SP=require("obsidian");var xP=se(Qe(),1);var Hi=class extends Me{getDefaults(){return{enableServer:!1,serverPort:9091}}async apply(t){let r=this.use(Vi);switch(t){case"enableServer":this.enableServer?r.initServer():r.closeServer();return;case"serverPort":r.reloadPort();return;default:(0,xP.assertNever)(t)}}};var xG=new Set(["notify"]),EG=new Set([...dk.map(e=>`zotero/${e}`)]),Vi=class extends ce{#e=new SP.Events;settings=this.use(Hi);plugin=this.use(be);server=null;get port(){return this.settings.serverPort}onload(){this.settings.enableServer&&this.initServer(),this.registerObsidianProtocolHandler()}onunload(){this.closeServer(),this.server=null}registerObsidianProtocolHandler(){let t=r=>{let{action:n,...o}=r;this.trigger(n,o)};for(let r of EG)this.plugin.registerObsidianProtocolHandler(r,t)}#t(){this.server??=(0,EP.createServer)((t,r)=>{this.requestListener(t,r)})}#r(){this.server?.listening||this.server?.listen(this.port,"localhost",()=>this.listeningListener())}initServer(){this.#t(),this.#r()}closeServer(){this.server?.close()}reloadPort(){this.settings.enableServer&&(this.closeServer(),this.#t(),this.#r())}requestListener(t,r){if(!t.url){ne.error("Request without url"),r.statusCode=400,r.end();return}ne.trace("server recieved req",t.url,t.rawHeaders);let{pathname:n,searchParams:o}=new URL(t.url,`http://${t.headers.host}`),i=n.substring(1),a=`bg:${n.substring(1)}`;if(xG.has(i)){let s=Object.fromEntries(o.entries());t.headers["content-type"]==="application/json"?new Promise((u,l)=>{let c="";t.on("data",f=>c+=f),t.on("error",f=>l(f)),t.on("end",()=>{try{u(JSON.parse(c))}catch(f){l(f)}})}).then(u=>{this.trigger(a,s,u),r.end()}):(this.trigger(a,s),r.end())}else r.statusCode=404,r.end()}listeningListener(){this.server&&ne.info(`Server is listening at ${SG(this.server)}`)}on(t,r,n){return this.#e.on(t,r,n)}off(t,r){return this.#e.off(t,r)}offref(t){return this.#e.offref(t)}trigger(t,...r){return ne.trace(`server trigger ${t}`,...r),this.#e.trigger(t,...r)}tryTrigger(t,r){return this.#e.tryTrigger(t,r)}};function SG(e){let t=e.address();return t?typeof t=="string"?t:`${t.address}:${t.port}`:"?"}var Ty=require("fs");var kP=se(Qe(),1);var Gi=class extends Me{getDefaults(){return{autoRefresh:!0}}async apply(t){switch(t){case"autoRefresh":return await this.use(Cr).setAutoRefresh(this.autoRefresh);default:(0,kP.assertNever)(t)}}};var AP=e=>()=>app.vault.trigger("zotero:db-updated",e),Cr=class extends ce{databaseSettings=this.use(Ut);settings=this.use(Gi);api=this.use(ft).api;async onload(){await this.setAutoRefresh(this.settings.autoRefresh),ne.debug("loading DatabaseWatcher")}onunload(){this.#e()}#e(){this.#r=!1,this.#t=wc(this.#t,t=>(t?.close(),null))}#t={main:null,bbt:null};#r=!1;async setAutoRefresh(t,r=!1){t===this.#r&&!r||(ne.debug("Auto refresh set to "+t),this.#r=t,this.#e(),t&&(this.#t.main=(0,Ty.watch)(this.databaseSettings.zoteroDbPath,AP("main")),await this.api.checkDbStatus("bbt")&&(this.#t.bbt=(0,Ty.watch)(this.databaseSettings.betterBibTexDbPath,AP("bbt")))))}};var lu=class extends ce{onunload(){ne.info("ZoteroDB unloaded")}get defaultLibId(){return this.settings.citationLibrary}settings=this.use(Ut);#e=this.use(ft);watcher=this.use(Cr);get api(){return this.#e.api}async search(t){let n=this.defaultLibId;if(this.#e.status!==2)throw new Error("Search index not ready");let o=await this.api.search(n,{query:t,limit:50,index:kG});if(o.length===0)return[];let i=AG(o);return i.length===0?[]:(await this.api.getItems(i.map(s=>[s.id,n]))).map((s,u)=>{let{id:l,fields:c,score:f}=i[u];if(!s)throw new Error("Item not found: "+l);return{item:s,score:f,fields:[...c]}})}async getItemsOf(t=50,r=this.defaultLibId){if(this.#e.status!==2)throw new Error("Search index not ready");return(await this.api.getItemsFromCache(t,r)).map(o=>({item:o,score:-1,fields:[]}))}},kG=["title","creators[]:firstName","creators[]:lastName","date"];function AG(e){let{size:t}=new Set(e.flatMap(n=>n.result)),r=e.reduce((n,{field:o,result:i})=>(o.startsWith("creators[]")&&(o="creators"),i.forEach((a,s)=>{let u=t-s;switch(o){case"title":u*=100;break;case"creators":case"date":u*=5;break;default:throw new Error("Unknown field: "+o)}if(!n.has(+a))n.set(+a,{id:+a,score:u,fields:new Set([o])});else{let l=n.get(+a);l.fields.add(o),l.score+=u}}),n),new Map);return Array.from(r.values()).sort((n,o)=>o.score-n.score)}var Zi=require("fs/promises"),vp=require("path"),IP=require("path/posix");var Ji=require("obsidian");var Ki=class extends Me{getDefaults(){return{symlinkImgExcerpt:!1,imgExcerptPath:"ZtImgExcerpt"}}get imgExcerptDir(){return this.symlinkImgExcerpt?this.imgExcerptPath:null}};var fu=class extends ce{onload(){ne.debug("loading ImgCacheImporter")}async onunload(){await Promise.all(this.flush())}databaseSettings=this.use(Ut);settings=this.use(Ki);queue=new Map;getCachePath(t){return Lr(t,this.databaseSettings.zoteroDataDir)}getInVaultPath(t){if(!this.settings.imgExcerptDir||t.type!==Se.image)return null;let r=Lr(t,this.databaseSettings.zoteroDataDir);return _G(t,r,this.settings.imgExcerptDir)}import(t){let r=this.getCachePath(t),n=this.getInVaultPath(t);if(!n)return null;let o;return this.queue.has(n)?o=this.queue.get(n):(o=async()=>{let i=await this.linkToVault(n,r);return this.queue.delete(n),i},this.queue.set(n,o)),n}flush(){return[...this.queue.values()].map(t=>t())}cancel(){this.queue.clear()}async linkToVault(t,r){let n=app.vault.getAbstractFileByPath(t);if(n)return n instanceof Ji.TFile?!0:($e("failed to get in-vault image excerpt: given path not file",t),!1);try{if(!(await(0,Zi.stat)(r)).isFile()){let a=`failed to link image excerpt cache to vault: given path not file ${r}`;return new Ji.Notice(a),$e(a,null),!1}}catch(i){if(i.code==="ENOENT"){let a=`failed to link image excerpt cache to vault: file not found ${r}`;return new Ji.Notice(a),$e(a,i),!1}else throw i}let o=app.vault.adapter.getFullPath(t);try{await(0,Zi.mkdir)((0,vp.dirname)(o),{recursive:!0})}catch(i){if(i.code!=="EEXIST")throw i}return await(0,Zi.symlink)(r,o),new Ji.Notice(`linked image excerpt cache to vault: ${t}`),!0}},IG=(e,t)=>(t??"")+(0,vp.basename)(e),_G=(e,t,r)=>{let n=IG(t,e.groupID);return(0,IP.join)(r,n)};T();T();T();function Sn(e,t=[]){let r=[];function n(i,a){let s=we(a),u=r.length;r=[...r,a];function l(f){let{scope:p,children:d,...h}=f,g=p?.[e][u]||s,y=G(()=>h,Object.values(h));return Q(g.Provider,{value:y},d)}function c(f,p){let d=p?.[e][u]||s,h=V(d);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>we(a));return function(s){let u=s?.[e]||i;return G(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return o.scopeName=e,[n,CG(o,...t)]}function CG(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let f=u(i)[`__scope${l}`];return{...s,...f}},{});return G(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}T();T();T();function TG(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Oy(...e){return t=>e.forEach(r=>TG(r,t))}function Jr(...e){return K(Oy(...e),e)}T();var Yi=te((e,t)=>{let{children:r,...n}=e,o=He.toArray(r),i=o.find(DG);if(i){let a=i.props.children,s=o.map(u=>u===i?He.count(a)>1?He.only(null):St(a)?a.props.children:null:u);return Q(Dy,le({},n,{ref:t}),St(a)?kt(a,void 0,s):null)}return Q(Dy,le({},n,{ref:t}),r)});Yi.displayName="Slot";var Dy=te((e,t)=>{let{children:r,...n}=e;return St(r)?kt(r,{...FG(n,r.props),ref:Oy(t,r.ref)}):He.count(r)>1?He.only(null):null});Dy.displayName="SlotClone";var OG=({children:e})=>Q(Y,null,e);function DG(e){return St(e)&&e.type===OG}function FG(e,t){let r={...t};for(let n in t){let o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}function _P(e){let t=e+"CollectionProvider",[r,n]=Sn(t),[o,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=d=>{let{scope:h,children:g}=d,y=q.useRef(null),w=q.useRef(new Map).current;return q.createElement(o,{scope:h,itemMap:w,collectionRef:y},g)},s=e+"CollectionSlot",u=q.forwardRef((d,h)=>{let{scope:g,children:y}=d,w=i(s,g),x=Jr(h,w.collectionRef);return q.createElement(Yi,{ref:x},y)}),l=e+"CollectionItemSlot",c="data-radix-collection-item",f=q.forwardRef((d,h)=>{let{scope:g,children:y,...w}=d,x=q.useRef(null),A=Jr(h,x),O=i(l,g);return q.useEffect(()=>(O.itemMap.set(x,{ref:x,...w}),()=>void O.itemMap.delete(x))),q.createElement(Yi,{[c]:"",ref:A},y)});function p(d){let h=i(e+"CollectionConsumer",d);return q.useCallback(()=>{let y=h.collectionRef.current;if(!y)return[];let w=Array.from(y.querySelectorAll(`[${c}]`));return Array.from(h.itemMap.values()).sort((O,D)=>w.indexOf(O.ref.current)-w.indexOf(D.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:a,Slot:u,ItemSlot:f},p,n]}T();T();var fo=globalThis?.document?et:()=>{};var NG=At["useId".toString()]||(()=>{}),PG=0;function Qi(e){let[t,r]=$(NG());return fo(()=>{e||r(n=>n??String(PG++))},[e]),e||(t?`radix-${t}`:"")}T();T();var RG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gt=RG.reduce((e,t)=>{let r=te((n,o)=>{let{asChild:i,...a}=n,s=i?Yi:t;return L(()=>{window[Symbol.for("radix-ui")]=!0},[]),Q(s,le({},a,{ref:o}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});T();function pu(e){let t=N(e);return L(()=>{t.current=e}),G(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}T();function Xi({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,o]=MG({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,s=pu(r),u=K(l=>{if(i){let f=typeof l=="function"?l(e):l;f!==e&&s(f)}else o(l)},[i,e,o,s]);return[a,u]}function MG({defaultProp:e,onChange:t}){let r=$(e),[n]=r,o=N(n),i=pu(t);return L(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}T();var $G=we(void 0);function wp(e){let t=V($G);return e||t||"ltr"}var Fy="rovingFocusGroup.onEntryFocus",LG={bubbles:!1,cancelable:!0},Py="RovingFocusGroup",[Ny,CP,qG]=_P(Py),[BG,Ry]=Sn(Py,[qG]),[jG,zG]=BG(Py),WG=te((e,t)=>Q(Ny.Provider,{scope:e.__scopeRovingFocusGroup},Q(Ny.Slot,{scope:e.__scopeRovingFocusGroup},Q(UG,le({},e,{ref:t}))))),UG=te((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:l,...c}=e,f=N(null),p=Jr(t,f),d=wp(i),[h=null,g]=Xi({prop:a,defaultProp:s,onChange:u}),[y,w]=$(!1),x=pu(l),A=CP(r),O=N(!1),[D,F]=$(0);return L(()=>{let R=f.current;if(R)return R.addEventListener(Fy,x),()=>R.removeEventListener(Fy,x)},[x]),Q(jG,{scope:r,orientation:n,dir:d,loop:o,currentTabStopId:h,onItemFocus:K(R=>g(R),[g]),onItemShiftTab:K(()=>w(!0),[]),onFocusableItemAdd:K(()=>F(R=>R+1),[]),onFocusableItemRemove:K(()=>F(R=>R-1),[])},Q(Gt.div,le({tabIndex:y||D===0?-1:0,"data-orientation":n},c,{ref:p,style:{outline:"none",...e.style},onMouseDown:rt(e.onMouseDown,()=>{O.current=!0}),onFocus:rt(e.onFocus,R=>{let P=!O.current;if(R.target===R.currentTarget&&P&&!y){let E=new CustomEvent(Fy,LG);if(R.currentTarget.dispatchEvent(E),!E.defaultPrevented){let S=A().filter(j=>j.focusable),v=S.find(j=>j.active),_=S.find(j=>j.id===h),W=[v,_,...S].filter(Boolean).map(j=>j.ref.current);TP(W)}}O.current=!1}),onBlur:rt(e.onBlur,()=>w(!1))})))}),HG="RovingFocusGroupItem",VG=te((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:i,...a}=e,s=Qi(),u=i||s,l=zG(HG,r),c=l.currentTabStopId===u,f=CP(r),{onFocusableItemAdd:p,onFocusableItemRemove:d}=l;return L(()=>{if(n)return p(),()=>d()},[n,p,d]),Q(Ny.ItemSlot,{scope:r,id:u,focusable:n,active:o},Q(Gt.span,le({tabIndex:c?0:-1,"data-orientation":l.orientation},a,{ref:t,onMouseDown:rt(e.onMouseDown,h=>{n?l.onItemFocus(u):h.preventDefault()}),onFocus:rt(e.onFocus,()=>l.onItemFocus(u)),onKeyDown:rt(e.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){l.onItemShiftTab();return}if(h.target!==h.currentTarget)return;let g=JG(h,l.orientation,l.dir);if(g!==void 0){h.preventDefault();let w=f().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();let x=w.indexOf(h.currentTarget);w=l.loop?ZG(w,x+1):w.slice(x+1)}setTimeout(()=>TP(w))}})})))}),GG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function KG(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function JG(e,t,r){let n=KG(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return GG[n]}function TP(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function ZG(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var OP=WG,DP=VG;T();T();function YG(e,t){return pt((r,n)=>{let o=t[r][n];return o??r},e)}var du=e=>{let{present:t,children:r}=e,n=QG(t),o=typeof r=="function"?r({present:n.isPresent}):He.only(r),i=Jr(n.ref,o.ref);return typeof r=="function"||n.isPresent?kt(o,{ref:i}):null};du.displayName="Presence";function QG(e){let[t,r]=$(),n=N({}),o=N(e),i=N("none"),a=e?"mounted":"unmounted",[s,u]=YG(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L(()=>{let l=xp(n.current);i.current=s==="mounted"?l:"none"},[s]),fo(()=>{let l=n.current,c=o.current;if(c!==e){let p=i.current,d=xp(l);e?u("MOUNT"):d==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&p!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),fo(()=>{if(t){let l=f=>{let d=xp(n.current).includes(f.animationName);f.target===t&&d&&pr(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(i.current=xp(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:K(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function xp(e){return e?.animationName||"none"}var FP="Tabs",[XG,x2e]=Sn(FP,[Ry]),NP=Ry(),[eK,My]=XG(FP),tK=te((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:o,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:u="automatic",...l}=e,c=wp(s),[f,p]=Xi({prop:n,onChange:o,defaultProp:i});return Q(eK,{scope:r,baseId:Qi(),value:f,onValueChange:p,orientation:a,dir:c,activationMode:u},Q(Gt.div,le({dir:c,"data-orientation":a},l,{ref:t})))}),rK="TabsList",nK=te((e,t)=>{let{__scopeTabs:r,loop:n=!0,...o}=e,i=My(rK,r),a=NP(r);return Q(OP,le({asChild:!0},a,{orientation:i.orientation,dir:i.dir,loop:n}),Q(Gt.div,le({role:"tablist","aria-orientation":i.orientation},o,{ref:t})))}),oK="TabsTrigger",iK=te((e,t)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...i}=e,a=My(oK,r),s=NP(r),u=PP(a.baseId,n),l=RP(a.baseId,n),c=n===a.value;return Q(DP,le({asChild:!0},s,{focusable:!o,active:c}),Q(Gt.button,le({type:"button",role:"tab","aria-selected":c,"aria-controls":l,"data-state":c?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u},i,{ref:t,onMouseDown:rt(e.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?a.onValueChange(n):f.preventDefault()}),onKeyDown:rt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(n)}),onFocus:rt(e.onFocus,()=>{let f=a.activationMode!=="manual";!c&&!o&&f&&a.onValueChange(n)})})))}),aK="TabsContent",sK=te((e,t)=>{let{__scopeTabs:r,value:n,forceMount:o,children:i,...a}=e,s=My(aK,r),u=PP(s.baseId,n),l=RP(s.baseId,n),c=n===s.value,f=N(c);return L(()=>{let p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),Q(du,{present:o||c},({present:p})=>Q(Gt.div,le({"data-state":c?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:l,tabIndex:0},a,{ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0}}),p&&i))});function PP(e,t){return`${e}-trigger-${t}`}function RP(e,t){return`${e}-content-${t}`}var MP=tK,$y=nK,Ly=iK,qy=sK;T();var $P=MP,By=te(({className:e,...t},r)=>m($y,{ref:r,className:ae("inline-flex items-center justify-center rounded-md bg-secondary p-1",e),...t}));By.displayName=$y.displayName;var kn=te(({className:e,...t},r)=>m(Ly,{className:ae("obzt-btn-reset","inline-flex min-w-[100px] items-center justify-center rounded-[0.185rem] px-3 py-1.5  text-sm font-medium text-txt-muted transition-all  disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-txt-normal data-[state=active]:shadow-sm",e),...t,ref:r}));kn.displayName=Ly.displayName;var An=te(({className:e,...t},r)=>m(qy,{className:ae("mt-2 rounded-md border p-6",e),...t,ref:r}));An.displayName=qy.displayName;T();T();function ea(){return ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ea.apply(this,arguments)}var I2e=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator",_2e=typeof Symbol<"u"?Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")):"@@asyncIterator";var cK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?et:L,lK=function(t){var r=N(t);return cK(function(){r.current=t}),K(function(){return r.current},[r])},fK={status:"not-requested",loading:!1,result:void 0,error:void 0},qP={status:"loading",loading:!0,result:void 0,error:void 0},pK=function(t){return qP},dK=function(t,r){return{status:"success",loading:!1,result:t,error:void 0}},mK=function(t,r){return{status:"error",loading:!1,result:void 0,error:t}},LP=function(){},hK={initialState:function(t){return t&&t.executeOnMount?qP:fK},executeOnMount:!0,executeOnUpdate:!0,setLoading:pK,setResult:dK,setError:mK,onSuccess:LP,onError:LP},gK=function(t){return ea({},hK,{},t)},yK=function(t){var r=$(function(){return t.initialState(t)}),n=r[0],o=r[1],i=K(function(){return o(t.initialState(t))},[o,t]),a=K(function(){return o(t.setLoading(n))},[n,o]),s=K(function(c){return o(t.setResult(c,n))},[n,o]),u=K(function(c){return o(t.setError(c,n))},[n,o]),l=K(function(c){return o(ea({},n,{},c))},[n,o]);return{value:n,set:o,merge:l,reset:i,setLoading:a,setResult:s,setError:u}},bK=function(){var t=N(!1);return L(function(){return t.current=!0,function(){t.current=!1}},[]),function(){return t.current}},vK=function(){var t=N(null);return{set:function(n){return t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},BP=function(t,r,n){!r&&(r=[]);var o=gK(n),i=$(null),a=i[0],s=i[1],u=yK(o),l=bK(),c=vK(),f=function(w){return l()&&c.is(w)},p=function(){for(var w=arguments.length,x=new Array(w),A=0;A<w;A++)x[A]=arguments[A];var O=function(){try{return Promise.resolve(t.apply(void 0,x))}catch(D){return Promise.reject(D)}}();return s(x),c.set(O),u.setLoading(),O.then(function(D){f(O)&&u.setResult(D),o.onSuccess(D,{isCurrent:function(){return c.is(O)}})},function(D){f(O)&&u.setError(D),o.onError(D,{isCurrent:function(){return c.is(O)}})}),O},d=lK(p),h=K(function(){return d().apply(void 0,arguments)},[d]),g=!l();return L(function(){var y=function(){return d().apply(void 0,r)};g&&o.executeOnMount&&y(),!g&&o.executeOnUpdate&&y()},r),ea({},u.value,{set:u.set,merge:u.merge,reset:u.reset,execute:h,currentPromise:c.get(),currentParams:a})};function jP(e,t,r){return BP(e,t,r)}var zP=function(t,r){return BP(t,[],ea({},r,{executeOnMount:!1,executeOnUpdate:!1}))};var WP=require("obsidian");var Ep=class{constructor(t){this.path=t??Ep.defaultPath}vaildPath;get path(){return this.vaildPath}set path(t){t?this.vaildPath=(0,WP.normalizePath)(t):this.vaildPath=Ep.defaultPath}getFile(t){return t.getAbstractFileByPath(this.vaildPath)}fromJSON(t){return t&&(this.vaildPath=t),this}toJSON(){return this.path}toString(){return this.path}},mu=Ep;Eb(mu,"defaultPath","/");var de=we({});function ta(e){return new mu(e).path}function Sp(e,t,r){let[n,o]=$(!1);return[jP(e,[...t,n],r),K(()=>o(i=>!i),[])]}T();var UP=require("obsidian");T();T();var ve=te(function({name:t,description:r,heading:n,children:o,className:i},a){return m("div",{className:ae("setting-item",n&&"setting-item-heading border-none",i),children:[m("div",{className:"setting-item-info",children:[m("div",{className:"setting-item-name",children:t}),r&&m("div",{className:"setting-item-description",children:r})]}),m("div",{className:"setting-item-control",ref:a,children:o})]})});function Dt(e,t){let{plugin:{settings:r}}=V(de);return Le(async function(o){return await e.setOption(t,o).apply()===!1?!1:(await r.save(),!0)})}function wK(e,t){let r=Le(t),n=N(null);return L(()=>{n.current?.setValue(e)},[e]),K(o=>{if(!o)n.current?.toggleEl.remove(),n.current=null;else{let i=new UP.ToggleComponent(o);i.setValue(e),i.onChange(r),n.current=i}},[])}function Tr({name:e,children:t,settings:r,prop:n}){let[,o]=gu(r,n);return m(hu,{ref:o,name:e,children:t})}var hu=te(function({name:t,children:r},n){return m(ve,{className:"mod-toggle",ref:n,name:t,description:r})});function gu(e,t){let[r,n]=$(e[t]),o=Dt(e,t),i=Le(async function(s){n(s),await o(s)});return[r,wK(r,i)]}var GP=se(require("node:net"),1),KP=se(require("node:os"),1),Ap=class extends Error{constructor(t){super(`${t} is locked`)}},ra={old:new Set,young:new Set},xK=1e3*15;var kp,EK=()=>{let e=KP.default.networkInterfaces(),t=new Set([void 0,"0.0.0.0"]);for(let r of Object.values(e))for(let n of r)t.add(n.address);return t},HP=e=>new Promise((t,r)=>{let n=GP.default.createServer();n.unref(),n.on("error",r),n.listen(e,()=>{let{port:o}=n.address();n.close(()=>{t(o)})})}),VP=async(e,t)=>{if(e.host||e.port===0)return HP(e);for(let r of t)try{await HP({port:e.port,host:r})}catch(n){if(!["EADDRNOTAVAIL","EINVAL"].includes(n.code))throw n}return e.port},SK=function*(e){e&&(yield*e),yield 0};async function jy(e){let t,r=new Set;if(e&&(e.port&&(t=typeof e.port=="number"?[e.port]:e.port),e.exclude)){let o=e.exclude;if(typeof o[Symbol.iterator]!="function")throw new TypeError("The `exclude` option must be an iterable.");for(let i of o){if(typeof i!="number")throw new TypeError("Each item in the `exclude` option must be a number corresponding to the port you want excluded.");if(!Number.isSafeInteger(i))throw new TypeError(`Number ${i} in the exclude option is not a safe integer and can't be used`)}r=new Set(o)}kp===void 0&&(kp=setInterval(()=>{ra.old=ra.young,ra.young=new Set},xK),kp.unref&&kp.unref());let n=EK();for(let o of SK(t))try{if(r.has(o))continue;let i=await VP({...e,port:o},n);for(;ra.old.has(i)||ra.young.has(i);){if(o!==0)throw new Ap(o);i=await VP({...e,port:o},n)}return ra.young.add(i),i}catch(i){if(!["EADDRINUSE","EACCES"].includes(i.code)&&!(i instanceof Ap))throw i}throw new Error("No available ports found")}var Ip=require("obsidian");T();function JP(){let{server:e}=V(de).plugin.settings,[t,r]=gu(e,"enableServer");return m(Y,{children:[m(ve,{heading:!0,name:"Background Connect",description:"Allow Zotero to send status in the background, which is required for some features like focus annotation on selection in Zotero"}),m(hu,{ref:r,name:"Enable",children:"Remember to enable the server in Zotero as well"}),t&&m(kK,{})]})}function kK(){let{server:e}=V(de).plugin.settings,t=G(()=>e.getDefaults().serverPort,[]),[r,n]=$(t),[o]=Ve("check");async function i(){if(isNaN(r)||r<0||r>65535)return new Ip.Notice("Invalid port number: "+r),n(e.serverPort),!1;if(r===e.serverPort)return!1;let a=await jy({host:"127.0.0.1",port:[r]});if(console.log(a,r),a!==r)return new Ip.Notice(`Port is currently occupied, a different port is provided: ${a}, confirm again to apply the change.`),n(a),!1;let s=e.setOption("serverPort",a);return await s.apply(),s.changed&&new Ip.Notice("Server port is saved and applied."),s.changed}return m(ve,{name:"Port Number",description:`Default to ${t}`,children:[m("input",{type:"number",value:r,min:0,max:65535,onChange:a=>n(Number.parseInt(a.target.value,10))}),m("button",{"aria-label":"Apply",ref:o,onClick:i})]})}var QP=require("@electron/remote");var XP=se(Qe(),1);T();function zy(){let[e,t,r]=ZP("main"),[n,o,i]=ZP("bbt"),[a,s]=eR("data"),[u,l]=IK(Le(()=>{s(),r(),i()}));return m(ve,{name:"Zotero Data Directory",description:m(Y,{children:[m(YP,{path:e,state:t,children:"Zotero"}),m(YP,{path:n,state:o,children:"Better BibTeX"})]}),children:[m(tR,{path:a,state:u}),m("button",{onClick:l,children:"Select"})]})}function AK(e){let{plugin:t}=V(de),[r,n]=Sp(()=>t.databaseAPI.checkDbStatus(e),[e]),o;return r.loading?o="disabled":r.error?o="failed":o=r.result?"success":"failed",[o,n]}function ZP(e){let[t,r]=eR(e),[n,o]=AK(e);return[t,n,K(()=>{r(),o()},[r,o])]}function IK(e){let{plugin:{settings:t}}=V(de),r=zP(async()=>{let{filePaths:[o]}=await QP.dialog.showOpenDialog({defaultPath:t.database.zoteroDataDir,properties:["openDirectory"]});o&&t.database.zoteroDataDir!==o&&(await t.database.setOption("zoteroDataDir",o).apply(),await t.save(),e())}),n;return r.loading?n="disabled":r.error?n="failed":n="success",[n,r.execute]}function eR(e){let{plugin:{settings:{database:t}}}=V(de),r=K(()=>{switch(e){case"main":return t.zoteroDbPath;case"bbt":return t.betterBibTexDbPath;case"data":return t.zoteroDataDir;default:(0,XP.assertNever)(e)}},[e,t]),[n,o]=$(r);return[n,K(()=>o(r),[r])]}function YP({children:e,path:t,state:r}){return m("div",{children:[e,": ",r==="failed"&&"(Failed to load)",m(tR,{path:t,state:r})]})}function tR({path:e,state:t}){return m("code",{"data-state":t,className:ae("data-[state=success]:text-txt-success","data-[state=failed]:text-txt-error","data-[state=disabled]:text-txt-muted"),children:e})}function Wy(){let{plugin:{settings:{watcher:e}}}=V(de);return m(Y,{children:[m(zy,{}),m(Tr,{name:"Refresh automatically when Zotero updates database",settings:e,prop:"autoRefresh"}),m(JP,{})]})}T();T();function Zr({name:e,children:t,normalize:r,settings:n,prop:o}){let[i,a]=$(n[o]),s=Dt(n,o);return m(Uy,{name:e,value:i,onChange:u=>a(u.target.value),onSubmit:()=>{let u=r?.(i)??i;u!==i&&a(u),s(u)},children:t})}function Uy({name:e,children:t,value:r,onChange:n,onSubmit:o}){let[i]=Ve("check");return m(ve,{name:e,description:t,children:[m(Xn,{className:"border",value:r,onChange:n}),m("button",{"aria-label":"Apply",ref:i,onClick:o})]})}T();function rR(){let{imgImporter:e}=V(de).plugin.settings,[t,r]=gu(e,"symlinkImgExcerpt");return m(Y,{children:[m(hu,{ref:r,name:"Image Excerpt"}),t&&m(Zr,{name:"Image Excerpts Folder",settings:e,prop:"imgExcerptPath",normalize:ta})]})}var nR=require("obsidian");T();function Hy(){let{plugin:e}=V(de),{database:t}=e.settings,[r,n]=Sp(()=>e.databaseAPI.getLibs(),[]),[o,i]=$(()=>t.citationLibrary),a=Dt(t,"citationLibrary"),s=Le(async function(f){let p=Number.parseInt(f.target.value,10);Number.isNaN(p)||(i(p),await a(p)&&new nR.Notice("Zotero search index updated."))}),u=r.result??[{groupID:null,libraryID:1,name:"My Library"}],[l]=Ve("switch");return m(ve,{name:"Citation Library",children:[m("select",{className:"dropdown",onChange:s,value:o,children:u.map(({groupID:c,libraryID:f,name:p})=>m("option",{value:f,children:p?c?`${p} (Group)`:p:`Library ${f}`},f))}),m("button",{"aria-label":"Refresh",ref:l,onClick:async()=>{await e.dbWorker.refresh({task:"full"}),n()}})]})}function Vy(){let{noteIndex:e}=V(de).plugin.settings;return m(Y,{children:[m(Zr,{name:"Literature Note Folder",settings:e,prop:"literatureNoteFolder",normalize:ta}),m(rR,{}),m(Hy,{})]})}T();function Gy(){let{log:e}=V(de).plugin.settings,[t,r]=$(()=>e.level),n=Dt(e,"level"),o=Le(async function(a){let s=a.target.value;r(s),await n(s)});return m(Y,{children:[m(ve,{heading:!0,name:"Debug"}),m(ve,{name:"Log Level",description:m(Y,{children:["Change level of logs output to the console.",m("br",{}),"Set to DEBUG if you need to report a issue",m("br",{}),"To check console, ",qC()]}),children:m("select",{className:"dropdown",onChange:o,value:t,children:Object.entries($b).map(([i,a])=>m("option",{value:a,children:i},a))})})]})}function Ky(){return m(Y,{children:m(Gy,{})})}T();T();T();function iR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return G(()=>n=>{t.forEach(o=>o(n))},t)}var yu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function po(e){let t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function _p(e){return"nodeType"in e}function st(e){var t,r;return e?po(e)?e:_p(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Cp(e){let{Document:t}=st(e);return e instanceof t}function na(e){return po(e)?!1:e instanceof st(e).HTMLElement}function aR(e){return e instanceof st(e).SVGElement}function mo(e){return e?po(e)?e.document:_p(e)?Cp(e)?e:na(e)?e.ownerDocument:document:document:document}var Ft=yu?et:L;function Tp(e){let t=N(e);return Ft(()=>{t.current=e}),K(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current==null?void 0:t.current(...n)},[])}function sR(){let e=N(null),t=K((n,o)=>{e.current=setInterval(n,o)},[]),r=K(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function oa(e,t){t===void 0&&(t=[e]);let r=N(e);return Ft(()=>{r.current!==e&&(r.current=e)},t),r}function ia(e,t){let r=N();return G(()=>{let n=e(r.current);return r.current=n,n},[...t])}function bu(e){let t=Tp(e),r=N(null),n=K(o=>{o!==r.current&&t?.(o,r.current),r.current=o},[]);return[r,n]}function Op(e){let t=N();return L(()=>{t.current=e},[e]),t.current}var Jy={};function ho(e,t){return G(()=>{if(t)return t;let r=Jy[e]==null?0:Jy[e]+1;return Jy[e]=r,e+"-"+r},[e,t])}function uR(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.reduce((i,a)=>{let s=Object.entries(a);for(let[u,l]of s){let c=i[u];c!=null&&(i[u]=c+e*l)}return i},{...t})}}var go=uR(1),aa=uR(-1);function _K(e){return"clientX"in e&&"clientY"in e}function vu(e){if(!e)return!1;let{KeyboardEvent:t}=st(e.target);return t&&e instanceof t}function CK(e){if(!e)return!1;let{TouchEvent:t}=st(e.target);return t&&e instanceof t}function Dp(e){if(CK(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return _K(e)?{x:e.clientX,y:e.clientY}:null}var In=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[In.Translate.toString(e),In.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),oR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cR(e){return e.matches(oR)?e:e.querySelector(oR)}T();var TK={display:"none"};function lR(e){let{id:t,value:r}=e;return q.createElement("div",{id:t,style:TK},r)}var OK={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function fR(e){let{id:t,announcement:r}=e;return q.createElement("div",{id:t,style:OK,role:"status","aria-live":"assertive","aria-atomic":!0},r)}function pR(){let[e,t]=$("");return{announce:K(n=>{n!=null&&t(n)},[]),announcement:e}}var SR=we(null);function DK(e){let t=V(SR);L(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function FK(){let[e]=$(()=>new Set),t=K(n=>(e.add(n),()=>e.delete(n)),[e]);return[K(n=>{let{type:o,event:i}=n;e.forEach(a=>{var s;return(s=a[o])==null?void 0:s.call(a,i)})},[e]),t]}var NK={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},PK={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function RK(e){let{announcements:t=PK,container:r,hiddenTextDescribedById:n,screenReaderInstructions:o=NK}=e,{announce:i,announcement:a}=pR(),s=ho("DndLiveRegion"),[u,l]=$(!1);if(L(()=>{l(!0)},[]),DK(G(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:d}=f;t.onDragMove&&i(t.onDragMove({active:p,over:d}))},onDragOver(f){let{active:p,over:d}=f;i(t.onDragOver({active:p,over:d}))},onDragEnd(f){let{active:p,over:d}=f;i(t.onDragEnd({active:p,over:d}))},onDragCancel(f){let{active:p,over:d}=f;i(t.onDragCancel({active:p,over:d}))}}),[i,t])),!u)return null;let c=q.createElement(q.Fragment,null,q.createElement(lR,{id:n,value:o.draggable}),q.createElement(fR,{id:s,announcement:a}));return r?Dc(c,r):c}var ze;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ze||(ze={}));function Np(){}function kR(e,t){return G(()=>({sensor:e,options:t??{}}),[e,t])}function AR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return G(()=>[...t].filter(n=>n!=null),[...t])}var rr=Object.freeze({x:0,y:0});function MK(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $K(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function LK(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function IR(e,t){if(!e||e.length===0)return null;let[r]=e;return t?r[t]:r}function dR(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}var _R=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=dR(t,t.left,t.top),i=[];for(let a of n){let{id:s}=a,u=r.get(s);if(u){let l=MK(dR(u),o);i.push({id:s,data:{droppableContainer:a,value:l}})}}return i.sort($K)};function qK(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-n,s=i-r;if(n<o&&r<i){let u=t.width*t.height,l=e.width*e.height,c=a*s,f=c/(u+l-c);return Number(f.toFixed(4))}return 0}var BK=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=[];for(let i of n){let{id:a}=i,s=r.get(a);if(s){let u=qK(s,t);u>0&&o.push({id:a,data:{droppableContainer:i,value:u}})}}return o.sort(LK)};function jK(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function CR(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:rr}function zK(e){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.reduce((a,s)=>({...a,top:a.top+e*s.y,bottom:a.bottom+e*s.y,left:a.left+e*s.x,right:a.right+e*s.x}),{...r})}}var WK=zK(1);function UK(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function HK(e,t,r){let n=UK(t);if(!n)return e;let{scaleX:o,scaleY:i,x:a,y:s}=n,u=e.left-a-(1-o)*parseFloat(r),l=e.top-s-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),c=o?e.width/o:e.width,f=i?e.height/i:e.height;return{width:c,height:f,top:l,right:u+c,bottom:l+f,left:u}}var VK={ignoreTransform:!1};function vo(e,t){t===void 0&&(t=VK);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:l,transformOrigin:c}=st(e).getComputedStyle(e);l&&(r=HK(r,l,c))}let{top:n,left:o,width:i,height:a,bottom:s,right:u}=r;return{top:n,left:o,width:i,height:a,bottom:s,right:u}}function mR(e){return vo(e,{ignoreTransform:!0})}function GK(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function KK(e,t){return t===void 0&&(t=st(e).getComputedStyle(e)),t.position==="fixed"}function JK(e,t){t===void 0&&(t=st(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{let i=t[o];return typeof i=="string"?r.test(i):!1})}function Mp(e,t){let r=[];function n(o){if(t!=null&&r.length>=t||!o)return r;if(Cp(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!na(o)||aR(o)||r.includes(o))return r;let i=st(e).getComputedStyle(o);return o!==e&&JK(o,i)&&r.push(o),KK(o,i)?r:n(o.parentNode)}return e?n(e):r}function TR(e){let[t]=Mp(e,1);return t??null}function Zy(e){return!yu||!e?null:po(e)?e:_p(e)?Cp(e)||e===mo(e).scrollingElement?window:na(e)?e:null:null}function OR(e){return po(e)?e.scrollX:e.scrollLeft}function DR(e){return po(e)?e.scrollY:e.scrollTop}function eb(e){return{x:OR(e),y:DR(e)}}var Ge;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ge||(Ge={}));function FR(e){return!yu||!e?!1:e===document.scrollingElement}function NR(e){let t={x:0,y:0},r=FR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=n.y,s=e.scrollLeft>=n.x;return{isTop:o,isLeft:i,isBottom:a,isRight:s,maxScroll:n,minScroll:t}}var ZK={x:.2,y:.2};function YK(e,t,r,n,o){let{top:i,left:a,right:s,bottom:u}=r;n===void 0&&(n=10),o===void 0&&(o=ZK);let{isTop:l,isBottom:c,isLeft:f,isRight:p}=NR(e),d={x:0,y:0},h={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!l&&i<=t.top+g.height?(d.y=Ge.Backward,h.y=n*Math.abs((t.top+g.height-i)/g.height)):!c&&u>=t.bottom-g.height&&(d.y=Ge.Forward,h.y=n*Math.abs((t.bottom-g.height-u)/g.height)),!p&&s>=t.right-g.width?(d.x=Ge.Forward,h.x=n*Math.abs((t.right-g.width-s)/g.width)):!f&&a<=t.left+g.width&&(d.x=Ge.Backward,h.x=n*Math.abs((t.left+g.width-a)/g.width)),{direction:d,speed:h}}function QK(e){if(e===document.scrollingElement){let{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}let{top:t,left:r,right:n,bottom:o}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:o,width:e.clientWidth,height:e.clientHeight}}function PR(e){return e.reduce((t,r)=>go(t,eb(r)),rr)}function XK(e){return e.reduce((t,r)=>t+OR(r),0)}function eJ(e){return e.reduce((t,r)=>t+DR(r),0)}function tJ(e,t){if(t===void 0&&(t=vo),!e)return;let{top:r,left:n,bottom:o,right:i}=t(e);TR(e)&&(o<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}var rJ=[["x",["left","right"],XK],["y",["top","bottom"],eJ]],xu=class{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=Mp(r),o=PR(n);this.rect={...t},this.width=t.width,this.height=t.height;for(let[i,a,s]of rJ)for(let u of a)Object.defineProperty(this,u,{get:()=>{let l=s(n),c=o[i]-l;return this.rect[u]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},yo=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var o;(o=this.target)==null||o.addEventListener(t,r,n),this.listeners.push([t,r,n])}};function nJ(e){let{EventTarget:t}=st(e);return e instanceof t?e:mo(e)}function Yy(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Kt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Kt||(Kt={}));function hR(e){e.preventDefault()}function oJ(e){e.stopPropagation()}var ye;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(ye||(ye={}));var RR={start:[ye.Space,ye.Enter],cancel:[ye.Esc],end:[ye.Space,ye.Enter]},iJ=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case ye.Right:return{...r,x:r.x+25};case ye.Left:return{...r,x:r.x-25};case ye.Down:return{...r,y:r.y+25};case ye.Up:return{...r,y:r.y-25}}},Pp=class{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;let{event:{target:r}}=t;this.props=t,this.listeners=new yo(mo(r)),this.windowListeners=new yo(st(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Kt.Resize,this.handleCancel),this.windowListeners.add(Kt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Kt.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&tJ(n),r(rr)}handleKeyDown(t){if(vu(t)){let{active:r,context:n,options:o}=this.props,{keyboardCodes:i=RR,coordinateGetter:a=iJ,scrollBehavior:s="smooth"}=o,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}let{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:rr;this.referenceCoordinates||(this.referenceCoordinates=c);let f=a(t,{active:r,context:n.current,currentCoordinates:c});if(f){let p=aa(f,c),d={x:0,y:0},{scrollableAncestors:h}=n.current;for(let g of h){let y=t.code,{isTop:w,isRight:x,isLeft:A,isBottom:O,maxScroll:D,minScroll:F}=NR(g),R=QK(g),P={x:Math.min(y===ye.Right?R.right-R.width/2:R.right,Math.max(y===ye.Right?R.left:R.left+R.width/2,f.x)),y:Math.min(y===ye.Down?R.bottom-R.height/2:R.bottom,Math.max(y===ye.Down?R.top:R.top+R.height/2,f.y))},E=y===ye.Right&&!x||y===ye.Left&&!A,S=y===ye.Down&&!O||y===ye.Up&&!w;if(E&&P.x!==f.x){let v=g.scrollLeft+p.x,_=y===ye.Right&&v<=D.x||y===ye.Left&&v>=F.x;if(_&&!p.y){g.scrollTo({left:v,behavior:s});return}_?d.x=g.scrollLeft-v:d.x=y===ye.Right?g.scrollLeft-D.x:g.scrollLeft-F.x,d.x&&g.scrollBy({left:-d.x,behavior:s});break}else if(S&&P.y!==f.y){let v=g.scrollTop+p.y,_=y===ye.Down&&v<=D.y||y===ye.Up&&v>=F.y;if(_&&!p.x){g.scrollTo({top:v,behavior:s});return}_?d.y=g.scrollTop-v:d.y=y===ye.Down?g.scrollTop-D.y:g.scrollTop-F.y,d.y&&g.scrollBy({top:-d.y,behavior:s});break}}this.handleMove(t,go(aa(f,this.referenceCoordinates),d))}}}handleMove(t,r){let{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){let{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){let{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};Pp.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=RR,onActivation:o}=t,{active:i}=r,{code:a}=e.nativeEvent;if(n.start.includes(a)){let s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function gR(e){return!!(e&&"distance"in e)}function yR(e){return!!(e&&"delay"in e)}var Eu=class{constructor(t,r,n){var o;n===void 0&&(n=nJ(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;let{event:i}=t,{target:a}=i;this.props=t,this.events=r,this.document=mo(a),this.documentListeners=new yo(this.document),this.listeners=new yo(n),this.windowListeners=new yo(st(a)),this.initialCoordinates=(o=Dp(i))!=null?o:rr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:t,props:{options:{activationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Kt.Resize,this.handleCancel),this.windowListeners.add(Kt.DragStart,hR),this.windowListeners.add(Kt.VisibilityChange,this.handleCancel),this.windowListeners.add(Kt.ContextMenu,hR),this.documentListeners.add(Kt.Keydown,this.handleKeydown),r){if(gR(r))return;if(yR(r)){this.timeoutId=setTimeout(this.handleStart,r.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){let{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Kt.Click,oJ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Kt.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;let{activated:n,initialCoordinates:o,props:i}=this,{onMove:a,options:{activationConstraint:s}}=i;if(!o)return;let u=(r=Dp(t))!=null?r:rr,l=aa(o,u);if(!n&&s){if(yR(s))return Yy(l,s.tolerance)?this.handleCancel():void 0;if(gR(s))return s.tolerance!=null&&Yy(l,s.tolerance)?this.handleCancel():Yy(l,s.distance)?this.handleStart():void 0}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){let{onEnd:t}=this.props;this.detach(),t()}handleCancel(){let{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===ye.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}},aJ={move:{name:"pointermove"},end:{name:"pointerup"}},sa=class extends Eu{constructor(t){let{event:r}=t,n=mo(r.target);super(t,aJ,n)}};sa.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];var sJ={move:{name:"mousemove"},end:{name:"mouseup"}},tb;(function(e){e[e.RightClick=2]="RightClick"})(tb||(tb={}));var rb=class extends Eu{constructor(t){super(t,sJ,mo(t.event.target))}};rb.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===tb.RightClick?!1:(n?.({event:r}),!0)}}];var Qy={move:{name:"touchmove"},end:{name:"touchend"}},nb=class extends Eu{constructor(t){super(t,Qy)}static setup(){return window.addEventListener(Qy.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Qy.move.name,t)};function t(){}}};nb.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:o}=r;return o.length>1?!1:(n?.({event:r}),!0)}}];var wu;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(wu||(wu={}));var Rp;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Rp||(Rp={}));function uJ(e){let{acceleration:t,activator:r=wu.Pointer,canScroll:n,draggingRect:o,enabled:i,interval:a=5,order:s=Rp.TreeOrder,pointerCoordinates:u,scrollableAncestors:l,scrollableAncestorRects:c,delta:f,threshold:p}=e,d=lJ({delta:f,disabled:!i}),[h,g]=sR(),y=N({x:0,y:0}),w=N({x:0,y:0}),x=G(()=>{switch(r){case wu.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case wu.DraggableRect:return o}},[r,o,u]),A=N(null),O=K(()=>{let F=A.current;if(!F)return;let R=y.current.x*w.current.x,P=y.current.y*w.current.y;F.scrollBy(R,P)},[]),D=G(()=>s===Rp.TreeOrder?[...l].reverse():l,[s,l]);L(()=>{if(!i||!l.length||!x){g();return}for(let F of D){if(n?.(F)===!1)continue;let R=l.indexOf(F),P=c[R];if(!P)continue;let{direction:E,speed:S}=YK(F,P,x,t,p);for(let v of["x","y"])d[v][E[v]]||(S[v]=0,E[v]=0);if(S.x>0||S.y>0){g(),A.current=F,h(O,a),y.current=S,w.current=E;return}}y.current={x:0,y:0},w.current={x:0,y:0},g()},[t,O,n,g,i,a,JSON.stringify(x),JSON.stringify(d),h,l,D,c,JSON.stringify(p)])}var cJ={x:{[Ge.Backward]:!1,[Ge.Forward]:!1},y:{[Ge.Backward]:!1,[Ge.Forward]:!1}};function lJ(e){let{delta:t,disabled:r}=e,n=Op(t);return ia(o=>{if(r||!n||!o)return cJ;let i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Ge.Backward]:o.x[Ge.Backward]||i.x===-1,[Ge.Forward]:o.x[Ge.Forward]||i.x===1},y:{[Ge.Backward]:o.y[Ge.Backward]||i.y===-1,[Ge.Forward]:o.y[Ge.Forward]||i.y===1}}},[r,t,n])}function fJ(e,t){let r=t!==null?e.get(t):void 0,n=r?r.node.current:null;return ia(o=>{var i;return t===null?null:(i=n??o)!=null?i:null},[n,t])}function pJ(e,t){return G(()=>e.reduce((r,n)=>{let{sensor:o}=n,i=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,n)}));return[...r,...i]},[]),[e,t])}var Su;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Su||(Su={}));var ob;(function(e){e.Optimized="optimized"})(ob||(ob={}));var bR=new Map;function dJ(e,t){let{dragging:r,dependencies:n,config:o}=t,[i,a]=$(null),{frequency:s,measure:u,strategy:l}=o,c=N(e),f=y(),p=oa(f),d=K(function(w){w===void 0&&(w=[]),!p.current&&a(x=>x===null?w:x.concat(w.filter(A=>!x.includes(A))))},[p]),h=N(null),g=ia(w=>{if(f&&!r)return bR;if(!w||w===bR||c.current!==e||i!=null){let x=new Map;for(let A of e){if(!A)continue;if(i&&i.length>0&&!i.includes(A.id)&&A.rect.current){x.set(A.id,A.rect.current);continue}let O=A.node.current,D=O?new xu(u(O),O):null;A.rect.current=D,D&&x.set(A.id,D)}return x}return w},[e,i,r,f,u]);return L(()=>{c.current=e},[e]),L(()=>{f||d()},[r,f]),L(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),L(()=>{f||typeof s!="number"||h.current!==null||(h.current=setTimeout(()=>{d(),h.current=null},s))},[s,f,d,...n]),{droppableRects:g,measureDroppableContainers:d,measuringScheduled:i!=null};function y(){switch(l){case Su.Always:return!1;case Su.BeforeDragging:return r;default:return!r}}}function MR(e,t){return ia(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function mJ(e,t){return MR(e,t)}function hJ(e){let{callback:t,disabled:r}=e,n=Tp(t),o=G(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:i}=window;return new i(n)},[n,r]);return L(()=>()=>o?.disconnect(),[o]),o}function $p(e){let{callback:t,disabled:r}=e,n=Tp(t),o=G(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:i}=window;return new i(n)},[r]);return L(()=>()=>o?.disconnect(),[o]),o}function gJ(e){return new xu(vo(e),e)}function vR(e,t,r){t===void 0&&(t=gJ);let[n,o]=pt(s,null),i=hJ({callback(u){if(e)for(let l of u){let{type:c,target:f}=l;if(c==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),a=$p({callback:o});return Ft(()=>{o(),e?(a?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),i?.disconnect())},[e]),n;function s(u){if(!e)return null;if(e.isConnected===!1){var l;return(l=u??r)!=null?l:null}let c=t(e);return JSON.stringify(u)===JSON.stringify(c)?u:c}}function yJ(e){let t=MR(e);return CR(e,t)}var wR=[];function bJ(e){let t=N(e),r=ia(n=>e?n&&n!==wR&&e&&t.current&&e.parentNode===t.current.parentNode?n:Mp(e):wR,[e]);return L(()=>{t.current=e},[e]),r}function vJ(e){let[t,r]=$(null),n=N(e),o=K(i=>{let a=Zy(i.target);a&&r(s=>s?(s.set(a,eb(a)),new Map(s)):null)},[]);return L(()=>{let i=n.current;if(e!==i){a(i);let s=e.map(u=>{let l=Zy(u);return l?(l.addEventListener("scroll",o,{passive:!0}),[l,eb(l)]):null}).filter(u=>u!=null);r(s.length?new Map(s):null),n.current=e}return()=>{a(e),a(i)};function a(s){s.forEach(u=>{let l=Zy(u);l?.removeEventListener("scroll",o)})}},[o,e]),G(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>go(i,a),rr):PR(e):rr,[e,t])}function xR(e,t){t===void 0&&(t=[]);let r=N(null);return L(()=>{r.current=null},t),L(()=>{let n=e!==rr;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?aa(e,r.current):rr}function wJ(e){L(()=>{if(!yu)return;let t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(let r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function xJ(e,t){return G(()=>e.reduce((r,n)=>{let{eventName:o,handler:i}=n;return r[o]=a=>{i(a,t)},r},{}),[e,t])}function $R(e){return G(()=>e?GK(e):null,[e])}var Xy=[];function EJ(e,t){t===void 0&&(t=vo);let[r]=e,n=$R(r?st(r):null),[o,i]=pt(s,Xy),a=$p({callback:i});return e.length>0&&o===Xy&&i(),Ft(()=>{e.length?e.forEach(u=>a?.observe(u)):(a?.disconnect(),i())},[e]),o;function s(){return e.length?e.map(u=>FR(u)?n:new xu(t(u),u)):Xy}}function SJ(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return na(t)?t:e}function kJ(e){let{measure:t}=e,[r,n]=$(null),o=K(l=>{for(let{target:c}of l)if(na(c)){n(f=>{let p=t(c);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=$p({callback:o}),a=K(l=>{let c=SJ(l);i?.disconnect(),c&&i?.observe(c),n(c?t(c):null)},[t,i]),[s,u]=bu(a);return G(()=>({nodeRef:s,rect:r,setRef:u}),[r,s,u])}var AJ=[{sensor:sa,options:{}},{sensor:Pp,options:{}}],IJ={current:{}},Fp={draggable:{measure:mR},droppable:{measure:mR,strategy:Su.WhileDragging,frequency:ob.Optimized},dragOverlay:{measure:vo}},bo=class extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}},_J={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Np},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Fp,measureDroppableContainers:Np,windowRect:null,measuringScheduled:!1},CJ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Np,draggableNodes:new Map,over:null,measureDroppableContainers:Np},Lp=we(CJ),LR=we(_J);function TJ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bo}}}function OJ(e,t){switch(t.type){case ze.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ze.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case ze.DragEnd:case ze.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ze.RegisterDroppable:{let{element:r}=t,{id:n}=r,o=new bo(e.droppable.containers);return o.set(n,r),{...e,droppable:{...e.droppable,containers:o}}}case ze.SetDroppableDisabled:{let{id:r,key:n,disabled:o}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let a=new bo(e.droppable.containers);return a.set(r,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case ze.UnregisterDroppable:{let{id:r,key:n}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;let i=new bo(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function DJ(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:o}=V(Lp),i=Op(n),a=Op(r?.id);return L(()=>{if(!t&&!n&&i&&a!=null){if(!vu(i)||document.activeElement===i.target)return;let s=o.get(a);if(!s)return;let{activatorNode:u,node:l}=s;if(!u.current&&!l.current)return;requestAnimationFrame(()=>{for(let c of[u.current,l.current]){if(!c)continue;let f=cR(c);if(f){f.focus();break}}})}},[n,t,o,a,i]),null}function FJ(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...n}),r):r}function NJ(e){return G(()=>({draggable:{...Fp.draggable,...e?.draggable},droppable:{...Fp.droppable,...e?.droppable},dragOverlay:{...Fp.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function PJ(e){let{activeNode:t,measure:r,initialRect:n,config:o=!0}=e,i=N(!1),{x:a,y:s}=typeof o=="boolean"?{x:o,y:o}:o;Ft(()=>{if(!a&&!s||!t){i.current=!1;return}if(i.current||!n)return;let l=t?.node.current;if(!l||l.isConnected===!1)return;let c=r(l),f=CR(c,n);if(a||(f.x=0),s||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){let p=TR(l);p&&p.scrollBy({top:f.y,left:f.x})}},[t,a,s,n,r])}var qR=we({...rr,scaleX:1,scaleY:1}),_n;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(_n||(_n={}));var BR=Ue(function(t){var r,n,o,i;let{id:a,accessibility:s,autoScroll:u=!0,children:l,sensors:c=AJ,collisionDetection:f=BK,measuring:p,modifiers:d,...h}=t,g=pt(OJ,void 0,TJ),[y,w]=g,[x,A]=FK(),[O,D]=$(_n.Uninitialized),F=O===_n.Initialized,{draggable:{active:R,nodes:P,translate:E},droppable:{containers:S}}=y,v=R?P.get(R):null,_=N({initial:null,translated:null}),I=G(()=>{var Ke;return R!=null?{id:R,data:(Ke=v?.data)!=null?Ke:IJ,rect:_}:null},[R,v]),W=N(null),[j,H]=$(null),[J,re]=$(null),ie=oa(h,Object.values(h)),C=ho("DndDescribedBy",a),k=G(()=>S.getEnabled(),[S]),M=NJ(p),{droppableRects:B,measureDroppableContainers:z,measuringScheduled:U}=dJ(k,{dragging:F,dependencies:[E.x,E.y],config:M.droppable}),Z=fJ(P,R),oe=G(()=>J?Dp(J):null,[J]),qe=w3(),Te=mJ(Z,M.draggable.measure);PJ({activeNode:R?P.get(R):null,config:qe.layoutShiftCompensation,initialRect:Te,measure:M.draggable.measure});let me=vR(Z,M.draggable.measure,Te),Or=vR(Z?Z.parentElement:null),Nt=N({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:S,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Dr=S.getNodeFor((r=Nt.current.over)==null?void 0:r.id),Fr=kJ({measure:M.dragOverlay.measure}),xo=(n=Fr.nodeRef.current)!=null?n:Z,Eo=F?(o=Fr.rect)!=null?o:me:null,fb=!!(Fr.nodeRef.current&&Fr.rect),pb=yJ(fb?null:me),Vp=$R(xo?st(xo):null),Yr=bJ(F?Dr??Z:null),Iu=EJ(Yr),_u=FJ(d,{transform:{x:E.x-pb.x,y:E.y-pb.y,scaleX:1,scaleY:1},activatorEvent:J,active:I,activeNodeRect:me,containerNodeRect:Or,draggingNodeRect:Eo,over:Nt.current.over,overlayNodeRect:Fr.rect,scrollableAncestors:Yr,scrollableAncestorRects:Iu,windowRect:Vp}),db=oe?go(oe,E):null,mb=vJ(Yr),d3=xR(mb),m3=xR(mb,[me]),So=go(_u,d3),ko=Eo?WK(Eo,_u):null,ua=I&&ko?f({active:I,collisionRect:ko,droppableRects:B,droppableContainers:k,pointerCoordinates:db}):null,hb=IR(ua,"id"),[Qr,gb]=$(null),h3=fb?_u:go(_u,m3),g3=jK(h3,(i=Qr?.rect)!=null?i:null,me),yb=K((Ke,gt)=>{let{sensor:yt,options:Xr}=gt;if(W.current==null)return;let Pt=P.get(W.current);if(!Pt)return;let Jt=Ke.nativeEvent,nr=new yt({active:W.current,activeNode:Pt,event:Jt,options:Xr,context:Nt,onStart(Zt){let ca=W.current;if(ca==null)return;let la=P.get(ca);if(!la)return;let{onDragStart:Cu}=ie.current,Tu={active:{id:ca,data:la.data,rect:_}};ln(()=>{Cu?.(Tu),D(_n.Initializing),w({type:ze.DragStart,initialCoordinates:Zt,active:ca}),x({type:"onDragStart",event:Tu})})},onMove(Zt){w({type:ze.DragMove,coordinates:Zt})},onEnd:Ao(ze.DragEnd),onCancel:Ao(ze.DragCancel)});ln(()=>{H(nr),re(Ke.nativeEvent)});function Ao(Zt){return async function(){let{active:la,collisions:Cu,over:Tu,scrollAdjustedTranslate:vb}=Nt.current,fa=null;if(la&&vb){let{cancelDrop:pa}=ie.current;fa={activatorEvent:Jt,active:la,collisions:Cu,delta:vb,over:Tu},Zt===ze.DragEnd&&typeof pa=="function"&&await Promise.resolve(pa(fa))&&(Zt=ze.DragCancel)}W.current=null,ln(()=>{w({type:Zt}),D(_n.Uninitialized),gb(null),H(null),re(null);let pa=Zt===ze.DragEnd?"onDragEnd":"onDragCancel";if(fa){let Gp=ie.current[pa];Gp?.(fa),x({type:pa,event:fa})}})}}},[P]),y3=K((Ke,gt)=>(yt,Xr)=>{let Pt=yt.nativeEvent,Jt=P.get(Xr);if(W.current!==null||!Jt||Pt.dndKit||Pt.defaultPrevented)return;let nr={active:Jt};Ke(yt,gt.options,nr)===!0&&(Pt.dndKit={capturedBy:gt.sensor},W.current=Xr,yb(yt,gt))},[P,yb]),bb=pJ(c,y3);wJ(c),Ft(()=>{me&&O===_n.Initializing&&D(_n.Initialized)},[me,O]),L(()=>{let{onDragMove:Ke}=ie.current,{active:gt,activatorEvent:yt,collisions:Xr,over:Pt}=Nt.current;if(!gt||!yt)return;let Jt={active:gt,activatorEvent:yt,collisions:Xr,delta:{x:So.x,y:So.y},over:Pt};ln(()=>{Ke?.(Jt),x({type:"onDragMove",event:Jt})})},[So.x,So.y]),L(()=>{let{active:Ke,activatorEvent:gt,collisions:yt,droppableContainers:Xr,scrollAdjustedTranslate:Pt}=Nt.current;if(!Ke||W.current==null||!gt||!Pt)return;let{onDragOver:Jt}=ie.current,nr=Xr.get(hb),Ao=nr&&nr.rect.current?{id:nr.id,rect:nr.rect.current,data:nr.data,disabled:nr.disabled}:null,Zt={active:Ke,activatorEvent:gt,collisions:yt,delta:{x:Pt.x,y:Pt.y},over:Ao};ln(()=>{gb(Ao),Jt?.(Zt),x({type:"onDragOver",event:Zt})})},[hb]),Ft(()=>{Nt.current={activatorEvent:J,active:I,activeNode:Z,collisionRect:ko,collisions:ua,droppableRects:B,draggableNodes:P,draggingNode:xo,draggingNodeRect:Eo,droppableContainers:S,over:Qr,scrollableAncestors:Yr,scrollAdjustedTranslate:So},_.current={initial:Eo,translated:ko}},[I,Z,ua,ko,P,xo,Eo,B,S,Qr,Yr,So]),uJ({...qe,delta:E,draggingRect:ko,pointerCoordinates:db,scrollableAncestors:Yr,scrollableAncestorRects:Iu});let b3=G(()=>({active:I,activeNode:Z,activeNodeRect:me,activatorEvent:J,collisions:ua,containerNodeRect:Or,dragOverlay:Fr,draggableNodes:P,droppableContainers:S,droppableRects:B,over:Qr,measureDroppableContainers:z,scrollableAncestors:Yr,scrollableAncestorRects:Iu,measuringConfiguration:M,measuringScheduled:U,windowRect:Vp}),[I,Z,me,J,ua,Or,Fr,P,S,B,Qr,z,Yr,Iu,M,U,Vp]),v3=G(()=>({activatorEvent:J,activators:bb,active:I,activeNodeRect:me,ariaDescribedById:{draggable:C},dispatch:w,draggableNodes:P,over:Qr,measureDroppableContainers:z}),[J,bb,I,me,w,C,P,Qr,z]);return q.createElement(SR.Provider,{value:A},q.createElement(Lp.Provider,{value:v3},q.createElement(LR.Provider,{value:b3},q.createElement(qR.Provider,{value:g3},l)),q.createElement(DJ,{disabled:s?.restoreFocus===!1})),q.createElement(RK,{...s,hiddenTextDescribedById:C}));function w3(){let Ke=j?.autoScrollEnabled===!1,gt=typeof u=="object"?u.enabled===!1:u===!1,yt=F&&!Ke&&!gt;return typeof u=="object"?{...u,enabled:yt}:{enabled:yt}}}),RJ=we(null),ER="button",MJ="Droppable";function jR(e){let{id:t,data:r,disabled:n=!1,attributes:o}=e,i=ho(MJ),{activators:a,activatorEvent:s,active:u,activeNodeRect:l,ariaDescribedById:c,draggableNodes:f,over:p}=V(Lp),{role:d=ER,roleDescription:h="draggable",tabIndex:g=0}=o??{},y=u?.id===t,w=V(y?qR:RJ),[x,A]=bu(),[O,D]=bu(),F=xJ(a,t),R=oa(r);Ft(()=>(f.set(t,{id:t,key:i,node:x,activatorNode:O,data:R}),()=>{let E=f.get(t);E&&E.key===i&&f.delete(t)}),[f,t]);let P=G(()=>({role:d,tabIndex:g,"aria-disabled":n,"aria-pressed":y&&d===ER?!0:void 0,"aria-roledescription":h,"aria-describedby":c.draggable}),[n,d,g,y,h,c.draggable]);return{active:u,activatorEvent:s,activeNodeRect:l,attributes:P,isDragging:y,listeners:n?void 0:F,node:x,over:p,setNodeRef:A,setActivatorNodeRef:D,transform:w}}function zR(){return V(LR)}var $J="Droppable",LJ={timeout:25};function WR(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:o}=e,i=ho($J),{active:a,dispatch:s,over:u,measureDroppableContainers:l}=V(Lp),c=N({disabled:r}),f=N(!1),p=N(null),d=N(null),{disabled:h,updateMeasurementsFor:g,timeout:y}={...LJ,...o},w=oa(g??n),x=K(()=>{if(!f.current){f.current=!0;return}d.current!=null&&clearTimeout(d.current),d.current=setTimeout(()=>{l(Array.isArray(w.current)?w.current:[w.current]),d.current=null},y)},[y]),A=$p({callback:x,disabled:h||!a}),O=K((P,E)=>{A&&(E&&(A.unobserve(E),f.current=!1),P&&A.observe(P))},[A]),[D,F]=bu(O),R=oa(t);return L(()=>{!A||!D.current||(A.disconnect(),f.current=!1,A.observe(D.current))},[D,A]),Ft(()=>(s({type:ze.RegisterDroppable,element:{id:n,key:i,disabled:r,node:D,rect:p,data:R}}),()=>s({type:ze.UnregisterDroppable,key:i,id:n})),[n]),L(()=>{r!==c.current.disabled&&(s({type:ze.SetDroppableDisabled,id:n,key:i,disabled:r}),c.current.disabled=r)},[n,i,r,s]),{active:a,rect:p,isOver:u?.id===n,node:D,over:u,setNodeRef:F}}T();function jp(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function qJ(e,t){return e.reduce((r,n,o)=>{let i=t.get(n);return i&&(r[o]=i),r},Array(e.length))}function qp(e){return e!==null&&e>=0}function BJ(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function jJ(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}var UR=e=>{let{rects:t,activeIndex:r,overIndex:n,index:o}=e,i=jp(t,n,r),a=t[o],s=i[o];return!s||!a?null:{x:s.left-a.left,y:s.top-a.top,scaleX:s.width/a.width,scaleY:s.height/a.height}};var Bp={scaleX:1,scaleY:1},HR=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:o,rects:i,overIndex:a}=e,s=(t=i[r])!=null?t:n;if(!s)return null;if(o===r){let l=i[a];return l?{x:0,y:r<a?l.top+l.height-(s.top+s.height):l.top-s.top,...Bp}:null}let u=zJ(i,o,r);return o>r&&o<=a?{x:0,y:-s.height-u,...Bp}:o<r&&o>=a?{x:0,y:s.height+u,...Bp}:{x:0,y:0,...Bp}};function zJ(e,t,r){let n=e[t],o=e[t-1],i=e[t+1];return n?r<t?o?n.top-(o.top+o.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):o?n.top-(o.top+o.height):0:0}var VR="Sortable",GR=q.createContext({activeIndex:-1,containerId:VR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:UR,disabled:{draggable:!1,droppable:!1}});function KR(e){let{children:t,id:r,items:n,strategy:o=UR,disabled:i=!1}=e,{active:a,dragOverlay:s,droppableRects:u,over:l,measureDroppableContainers:c}=zR(),f=ho(VR,r),p=s.rect!==null,d=G(()=>n.map(F=>typeof F=="object"&&"id"in F?F.id:F),[n]),h=a!=null,g=a?d.indexOf(a.id):-1,y=l?d.indexOf(l.id):-1,w=N(d),x=!BJ(d,w.current),A=y!==-1&&g===-1||x,O=jJ(i);Ft(()=>{x&&h&&c(d)},[x,d,h,c]),L(()=>{w.current=d},[d]);let D=G(()=>({activeIndex:g,containerId:f,disabled:O,disableTransforms:A,items:d,overIndex:y,useDragOverlay:p,sortedRects:qJ(d,u),strategy:o}),[g,f,O.draggable,O.droppable,A,d,y,u,p,o]);return q.createElement(GR.Provider,{value:D},t)}var WJ=e=>{let{id:t,items:r,activeIndex:n,overIndex:o}=e;return jp(r,n,o).indexOf(t)},UJ=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:o,items:i,newIndex:a,previousItems:s,previousContainerId:u,transition:l}=e;return!l||!n||s!==i&&o===a?!1:r?!0:a!==o&&t===u},HJ={duration:200,easing:"ease"},JR="transform",VJ=In.Transition.toString({property:JR,duration:0,easing:"linear"}),GJ={roleDescription:"sortable"};function KJ(e){let{disabled:t,index:r,node:n,rect:o}=e,[i,a]=$(null),s=N(r);return Ft(()=>{if(!t&&r!==s.current&&n.current){let u=o.current;if(u){let l=vo(n.current,{ignoreTransform:!0}),c={x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height};(c.x||c.y)&&a(c)}}r!==s.current&&(s.current=r)},[t,r,n,o]),L(()=>{i&&a(null)},[i]),i}function ZR(e){let{animateLayoutChanges:t=UJ,attributes:r,disabled:n,data:o,getNewIndex:i=WJ,id:a,strategy:s,resizeObserverConfig:u,transition:l=HJ}=e,{items:c,containerId:f,activeIndex:p,disabled:d,disableTransforms:h,sortedRects:g,overIndex:y,useDragOverlay:w,strategy:x}=V(GR),A=JJ(n,d),O=c.indexOf(a),D=G(()=>({sortable:{containerId:f,index:O,items:c},...o}),[f,o,O,c]),F=G(()=>c.slice(c.indexOf(a)),[c,a]),{rect:R,node:P,isOver:E,setNodeRef:S}=WR({id:a,data:D,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...u}}),{active:v,activatorEvent:_,activeNodeRect:I,attributes:W,setNodeRef:j,listeners:H,isDragging:J,over:re,setActivatorNodeRef:ie,transform:C}=jR({id:a,data:D,attributes:{...GJ,...r},disabled:A.draggable}),k=iR(S,j),M=!!v,B=M&&!h&&qp(p)&&qp(y),z=!w&&J,U=z&&B?C:null,oe=B?U??(s??x)({rects:g,activeNodeRect:I,activeIndex:p,overIndex:y,index:O}):null,qe=qp(p)&&qp(y)?i({id:a,items:c,activeIndex:p,overIndex:y}):O,Te=v?.id,me=N({activeId:Te,items:c,newIndex:qe,containerId:f}),Or=c!==me.current.items,Nt=t({active:v,containerId:f,isDragging:J,isSorting:M,id:a,index:O,items:c,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:l,wasDragging:me.current.activeId!=null}),Dr=KJ({disabled:!Nt,index:O,node:P,rect:R});return L(()=>{M&&me.current.newIndex!==qe&&(me.current.newIndex=qe),f!==me.current.containerId&&(me.current.containerId=f),c!==me.current.items&&(me.current.items=c)},[M,qe,f,c]),L(()=>{if(Te===me.current.activeId)return;if(Te&&!me.current.activeId){me.current.activeId=Te;return}let xo=setTimeout(()=>{me.current.activeId=Te},50);return()=>clearTimeout(xo)},[Te]),{active:v,activeIndex:p,attributes:W,data:D,rect:R,index:O,newIndex:qe,items:c,isOver:E,isSorting:M,isDragging:J,listeners:H,node:P,overIndex:y,over:re,setNodeRef:k,setActivatorNodeRef:ie,setDroppableNodeRef:S,setDraggableNodeRef:j,transform:Dr??oe,transition:Fr()};function Fr(){if(Dr||Or&&me.current.newIndex===O)return VJ;if(!(z&&!vu(_)||!l)&&(M||Nt))return In.Transition.toString({...l,property:JR})}}function JJ(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}var pSe=[ye.Down,ye.Right,ye.Up,ye.Left];T();T();var YR="Collapsible",[ZJ,kSe]=Sn(YR),[YJ,ib]=ZJ(YR),QJ=te((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:o,disabled:i,onOpenChange:a,...s}=e,[u=!1,l]=Xi({prop:n,defaultProp:o,onChange:a});return Q(YJ,{scope:r,disabled:i,contentId:Qi(),open:u,onOpenToggle:K(()=>l(c=>!c),[l])},Q(Gt.div,le({"data-state":ab(u),"data-disabled":i?"":void 0},s,{ref:t})))}),XJ="CollapsibleTrigger",QR=te((e,t)=>{let{__scopeCollapsible:r,...n}=e,o=ib(XJ,r);return Q(Gt.button,le({type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":ab(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled},n,{ref:t,onClick:rt(e.onClick,o.onOpenToggle)}))}),XR="CollapsibleContent",e3=te((e,t)=>{let{forceMount:r,...n}=e,o=ib(XR,e.__scopeCollapsible);return Q(du,{present:r||o.open},({present:i})=>Q(eZ,le({},n,{ref:t,present:i})))}),eZ=te((e,t)=>{let{__scopeCollapsible:r,present:n,children:o,...i}=e,a=ib(XR,r),[s,u]=$(n),l=N(null),c=Jr(t,l),f=N(0),p=f.current,d=N(0),h=d.current,g=a.open||s,y=N(g),w=N();return L(()=>{let x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),fo(()=>{let x=l.current;if(x){w.current=w.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";let A=x.getBoundingClientRect();f.current=A.height,d.current=A.width,y.current||(x.style.transitionDuration=w.current.transitionDuration,x.style.animationName=w.current.animationName),u(n)}},[a.open,n]),Q(Gt.div,le({"data-state":ab(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g},i,{ref:c,style:{["--radix-collapsible-content-height"]:p?`${p}px`:void 0,["--radix-collapsible-content-width"]:h?`${h}px`:void 0,...e.style}}),g&&o)});function ab(e){return e?"open":"closed"}var t3=QJ;var zp=t3,Wp=QR,Up=e3;var r3=require("obsidian");T();function wo(e,{icon:t,desc:r,disable:n}){let o=Le(e),i=N(null);return L(()=>{i.current?.setIcon(t??"")},[t]),L(()=>{i.current?.setTooltip(r??"")},[r]),L(()=>{i.current?.setDisabled(n??!1)},[n]),K(a=>{if(!a)i.current?.extraSettingsEl.remove(),i.current=null;else{let s=new r3.ExtraButtonComponent(a);s.onClick(o),i.current=s}},[])}function n3(e){let{attributes:t,listeners:r,setNodeRef:n,transform:o,transition:i}=ZR({id:e.id}),a={transform:In.Transform.toString(o),transition:i};return m("div",{ref:n,style:a,...t,...r,children:e.children})}function sb(){let{settings:e}=V(de).plugin,{noteFields:t}=e,{run:r}=Xa(async()=>{t.setOption("noteFields",n).apply()&&await e.save()},{wait:200}),[n,o]=$(t.noteFields),i=AR(kR(sa,{activationConstraint:{delay:200,tolerance:5}})),[a,s]=$(!0),[u,l]=$(""),c=wo(()=>{u&&(o(d=>[...d,[u,t.getDefaultField()]]),r(),l(""))},{icon:"plus",desc:"Add"}),[f]=Ve(a?"chevrons-down-up":"chevrons-up-down");return m(Y,{children:[m(ve,{name:"Metadata Fields",description:m(Y,{children:"Specify the metadata fields shown in Note Fields View"}),ref:c,children:m("input",{type:"text",value:u,onChange:d=>l(d.target.value),placeholder:"Name of new field"})}),m(zp,{open:a,onOpenChange:s,className:"flex flex-col items-end",children:[m(Wp,{asChild:!0,children:m("button",{ref:f,"aria-label":a?"Hide Fields":"Show All Fields"})}),m(Up,{className:"p-3 divide-y ",children:m(BR,{sensors:i,collisionDetection:_R,onDragEnd:p,children:m(KR,{items:n.map(([d])=>d),strategy:HR,children:n.map(([d])=>m(n3,{id:d,children:m(rZ,{name:d,onDelete:()=>{o(h=>{let g=h.findIndex(([y])=>y===d);return[...h.slice(0,g),...h.slice(g+1)]}),r()}})},d))})})})]})]});function p(d){let{active:h,over:g}=d;g&&h.id!==g.id&&o(y=>{let w=y.findIndex(([A])=>h.id===A),x=y.findIndex(([A])=>g.id===A);return r(),jp(y,w,x)})}}function rZ({name:e,onDelete:t}){let[r]=Ve("trash");return m(ve,{name:m("code",{children:e}),children:m("button",{ref:r,onClick:t})})}function ub(){return m(Y,{children:m(sb,{})})}var o3=require("obsidian");var ku=class extends o3.PluginSettingTab{#e(){let t=this.containerEl.parentElement;if(!t)throw new Error("Setting tab is not mounted");if(!t.classList.contains("vertical-tab-content-container"))return ne.error("Failed to patch unload, unexpected tabContentContainer"),console.error(t),!1;let r=this,n=Rt(t,{empty:o=>function(){r.unload(),o.call(this),n()}});return ne.debug("Setting tab unload patched"),!0}#t=[];register(t){this.#t.push(t)}unload(){for(;this.#t.length>0;)this.#t.pop()()}display(){this.containerEl.empty(),this.#e()}};T();function cb(){let{suggester:e}=V(de).plugin.settings;return m(Y,{children:[m(Tr,{name:"Citation Editor Suggester",settings:e,prop:"citationEditorSuggester"}),m(Tr,{name:"Show BibTex Citekey in Suggester",settings:e,prop:"showCitekeyInSuggester"})]})}T();T();var Cn={filename:{title:"Note Filename",desc:""},citation:{title:"Markdown primary citation template",desc:""},altCitation:{title:"Markdown secondary citation template",desc:""},note:{title:"Note Content",desc:"Used to render created literature note"},annotation:{title:"Annotaion",desc:"Used to render single annotation"},annots:{title:"Annotations",desc:"Used to render annotation list when batch importing"}};function i3({ejected:e,type:t}){let{plugin:r}=V(de),n=r.templateLoader,[o]=Ve("arrow-up-right");if(e){let i=n.getTemplateFile(t);return m(ve,{name:Cn[t].title,description:Cn[t].desc,children:[m("code",{children:i}),m("button",{"aria-label":"Open Template File",ref:o,onClick:async()=>{await uo(t,null,r)}})]})}else return m(ve,{name:Cn[t].title,description:Cn[t].desc,children:m("pre",{className:"text-left max-w-xs overflow-scroll rounded border p-4",children:n.getTemplate(t)})})}var a3=require("obsidian");T();T();function nZ(){let{plugin:e}=V(de),{template:t}=e.settings,[r,n]=$(()=>t.fmFieldsMode),o=Dt(t,"fmFieldsMode"),i=Le(async function(s){let u=s.target.value;n(u),await o(u)});return m(ve,{name:"Mode",description:m(Y,{children:["Use whitelist to include only the fields specified in"," ",m("code",{children:"Mapping"}),m("br",{}),"Use blacklist to include all fields available except the fields specified in ",m("code",{children:"Mapping"})]}),children:m("select",{className:"dropdown",onChange:i,value:r,children:NS.map(a=>m("option",{value:a,children:a},a))})})}function s3(){let{plugin:e}=V(de),{template:t}=e.settings,[r,n]=$(()=>t.fmFieldsMapping),o=Dt(t,"fmFieldsMapping"),i=G(()=>(0,a3.debounce)(p=>o(p),500),[o]),[a,s]=$(""),u=wo(()=>{if(!a)return;let p={...r,[a]:!0};n(p),i(p),s("")},{icon:"plus",desc:"Add"}),[l,c]=$(!0),[f]=Ve(l?"chevrons-down-up":"chevrons-up-down");return m(Y,{children:[m(ve,{heading:!0,name:"Metadata Fields",description:"Specify metadata fields that will be added to the frontmatter of the note."}),m(nZ,{}),m(Zr,{name:"Tag Prefix",settings:t,prop:"fmTagPrefix",children:["If you want all the tags imported from zotero to be included in a certain category, you can specify it here. For example: ",m("code",{children:"zt/"})]}),m(ve,{name:"Mapping",description:m(Y,{children:["Specify the fields to import to the frontmatter of the note.",m("br",{}),"You can also specify the alias of the field here if you don't like the default field name from Zotero."]}),ref:u,children:m("input",{type:"text",value:a,onChange:p=>s(p.target.value),placeholder:"Name of new field"})}),m(zp,{open:l,onOpenChange:c,className:"flex flex-col items-end",children:[m(Wp,{asChild:!0,children:m("button",{ref:f,"aria-label":l?"Hide Fields":"Show All Fields"})}),m(Up,{className:"p-3 divide-y ",children:Object.entries(r).map(([p,d])=>m(ve,{name:m("code",{children:p}),children:m(oZ,{alias:d,onAliasChange:h=>{let g=un(r,p,()=>h);n(g),i(g)},onDelete:()=>{let h=bc(r,p);n(h),i(h)}})},p))})]})]})}function oZ({alias:e,onAliasChange:t,onDelete:r}){let[n]=Ve("trash");return m(Y,{children:[m("input",{type:"text",placeholder:"Specify Alias Here",value:e===!0?"":e,onChange:o=>t(o.target.value?o.target.value:!0)}),m("button",{"aria-label":"Remove",ref:n,onClick:r})]})}T();function u3({type:e}){let{plugin:t}=V(de),{template:r}=t.settings,[n,o]=$(r.templates[e]),i=async a=>{if(await r.setTemplate(e,a)===!1)return!1;await t.settings.save()};return m(Uy,{name:Cn[e].title,value:n,onChange:a=>o(a.target.value),onSubmit:()=>{o(n),i(n)},children:Cn[e].desc})}T();var c3=te(function({ejected:t},r){return m(ve,{heading:!0,name:"Ejectable",description:"These templates can be customized once saved to the template folder",ref:r,children:m("div",{children:t?"Revert":"Eject"})})});function l3(){let{template:e}=V(de).plugin.settings,[t,r]=$(e.ejected),n=Dt(e,"ejected"),o=wo(async()=>{r(!t),await n(!t)},{icon:t?"x-circle":"folder-input",desc:t?"Revert to default":"Save template file to edit"});return[t,o]}function lb(){let{template:e}=V(de).plugin.settings,[t,r]=l3();return m(Y,{children:[m(Zr,{name:"Template Folder",settings:e,prop:"folder",normalize:ta,children:"The folder which templates are ejected into and stored"}),m(Tr,{name:"Auto Pair For Eta",settings:e,prop:"autoPairEta",children:["Pair `<` and `%` automatically in eta templates.",m("br",{}),"If you have issue with native auto pair features, you can disable this option and report the bug in GitHub"]}),m(ve,{heading:!0,name:"Update Note",description:m(Y,{children:["You can find update note option in ",m("code",{children:"More Options"})," menu and command pallette inside a literature note. When update, all literature notes with the same ",m("code",{children:"zotero-key"})," will be updated."]})}),m(Tr,{name:"Overwrite Existing Note",settings:e,prop:"updateOverwrite",children:m("div",{className:"space-y-2",children:m("div",{className:"text-txt-error",children:"\u26A0 WARNING: This will overwrite the whole note content with latest one when update literature note, make sure you didn't add any custom content in the note before enable this option."})})}),m(Tr,{name:"In-place Update of Existing Annotations",settings:e,prop:"updateAnnotBlock",children:m("div",{className:"space-y-2",children:[m("div",{children:"(Experimental)"}),m("div",{className:"text-txt-error",children:"\u26A0 WARNING: When enable, the plugin will try to update existing annotaion callouts marked with block-id in addition to appped newly-added ones, which may cause unexpected behavior. Make sure you have backup of your notes before enable this option."}),m("div",{className:"text-txt-accent",children:"\u24D8 Note: If you disable callout warpping in annotation template, you need to make sure the block-id is added properly in the template."}),m("div",{className:"text-txt-accent",children:"\u24D8 Note: This won't work on annotations imported before this feature is available, unless every annotation is inside a block with proper block-id"})]})}),m(s3,{}),m(ve,{heading:!0,name:"Simple"}),Qc.map(n=>m(u3,{type:n},n)),m(c3,{ejected:t,ref:r}),Vn.map(n=>m(i3,{ejected:t,type:n},n))]})}var Au=class extends ku{constructor(r){super(r.app,r);this.plugin=r;this.containerEl.addClass("obzt")}display(){super.display(),q.render(m(de.Provider,{value:{plugin:this.plugin,closeTab:()=>this.setting.close()},children:m(iZ,{})}),this.containerEl),this.register(()=>q.unmountComponentAtNode(this.containerEl))}};function iZ(){let[e,t]=_m("obzt-setting-tab",{defaultValue:"general"});return m($P,{value:e,onValueChange:t,className:"flex h-full flex-col",children:[m(By,{className:"self-start max-w-full",children:[m(kn,{value:"general",children:"General"}),m(kn,{value:"connect",children:"Connect"}),m(kn,{value:"suggester",children:"Suggester"}),m(kn,{value:"template",children:"Template"}),m(kn,{value:"note-fields",children:"Fields"}),m(kn,{value:"misc",children:"Misc"})]}),m(An,{value:"general",className:"divide-y flex-grow overflow-y-scroll",children:m(Vy,{})}),m(An,{value:"connect",className:"divide-y flex-grow overflow-y-scroll",children:m(Wy,{})}),m(An,{value:"suggester",className:"divide-y flex-grow overflow-y-scroll",children:m(cb,{})}),m(An,{value:"template",className:"divide-y flex-grow overflow-y-scroll",children:m(lb,{})}),m(An,{value:"note-fields",className:"divide-y flex-grow overflow-y-scroll",children:m(ub,{})}),m(An,{value:"misc",className:"divide-y flex-grow overflow-y-scroll",children:m(Ky,{})})]})}var f3=$t()("database","watcher","imgImporter","log","noteIndex","template","suggester","noteFields","server"),Hp=class extends ce{plugin=this.use(be);noteIndex=this.use(Ui);database=this.use(Ut);watcher=this.use(Gi);imgImporter=this.use(Ki);log=this.use(Vo);template=this.use(Ct);suggester=this.use(js);noteFields=this.use(Bi);server=this.use(Hi);async onload(){ne.debug("Loading Settings...");let t=await this.plugin.loadData()??{};vn(this,xt(f3),jn).forEach(r=>r.fromJSON(t)),await this.log.applyAll(),ne.debug("Settings loaded")}async save(){let t=vn(this,xt(f3),lr((r,n)=>n instanceof Me?n.toJSON():{[r]:n}),jn);await this.plugin.saveData(Object.assign({},...t))}};var be=class extends p3.Plugin{use=Oe.plugin(this);constructor(t,r){if(super(t,r),!kS(r))throw new Error("Library check failed")}settings=this.use(Hp);noteIndex=this.use(lo);server=this.use(Vi);citekeyClick=this.use(dp);templateEditor=this.use(Ts);noteFeatures=this.use(uP);get databaseAPI(){return this.dbWorker.api}dbWorker=this.use(ft);imgCacheImporter=this.use(fu);dbWatcher=this.use(Cr);database=this.use(lu);templateRenderer=this.use(hs);templateComplier=this.use(Cs);templateLoader=this.use(gr);annotBlockWorker=this.use(fp);pdfParser=this.use(cu);async onload(){ne.info("loading Obsidian Zotero Plugin"),this.addSettingTab(new Au(this)),globalThis.zoteroAPI={version:this.manifest.version,getDocItems:t=>this.databaseAPI.getItems(t),getItemIDsFromCitekey:(...t)=>this.databaseAPI.getItemIDsFromCitekey(...t),getAnnotsFromKeys:(...t)=>this.databaseAPI.getAnnotFromKey(...t),getAnnotsOfAtch:(...t)=>this.databaseAPI.getAnnotations(...t),getAttachments:(...t)=>this.databaseAPI.getAttachments(...t),getLibs:()=>this.databaseAPI.getLibs()},this.register(()=>{delete globalThis.zoteroAPI})}onunload(){ne.info("unloading Obsidian Zotero Plugin")}};0&&(module.exports={});
/*! Bundled license information:

flatted/cjs/index.js:
  (*! (c) 2020 Andrea Giammarchi *)

@aidenlx/workerpool/dist/workerpool.js:
  (**
   * workerpool.js
   * https://github.com/josdejong/workerpool
   *
   * Offload tasks to a pool of workers on node.js and in the browser.
   *
   * @version 6.2.1-mod.13
   * @date    2022-10-04
   *
   * @license
   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
   *
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not
   * use this file except in compliance with the License. You may obtain a copy
   * of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
   * License for the specific language governing permissions and limitations under
   * the License.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@mui/base/index.js:
  (**
   * @mui/base v5.0.0-alpha.122
   *
   * @license MIT
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
